var $jscomp={scope:{},findInternal:function(m,a,f){m instanceof String&&(m=String(m));for(var e=m.length,h=0;h<e;h++){var n=m[h];if(a.call(f,n,h,m))return{i:h,v:n}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(m,a,f){if(f.get||f.set)throw new TypeError("ES3 does not support getters and setters.");m!=Array.prototype&&m!=Object.prototype&&(m[a]=f.value)};
$jscomp.getGlobal=function(m){return"undefined"!=typeof window&&window===m?m:"undefined"!=typeof global&&null!=global?global:m};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(m,a,f,e){if(a){f=$jscomp.global;m=m.split(".");for(e=0;e<m.length-1;e++){var h=m[e];h in f||(f[h]={});f=f[h]}m=m[m.length-1];e=f[m];a=a(e);a!=e&&null!=a&&$jscomp.defineProperty(f,m,{configurable:!0,writable:!0,value:a})}};
$jscomp.polyfill("Array.prototype.find",function(m){return m?m:function(a,m){return $jscomp.findInternal(this,a,m).v}},"es6-impl","es3");$jscomp.checkStringArgs=function(m,a,f){if(null==m)throw new TypeError("The 'this' value for String.prototype."+f+" must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+f+" must not be a regular expression");return m+""};
$jscomp.polyfill("String.prototype.includes",function(m){return m?m:function(a,m){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,m||0)}},"es6-impl","es3");$jscomp.polyfill("String.prototype.startsWith",function(m){return m?m:function(a,m){var f=$jscomp.checkStringArgs(this,a,"startsWith");a+="";for(var h=f.length,n=a.length,g=Math.max(0,Math.min(m|0,f.length)),d=0;d<n&&g<h;)if(f[g++]!=a[d++])return!1;return d>=n}},"es6-impl","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(m){return $jscomp.SYMBOL_PREFIX+(m||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var m=$jscomp.global.Symbol.iterator;m||(m=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[m]&&$jscomp.defineProperty(Array.prototype,m,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(m){var a=0;return $jscomp.iteratorPrototype(function(){return a<m.length?{done:!1,value:m[a++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(m){$jscomp.initSymbolIterator();m={next:m};m[$jscomp.global.Symbol.iterator]=function(){return this};return m};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(m,a){$jscomp.initSymbolIterator();m instanceof String&&(m+="");var f=0,e={next:function(){if(f<m.length){var h=f++;return{value:a(h,m[h]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e};
$jscomp.polyfill("Array.prototype.keys",function(m){return m?m:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");$jscomp.polyfill("Object.getOwnPropertySymbols",function(m){return m?m:function(){return[]}},"es6-impl","es5");$jscomp.owns=function(m,a){return Object.prototype.hasOwnProperty.call(m,a)};
$jscomp.polyfill("Object.assign",function(m){return m?m:function(a,m){for(var f=1;f<arguments.length;f++){var h=arguments[f];if(h)for(var n in h)$jscomp.owns(h,n)&&(a[n]=h[n])}return a}},"es6-impl","es3");$jscomp.polyfill("Object.setPrototypeOf",function(m){return m?m:"object"!=typeof"".__proto__?null:function(a,m){a.__proto__=m;if(a.__proto__!==m)throw new TypeError(a+" is not extensible");return a}},"es6","es5");
$jscomp.polyfill("Array.prototype.fill",function(m){return m?m:function(a,m,e){var f=this.length||0;0>m&&(m=Math.max(0,f+m));if(null==e||e>f)e=f;e=Number(e);0>e&&(e=Math.max(0,f+e));for(m=Number(m||0);m<e;m++)this[m]=a;return this}},"es6-impl","es3");$jscomp.polyfill("Math.sign",function(m){return m?m:function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1}},"es6-impl","es3");$jscomp.makeIterator=function(m){$jscomp.initSymbolIterator();var a=m[Symbol.iterator];return a?a.call(m):$jscomp.arrayIterator(m)};
$jscomp.polyfill("WeakMap",function(m){function a(a){$jscomp.owns(a,e)||$jscomp.defineProperty(a,e,{value:{}})}function f(g){var d=Object[g];d&&(Object[g]=function(c){a(c);return d(c)})}if(function(){if(!m||!Object.seal)return!1;try{var a=Object.seal({}),d=Object.seal({}),c=new m([[a,2],[d,3]]);if(2!=c.get(a)||3!=c.get(d))return!1;c["delete"](a);c.set(d,4);return!c.has(a)&&4==c.get(d)}catch(b){return!1}}())return m;var e="$jscomp_hidden_"+Math.random().toString().substring(2);f("freeze");f("preventExtensions");
f("seal");var h=0,n=function(a){this.id_=(h+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var d;!(d=a.next()).done;)d=d.value,this.set(d[0],d[1])}};n.prototype.set=function(g,d){a(g);if(!$jscomp.owns(g,e))throw Error("WeakMap key fail: "+g);g[e][this.id_]=d;return this};n.prototype.get=function(a){return $jscomp.owns(a,e)?a[e][this.id_]:void 0};n.prototype.has=function(a){return $jscomp.owns(a,e)&&$jscomp.owns(a[e],this.id_)};n.prototype["delete"]=
function(a){return $jscomp.owns(a,e)&&$jscomp.owns(a[e],this.id_)?delete a[e][this.id_]:!1};return n},"es6-impl","es3");$jscomp.ASSUME_NO_NATIVE_MAP=!1;
$jscomp.polyfill("Map",function(m){if(!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!m||!m.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),c=new m($jscomp.makeIterator([[a,"s"]]));if("s"!=c.get(a)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var b=c.entries(),k=b.next();if(k.done||k.value[0]!=a||"s"!=k.value[1])return!1;k=b.next();return k.done||4!=k.value[0].x||"t"!=k.value[1]||!b.next().done?!1:!0}catch(p){return!1}}())return m;$jscomp.initSymbol();
$jscomp.initSymbolIterator();var a=new WeakMap,f=function(a){this.data_={};this.head_=n();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};f.prototype.set=function(a,c){var b=e(this,a);b.list||(b.list=this.data_[b.id]=[]);b.entry?b.entry.value=c:(b.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:c},b.list.push(b.entry),this.head_.previous.next=b.entry,this.head_.previous=b.entry,this.size++);return this};f.prototype["delete"]=
function(a){a=e(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};f.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=n();this.size=0};f.prototype.has=function(a){return!!e(this,a).entry};f.prototype.get=function(a){return(a=e(this,a).entry)&&a.value};f.prototype.entries=function(){return h(this,function(a){return[a.key,
a.value]})};f.prototype.keys=function(){return h(this,function(a){return a.key})};f.prototype.values=function(){return h(this,function(a){return a.value})};f.prototype.forEach=function(a,c){for(var b=this.entries(),d;!(d=b.next()).done;)d=d.value,a.call(c,d[1],d[0],this)};f.prototype[Symbol.iterator]=f.prototype.entries;var e=function(d,c){var b;b=c&&typeof c;"object"==b||"function"==b?a.has(c)?b=a.get(c):(b=""+ ++g,a.set(c,b)):b="p_"+c;var k=d.data_[b];if(k&&$jscomp.owns(d.data_,b))for(var p=0;p<
k.length;p++){var r=k[p];if(c!==c&&r.key!==r.key||c===r.key)return{id:b,list:k,index:p,entry:r}}return{id:b,list:k,index:-1,entry:void 0}},h=function(a,c){var b=a.head_;return $jscomp.iteratorPrototype(function(){if(b){for(;b.head!=a.head_;)b=b.previous;for(;b.next!=b.head;)return b=b.next,{done:!1,value:c(b)};b=null}return{done:!0,value:void 0}})},n=function(){var a={};return a.previous=a.next=a.head=a},g=0;return f},"es6-impl","es3");$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.polyfill("Set",function(m){if(!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!m||!m.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),e=new m($jscomp.makeIterator([a]));if(!e.has(a)||1!=e.size||e.add(a)!=e||1!=e.size||e.add({x:4})!=e||2!=e.size)return!1;var h=e.entries(),n=h.next();if(n.done||n.value[0]!=a||n.value[1]!=a)return!1;n=h.next();return n.done||n.value[0]==a||4!=n.value[0].x||n.value[1]!=n.value[0]?!1:h.next().done}catch(g){return!1}}())return m;
$jscomp.initSymbol();$jscomp.initSymbolIterator();var a=function(a){this.map_=new Map;if(a){a=$jscomp.makeIterator(a);for(var m;!(m=a.next()).done;)this.add(m.value)}this.size=this.map_.size};a.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};a.prototype["delete"]=function(a){a=this.map_["delete"](a);this.size=this.map_.size;return a};a.prototype.clear=function(){this.map_.clear();this.size=0};a.prototype.has=function(a){return this.map_.has(a)};a.prototype.entries=
function(){return this.map_.entries()};a.prototype.values=function(){return this.map_.values()};a.prototype[Symbol.iterator]=a.prototype.values;a.prototype.forEach=function(a,m){var f=this;this.map_.forEach(function(n){return a.call(m,n,n,f)})};return a},"es6-impl","es3");
(function(m){var a=function(a,m){this.init("simplecolorpicker",a,m)};a.prototype={constructor:a,init:function(a,e,h){var n=this;n.type=a;n.$select=m(e);n.$select.hide();n.options=m.extend({},m.fn.simplecolorpicker.defaults,h);n.$colorList=null;!0===n.options.picker?(a=n.$select.find("> option:selected").text(),n.$icon=m('<span class="simplecolorpicker icon" title="'+a+'" style="background-color: '+n.$select.val()+';" role="button" tabindex="0"></span>').insertAfter(n.$select),n.$icon.on("click."+
n.type,m.proxy(n.showPicker,n)),n.$picker=m('<span class="simplecolorpicker picker '+n.options.theme+'"></span>').appendTo(document.body),n.$colorList=n.$picker,m(document).on("mousedown."+n.type,m.proxy(n.hidePicker,n)),n.$picker.on("mousedown."+n.type,m.proxy(n.mousedown,n))):(n.$inline=m('<span class="simplecolorpicker inline '+n.options.theme+'"></span>').insertAfter(n.$select),n.$colorList=n.$inline);n.$select.find("> option").each(function(){var a=m(this),d=a.val(),c=a.is(":selected"),b=a.is(":disabled"),
k="";!0===c&&(k=" data-selected");c="";!0===b&&(c=" data-disabled");var p="";!1===b&&(p=' title="'+a.text()+'"');var r="";!1===b&&(r=' role="button" tabindex="0"');d=m('<span class="color"'+p+' style="background-color: '+d+';" data-color="'+d+'"'+k+c+r+"></span>");n.$colorList.append(d);d.on("click."+n.type,m.proxy(n.colorSpanClicked,n));!0===a.next().is("optgroup")&&n.$colorList.append('<span class="vr"></span>')})},selectColor:function(a){var f=this.$colorList.find("> span.color").filter(function(){return m(this).data("color").toLowerCase()===
a.toLowerCase()});0<f.length?this.selectColorSpan(f):console.error("The given color '"+a+"' could not be found")},showPicker:function(){var a=this.$icon.offset();this.$picker.css({left:a.left-6,top:a.top+this.$icon.outerHeight()});this.$picker.show(this.options.pickerDelay)},hidePicker:function(){this.$picker.hide(this.options.pickerDelay)},selectColorSpan:function(a){var m=a.data("color"),f=a.prop("title");a.siblings().removeAttr("data-selected");a.attr("data-selected","");!0===this.options.picker&&
(this.$icon.css("background-color",m),this.$icon.prop("title",f),this.hidePicker());this.$select.val(m)},colorSpanClicked:function(a){!1===m(a.target).is("[data-disabled]")&&(this.selectColorSpan(m(a.target)),this.$select.trigger("change"))},mousedown:function(a){a.stopPropagation();a.preventDefault()},destroy:function(){!0===this.options.picker&&(this.$icon.off("."+this.type),this.$icon.remove(),m(document).off("."+this.type));this.$colorList.off("."+this.type);this.$colorList.remove();this.$select.removeData(this.type);
this.$select.show()}};m.fn.simplecolorpicker=function(f){var e=m.makeArray(arguments);e.shift();return this.each(function(){var h=m(this),n=h.data("simplecolorpicker"),g="object"===typeof f&&f;void 0===n&&h.data("simplecolorpicker",n=new a(this,g));"string"===typeof f&&n[f].apply(n,e)})};m.fn.simplecolorpicker.defaults={theme:"",picker:!1,pickerDelay:0}})(jQuery);/*
 Bootstrap-select v1.10.0 (http://silviomoreto.github.io/bootstrap-select)

 Copyright 2013-2016 bootstrap-select
 Licensed under MIT (https://github.com/silviomoreto/bootstrap-select/blob/master/LICENSE)
*/
(function(m,a){"function"===typeof define&&define.amd?define(["jquery"],function(m){return a(m)}):"object"===typeof exports?module.exports=a(require("jquery")):a(jQuery)})(this,function(m){(function(a){function m(d){a.each([{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,
ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}],function(){d=d.replace(this.re,this.ch)});return d}function e(a){var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},b="(?:"+Object.keys(c).join("|")+")",d=new RegExp(b,"g");a=null==a?"":""+a;return(new RegExp(b)).test(a)?a.replace(d,function(a){return c[a]}):a}function h(d,c){var b=arguments,k=d,g=c;[].shift.apply(b);var r,q=this.each(function(){var c=a(this);if(c.is("select")){var d=c.data("selectpicker"),p="object"==
typeof k&&k;if(!d)d=a.extend({},n.DEFAULTS,a.fn.selectpicker.defaults||{},c.data(),p),d.template=a.extend({},n.DEFAULTS.template,a.fn.selectpicker.defaults?a.fn.selectpicker.defaults.template:{},c.data().template,p.template),c.data("selectpicker",d=new n(this,d,g));else if(p)for(var q in p)p.hasOwnProperty(q)&&(d.options[q]=p[q]);"string"==typeof k&&(r=d[k]instanceof Function?d[k].apply(d,b):d.options[k])}});return"undefined"!==typeof r?r:q}String.prototype.includes||function(){var a={}.toString,
c=function(){try{var a={},b=Object.defineProperty,c=b(a,a,a)&&b}catch(t){}return c}(),b="".indexOf,k=function(c){if(null==this)throw new TypeError;var d=String(this);if(c&&"[object RegExp]"==a.call(c))throw new TypeError;var k=d.length,g=String(c),p=g.length,m=1<arguments.length?arguments[1]:void 0,m=m?Number(m):0;m!=m&&(m=0);return p+Math.min(Math.max(m,0),k)>k?!1:-1!=b.call(d,g,m)};c?c(String.prototype,"includes",{value:k,configurable:!0,writable:!0}):String.prototype.includes=k}();String.prototype.startsWith||
function(){var a=function(){try{var a={},b=Object.defineProperty,c=b(a,a,a)&&b}catch(q){}return c}(),c={}.toString,b=function(a){if(null==this)throw new TypeError;var b=String(this);if(a&&"[object RegExp]"==c.call(a))throw new TypeError;var d=b.length,k=String(a),g=k.length,m=1<arguments.length?arguments[1]:void 0,m=m?Number(m):0;m!=m&&(m=0);m=Math.min(Math.max(m,0),d);if(g+m>d)return!1;for(d=-1;++d<g;)if(b.charCodeAt(m+d)!=k.charCodeAt(d))return!1;return!0};a?a(String.prototype,"startsWith",{value:b,
configurable:!0,writable:!0}):String.prototype.startsWith=b}();Object.keys||(Object.keys=function(a,c,b){b=[];for(c in a)b.hasOwnProperty.call(a,c)&&b.push(c);return b});a.fn.triggerNative=function(a){var c=this[0],b;c.dispatchEvent?("function"===typeof Event?b=new Event(a,{bubbles:!0}):(b=document.createEvent("Event"),b.initEvent(a,!0,!1)),c.dispatchEvent(b)):(c.fireEvent&&(b=document.createEventObject(),b.eventType=a,c.fireEvent("on"+a,b)),this.trigger(a))};a.expr[":"].icontains=function(d,c,b){d=
a(d);return(d.data("tokens")||d.text()).toUpperCase().includes(b[3].toUpperCase())};a.expr[":"].ibegins=function(d,c,b){d=a(d);return(d.data("tokens")||d.text()).toUpperCase().startsWith(b[3].toUpperCase())};a.expr[":"].aicontains=function(d,c,b){d=a(d);return(d.data("tokens")||d.data("normalizedText")||d.text()).toUpperCase().includes(b[3].toUpperCase())};a.expr[":"].aibegins=function(d,c,b){d=a(d);return(d.data("tokens")||d.data("normalizedText")||d.text()).toUpperCase().startsWith(b[3].toUpperCase())};
var n=function(d,c,b){b&&(b.stopPropagation(),b.preventDefault());this.$element=a(d);this.$lis=this.$menu=this.$button=this.$newElement=null;this.options=c;null===this.options.title&&(this.options.title=this.$element.attr("title"));this.val=n.prototype.val;this.render=n.prototype.render;this.refresh=n.prototype.refresh;this.setStyle=n.prototype.setStyle;this.selectAll=n.prototype.selectAll;this.deselectAll=n.prototype.deselectAll;this.destroy=n.prototype.destroy;this.remove=n.prototype.remove;this.show=
n.prototype.show;this.hide=n.prototype.hide;this.init()};n.VERSION="1.10.0";n.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(a,c){return 1==a?"{0} item selected":"{0} items selected"},maxOptionsText:function(a,c){return[1==a?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==c?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,
doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",showTick:!1,template:{caret:'<span class="caret"></span>'},maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1};
n.prototype={constructor:n,init:function(){var d=this,c=this.$element.attr("id");this.$element.addClass("bs-select-hidden");this.liObj={};this.multiple=this.$element.prop("multiple");this.autofocus=this.$element.prop("autofocus");this.$newElement=this.createView();this.$element.after(this.$newElement).appendTo(this.$newElement);this.$button=this.$newElement.children("button");this.$menu=this.$newElement.children(".dropdown-menu");this.$menuInner=this.$menu.children(".inner");this.$searchbox=this.$menu.find("input");
this.$element.removeClass("bs-select-hidden");this.options.dropdownAlignRight&&this.$menu.addClass("dropdown-menu-right");"undefined"!==typeof c&&(this.$button.attr("data-id",c),a('label[for="'+c+'"]').click(function(a){a.preventDefault();d.$button.focus()}));this.checkDisabled();this.clickListener();this.options.liveSearch&&this.liveSearchListener();this.render();this.setStyle();this.setWidth();this.options.container&&this.selectPosition();this.$menu.data("this",this);this.$newElement.data("this",
this);this.options.mobile&&this.mobile();this.$newElement.on({"hide.bs.dropdown":function(a){d.$element.trigger("hide.bs.select",a)},"hidden.bs.dropdown":function(a){d.$element.trigger("hidden.bs.select",a)},"show.bs.dropdown":function(a){d.$element.trigger("show.bs.select",a)},"shown.bs.dropdown":function(a){d.$element.trigger("shown.bs.select",a)}});if(d.$element[0].hasAttribute("required"))this.$element.on("invalid",function(){d.$button.addClass("bs-invalid").focus();d.$element.on({"focus.bs.select":function(){d.$button.focus();
d.$element.off("focus.bs.select")},"shown.bs.select":function(){d.$element.val(d.$element.val()).off("shown.bs.select")},"rendered.bs.select":function(){this.validity.valid&&d.$button.removeClass("bs-invalid");d.$element.off("rendered.bs.select")}})});setTimeout(function(){d.$element.trigger("loaded.bs.select")})},createDropdown:function(){var d=this.multiple||this.options.showTick?" show-tick":"",c=this.$element.parent().hasClass("input-group")?" input-group-btn":"",b=this.autofocus?" autofocus":
"",k=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",g=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+e(this.options.liveSearchPlaceholder)+'"')+"></div>":"";return a('<div class="btn-group bootstrap-select'+d+c+'"><button type="button" class="'+this.options.styleBase+
' dropdown-toggle" data-toggle="dropdown"'+b+'><span class="filter-option pull-left"></span>&nbsp;<span class="bs-caret">'+this.options.template.caret+'</span></button><div class="dropdown-menu open">'+k+g+(this.multiple&&this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn btn-default">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn btn-default">'+
this.options.deselectAllText+"</button></div></div>":"")+'<ul class="dropdown-menu inner" role="menu"></ul>'+(this.multiple&&this.options.doneButton?'<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm btn-default">'+this.options.doneButtonText+"</button></div></div>":"")+"</div></div>")},createView:function(){var a=this.createDropdown(),c=this.createLi();a.find("ul")[0].innerHTML=c;return a},reloadLi:function(){this.destroyLi();var a=this.createLi();
this.$menuInner[0].innerHTML=a},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var d=this,c=[],b=0,k=document.createElement("option"),g=-1,r=function(a,b,c,d){return"<li"+("undefined"!==typeof c&""!==c?' class="'+c+'"':"")+("undefined"!==typeof b&null!==b?' data-original-index="'+b+'"':"")+("undefined"!==typeof d&null!==d?'data-optgroup="'+d+'"':"")+">"+a+"</li>"},q=function(a,b,c,k){return'<a tabindex="0"'+("undefined"!==typeof b?' class="'+b+'"':"")+("undefined"!==typeof c?
' style="'+c+'"':"")+(d.options.liveSearchNormalize?' data-normalized-text="'+m(e(a))+'"':"")+("undefined"!==typeof k||null!==k?' data-tokens="'+k+'"':"")+">"+a+'<span class="'+d.options.iconBase+" "+d.options.tickIcon+' check-mark"></span></a>'};if(this.options.title&&!this.multiple&&(g--,!this.$element.find(".bs-title-option").length)){var t=this.$element[0];k.className="bs-title-option";k.appendChild(document.createTextNode(this.options.title));k.value="";t.insertBefore(k,t.firstChild);void 0===
a(t.options[t.selectedIndex]).attr("selected")&&(k.selected=!0)}this.$element.find("option").each(function(k){var p=a(this);g++;if(!p.hasClass("bs-title-option")){var t=this.className||"",m=this.style.cssText,n=p.data("content")?p.data("content"):p.html(),f=p.data("tokens")?p.data("tokens"):null,e="undefined"!==typeof p.data("subtext")?'<small class="text-muted">'+p.data("subtext")+"</small>":"",h="undefined"!==typeof p.data("icon")?'<span class="'+d.options.iconBase+" "+p.data("icon")+'"></span> ':
"",w="OPTGROUP"===this.parentNode.tagName,F=this.disabled||w&&this.parentNode.disabled;""!==h&&F&&(h="<span>"+h+"</span>");if(d.options.hideDisabled&&F&&!w)g--;else{p.data("content")||(n=h+'<span class="text">'+n+e+"</span>");if(w&&!0!==p.data("divider")){e=" "+this.parentNode.className||"";0===p.index()&&(b+=1,h=this.parentNode.label,w="undefined"!==typeof p.parent().data("subtext")?'<small class="text-muted">'+p.parent().data("subtext")+"</small>":"",h=(p.parent().data("icon")?'<span class="'+d.options.iconBase+
" "+p.parent().data("icon")+'"></span> ':"")+'<span class="text">'+h+w+"</span>",0!==k&&0<c.length&&(g++,c.push(r("",null,"divider",b+"div"))),g++,c.push(r(h,null,"dropdown-header"+e,b)));if(d.options.hideDisabled&&F){g--;return}c.push(r(q(n,"opt "+t+e,m,f),k,"",b))}else!0===p.data("divider")?c.push(r("",k,"divider")):!0===p.data("hidden")?c.push(r(q(n,t,m,f),k,"hidden is-hidden")):(this.previousElementSibling&&"OPTGROUP"===this.previousElementSibling.tagName&&(g++,c.push(r("",null,"divider",b+"div"))),
c.push(r(q(n,t,m,f),k)));d.liObj[k]=g}}});this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected");return c.join("")},findLis:function(){null==this.$lis&&(this.$lis=this.$menu.find("li"));return this.$lis},render:function(d){var c=this,b;!1!==d&&this.$element.find("option").each(function(a){var b=c.findLis().eq(c.liObj[a]);c.setDisabled(a,this.disabled||"OPTGROUP"===this.parentNode.tagName&&
this.parentNode.disabled,b);c.setSelected(a,this.selected,b)});this.tabIndex();d=this.$element.find("option").map(function(){if(this.selected&&(!c.options.hideDisabled||!(this.disabled||"OPTGROUP"===this.parentNode.tagName&&this.parentNode.disabled))){var b=a(this),d=b.data("icon")&&c.options.showIcon?'<i class="'+c.options.iconBase+" "+b.data("icon")+'"></i> ':"",k;k=c.options.showSubtext&&b.data("subtext")&&!c.multiple?' <small class="text-muted">'+b.data("subtext")+"</small>":"";return"undefined"!==
typeof b.attr("title")?b.attr("title"):b.data("content")&&c.options.showContent?b.data("content"):d+b.html()+k}}).toArray();b=this.multiple?d.join(this.options.multipleSeparator):d[0];if(this.multiple&&-1<this.options.selectedTextFormat.indexOf("count")){var k=this.options.selectedTextFormat.split(">");if(1<k.length&&d.length>k[1]||1==k.length&&2<=d.length)b=this.options.hideDisabled?", [disabled]":"",b=this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]'+b).length,b=("function"===
typeof this.options.countSelectedText?this.options.countSelectedText(d.length,b):this.options.countSelectedText).replace("{0}",d.length.toString()).replace("{1}",b.toString())}void 0==this.options.title&&(this.options.title=this.$element.attr("title"));"static"==this.options.selectedTextFormat&&(b=this.options.title);b||(b="undefined"!==typeof this.options.title?this.options.title:this.options.noneSelectedText);this.$button.attr("title",a.trim(b.replace(/<[^>]*>?/g,"")));this.$button.children(".filter-option").html(b);
this.$element.trigger("rendered.bs.select")},setStyle:function(a,c){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,""));var b=a?a:this.options.style;"add"==c?this.$button.addClass(b):"remove"==c?this.$button.removeClass(b):(this.$button.removeClass(this.options.style),this.$button.addClass(b))},liHeight:function(d){if(d||!1!==this.options.size&&!this.sizeInfo){d=document.createElement("div");
var c=document.createElement("div"),b=document.createElement("ul"),k=document.createElement("li"),g=document.createElement("li"),m=document.createElement("a"),q=document.createElement("span"),t=this.options.header&&0<this.$menu.find(".popover-title").length?this.$menu.find(".popover-title")[0].cloneNode(!0):null,n=this.options.liveSearch?document.createElement("div"):null,f=this.options.actionsBox&&this.multiple&&0<this.$menu.find(".bs-actionsbox").length?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):
null,e=this.options.doneButton&&this.multiple&&0<this.$menu.find(".bs-donebutton").length?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null;q.className="text";d.className=this.$menu[0].parentNode.className+" open";c.className="dropdown-menu open";b.className="dropdown-menu inner";k.className="divider";q.appendChild(document.createTextNode("Inner text"));m.appendChild(q);g.appendChild(m);b.appendChild(g);b.appendChild(k);t&&c.appendChild(t);n&&(g=document.createElement("span"),n.className="bs-searchbox",
g.className="form-control",n.appendChild(g),c.appendChild(n));f&&c.appendChild(f);c.appendChild(b);e&&c.appendChild(e);d.appendChild(c);document.body.appendChild(d);b=m.offsetHeight;t=t?t.offsetHeight:0;n=n?n.offsetHeight:0;f=f?f.offsetHeight:0;e=e?e.offsetHeight:0;k=a(k).outerHeight(!0);g=(m="function"===typeof getComputedStyle?getComputedStyle(c):!1)?null:a(c);c=parseInt(m?m.paddingTop:g.css("paddingTop"))+parseInt(m?m.paddingBottom:g.css("paddingBottom"))+parseInt(m?m.borderTopWidth:g.css("borderTopWidth"))+
parseInt(m?m.borderBottomWidth:g.css("borderBottomWidth"));m=c+parseInt(m?m.marginTop:g.css("marginTop"))+parseInt(m?m.marginBottom:g.css("marginBottom"))+2;document.body.removeChild(d);this.sizeInfo={liHeight:b,headerHeight:t,searchHeight:n,actionsHeight:f,doneButtonHeight:e,dividerHeight:k,menuPadding:c,menuExtras:m}}},setSize:function(){this.findLis();this.liHeight();this.options.header&&this.$menu.css("padding-top",0);if(!1!==this.options.size){var d=this,c=this.$menu,b=this.$menuInner,k=a(window),
g=this.$newElement[0].offsetHeight,m=this.sizeInfo.liHeight,q=this.sizeInfo.headerHeight,t=this.sizeInfo.searchHeight,n=this.sizeInfo.actionsHeight,f=this.sizeInfo.doneButtonHeight,e=this.sizeInfo.dividerHeight,h=this.sizeInfo.menuPadding,y=this.sizeInfo.menuExtras,z=this.options.hideDisabled?".disabled":"",A,B,E,F,G=function(){E=d.$newElement.offset().top-k.scrollTop();F=k.height()-E-g};G();"auto"===this.options.size?(e=function(){var k;k=function(b,c){return function(d){return c?d.classList?d.classList.contains(b):
a(d).hasClass(b):!(d.classList?d.classList.contains(b):a(d).hasClass(b))}};var g=d.$menuInner[0].getElementsByTagName("li"),g=Array.prototype.filter?Array.prototype.filter.call(g,k("hidden",!1)):d.$lis.not(".hidden");k=Array.prototype.filter?Array.prototype.filter.call(g,k("dropdown-header",!0)):g.filter(".dropdown-header");G();A=F-y;d.options.container?(c.data("height")||c.data("height",c.height()),B=c.data("height")):B=c.height();d.options.dropupAuto&&d.$newElement.toggleClass("dropup",E>F&&A-y<
B);d.$newElement.hasClass("dropup")&&(A=E-y);k=3<g.length+k.length?3*m+y-2:0;c.css({"max-height":A+"px",overflow:"hidden","min-height":k+q+t+n+f+"px"});b.css({"max-height":A-q-t-n-f-h+"px","overflow-y":"auto","min-height":Math.max(k-h,0)+"px"})},e(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",e),k.off("resize.getSize scroll.getSize").on("resize.getSize scroll.getSize",e)):this.options.size&&"auto"!=this.options.size&&this.$lis.not(z).length>
this.options.size&&(z=this.$lis.not(".divider").not(z).children().slice(0,this.options.size).last().parent().index(),z=this.$lis.slice(0,z+1).filter(".divider").length,A=m*this.options.size+z*e+h,d.options.container?(c.data("height")||c.data("height",c.height()),B=c.data("height")):B=c.height(),d.options.dropupAuto&&this.$newElement.toggleClass("dropup",E>F&&A-y<B),c.css({"max-height":A+q+t+n+f+"px",overflow:"hidden","min-height":""}),b.css({"max-height":A-h+"px","overflow-y":"auto","min-height":""}))}},
setWidth:function(){if("auto"===this.options.width){this.$menu.css("min-width","0");var a=this.$menu.parent().clone().appendTo("body"),c=this.options.container?this.$newElement.clone().appendTo("body"):a,b=a.children(".dropdown-menu").outerWidth(),k=c.css("width","auto").children("button").outerWidth();a.remove();c.remove();this.$newElement.css("width",Math.max(b,k)+"px")}else"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?
(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){this.$bsContainer=a('<div class="bs-container" />');var d=this,c,b,k=function(a){d.$bsContainer.addClass(a.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass("dropup",a.hasClass("dropup"));c=a.offset();
b=a.hasClass("dropup")?0:a[0].offsetHeight;d.$bsContainer.css({top:c.top+b,left:c.left,width:a[0].offsetWidth})};this.$button.on("click",function(){var b=a(this);d.isDisabled()||(k(d.$newElement),d.$bsContainer.appendTo(d.options.container).toggleClass("open",!b.hasClass("open")).append(d.$menu))});a(window).on("resize scroll",function(){k(d.$newElement)});this.$element.on("hide.bs.select",function(){d.$menu.data("height",d.$menu.height());d.$bsContainer.detach()})},setSelected:function(a,c,b){b||
(b=this.findLis().eq(this.liObj[a]));b.toggleClass("selected",c)},setDisabled:function(a,c,b){b||(b=this.findLis().eq(this.liObj[a]));c?b.addClass("disabled").children("a").attr("href","#").attr("tabindex",-1):b.removeClass("disabled").children("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){var a=this;this.isDisabled()?(this.$newElement.addClass("disabled"),this.$button.addClass("disabled").attr("tabindex",-1)):(this.$button.hasClass("disabled")&&
(this.$newElement.removeClass("disabled"),this.$button.removeClass("disabled")),-1!=this.$button.attr("tabindex")||this.$element.data("tabindex")||this.$button.removeAttr("tabindex"));this.$button.click(function(){return!a.isDisabled()})},tabIndex:function(){this.$element.data("tabindex")!==this.$element.attr("tabindex")&&-98!==this.$element.attr("tabindex")&&"-98"!==this.$element.attr("tabindex")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex")));
this.$element.attr("tabindex",-98)},clickListener:function(){var d=this,c=a(document);this.$newElement.on("touchstart.dropdown",".dropdown-menu",function(a){a.stopPropagation()});c.data("spaceSelect",!1);this.$button.on("keyup",function(a){/(32)/.test(a.keyCode.toString(10))&&c.data("spaceSelect")&&(a.preventDefault(),c.data("spaceSelect",!1))});this.$button.on("click",function(){d.setSize()});this.$element.on("shown.bs.select",function(){if(!d.options.liveSearch&&!d.multiple)d.$menuInner.find(".selected a").focus();
else if(!d.multiple){var a=d.liObj[d.$element[0].selectedIndex];"number"===typeof a&&!1!==d.options.size&&(a=d.$lis.eq(a)[0].offsetTop-d.$menuInner[0].offsetTop,a=a-d.$menuInner[0].offsetHeight/2+d.sizeInfo.liHeight/2,d.$menuInner[0].scrollTop=a)}});this.$menuInner.on("click","li a",function(b){var c=a(this),g=c.parent().data("originalIndex"),m=d.$element.val(),q=d.$element.prop("selectedIndex");d.multiple&&b.stopPropagation();b.preventDefault();if(!d.isDisabled()&&!c.parent().hasClass("disabled")){var t=
d.$element.find("option");b=t.eq(g);var n=b.prop("selected"),f=b.parent("optgroup"),e=d.options.maxOptions,h=f.data("maxOptions")||!1;if(d.multiple){if(b.prop("selected",!n),d.setSelected(g,!n),c.blur(),!1!==e||!1!==h){var y=e<t.filter(":selected").length,z=h<f.find("option:selected").length;if(e&&y||h&&z)if(e&&1==e)t.prop("selected",!1),b.prop("selected",!0),d.$menuInner.find(".selected").removeClass("selected"),d.setSelected(g,!0);else if(h&&1==h)f.find("option:selected").prop("selected",!1),b.prop("selected",
!0),e=c.parent().data("optgroup"),d.$menuInner.find('[data-optgroup="'+e+'"]').removeClass("selected"),d.setSelected(g,!0);else{var c="function"===typeof d.options.maxOptionsText?d.options.maxOptionsText(e,h):d.options.maxOptionsText,t=c[0].replace("{n}",e),f=c[1].replace("{n}",h),A=a('<div class="notify"></div>');c[2]&&(t=t.replace("{var}",c[2][1<e?0:1]),f=f.replace("{var}",c[2][1<h?0:1]));b.prop("selected",!1);d.$menu.append(A);e&&y&&(A.append(a("<div>"+t+"</div>")),d.$element.trigger("maxReached.bs.select"));
h&&z&&(A.append(a("<div>"+f+"</div>")),d.$element.trigger("maxReachedGrp.bs.select"));setTimeout(function(){d.setSelected(g,!1)},10);A.delay(750).fadeOut(300,function(){a(this).remove()})}}}else t.prop("selected",!1),b.prop("selected",!0),d.$menuInner.find(".selected").removeClass("selected"),d.setSelected(g,!0);d.multiple?d.options.liveSearch&&d.$searchbox.focus():d.$button.focus();(m!=d.$element.val()&&d.multiple||q!=d.$element.prop("selectedIndex")&&!d.multiple)&&d.$element.trigger("changed.bs.select",
[g,b.prop("selected"),n]).triggerNative("change")}});this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",function(b){b.currentTarget==this&&(b.preventDefault(),b.stopPropagation(),d.options.liveSearch&&!a(b.target).hasClass("close")?d.$searchbox.focus():d.$button.focus())});this.$menuInner.on("click",".divider, .dropdown-header",function(a){a.preventDefault();a.stopPropagation();d.options.liveSearch?d.$searchbox.focus():d.$button.focus()});this.$menu.on("click",".popover-title .close",
function(){d.$button.click()});this.$searchbox.on("click",function(a){a.stopPropagation()});this.$menu.on("click",".actions-btn",function(b){d.options.liveSearch?d.$searchbox.focus():d.$button.focus();b.preventDefault();b.stopPropagation();a(this).hasClass("bs-select-all")?d.selectAll():d.deselectAll()});this.$element.change(function(){d.render(!1)})},liveSearchListener:function(){var d=this,c=a('<li class="no-results"></li>');this.$button.on("click.dropdown.data-api touchstart.dropdown.data-api",
function(){d.$menuInner.find(".active").removeClass("active");d.$searchbox.val()&&(d.$searchbox.val(""),d.$lis.not(".is-hidden").removeClass("hidden"),c.parent().length&&c.remove());d.multiple||d.$menuInner.find(".selected").addClass("active");setTimeout(function(){d.$searchbox.focus()},10)});this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",function(a){a.stopPropagation()});this.$searchbox.on("input propertychange",function(){if(d.$searchbox.val()){var b=
d.$lis.not(".is-hidden").removeClass("hidden").children("a"),b=d.options.liveSearchNormalize?b.not(":a"+d._searchStyle()+'("'+m(d.$searchbox.val())+'")'):b.not(":"+d._searchStyle()+'("'+d.$searchbox.val()+'")');b.parent().addClass("hidden");d.$lis.filter(".dropdown-header").each(function(){var b=a(this),c=b.data("optgroup");0===d.$lis.filter("[data-optgroup="+c+"]").not(b).not(".hidden").length&&(b.addClass("hidden"),d.$lis.filter("[data-optgroup="+c+"div]").addClass("hidden"))});var k=d.$lis.not(".hidden");
k.each(function(b){var c=a(this);c.hasClass("divider")&&(c.index()===k.first().index()||c.index()===k.last().index()||k.eq(b+1).hasClass("divider"))&&c.addClass("hidden")});d.$lis.not(".hidden, .no-results").length?c.parent().length&&c.remove():(c.parent().length&&c.remove(),c.html(d.options.noneResultsText.replace("{0}",'"'+e(d.$searchbox.val())+'"')).show(),d.$menuInner.append(c))}else d.$lis.not(".is-hidden").removeClass("hidden"),c.parent().length&&c.remove();d.$lis.filter(".active").removeClass("active");
d.$searchbox.val()&&d.$lis.not(".hidden, .divider, .dropdown-header").eq(0).addClass("active").children("a").focus();a(this).focus()})},_searchStyle:function(){return{begins:"ibegins",startsWith:"ibegins"}[this.options.liveSearchStyle]||"icontains"},val:function(a){return"undefined"!==typeof a?(this.$element.val(a),this.render(),this.$element):this.$element.val()},changeAll:function(d){"undefined"===typeof d&&(d=!0);this.findLis();for(var c=this.$element.find("option"),b=this.$lis.not(".divider, .dropdown-header, .disabled, .hidden").toggleClass("selected",
d),k=b.length,g=[],m=0;m<k;m++){var q=b[m].getAttribute("data-original-index");g[g.length]=c.eq(q)[0]}a(g).prop("selected",d);this.render(!1);this.$element.trigger("changed.bs.select").triggerNative("change")},selectAll:function(){return this.changeAll(!0)},deselectAll:function(){return this.changeAll(!1)},toggle:function(a){(a=a||window.event)&&a.stopPropagation();this.$button.trigger("click")},keydown:function(d){var c=a(this),b=c.is("input")?c.parent().parent():c.parent(),k,g=b.data("this"),n,
q,t,e,f,h,u,y={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};g.options.liveSearch&&(b=c.parent().parent());g.options.container&&(b=g.$menu);k=a("[role=menu] li",b);u=g.$newElement.hasClass("open");!u&&(48<=
d.keyCode&&57>=d.keyCode||96<=d.keyCode&&105>=d.keyCode||65<=d.keyCode&&90>=d.keyCode)&&(g.options.container?g.$button.trigger("click"):(g.setSize(),g.$menu.parent().addClass("open"),u=!0),g.$searchbox.focus());g.options.liveSearch&&(/(^9$|27)/.test(d.keyCode.toString(10))&&u&&0===g.$menu.find(".active").length&&(d.preventDefault(),g.$menu.parent().removeClass("open"),g.options.container&&g.$newElement.removeClass("open"),g.$button.focus()),k=a("[role=menu] li:not(.disabled, .hidden, .dropdown-header, .divider)",
b),c.val()||/(38|40)/.test(d.keyCode.toString(10))||0!==k.filter(".active").length||(k=g.$menuInner.find("li"),k=g.options.liveSearchNormalize?k.filter(":a"+g._searchStyle()+"("+m(y[d.keyCode])+")"):k.filter(":"+g._searchStyle()+"("+y[d.keyCode]+")")));if(k.length){if(/(38|40)/.test(d.keyCode.toString(10)))b=k.index(k.find("a").filter(":focus").parent()),q=k.filter(":not(.disabled, .hidden, .dropdown-header, .divider)").first().index(),t=k.filter(":not(.disabled, .hidden, .dropdown-header, .divider)").last().index(),
n=k.eq(b).nextAll(":not(.disabled, .hidden, .dropdown-header, .divider)").eq(0).index(),e=k.eq(b).prevAll(":not(.disabled, .hidden, .dropdown-header, .divider)").eq(0).index(),f=k.eq(n).prevAll(":not(.disabled, .hidden, .dropdown-header, .divider)").eq(0).index(),g.options.liveSearch&&(k.each(function(b){a(this).hasClass("disabled")||a(this).data("index",b)}),b=k.index(k.filter(".active")),q=k.first().data("index"),t=k.last().data("index"),n=k.eq(b).nextAll().eq(0).data("index"),e=k.eq(b).prevAll().eq(0).data("index"),
f=k.eq(n).prevAll().eq(0).data("index")),h=c.data("prevIndex"),38==d.keyCode?(g.options.liveSearch&&b--,b!=f&&b>e&&(b=e),b<q&&(b=q),b==h&&(b=t)):40==d.keyCode&&(g.options.liveSearch&&b++,-1==b&&(b=0),b!=f&&b<n&&(b=n),b>t&&(b=t),b==h&&(b=q)),c.data("prevIndex",b),g.options.liveSearch?(d.preventDefault(),c.hasClass("dropdown-toggle")||(k.removeClass("active").eq(b).addClass("active").children("a").focus(),c.focus())):k.eq(b).children("a").focus();else if(!c.is("input")){var z=[];k.each(function(){a(this).hasClass("disabled")||
a.trim(a(this).children("a").text().toLowerCase()).substring(0,1)==y[d.keyCode]&&z.push(a(this).index())});b=a(document).data("keycount");b++;a(document).data("keycount",b);a.trim(a(":focus").text().toLowerCase()).substring(0,1)!=y[d.keyCode]?(b=1,a(document).data("keycount",b)):b>=z.length&&(a(document).data("keycount",0),b>z.length&&(b=1));k.eq(z[b-1]).children("a").focus()}(/(13|32)/.test(d.keyCode.toString(10))||/(^9$)/.test(d.keyCode.toString(10))&&g.options.selectOnTab)&&u&&(/(32)/.test(d.keyCode.toString(10))||
d.preventDefault(),g.options.liveSearch?/(32)/.test(d.keyCode.toString(10))||(g.$menuInner.find(".active a").click(),c.focus()):(c=a(":focus"),c.click(),c.focus(),d.preventDefault(),a(document).data("spaceSelect",!0)),a(document).data("keycount",0));if(/(^9$|27)/.test(d.keyCode.toString(10))&&u&&(g.multiple||g.options.liveSearch)||/(27)/.test(d.keyCode.toString(10))&&!u)g.$menu.parent().removeClass("open"),g.options.container&&g.$newElement.removeClass("open"),g.$button.focus()}},mobile:function(){this.$element.addClass("mobile-device")},
refresh:function(){this.$lis=null;this.liObj={};this.reloadLi();this.render();this.checkDisabled();this.liHeight(!0);this.setStyle();this.setWidth();this.$lis&&this.$searchbox.trigger("propertychange");this.$element.trigger("refreshed.bs.select")},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove();this.$element.remove()},destroy:function(){this.$newElement.before(this.$element).remove();this.$bsContainer?this.$bsContainer.remove():
this.$menu.remove();this.$element.off(".bs.select").removeData("selectpicker").removeClass("bs-select-hidden selectpicker")}};var g=a.fn.selectpicker;a.fn.selectpicker=h;a.fn.selectpicker.Constructor=n;a.fn.selectpicker.noConflict=function(){a.fn.selectpicker=g;return this};a(document).data("keycount",0).on("keydown.bs.select",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input',n.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input',
function(a){a.stopPropagation()});a(window).on("load.bs.select.data-api",function(){a(".selectpicker").each(function(){var d=a(this);h.call(d,d.data())})})})(m)});/*
 JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org  https://mths.be/utf8js v2.0.0 by @mathias */
(function(m){"object"===typeof exports&&"undefined"!==typeof module?module.exports=m():"function"===typeof define&&define.amd?define([],m):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).io=m()})(function(){return function a(f,e,h){function n(c,b){if(!e[c]){if(!f[c]){var d="function"==typeof require&&require;if(!b&&d)return d(c,!0);if(g)return g(c,!0);d=Error("Cannot find module '"+c+"'");throw d.code="MODULE_NOT_FOUND",d;}d=e[c]={exports:{}};
f[c][0].call(d.exports,function(a){var b=f[c][1][a];return n(b?b:a)},d,d.exports,a,f,e,h)}return e[c].exports}for(var g="function"==typeof require&&require,d=0;d<h.length;d++)n(h[d]);return n}({1:[function(a,f,e){function h(a,g){"object"==typeof a&&(g=a,a=void 0);g=g||{};var k=n(a),p=k.source,t=k.id,e=k.path,e=b[t]&&e in b[t].nsps;g.forceNew||g["force new connection"]||!1===g.multiplex||e?(c("ignoring socket cache for %s",p),p=d(p,g)):(b[t]||(c("new io instance for %s",p),b[t]=d(p,g)),p=b[t]);return p.socket(k.path)}
var n=a("./url"),g=a("socket.io-parser"),d=a("./manager"),c=a("debug")("socket.io-client");f.exports=e=h;var b=e.managers={};e.protocol=g.protocol;e.connect=h;e.Manager=a("./manager");e.Socket=a("./socket")},{"./manager":2,"./socket":4,"./url":5,debug:14,"socket.io-parser":40}],2:[function(a,f,e){function h(a,b){if(!(this instanceof h))return new h(a,b);a&&"object"==typeof a&&(b=a,a=void 0);b=b||{};b.path=b.path||"/socket.io";this.nsps={};this.subs=[];this.opts=b;this.reconnection(!1!==b.reconnection);
this.reconnectionAttempts(b.reconnectionAttempts||Infinity);this.reconnectionDelay(b.reconnectionDelay||1E3);this.reconnectionDelayMax(b.reconnectionDelayMax||5E3);this.randomizationFactor(b.randomizationFactor||.5);this.backoff=new r({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==b.timeout?2E4:b.timeout);this.readyState="closed";this.uri=a;this.connecting=[];this.lastPing=null;this.encoding=!1;this.packetBuffer=[];this.encoder=
new d.Encoder;this.decoder=new d.Decoder;(this.autoConnect=!1!==b.autoConnect)&&this.open()}var n=a("engine.io-client"),g=a("./socket");e=a("component-emitter");var d=a("socket.io-parser"),c=a("./on"),b=a("component-bind"),k=a("debug")("socket.io-client:manager"),p=a("indexof"),r=a("backo2"),q=Object.prototype.hasOwnProperty;f.exports=h;h.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var a in this.nsps)q.call(this.nsps,a)&&this.nsps[a].emit.apply(this.nsps[a],arguments)};h.prototype.updateSocketIds=
function(){for(var a in this.nsps)q.call(this.nsps,a)&&(this.nsps[a].id=this.engine.id)};e(h.prototype);h.prototype.reconnection=function(a){if(!arguments.length)return this._reconnection;this._reconnection=!!a;return this};h.prototype.reconnectionAttempts=function(a){if(!arguments.length)return this._reconnectionAttempts;this._reconnectionAttempts=a;return this};h.prototype.reconnectionDelay=function(a){if(!arguments.length)return this._reconnectionDelay;this._reconnectionDelay=a;this.backoff&&this.backoff.setMin(a);
return this};h.prototype.randomizationFactor=function(a){if(!arguments.length)return this._randomizationFactor;this._randomizationFactor=a;this.backoff&&this.backoff.setJitter(a);return this};h.prototype.reconnectionDelayMax=function(a){if(!arguments.length)return this._reconnectionDelayMax;this._reconnectionDelayMax=a;this.backoff&&this.backoff.setMax(a);return this};h.prototype.timeout=function(a){if(!arguments.length)return this._timeout;this._timeout=a;return this};h.prototype.maybeReconnectOnOpen=
function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()};h.prototype.open=h.prototype.connect=function(a){k("readyState %s",this.readyState);if(~this.readyState.indexOf("open"))return this;k("opening %s",this.uri);var b=this.engine=n(this.uri,this.opts),d=this;this.readyState="opening";this.skipReconnect=!1;var g=c(b,"open",function(){d.onopen();a&&a()}),p=c(b,"error",function(b){k("connect_error");d.cleanup();d.readyState="closed";d.emitAll("connect_error",
b);if(a){var c=Error("Connection error");c.data=b;a(c)}else d.maybeReconnectOnOpen()});if(!1!==this._timeout){var q=this._timeout;k("connect attempt will timeout after %d",q);var t=setTimeout(function(){k("connect attempt timed out after %d",q);g.destroy();b.close();b.emit("error","timeout");d.emitAll("connect_timeout",q)},q);this.subs.push({destroy:function(){clearTimeout(t)}})}this.subs.push(g);this.subs.push(p);return this};h.prototype.onopen=function(){k("open");this.cleanup();this.readyState=
"open";this.emit("open");var a=this.engine;this.subs.push(c(a,"data",b(this,"ondata")));this.subs.push(c(a,"ping",b(this,"onping")));this.subs.push(c(a,"pong",b(this,"onpong")));this.subs.push(c(a,"error",b(this,"onerror")));this.subs.push(c(a,"close",b(this,"onclose")));this.subs.push(c(this.decoder,"decoded",b(this,"ondecoded")))};h.prototype.onping=function(){this.lastPing=new Date;this.emitAll("ping")};h.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)};h.prototype.ondata=
function(a){this.decoder.add(a)};h.prototype.ondecoded=function(a){this.emit("packet",a)};h.prototype.onerror=function(a){k("error",a);this.emitAll("error",a)};h.prototype.socket=function(a){function b(){~p(d.connecting,c)||d.connecting.push(c)}var c=this.nsps[a];if(!c){c=new g(this,a);this.nsps[a]=c;var d=this;c.on("connecting",b);c.on("connect",function(){c.id=d.engine.id});this.autoConnect&&b()}return c};h.prototype.destroy=function(a){a=p(this.connecting,a);~a&&this.connecting.splice(a,1);this.connecting.length||
this.close()};h.prototype.packet=function(a){k("writing packet %j",a);var b=this;b.encoding?b.packetBuffer.push(a):(b.encoding=!0,this.encoder.encode(a,function(c){for(var d=0;d<c.length;d++)b.engine.write(c[d],a.options);b.encoding=!1;b.processPacketQueue()}))};h.prototype.processPacketQueue=function(){if(0<this.packetBuffer.length&&!this.encoding){var a=this.packetBuffer.shift();this.packet(a)}};h.prototype.cleanup=function(){k("cleanup");for(var a;a=this.subs.shift();)a.destroy();this.packetBuffer=
[];this.encoding=!1;this.lastPing=null;this.decoder.destroy()};h.prototype.close=h.prototype.disconnect=function(){k("disconnect");this.skipReconnect=!0;this.reconnecting=!1;"opening"==this.readyState&&this.cleanup();this.backoff.reset();this.readyState="closed";this.engine&&this.engine.close()};h.prototype.onclose=function(a){k("onclose");this.cleanup();this.backoff.reset();this.readyState="closed";this.emit("close",a);this._reconnection&&!this.skipReconnect&&this.reconnect()};h.prototype.reconnect=
function(){if(this.reconnecting||this.skipReconnect)return this;var a=this;if(this.backoff.attempts>=this._reconnectionAttempts)k("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var b=this.backoff.duration();k("will wait %dms before reconnect attempt",b);this.reconnecting=!0;var c=setTimeout(function(){a.skipReconnect||(k("attempting reconnect"),a.emitAll("reconnect_attempt",a.backoff.attempts),a.emitAll("reconnecting",a.backoff.attempts),a.skipReconnect||
a.open(function(b){b?(k("reconnect attempt error"),a.reconnecting=!1,a.reconnect(),a.emitAll("reconnect_error",b.data)):(k("reconnect success"),a.onreconnect())}))},b);this.subs.push({destroy:function(){clearTimeout(c)}})}};h.prototype.onreconnect=function(){var a=this.backoff.attempts;this.reconnecting=!1;this.backoff.reset();this.updateSocketIds();this.emitAll("reconnect",a)}},{"./on":3,"./socket":4,backo2:8,"component-bind":11,"component-emitter":12,debug:14,"engine.io-client":16,indexof:32,"socket.io-parser":40}],
3:[function(a,f,e){f.exports=function(a,n,g){a.on(n,g);return{destroy:function(){a.removeListener(n,g)}}}},{}],4:[function(a,f,e){function h(a,b){this.io=a;this.nsp=b;this.json=this;this.ids=0;this.acks={};this.receiveBuffer=[];this.sendBuffer=[];this.connected=!1;this.disconnected=!0;this.io.autoConnect&&this.open()}var n=a("socket.io-parser");e=a("component-emitter");var g=a("to-array"),d=a("./on"),c=a("component-bind"),b=a("debug")("socket.io-client:socket"),k=a("has-binary");f.exports=h;var p=
{connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},r=e.prototype.emit;e(h.prototype);h.prototype.subEvents=function(){if(!this.subs){var a=this.io;this.subs=[d(a,"open",c(this,"onopen")),d(a,"packet",c(this,"onpacket")),d(a,"close",c(this,"onclose"))]}};h.prototype.open=h.prototype.connect=function(){if(this.connected)return this;this.subEvents();this.io.open();if("open"==
this.io.readyState)this.onopen();this.emit("connecting");return this};h.prototype.send=function(){var a=g(arguments);a.unshift("message");this.emit.apply(this,a);return this};h.prototype.emit=function(a){if(p.hasOwnProperty(a))return r.apply(this,arguments),this;var c=g(arguments),d=n.EVENT;k(c)&&(d=n.BINARY_EVENT);d={type:d,data:c,options:{}};d.options.compress=!this.flags||!1!==this.flags.compress;"function"==typeof c[c.length-1]&&(b("emitting packet with ack id %d",this.ids),this.acks[this.ids]=
c.pop(),d.id=this.ids++);this.connected?this.packet(d):this.sendBuffer.push(d);delete this.flags;return this};h.prototype.packet=function(a){a.nsp=this.nsp;this.io.packet(a)};h.prototype.onopen=function(){b("transport is open - connecting");"/"!=this.nsp&&this.packet({type:n.CONNECT})};h.prototype.onclose=function(a){b("close (%s)",a);this.connected=!1;this.disconnected=!0;delete this.id;this.emit("disconnect",a)};h.prototype.onpacket=function(a){if(a.nsp==this.nsp)switch(a.type){case n.CONNECT:this.onconnect();
break;case n.EVENT:this.onevent(a);break;case n.BINARY_EVENT:this.onevent(a);break;case n.ACK:this.onack(a);break;case n.BINARY_ACK:this.onack(a);break;case n.DISCONNECT:this.ondisconnect();break;case n.ERROR:this.emit("error",a.data)}};h.prototype.onevent=function(a){var c=a.data||[];b("emitting event %j",c);null!=a.id&&(b("attaching ack callback to event"),c.push(this.ack(a.id)));this.connected?r.apply(this,c):this.receiveBuffer.push(c)};h.prototype.ack=function(a){var c=this,d=!1;return function(){if(!d){d=
!0;var p=g(arguments);b("sending ack %j",p);var q=k(p)?n.BINARY_ACK:n.ACK;c.packet({type:q,id:a,data:p})}}};h.prototype.onack=function(a){var c=this.acks[a.id];"function"==typeof c?(b("calling ack %s with %j",a.id,a.data),c.apply(this,a.data),delete this.acks[a.id]):b("bad ack %s",a.id)};h.prototype.onconnect=function(){this.connected=!0;this.disconnected=!1;this.emit("connect");this.emitBuffered()};h.prototype.emitBuffered=function(){var a;for(a=0;a<this.receiveBuffer.length;a++)r.apply(this,this.receiveBuffer[a]);
this.receiveBuffer=[];for(a=0;a<this.sendBuffer.length;a++)this.packet(this.sendBuffer[a]);this.sendBuffer=[]};h.prototype.ondisconnect=function(){b("server disconnect (%s)",this.nsp);this.destroy();this.onclose("io server disconnect")};h.prototype.destroy=function(){if(this.subs){for(var a=0;a<this.subs.length;a++)this.subs[a].destroy();this.subs=null}this.io.destroy(this)};h.prototype.close=h.prototype.disconnect=function(){this.connected&&(b("performing disconnect (%s)",this.nsp),this.packet({type:n.DISCONNECT}));
this.destroy();if(this.connected)this.onclose("io client disconnect");return this};h.prototype.compress=function(a){this.flags=this.flags||{};this.flags.compress=a;return this}},{"./on":3,"component-bind":11,"component-emitter":12,debug:14,"has-binary":30,"socket.io-parser":40,"to-array":43}],5:[function(a,f,e){(function(e){var n=a("parseuri"),g=a("debug")("socket.io-client:url");f.exports=function(a,c){var b=a;c=c||e.location;null==a&&(a=c.protocol+"//"+c.host);"string"==typeof a&&("/"==a.charAt(0)&&
(a="/"==a.charAt(1)?c.protocol+a:c.host+a),/^(https?|wss?):\/\//.test(a)||(g("protocol-less url %s",a),a="undefined"!=typeof c?c.protocol+"//"+a:"https://"+a),g("parse %s",a),b=n(a));b.port||(/^(http|ws)$/.test(b.protocol)?b.port="80":/^(http|ws)s$/.test(b.protocol)&&(b.port="443"));b.path=b.path||"/";var d=-1!==b.host.indexOf(":")?"["+b.host+"]":b.host;b.id=b.protocol+"://"+d+":"+b.port;b.href=b.protocol+"://"+d+(c&&c.port==b.port?"":":"+b.port);return b}}).call(this,"undefined"!==typeof self?self:
"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{debug:14,parseuri:38}],6:[function(a,f,e){function h(){}f.exports=function(a,g,d){function c(a,p){if(0>=c.count)throw Error("after called too many times");--c.count;a?(b=!0,g(a),g=d):0!==c.count||b||g(null,p)}var b=!1;d=d||h;c.count=a;return 0===a?g():c}},{}],7:[function(a,f,e){f.exports=function(a,n,g){var d=a.byteLength;n=n||0;g=g||d;if(a.slice)return a.slice(n,g);0>n&&(n+=d);0>g&&(g+=d);g>d&&(g=d);if(n>=d||n>=g||0===d)return new ArrayBuffer(0);
a=new Uint8Array(a);for(var d=new Uint8Array(g-n),c=0;n<g;n++,c++)d[c]=a[n];return d.buffer}},{}],8:[function(a,f,e){function h(a){a=a||{};this.ms=a.min||100;this.max=a.max||1E4;this.factor=a.factor||2;this.jitter=0<a.jitter&&1>=a.jitter?a.jitter:0;this.attempts=0}f.exports=h;h.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter)var g=Math.random(),d=Math.floor(g*this.jitter*a),a=0==(Math.floor(10*g)&1)?a-d:a+d;return Math.min(a,this.max)|0};h.prototype.reset=
function(){this.attempts=0};h.prototype.setMin=function(a){this.ms=a};h.prototype.setMax=function(a){this.max=a};h.prototype.setJitter=function(a){this.jitter=a}},{}],9:[function(a,f,e){(function(){for(var a=new Uint8Array(256),n=0;64>n;n++)a["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(n)]=n;e.encode=function(a){a=new Uint8Array(a);var d,c=a.length,b="";for(d=0;d<c;d+=3)b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a[d]>>2],b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(a[d]&
3)<<4|a[d+1]>>4],b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(a[d+1]&15)<<2|a[d+2]>>6],b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a[d+2]&63];2===c%3?b=b.substring(0,b.length-1)+"=":1===c%3&&(b=b.substring(0,b.length-2)+"==");return b};e.decode=function(g){var d=.75*g.length,c=g.length,b=0,k,p,n,q;"="===g[g.length-1]&&(d--,"="===g[g.length-2]&&d--);for(var t=new ArrayBuffer(d),e=new Uint8Array(t),d=0;d<c;d+=4)k=a[g.charCodeAt(d)],p=a[g.charCodeAt(d+
1)],n=a[g.charCodeAt(d+2)],q=a[g.charCodeAt(d+3)],e[b++]=k<<2|p>>4,e[b++]=(p&15)<<4|n>>2,e[b++]=(n&3)<<6|q&63;return t}})()},{}],10:[function(a,f,e){(function(a){function n(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.buffer instanceof ArrayBuffer){var d=c.buffer;if(c.byteLength!==d.byteLength){var k=new Uint8Array(c.byteLength);k.set(new Uint8Array(d,c.byteOffset,c.byteLength));d=k.buffer}a[b]=d}}}function g(a,b){b=b||{};var d=new c;n(a);for(var k=0;k<a.length;k++)d.append(a[k]);return b.type?
d.getBlob(b.type):d.getBlob()}function d(a,b){n(a);return new Blob(a,b||{})}var c=a.BlobBuilder||a.WebKitBlobBuilder||a.MSBlobBuilder||a.MozBlobBuilder,b;try{b=2===(new Blob(["hi"])).size}catch(r){b=!1}var k;if(k=b)try{k=2===(new Blob([new Uint8Array([1,2])])).size}catch(r){k=!1}var p=c&&c.prototype.append&&c.prototype.getBlob;a=b?k?a.Blob:d:p?g:void 0;f.exports=a}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{}],11:[function(a,
f,e){var h=[].slice;f.exports=function(a,g){"string"==typeof g&&(g=a[g]);if("function"!=typeof g)throw Error("bind() requires a function");var d=h.call(arguments,2);return function(){return g.apply(a,d.concat(h.call(arguments)))}}},{}],12:[function(a,f,e){function h(a){if(a){for(var g in h.prototype)a[g]=h.prototype[g];return a}}f.exports=h;h.prototype.on=h.prototype.addEventListener=function(a,g){this._callbacks=this._callbacks||{};(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(g);return this};
h.prototype.once=function(a,g){function d(){this.off(a,d);g.apply(this,arguments)}d.fn=g;this.on(a,d);return this};h.prototype.off=h.prototype.removeListener=h.prototype.removeAllListeners=h.prototype.removeEventListener=function(a,g){this._callbacks=this._callbacks||{};if(0==arguments.length)return this._callbacks={},this;var d=this._callbacks["$"+a];if(!d)return this;if(1==arguments.length)return delete this._callbacks["$"+a],this;for(var c,b=0;b<d.length;b++)if(c=d[b],c===g||c.fn===g){d.splice(b,
1);break}return this};h.prototype.emit=function(a){this._callbacks=this._callbacks||{};var g=[].slice.call(arguments,1),d=this._callbacks["$"+a];if(d)for(var d=d.slice(0),c=0,b=d.length;c<b;++c)d[c].apply(this,g);return this};h.prototype.listeners=function(a){this._callbacks=this._callbacks||{};return this._callbacks["$"+a]||[]};h.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],13:[function(a,f,e){f.exports=function(a,n){var g=function(){};g.prototype=n.prototype;a.prototype=
new g;a.prototype.constructor=a}},{}],14:[function(a,f,e){function h(){var a;try{a=e.storage.debug}catch(d){}return a}e=f.exports=a("./debug");e.log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)};e.formatArgs=function(){var a=arguments,d=this.useColors;a[0]=(d?"%c":"")+this.namespace+(d?" %c":" ")+a[0]+(d?"%c ":" ")+"+"+e.humanize(this.diff);if(!d)return a;var d="color: "+this.color,a=[a[0],d,"color: inherit"].concat(Array.prototype.slice.call(a,
1)),c=0,b=0;a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(c++,"%c"===a&&(b=c))});a.splice(b,0,d);return a};e.save=function(a){try{null==a?e.storage.removeItem("debug"):e.storage.debug=a}catch(d){}};e.load=h;e.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)};var n;if("undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage)n=
chrome.storage.local;else a:{try{n=window.localStorage;break a}catch(g){}n=void 0}e.storage=n;e.colors="lightseagreen forestgreen goldenrod dodgerblue darkorchid crimson".split(" ");e.formatters.j=function(a){return JSON.stringify(a)};e.enable(h())},{"./debug":15}],15:[function(a,f,e){e=f.exports=function(a){function d(){}function c(){var a=+new Date;c.diff=a-(n||a);c.prev=n;n=c.curr=a;null==c.useColors&&(c.useColors=e.useColors());null==c.color&&c.useColors&&(c.color=e.colors[h++%e.colors.length]);
var b=Array.prototype.slice.call(arguments);b[0]=e.coerce(b[0]);"string"!==typeof b[0]&&(b=["%o"].concat(b));var d=0;b[0]=b[0].replace(/%([a-z%])/g,function(a,k){if("%%"===a)return a;d++;var g=e.formatters[k];"function"===typeof g&&(a=g.call(c,b[d]),b.splice(d,1),d--);return a});"function"===typeof e.formatArgs&&(b=e.formatArgs.apply(c,b));(c.log||e.log||console.log.bind(console)).apply(c,b)}d.enabled=!1;c.enabled=!0;var b=e.enabled(a)?c:d;b.namespace=a;return b};e.coerce=function(a){return a instanceof
Error?a.stack||a.message:a};e.disable=function(){e.enable("")};e.enable=function(a){e.save(a);for(var d=(a||"").split(/[\s,]+/),c=d.length,b=0;b<c;b++)d[b]&&(a=d[b].replace(/\*/g,".*?"),"-"===a[0]?e.skips.push(new RegExp("^"+a.substr(1)+"$")):e.names.push(new RegExp("^"+a+"$")))};e.enabled=function(a){var d,c;d=0;for(c=e.skips.length;d<c;d++)if(e.skips[d].test(a))return!1;d=0;for(c=e.names.length;d<c;d++)if(e.names[d].test(a))return!0;return!1};e.humanize=a("ms");e.names=[];e.skips=[];e.formatters=
{};var h=0,n},{ms:35}],16:[function(a,f,e){f.exports=a("./lib/")},{"./lib/":17}],17:[function(a,f,e){f.exports=a("./socket");f.exports.parser=a("engine.io-parser")},{"./socket":18,"engine.io-parser":27}],18:[function(a,f,e){(function(e){function n(a,b){if(!(this instanceof n))return new n(a,b);b=b||{};a&&"object"==typeof a&&(b=a,a=null);a?(a=p(a),b.hostname=a.host,b.secure="https"==a.protocol||"wss"==a.protocol,b.port=a.port,a.query&&(b.query=a.query)):b.host&&(b.hostname=p(b.host).host);this.secure=
null!=b.secure?b.secure:e.location&&"https:"==location.protocol;b.hostname&&!b.port&&(b.port=this.secure?"443":"80");this.agent=b.agent||!1;this.hostname=b.hostname||(e.location?location.hostname:"localhost");this.port=b.port||(e.location&&location.port?location.port:this.secure?443:80);this.query=b.query||{};"string"==typeof this.query&&(this.query=q.decode(this.query));this.upgrade=!1!==b.upgrade;this.path=(b.path||"/engine.io").replace(/\/$/,"")+"/";this.forceJSONP=!!b.forceJSONP;this.jsonp=!1!==
b.jsonp;this.forceBase64=!!b.forceBase64;this.enablesXDR=!!b.enablesXDR;this.timestampParam=b.timestampParam||"t";this.timestampRequests=b.timestampRequests;this.transports=b.transports||["polling","websocket"];this.readyState="";this.writeBuffer=[];this.policyPort=b.policyPort||843;this.rememberUpgrade=b.rememberUpgrade||!1;this.binaryType=null;this.onlyBinaryUpgrades=b.onlyBinaryUpgrades;this.perMessageDeflate=!1!==b.perMessageDeflate?b.perMessageDeflate||{}:!1;!0===this.perMessageDeflate&&(this.perMessageDeflate=
{});this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024);this.pfx=b.pfx||null;this.key=b.key||null;this.passphrase=b.passphrase||null;this.cert=b.cert||null;this.ca=b.ca||null;this.ciphers=b.ciphers||null;this.rejectUnauthorized=void 0===b.rejectUnauthorized?!0:b.rejectUnauthorized;var c="object"==typeof e&&e;c.global===c&&b.extraHeaders&&0<Object.keys(b.extraHeaders).length&&(this.extraHeaders=b.extraHeaders);this.open()}var g=a("./transports"),
d=a("component-emitter"),c=a("debug")("engine.io-client:socket"),b=a("indexof"),k=a("engine.io-parser"),p=a("parseuri"),r=a("parsejson"),q=a("parseqs");f.exports=n;n.priorWebsocketSuccess=!1;d(n.prototype);n.protocol=k.protocol;n.Socket=n;n.Transport=a("./transport");n.transports=a("./transports");n.parser=a("engine.io-parser");n.prototype.createTransport=function(a){c('creating transport "%s"',a);var b=this.query,d={},p;for(p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.EIO=k.protocol;d.transport=a;this.id&&
(d.sid=this.id);return new g[a]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:d,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,
extraHeaders:this.extraHeaders})};n.prototype.open=function(){var a;if(this.rememberUpgrade&&n.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))a="websocket";else{if(0===this.transports.length){var b=this;setTimeout(function(){b.emit("error","No transports available")},0);return}a=this.transports[0]}this.readyState="opening";try{a=this.createTransport(a)}catch(x){this.transports.shift();this.open();return}a.open();this.setTransport(a)};n.prototype.setTransport=function(a){c("setting transport %s",
a.name);var b=this;this.transport&&(c("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners());this.transport=a;a.on("drain",function(){b.onDrain()}).on("packet",function(a){b.onPacket(a)}).on("error",function(a){b.onError(a)}).on("close",function(){b.onClose("transport close")})};n.prototype.probe=function(a){function b(){if(f.onlyBinaryUpgrades){var b=!this.supportsBinary&&f.transport.supportsBinary;r=r||b}r||(c('probe transport "%s" opened',a),e.send([{type:"ping",
data:"probe"}]),e.once("packet",function(b){r||("pong"==b.type&&"probe"==b.data?(c('probe transport "%s" pong',a),f.upgrading=!0,f.emit("upgrading",e),e&&(n.priorWebsocketSuccess="websocket"==e.name,c('pausing current transport "%s"',f.transport.name),f.transport.pause(function(){r||"closed"==f.readyState||(c("changing transport and sending upgrade packet"),t(),f.setTransport(e),e.send([{type:"upgrade"}]),f.emit("upgrade",e),e=null,f.upgrading=!1,f.flush())}))):(c('probe transport "%s" failed',a),
b=Error("probe error"),b.transport=e.name,f.emit("upgradeError",b)))}))}function d(){r||(r=!0,t(),e.close(),e=null)}function k(b){var k=Error("probe error: "+b);k.transport=e.name;d();c('probe transport "%s" failed because of error: %s',a,b);f.emit("upgradeError",k)}function g(){k("transport closed")}function p(){k("socket closed")}function q(a){e&&a.name!=e.name&&(c('"%s" works - aborting "%s"',a.name,e.name),d())}function t(){e.removeListener("open",b);e.removeListener("error",k);e.removeListener("close",
g);f.removeListener("close",p);f.removeListener("upgrading",q)}c('probing transport "%s"',a);var e=this.createTransport(a,{probe:1}),r=!1,f=this;n.priorWebsocketSuccess=!1;e.once("open",b);e.once("error",k);e.once("close",g);this.once("close",p);this.once("upgrading",q);e.open()};n.prototype.onOpen=function(){c("socket open");this.readyState="open";n.priorWebsocketSuccess="websocket"==this.transport.name;this.emit("open");this.flush();if("open"==this.readyState&&this.upgrade&&this.transport.pause){c("starting upgrade probes");
for(var a=0,b=this.upgrades.length;a<b;a++)this.probe(this.upgrades[a])}};n.prototype.onPacket=function(a){if("opening"==this.readyState||"open"==this.readyState)switch(c('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),this.emit("heartbeat"),a.type){case "open":this.onHandshake(r(a.data));break;case "pong":this.setPing();this.emit("pong");break;case "error":var b=Error("server error");b.code=a.data;this.onError(b);break;case "message":this.emit("data",a.data),this.emit("message",
a.data)}else c('packet received with socket readyState "%s"',this.readyState)};n.prototype.onHandshake=function(a){this.emit("handshake",a);this.id=a.sid;this.transport.query.sid=a.sid;this.upgrades=this.filterUpgrades(a.upgrades);this.pingInterval=a.pingInterval;this.pingTimeout=a.pingTimeout;this.onOpen();"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))};n.prototype.onHeartbeat=function(a){clearTimeout(this.pingTimeoutTimer);
var b=this;b.pingTimeoutTimer=setTimeout(function(){if("closed"!=b.readyState)b.onClose("ping timeout")},a||b.pingInterval+b.pingTimeout)};n.prototype.setPing=function(){var a=this;clearTimeout(a.pingIntervalTimer);a.pingIntervalTimer=setTimeout(function(){c("writing ping packet - expecting pong within %sms",a.pingTimeout);a.ping();a.onHeartbeat(a.pingTimeout)},a.pingInterval)};n.prototype.ping=function(){var a=this;this.sendPacket("ping",function(){a.emit("ping")})};n.prototype.onDrain=function(){this.writeBuffer.splice(0,
this.prevBufferLen);this.prevBufferLen=0;0===this.writeBuffer.length?this.emit("drain"):this.flush()};n.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(c("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))};n.prototype.write=n.prototype.send=function(a,b,c){this.sendPacket("message",a,b,c);return this};n.prototype.sendPacket=
function(a,b,c,d){"function"==typeof b&&(d=b,b=void 0);"function"==typeof c&&(d=c,c=null);if("closing"!=this.readyState&&"closed"!=this.readyState){c=c||{};c.compress=!1!==c.compress;a={type:a,data:b,options:c};this.emit("packetCreate",a);this.writeBuffer.push(a);if(d)this.once("flush",d);this.flush()}};n.prototype.close=function(){function a(){k.onClose("forced close");c("socket closing - telling transport to close");k.transport.close()}function b(){k.removeListener("upgrade",b);k.removeListener("upgradeError",
b);a()}function d(){k.once("upgrade",b);k.once("upgradeError",b)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var k=this;if(this.writeBuffer.length)this.once("drain",function(){this.upgrading?d():a()});else this.upgrading?d():a()}return this};n.prototype.onError=function(a){c("socket error %j",a);n.priorWebsocketSuccess=!1;this.emit("error",a);this.onClose("transport error",a)};n.prototype.onClose=function(a,b){if("opening"==this.readyState||"open"==this.readyState||
"closing"==this.readyState)c('socket close with reason: "%s"',a),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",a,b),this.writeBuffer=[],this.prevBufferLen=0};n.prototype.filterUpgrades=function(a){for(var c=[],d=0,k=a.length;d<k;d++)~b(this.transports,a[d])&&c.push(a[d]);return c}}).call(this,"undefined"!==typeof self?
self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"./transport":19,"./transports":20,"component-emitter":26,debug:14,"engine.io-parser":27,indexof:32,parsejson:36,parseqs:37,parseuri:38}],19:[function(a,f,e){function h(a){this.path=a.path;this.hostname=a.hostname;this.port=a.port;this.secure=a.secure;this.query=a.query;this.timestampParam=a.timestampParam;this.timestampRequests=a.timestampRequests;this.readyState="";this.agent=a.agent||!1;this.socket=a.socket;this.enablesXDR=
a.enablesXDR;this.pfx=a.pfx;this.key=a.key;this.passphrase=a.passphrase;this.cert=a.cert;this.ca=a.ca;this.ciphers=a.ciphers;this.rejectUnauthorized=a.rejectUnauthorized;this.extraHeaders=a.extraHeaders}var n=a("engine.io-parser");a=a("component-emitter");f.exports=h;a(h.prototype);h.prototype.onError=function(a,d){var c=Error(a);c.type="TransportError";c.description=d;this.emit("error",c);return this};h.prototype.open=function(){if("closed"==this.readyState||""==this.readyState)this.readyState="opening",
this.doOpen();return this};h.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState)this.doClose(),this.onClose();return this};h.prototype.send=function(a){if("open"==this.readyState)this.write(a);else throw Error("Transport not open");};h.prototype.onOpen=function(){this.readyState="open";this.writable=!0;this.emit("open")};h.prototype.onData=function(a){a=n.decodePacket(a,this.socket.binaryType);this.onPacket(a)};h.prototype.onPacket=function(a){this.emit("packet",a)};
h.prototype.onClose=function(){this.readyState="closed";this.emit("close")}},{"component-emitter":26,"engine.io-parser":27}],20:[function(a,f,e){(function(f){var n=a("xmlhttprequest-ssl"),g=a("./polling-xhr"),d=a("./polling-jsonp"),c=a("./websocket");e.polling=function(a){var b=!1,c=!1,e=!1!==a.jsonp;f.location&&(c="https:"==location.protocol,(b=location.port)||(b=c?443:80),b=a.hostname!=location.hostname||b!=a.port,c=a.secure!=c);a.xdomain=b;a.xscheme=c;if("open"in new n(a)&&!a.forceJSONP)return new g(a);
if(!e)throw Error("JSONP disabled");return new d(a)};e.websocket=c}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"./polling-jsonp":21,"./polling-xhr":22,"./websocket":24,"xmlhttprequest-ssl":25}],21:[function(a,f,e){(function(e){function n(){}function g(a){d.call(this,a);this.query=this.query||{};p||(e.___eio||(e.___eio=[]),p=e.___eio);this.index=p.length;var b=this;p.push(function(a){b.onData(a)});this.query.j=this.index;e.document&&
e.addEventListener&&e.addEventListener("beforeunload",function(){b.script&&(b.script.onerror=n)},!1)}var d=a("./polling"),c=a("component-inherit");f.exports=g;var b=/\n/g,k=/\\n/g,p;c(g,d);g.prototype.supportsBinary=!1;g.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null);this.form&&(this.form.parentNode.removeChild(this.form),this.iframe=this.form=null);d.prototype.doClose.call(this)};g.prototype.doPoll=function(){var a=this,b=document.createElement("script");
this.script&&(this.script.parentNode.removeChild(this.script),this.script=null);b.async=!0;b.src=this.uri();b.onerror=function(b){a.onError("jsonp poll error",b)};var c=document.getElementsByTagName("script")[0];c?c.parentNode.insertBefore(b,c):(document.head||document.body).appendChild(b);this.script=b;"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a);document.body.removeChild(a)},100)};g.prototype.doWrite=
function(a,c){function d(){g();c()}function g(){if(p.iframe)try{p.form.removeChild(p.iframe)}catch(A){p.onError("jsonp polling iframe removal error",A)}try{f=document.createElement('<iframe src="javascript:0" name="'+p.iframeId+'">')}catch(A){f=document.createElement("iframe"),f.name=p.iframeId,f.src="javascript:0"}f.id=p.iframeId;p.form.appendChild(f);p.iframe=f}var p=this;if(!this.form){var q=document.createElement("form"),n=document.createElement("textarea"),e=this.iframeId="eio_iframe_"+this.index,
f;q.className="socketio";q.style.position="absolute";q.style.top="-1000px";q.style.left="-1000px";q.target=e;q.method="POST";q.setAttribute("accept-charset","utf-8");n.name="d";q.appendChild(n);document.body.appendChild(q);this.form=q;this.area=n}this.form.action=this.uri();g();a=a.replace(k,"\\\n");this.area.value=a.replace(b,"\\n");try{this.form.submit()}catch(A){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==p.iframe.readyState&&d()}:this.iframe.onload=d}}).call(this,
"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"./polling":23,"component-inherit":13}],22:[function(a,f,e){(function(e){function n(){}function g(a){k.call(this,a);if(e.location){var b="https:"==location.protocol,c=location.port;c||(c=b?443:80);this.xd=a.hostname!=e.location.hostname||c!=a.port;this.xs=a.secure!=b}else this.extraHeaders=a.extraHeaders}function d(a){this.method=a.method||"GET";this.uri=a.uri;this.xd=!!a.xd;this.xs=!!a.xs;this.async=
!1!==a.async;this.data=void 0!=a.data?a.data:null;this.agent=a.agent;this.isBinary=a.isBinary;this.supportsBinary=a.supportsBinary;this.enablesXDR=a.enablesXDR;this.pfx=a.pfx;this.key=a.key;this.passphrase=a.passphrase;this.cert=a.cert;this.ca=a.ca;this.ciphers=a.ciphers;this.rejectUnauthorized=a.rejectUnauthorized;this.extraHeaders=a.extraHeaders;this.create()}function c(){for(var a in d.requests)d.requests.hasOwnProperty(a)&&d.requests[a].abort()}var b=a("xmlhttprequest-ssl"),k=a("./polling"),p=
a("component-emitter"),r=a("component-inherit"),q=a("debug")("engine.io-client:polling-xhr");f.exports=g;f.exports.Request=d;r(g,k);g.prototype.supportsBinary=!0;g.prototype.request=function(a){a=a||{};a.uri=this.uri();a.xd=this.xd;a.xs=this.xs;a.agent=this.agent||!1;a.supportsBinary=this.supportsBinary;a.enablesXDR=this.enablesXDR;a.pfx=this.pfx;a.key=this.key;a.passphrase=this.passphrase;a.cert=this.cert;a.ca=this.ca;a.ciphers=this.ciphers;a.rejectUnauthorized=this.rejectUnauthorized;a.extraHeaders=
this.extraHeaders;return new d(a)};g.prototype.doWrite=function(a,b){var c=this.request({method:"POST",data:a,isBinary:"string"!==typeof a&&void 0!==a}),d=this;c.on("success",b);c.on("error",function(a){d.onError("xhr post error",a)});this.sendXhr=c};g.prototype.doPoll=function(){q("xhr poll");var a=this.request(),b=this;a.on("data",function(a){b.onData(a)});a.on("error",function(a){b.onError("xhr poll error",a)});this.pollXhr=a};p(d.prototype);d.prototype.create=function(){var a={agent:this.agent,
xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};a.pfx=this.pfx;a.key=this.key;a.passphrase=this.passphrase;a.cert=this.cert;a.ca=this.ca;a.ciphers=this.ciphers;a.rejectUnauthorized=this.rejectUnauthorized;var c=this.xhr=new b(a),k=this;try{q("xhr open %s: %s",this.method,this.uri);c.open(this.method,this.uri,this.async);try{if(this.extraHeaders){c.setDisableHeaderCheck(!0);for(var g in this.extraHeaders)this.extraHeaders.hasOwnProperty(g)&&c.setRequestHeader(g,this.extraHeaders[g])}}catch(u){}this.supportsBinary&&
(c.responseType="arraybuffer");if("POST"==this.method)try{this.isBinary?c.setRequestHeader("Content-type","application/octet-stream"):c.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(u){}"withCredentials"in c&&(c.withCredentials=!0);this.hasXDR()?(c.onload=function(){k.onLoad()},c.onerror=function(){k.onError(c.responseText)}):c.onreadystatechange=function(){if(4==c.readyState)if(200==c.status||1223==c.status)k.onLoad();else setTimeout(function(){k.onError(c.status)},0)};q("xhr data %s",
this.data);c.send(this.data)}catch(u){setTimeout(function(){k.onError(u)},0);return}e.document&&(this.index=d.requestsCount++,d.requests[this.index]=this)};d.prototype.onSuccess=function(){this.emit("success");this.cleanup()};d.prototype.onData=function(a){this.emit("data",a);this.onSuccess()};d.prototype.onError=function(a){this.emit("error",a);this.cleanup(!0)};d.prototype.cleanup=function(a){if("undefined"!=typeof this.xhr&&null!==this.xhr){this.hasXDR()?this.xhr.onload=this.xhr.onerror=n:this.xhr.onreadystatechange=
n;if(a)try{this.xhr.abort()}catch(w){}e.document&&delete d.requests[this.index];this.xhr=null}};d.prototype.onLoad=function(){var a;try{var b;try{b=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(y){}if("application/octet-stream"===b)a=this.xhr.response;else if(this.supportsBinary)try{a=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(y){var c=new Uint8Array(this.xhr.response);b=[];for(var d=0,k=c.length;d<k;d++)b.push(c[d]);a=String.fromCharCode.apply(null,b)}else a=
this.xhr.responseText}catch(y){this.onError(y)}if(null!=a)this.onData(a)};d.prototype.hasXDR=function(){return"undefined"!==typeof e.XDomainRequest&&!this.xs&&this.enablesXDR};d.prototype.abort=function(){this.cleanup()};e.document&&(d.requestsCount=0,d.requests={},e.attachEvent?e.attachEvent("onunload",c):e.addEventListener&&e.addEventListener("beforeunload",c,!1))}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"./polling":23,
"component-emitter":26,"component-inherit":13,debug:14,"xmlhttprequest-ssl":25}],23:[function(a,f,e){function h(a){var b=a&&a.forceBase64;if(!k||b)this.supportsBinary=!1;n.call(this,a)}var n=a("../transport"),g=a("parseqs"),d=a("engine.io-parser");e=a("component-inherit");var c=a("yeast"),b=a("debug")("engine.io-client:polling");f.exports=h;var k=null!=(new (a("xmlhttprequest-ssl"))({xdomain:!1})).responseType;e(h,n);h.prototype.name="polling";h.prototype.doOpen=function(){this.poll()};h.prototype.pause=
function(a){function c(){b("paused");d.readyState="paused";a()}var d=this;this.readyState="pausing";if(this.polling||!this.writable){var k=0;this.polling&&(b("we are currently polling - waiting to pause"),k++,this.once("pollComplete",function(){b("pre-pause polling complete");--k||c()}));this.writable||(b("we are currently writing - waiting to pause"),k++,this.once("drain",function(){b("pre-pause writing complete");--k||c()}))}else c()};h.prototype.poll=function(){b("polling");this.polling=!0;this.doPoll();
this.emit("poll")};h.prototype.onData=function(a){var c=this;b("polling got data %s",a);d.decodePayload(a,this.socket.binaryType,function(a,b,d){if("opening"==c.readyState)c.onOpen();if("close"==a.type)return c.onClose(),!1;c.onPacket(a)});"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():b('ignoring poll - transport state "%s"',this.readyState))};h.prototype.doClose=function(){function a(){b("writing close packet");c.write([{type:"close"}])}
var c=this;"open"==this.readyState?(b("transport open - closing"),a()):(b("transport not open - deferring close"),this.once("open",a))};h.prototype.write=function(a){var b=this;this.writable=!1;var c=function(){b.writable=!0;b.emit("drain")},b=this;d.encodePayload(a,this.supportsBinary,function(a){b.doWrite(a,c)})};h.prototype.uri=function(){var a=this.query||{},b=this.secure?"https":"http",d="";!1!==this.timestampRequests&&(a[this.timestampParam]=c());this.supportsBinary||a.sid||(a.b64=1);a=g.encode(a);
this.port&&("https"==b&&443!=this.port||"http"==b&&80!=this.port)&&(d=":"+this.port);a.length&&(a="?"+a);var k=-1!==this.hostname.indexOf(":");return b+"://"+(k?"["+this.hostname+"]":this.hostname)+d+this.path+a}},{"../transport":19,"component-inherit":13,debug:14,"engine.io-parser":27,parseqs:37,"xmlhttprequest-ssl":25,yeast:45}],24:[function(a,f,e){(function(e){function n(a){a&&a.forceBase64&&(this.supportsBinary=!1);this.perMessageDeflate=a.perMessageDeflate;g.call(this,a)}var g=a("../transport"),
d=a("engine.io-parser"),c=a("parseqs"),b=a("component-inherit"),k=a("yeast"),p=a("debug")("engine.io-client:websocket"),r=e.WebSocket||e.MozWebSocket,q=r;if(!q&&"undefined"===typeof window)try{q=a("ws")}catch(t){}f.exports=n;b(n,g);n.prototype.name="websocket";n.prototype.supportsBinary=!0;n.prototype.doOpen=function(){if(this.check()){var a=this.uri(),b={agent:this.agent,perMessageDeflate:this.perMessageDeflate};b.pfx=this.pfx;b.key=this.key;b.passphrase=this.passphrase;b.cert=this.cert;b.ca=this.ca;
b.ciphers=this.ciphers;b.rejectUnauthorized=this.rejectUnauthorized;this.extraHeaders&&(b.headers=this.extraHeaders);this.ws=r?new q(a):new q(a,void 0,b);void 0===this.ws.binaryType&&(this.supportsBinary=!1);this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="buffer"):this.ws.binaryType="arraybuffer";this.addEventListeners()}};n.prototype.addEventListeners=function(){var a=this;this.ws.onopen=function(){a.onOpen()};this.ws.onclose=function(){a.onClose()};this.ws.onmessage=
function(b){a.onData(b.data)};this.ws.onerror=function(b){a.onError("websocket error",b)}};"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(n.prototype.onData=function(a){var b=this;setTimeout(function(){g.prototype.onData.call(b,a)},0)});n.prototype.write=function(a){function b(){c.emit("flush");setTimeout(function(){c.writable=!0;c.emit("drain")},0)}var c=this;this.writable=!1;for(var k=a.length,g=0,q=k;g<q;g++)(function(a){d.encodePacket(a,c.supportsBinary,function(d){if(!r){var g=
{};a.options&&(g.compress=a.options.compress);c.perMessageDeflate&&("string"==typeof d?e.Buffer.byteLength(d):d.length)<c.perMessageDeflate.threshold&&(g.compress=!1)}try{r?c.ws.send(d):c.ws.send(d,g)}catch(E){p("websocket closed before onclose event")}--k||b()})})(a[g])};n.prototype.onClose=function(){g.prototype.onClose.call(this)};n.prototype.doClose=function(){"undefined"!==typeof this.ws&&this.ws.close()};n.prototype.uri=function(){var a=this.query||{},b=this.secure?"wss":"ws",d="";this.port&&
("wss"==b&&443!=this.port||"ws"==b&&80!=this.port)&&(d=":"+this.port);this.timestampRequests&&(a[this.timestampParam]=k());this.supportsBinary||(a.b64=1);a=c.encode(a);a.length&&(a="?"+a);var g=-1!==this.hostname.indexOf(":");return b+"://"+(g?"["+this.hostname+"]":this.hostname)+d+this.path+a};n.prototype.check=function(){return!!q&&!("__initialize"in q&&this.name===n.prototype.name)}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:
{})},{"../transport":19,"component-inherit":13,debug:14,"engine.io-parser":27,parseqs:37,ws:void 0,yeast:45}],25:[function(a,f,e){var h=a("has-cors");f.exports=function(a){var g=a.xdomain,d=a.xscheme;a=a.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!g||h))return new XMLHttpRequest}catch(c){}try{if("undefined"!=typeof XDomainRequest&&!d&&a)return new XDomainRequest}catch(c){}if(!g)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(c){}}},{"has-cors":31}],26:[function(a,f,e){function h(a){if(a){for(var g in h.prototype)a[g]=
h.prototype[g];return a}}f.exports=h;h.prototype.on=h.prototype.addEventListener=function(a,g){this._callbacks=this._callbacks||{};(this._callbacks[a]=this._callbacks[a]||[]).push(g);return this};h.prototype.once=function(a,g){function d(){c.off(a,d);g.apply(this,arguments)}var c=this;this._callbacks=this._callbacks||{};d.fn=g;this.on(a,d);return this};h.prototype.off=h.prototype.removeListener=h.prototype.removeAllListeners=h.prototype.removeEventListener=function(a,g){this._callbacks=this._callbacks||
{};if(0==arguments.length)return this._callbacks={},this;var d=this._callbacks[a];if(!d)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(var c,b=0;b<d.length;b++)if(c=d[b],c===g||c.fn===g){d.splice(b,1);break}return this};h.prototype.emit=function(a){this._callbacks=this._callbacks||{};var g=[].slice.call(arguments,1),d=this._callbacks[a];if(d)for(var d=d.slice(0),c=0,b=d.length;c<b;++c)d[c].apply(this,g);return this};h.prototype.listeners=function(a){this._callbacks=this._callbacks||
{};return this._callbacks[a]||[]};h.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],27:[function(a,f,e){(function(f){function n(a,b,c){if(!b)return e.encodeBase64Packet(a,c);var d=new FileReader;d.onload=function(){a.data=d.result;e.encodePacket(a,b,!0,c)};return d.readAsArrayBuffer(a.data)}function g(a,b,c){var d=Array(a.length);c=p(a.length,c);for(var k=function(a,c,k){b(c,function(b,c){d[a]=c;k(b,d)})},g=0;g<a.length;g++)k(g,a[g],c)}var d=a("./keys"),c=a("has-binary"),
b=a("arraybuffer.slice"),k=a("base64-arraybuffer"),p=a("after"),r=a("utf8"),q=navigator.userAgent.match(/Android/i),h=/PhantomJS/i.test(navigator.userAgent),w=q||h;e.protocol=3;var x=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},v=d(x),u={type:"error",data:"parser error"},y=a("blob");e.encodePacket=function(a,b,c,d){"function"==typeof b&&(d=b,b=!1);"function"==typeof c&&(d=c,c=null);var k=void 0===a.data?void 0:a.data.buffer||a.data;if(f.ArrayBuffer&&k instanceof ArrayBuffer){if(b){c=
a.data;b=new Uint8Array(c);c=new Uint8Array(1+c.byteLength);c[0]=x[a.type];for(a=0;a<b.length;a++)c[a+1]=b[a];a=d(c.buffer)}else a=e.encodeBase64Packet(a,d);return a}if(y&&k instanceof f.Blob)return b?w?a=n(a,b,d):(b=new Uint8Array(1),b[0]=x[a.type],a=new y([b.buffer,a.data]),a=d(a)):a=e.encodeBase64Packet(a,d),a;if(k&&k.base64)return d("b"+e.packets[a.type]+a.data.data);b=x[a.type];void 0!==a.data&&(b+=c?r.encode(String(a.data)):String(a.data));return d(""+b)};e.encodeBase64Packet=function(a,b){var c=
"b"+e.packets[a.type];if(y&&a.data instanceof f.Blob){var d=new FileReader;d.onload=function(){var a=d.result.split(",")[1];b(c+a)};return d.readAsDataURL(a.data)}var k;try{k=String.fromCharCode.apply(null,new Uint8Array(a.data))}catch(H){k=new Uint8Array(a.data);for(var g=Array(k.length),p=0;p<k.length;p++)g[p]=k[p];k=String.fromCharCode.apply(null,g)}c+=f.btoa(k);return b(c)};e.decodePacket=function(a,c,d){if("string"==typeof a||void 0===a){if("b"==a.charAt(0))return e.decodeBase64Packet(a.substr(1),
c);if(d)try{a=r.decode(a)}catch(E){return u}d=a.charAt(0);return Number(d)==d&&v[d]?1<a.length?{type:v[d],data:a.substring(1)}:{type:v[d]}:u}d=(new Uint8Array(a))[0];a=b(a,1);y&&"blob"===c&&(a=new y([a]));return{type:v[d],data:a}};e.decodeBase64Packet=function(a,b){var c=v[a.charAt(0)];if(!f.ArrayBuffer)return{type:c,data:{base64:!0,data:a.substr(1)}};var d=k.decode(a.substr(1));"blob"===b&&y&&(d=new y([d]));return{type:c,data:d}};e.encodePayload=function(a,b,d){"function"==typeof b&&(d=b,b=null);
var k=c(a);if(b&&k)return y&&!w?e.encodePayloadAsBlob(a,d):e.encodePayloadAsArrayBuffer(a,d);if(!a.length)return d("0:");g(a,function(a,c){e.encodePacket(a,k?b:!1,!0,function(a){c(null,a.length+":"+a)})},function(a,b){return d(b.join(""))})};e.decodePayload=function(a,b,c){if("string"!=typeof a)return e.decodePayloadAsBinary(a,b,c);"function"===typeof b&&(c=b,b=null);var d;if(""==a)return c(u,0,1);d="";for(var k,g,p=0,q=a.length;p<q;p++)if(g=a.charAt(p),":"!=g)d+=g;else{if(""==d||d!=(k=Number(d)))return c(u,
0,1);g=a.substr(p+1,k);if(d!=g.length)return c(u,0,1);if(g.length){d=e.decodePacket(g,b,!0);if(u.type==d.type&&u.data==d.data)return c(u,0,1);if(!1===c(d,p+k,q))return}p+=k;d=""}if(""!=d)return c(u,0,1)};e.encodePayloadAsArrayBuffer=function(a,b){if(!a.length)return b(new ArrayBuffer(0));g(a,function(a,b){e.encodePacket(a,!0,!0,function(a){return b(null,a)})},function(a,c){var d=c.reduce(function(a,b){var c;c="string"===typeof b?b.length:b.byteLength;return a+c.toString().length+c+2},0),k=new Uint8Array(d),
g=0;c.forEach(function(a){var b="string"===typeof a,c=a;if(b){for(var c=new Uint8Array(a.length),d=0;d<a.length;d++)c[d]=a.charCodeAt(d);c=c.buffer}b?k[g++]=0:k[g++]=1;a=c.byteLength.toString();for(d=0;d<a.length;d++)k[g++]=parseInt(a[d]);k[g++]=255;c=new Uint8Array(c);for(d=0;d<c.length;d++)k[g++]=c[d]});return b(k.buffer)})};e.encodePayloadAsBlob=function(a,b){g(a,function(a,b){e.encodePacket(a,!0,!0,function(a){var c=new Uint8Array(1);c[0]=1;if("string"===typeof a){for(var d=new Uint8Array(a.length),
k=0;k<a.length;k++)d[k]=a.charCodeAt(k);a=d.buffer;c[0]=0}for(var d=(a instanceof ArrayBuffer?a.byteLength:a.size).toString(),g=new Uint8Array(d.length+1),k=0;k<d.length;k++)g[k]=parseInt(d[k]);g[d.length]=255;y&&(a=new y([c.buffer,g.buffer,a]),b(null,a))})},function(a,c){return b(new y(c))})};e.decodePayloadAsBinary=function(a,c,d){"function"===typeof c&&(d=c,c=null);for(var k=[],g=!1;0<a.byteLength;){for(var p=new Uint8Array(a),q=0===p[0],n="",f=1;255!=p[f];f++){if(310<n.length){g=!0;break}n+=p[f]}if(g)return d(u,
0,1);a=b(a,2+n.length);n=parseInt(n);p=b(a,0,n);if(q)try{p=String.fromCharCode.apply(null,new Uint8Array(p))}catch(N){for(q=new Uint8Array(p),p="",f=0;f<q.length;f++)p+=String.fromCharCode(q[f])}k.push(p);a=b(a,n)}var r=k.length;k.forEach(function(a,b){d(e.decodePacket(a,c,!0),b,r)})}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"./keys":28,after:6,"arraybuffer.slice":7,"base64-arraybuffer":9,blob:10,"has-binary":29,utf8:44}],
28:[function(a,f,e){f.exports=Object.keys||function(a){var e=[],g=Object.prototype.hasOwnProperty,d;for(d in a)g.call(a,d)&&e.push(d);return e}},{}],29:[function(a,f,e){(function(e){var n=a("isarray");f.exports=function(a){function d(a){if(!a)return!1;if(e.Buffer&&e.Buffer.isBuffer(a)||e.ArrayBuffer&&a instanceof ArrayBuffer||e.Blob&&a instanceof Blob||e.File&&a instanceof File)return!0;if(n(a))for(var b=0;b<a.length;b++){if(d(a[b]))return!0}else if(a&&"object"==typeof a)for(b in a.toJSON&&(a=a.toJSON()),
a)if(Object.prototype.hasOwnProperty.call(a,b)&&d(a[b]))return!0;return!1}return d(a)}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{isarray:33}],30:[function(a,f,e){(function(e){var n=a("isarray");f.exports=function(a){function d(a){if(!a)return!1;if(e.Buffer&&e.Buffer.isBuffer&&e.Buffer.isBuffer(a)||e.ArrayBuffer&&a instanceof ArrayBuffer||e.Blob&&a instanceof Blob||e.File&&a instanceof File)return!0;if(n(a))for(var b=0;b<
a.length;b++){if(d(a[b]))return!0}else if(a&&"object"==typeof a)for(b in a.toJSON&&"function"==typeof a.toJSON&&(a=a.toJSON()),a)if(Object.prototype.hasOwnProperty.call(a,b)&&d(a[b]))return!0;return!1}return d(a)}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{isarray:33}],31:[function(a,f,e){try{f.exports="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(h){f.exports=!1}},{}],32:[function(a,f,
e){var h=[].indexOf;f.exports=function(a,g){if(h)return a.indexOf(g);for(var d=0;d<a.length;++d)if(a[d]===g)return d;return-1}},{}],33:[function(a,f,e){f.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],34:[function(a,f,e){(function(a){(function(){function n(a,b){function d(a){if(d[a]!==J)return d[a];var c;if("bug-string-char-index"==a)c=!1;else if("json"==a)c=d("json-stringify")&&d("json-parse");else{var g;if("json-stringify"==a){c=b.stringify;var q=
"function"==typeof c&&I;if(q){(g=function(){return 1}).toJSON=g;try{q="0"===c(0)&&"0"===c(new k)&&'""'==c(new p)&&c(w)===J&&c(J)===J&&c()===J&&"1"===c(g)&&"[1]"==c([g])&&"[null]"==c([J])&&"null"==c(null)&&"[null,null,null]"==c([J,w,null])&&'{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'==c({a:[g,!0,!1,null,"\x00\b\n\f\r\t"]})&&"1"===c(null,g)&&"[\n 1,\n 2\n]"==c([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==c(new e(-864E13))&&'"+275760-09-13T00:00:00.000Z"'==c(new e(864E13))&&'"-000001-01-01T00:00:00.000Z"'==
c(new e(-621987552E5))&&'"1969-12-31T23:59:59.999Z"'==c(new e(-1))}catch(Y){q=!1}}c=q}if("json-parse"==a){c=b.parse;if("function"==typeof c)try{if(0===c("0")&&!c(!1)){g=c('{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}');var n=5==g.a.length&&1===g.a[0];if(n){try{n=!c('"\t"')}catch(Y){}if(n)try{n=1!==c("01")}catch(Y){}if(n)try{n=1!==c("1.")}catch(Y){}}}}catch(Y){n=!1}c=n}}return d[a]=!!c}a||(a=c.Object());b||(b=c.Object());var k=a.Number||c.Number,p=a.String||c.String,q=a.Object||c.Object,e=a.Date||
c.Date,f=a.SyntaxError||c.SyntaxError,r=a.TypeError||c.TypeError,h=a.Math||c.Math,t=a.JSON||c.JSON;"object"==typeof t&&t&&(b.stringify=t.stringify,b.parse=t.parse);var q=q.prototype,w=q.toString,C,H,J,I=new e(-0xc782b5b800cec);try{I=-109252==I.getUTCFullYear()&&0===I.getUTCMonth()&&1===I.getUTCDate()&&10==I.getUTCHours()&&37==I.getUTCMinutes()&&6==I.getUTCSeconds()&&708==I.getUTCMilliseconds()}catch(ba){}if(!d("json")){var N=d("bug-string-char-index");if(!I)var O=h.floor,V=[0,31,59,90,120,151,181,
212,243,273,304,334],R=function(a,b){return V[b]+365*(a-1970)+O((a-1969+(b=+(1<b)))/4)-O((a-1901+b)/100)+O((a-1601+b)/400)};(C=q.hasOwnProperty)||(C=function(a){var b={},c;(b.__proto__=null,b.__proto__={toString:1},b).toString!=w?C=function(a){var b=this.__proto__;a=a in(this.__proto__=null,this);this.__proto__=b;return a}:(c=b.constructor,C=function(a){var b=(this.constructor||c).prototype;return a in this&&!(a in b&&this[a]===b[a])});b=null;return C.call(this,a)});H=function(a,b){var c=0,d,k,p;
(d=function(){this.valueOf=0}).prototype.valueOf=0;k=new d;for(p in k)C.call(k,p)&&c++;d=k=null;c?H=2==c?function(a,b){var c={},d="[object Function]"==w.call(a),k;for(k in a)d&&"prototype"==k||C.call(c,k)||!(c[k]=1)||!C.call(a,k)||b(k)}:function(a,b){var c="[object Function]"==w.call(a),d,k;for(d in a)c&&"prototype"==d||!C.call(a,d)||(k="constructor"===d)||b(d);(k||C.call(a,d="constructor"))&&b(d)}:(k="valueOf toString toLocaleString propertyIsEnumerable isPrototypeOf hasOwnProperty constructor".split(" "),
H=function(a,b){var c="[object Function]"==w.call(a),d,p=!c&&"function"!=typeof a.constructor&&g[typeof a.hasOwnProperty]&&a.hasOwnProperty||C;for(d in a)c&&"prototype"==d||!p.call(a,d)||b(d);for(c=k.length;d=k[--c];p.call(a,d)&&b(d));});return H(a,b)};if(!d("json-stringify")){var P={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},K=function(a,b){return("000000"+(b||0)).slice(-a)},Q=function(a){for(var b='"',c=0,d=a.length,k=!N||10<d,g=k&&(N?a.split(""):a);c<d;c++){var p=a.charCodeAt(c);
switch(p){case 8:case 9:case 10:case 12:case 13:case 34:case 92:b+=P[p];break;default:b=32>p?b+("\\u00"+K(2,p.toString(16))):b+(k?g[c]:a.charAt(c))}}return b+'"'},U=function(a,b,c,d,k,g,p){var q,e,n,f,t,h,x,u,v;try{q=b[a]}catch(ca){}if("object"==typeof q&&q)if(e=w.call(q),"[object Date]"!=e||C.call(q,"toJSON"))"function"==typeof q.toJSON&&("[object Number]"!=e&&"[object String]"!=e&&"[object Array]"!=e||C.call(q,"toJSON"))&&(q=q.toJSON(a));else if(q>-1/0&&q<1/0){if(R){f=O(q/864E5);for(e=O(f/365.2425)+
1970-1;R(e+1,0)<=f;e++);for(n=O((f-R(e,0))/30.42);R(e,n+1)<=f;n++);f=1+f-R(e,n);t=(q%864E5+864E5)%864E5;h=O(t/36E5)%24;x=O(t/6E4)%60;u=O(t/1E3)%60;t%=1E3}else e=q.getUTCFullYear(),n=q.getUTCMonth(),f=q.getUTCDate(),h=q.getUTCHours(),x=q.getUTCMinutes(),u=q.getUTCSeconds(),t=q.getUTCMilliseconds();q=(0>=e||1E4<=e?(0>e?"-":"+")+K(6,0>e?-e:e):K(4,e))+"-"+K(2,n+1)+"-"+K(2,f)+"T"+K(2,h)+":"+K(2,x)+":"+K(2,u)+"."+K(3,t)+"Z"}else q=null;c&&(q=c.call(b,a,q));if(null===q)return"null";e=w.call(q);if("[object Boolean]"==
e)return""+q;if("[object Number]"==e)return q>-1/0&&q<1/0?""+q:"null";if("[object String]"==e)return Q(""+q);if("object"==typeof q){for(a=p.length;a--;)if(p[a]===q)throw r();p.push(q);v=[];b=g;g+=k;if("[object Array]"==e){n=0;for(a=q.length;n<a;n++)e=U(n,q,c,d,k,g,p),v.push(e===J?"null":e);a=v.length?k?"[\n"+g+v.join(",\n"+g)+"\n"+b+"]":"["+v.join(",")+"]":"[]"}else H(d||q,function(a){var b=U(a,q,c,d,k,g,p);b!==J&&v.push(Q(a)+":"+(k?" ":"")+b)}),a=v.length?k?"{\n"+g+v.join(",\n"+g)+"\n"+b+"}":"{"+
v.join(",")+"}":"{}";p.pop();return a}};b.stringify=function(a,b,c){var d,k,p,q;if(g[typeof b]&&b)if("[object Function]"==(q=w.call(b)))k=b;else if("[object Array]"==q){p={};for(var e=0,n=b.length,f;e<n;f=b[e++],(q=w.call(f),"[object String]"==q||"[object Number]"==q)&&(p[f]=1));}if(c)if("[object Number]"==(q=w.call(c))){if(0<(c-=c%1))for(d="",10<c&&(c=10);d.length<c;d+=" ");}else"[object String]"==q&&(d=10>=c.length?c:c.slice(0,10));return U("",(f={},f[""]=a,f),k,p,d,"",[])}}if(!d("json-parse")){var L=
p.fromCharCode,T={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},D,W,M=function(){D=W=null;throw f();},S=function(){for(var a=W,b=a.length,c,d,k,g,p;D<b;)switch(p=a.charCodeAt(D),p){case 9:case 10:case 13:case 32:D++;break;case 123:case 125:case 91:case 93:case 58:case 44:return c=N?a.charAt(D):a[D],D++,c;case 34:c="@";for(D++;D<b;)if(p=a.charCodeAt(D),32>p)M();else if(92==p)switch(p=a.charCodeAt(++D),p){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:c+=T[p];
D++;break;case 117:d=++D;for(k=D+4;D<k;D++)p=a.charCodeAt(D),48<=p&&57>=p||97<=p&&102>=p||65<=p&&70>=p||M();c+=L("0x"+a.slice(d,D));break;default:M()}else{if(34==p)break;p=a.charCodeAt(D);for(d=D;32<=p&&92!=p&&34!=p;)p=a.charCodeAt(++D);c+=a.slice(d,D)}if(34==a.charCodeAt(D))return D++,c;M();default:d=D;45==p&&(g=!0,p=a.charCodeAt(++D));if(48<=p&&57>=p){for(48==p&&(p=a.charCodeAt(D+1),48<=p&&57>=p)&&M();D<b&&(p=a.charCodeAt(D),48<=p&&57>=p);D++);if(46==a.charCodeAt(D)){for(k=++D;k<b&&(p=a.charCodeAt(k),
48<=p&&57>=p);k++);k==D&&M();D=k}p=a.charCodeAt(D);if(101==p||69==p){p=a.charCodeAt(++D);43!=p&&45!=p||D++;for(k=D;k<b&&(p=a.charCodeAt(k),48<=p&&57>=p);k++);k==D&&M();D=k}return+a.slice(d,D)}g&&M();if("true"==a.slice(D,D+4))return D+=4,!0;if("false"==a.slice(D,D+5))return D+=5,!1;if("null"==a.slice(D,D+4))return D+=4,null;M()}return"$"},X=function(a){var b,c;"$"==a&&M();if("string"==typeof a){if("@"==(N?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(b=[];;c||(c=!0)){a=S();if("]"==a)break;c&&
(","==a?(a=S(),"]"==a&&M()):M());","==a&&M();b.push(X(a))}return b}if("{"==a){for(b={};;c||(c=!0)){a=S();if("}"==a)break;c&&(","==a?(a=S(),"}"==a&&M()):M());","!=a&&"string"==typeof a&&"@"==(N?a.charAt(0):a[0])&&":"==S()||M();b[a.slice(1)]=X(S())}return b}M()}return a},aa=function(a,b,c){c=Z(a,b,c);c===J?delete a[b]:a[b]=c},Z=function(a,b,c){var d=a[b],k;if("object"==typeof d&&d)if("[object Array]"==w.call(d))for(k=d.length;k--;)aa(d,k,c);else H(d,function(a){aa(d,a,c)});return c.call(a,b,d)};b.parse=
function(a,b){var c,d;D=0;W=""+a;c=X(S());"$"!=S()&&M();D=W=null;return b&&"[object Function]"==w.call(b)?Z((d={},d[""]=c,d),"",b):c}}}b.runInContext=n;return b}var g={"function":!0,object:!0},d=g[typeof e]&&e&&!e.nodeType&&e,c=g[typeof window]&&window||this,b=d&&g[typeof f]&&f&&!f.nodeType&&"object"==typeof a&&a;!b||b.global!==b&&b.window!==b&&b.self!==b||(c=b);if(d)n(c,d);else{var k=c.JSON,p=c.JSON3,r=!1,q=n(c,c.JSON3={noConflict:function(){r||(r=!0,c.JSON=k,c.JSON3=p,k=p=null);return q}});c.JSON=
{parse:q.parse,stringify:q.stringify}}}).call(this)}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{}],35:[function(a,f,e){function h(a){a=""+a;if(!(1E4<a.length)&&(a=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a))){var d=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case "years":case "year":case "yrs":case "yr":case "y":return 315576E5*d;case "days":case "day":case "d":return 864E5*
d;case "hours":case "hour":case "hrs":case "hr":case "h":return 36E5*d;case "minutes":case "minute":case "mins":case "min":case "m":return 6E4*d;case "seconds":case "second":case "secs":case "sec":case "s":return 1E3*d;case "milliseconds":case "millisecond":case "msecs":case "msec":case "ms":return d}}}function n(a,d,c){if(!(a<d))return a<1.5*d?Math.floor(a/d)+" "+c:Math.ceil(a/d)+" "+c+"s"}f.exports=function(a,d){d=d||{};return"string"==typeof a?h(a):d["long"]?n(a,864E5,"day")||n(a,36E5,"hour")||
n(a,6E4,"minute")||n(a,1E3,"second")||a+" ms":864E5<=a?Math.round(a/864E5)+"d":36E5<=a?Math.round(a/36E5)+"h":6E4<=a?Math.round(a/6E4)+"m":1E3<=a?Math.round(a/1E3)+"s":a+"ms"}},{}],36:[function(a,f,e){(function(a){var e=/^[\],:{}\s]*$/,g=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,d=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,c=/(?:^|:|,)(?:\s*\[)+/g,b=/^\s+/,k=/\s+$/;f.exports=function(p){if("string"!=typeof p||!p)return null;p=p.replace(b,"").replace(k,"");if(a.JSON&&JSON.parse)return JSON.parse(p);
if(e.test(p.replace(g,"@").replace(d,"]").replace(c,"")))return(new Function("return "+p))()}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{}],37:[function(a,f,e){e.encode=function(a){var e="",g;for(g in a)a.hasOwnProperty(g)&&(e.length&&(e+="&"),e+=encodeURIComponent(g)+"="+encodeURIComponent(a[g]));return e};e.decode=function(a){var e={};a=a.split("&");for(var g=0,d=a.length;g<d;g++){var c=a[g].split("=");e[decodeURIComponent(c[0])]=
decodeURIComponent(c[1])}return e}},{}],38:[function(a,f,e){var h=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");f.exports=function(a){var d=a,c=a.indexOf("["),b=a.indexOf("]");-1!=c&&-1!=b&&(a=a.substring(0,
c)+a.substring(c,b).replace(/:/g,";")+a.substring(b,a.length));a=h.exec(a||"");for(var k={},g=14;g--;)k[n[g]]=a[g]||"";-1!=c&&-1!=b&&(k.source=d,k.host=k.host.substring(1,k.host.length-1).replace(/;/g,":"),k.authority=k.authority.replace("[","").replace("]","").replace(/;/g,":"),k.ipv6uri=!0);return k}},{}],39:[function(a,f,e){(function(f){var n=a("isarray"),g=a("./is-buffer");e.deconstructPacket=function(a){function c(a){if(!a)return a;if(g(a)){var d={_placeholder:!0,num:b.length};b.push(a);return d}if(n(a)){for(var d=
Array(a.length),k=0;k<a.length;k++)d[k]=c(a[k]);return d}if("object"==typeof a&&!(a instanceof Date)){d={};for(k in a)d[k]=c(a[k]);return d}return a}var b=[];a.data=c(a.data);a.attachments=b.length;return{packet:a,buffers:b}};e.reconstructPacket=function(a,c){function b(a){if(a&&a._placeholder)return c[a.num];if(n(a))for(var d=0;d<a.length;d++)a[d]=b(a[d]);else if(a&&"object"==typeof a)for(d in a)a[d]=b(a[d]);return a}a.data=b(a.data);a.attachments=void 0;return a};e.removeBlobs=function(a,c){function b(a,
k,e){if(!a)return a;if(f.Blob&&a instanceof Blob||f.File&&a instanceof File){d++;var q=new FileReader;q.onload=function(){e?e[k]=this.result:p=this.result;--d||c(p)};q.readAsArrayBuffer(a)}else if(n(a))for(q=0;q<a.length;q++)b(a[q],q,a);else if(a&&"object"==typeof a&&!g(a))for(q in a)b(a[q],q,a)}var d=0,p=a;b(p);d||c(p)}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"./is-buffer":41,isarray:33}],40:[function(a,f,e){function h(){}
function n(a){var c,d=!1;c=""+a.type;if(e.BINARY_EVENT==a.type||e.BINARY_ACK==a.type)c+=a.attachments,c+="-";a.nsp&&"/"!=a.nsp&&(d=!0,c+=a.nsp);null!=a.id&&(d&&(c+=",",d=!1),c+=a.id);null!=a.data&&(d&&(c+=","),c+=k.stringify(a.data));b("encoded %j as %s",a,c);return c}function g(a,b){p.removeBlobs(a,function(a){var c=p.deconstructPacket(a);a=n(c.packet);c=c.buffers;c.unshift(a);b(c)})}function d(){this.reconstructor=null}function c(a){this.reconPack=a;this.buffers=[]}var b=a("debug")("socket.io-parser"),
k=a("json3");a("isarray");f=a("component-emitter");var p=a("./binary"),r=a("./is-buffer");e.protocol=4;e.types="CONNECT DISCONNECT EVENT ACK ERROR BINARY_EVENT BINARY_ACK".split(" ");e.CONNECT=0;e.DISCONNECT=1;e.EVENT=2;e.ACK=3;e.ERROR=4;e.BINARY_EVENT=5;e.BINARY_ACK=6;e.Encoder=h;e.Decoder=d;h.prototype.encode=function(a,c){b("encoding packet %j",a);if(e.BINARY_EVENT==a.type||e.BINARY_ACK==a.type)g(a,c);else{var d=n(a);c([d])}};f(d.prototype);d.prototype.add=function(a){if("string"==typeof a){a:{var d=
{},g=0;d.type=Number(a.charAt(0));if(null==e.types[d.type])a={type:e.ERROR,data:"parser error"};else{if(e.BINARY_EVENT==d.type||e.BINARY_ACK==d.type){for(var p="";"-"!=a.charAt(++g)&&(p+=a.charAt(g),g!=a.length););if(p!=Number(p)||"-"!=a.charAt(g))throw Error("Illegal attachments");d.attachments=Number(p)}if("/"==a.charAt(g+1))for(d.nsp="";++g;){p=a.charAt(g);if(","==p)break;d.nsp+=p;if(g==a.length)break}else d.nsp="/";p=a.charAt(g+1);if(""!==p&&Number(p)==p){for(d.id="";++g;){p=a.charAt(g);if(null==
p||Number(p)!=p){--g;break}d.id+=a.charAt(g);if(g==a.length)break}d.id=Number(d.id)}if(a.charAt(++g))try{d.data=k.parse(a.substr(g))}catch(v){a={type:e.ERROR,data:"parser error"};break a}b("decoded %s as %j",a,d);a=d}}e.BINARY_EVENT==a.type||e.BINARY_ACK==a.type?(this.reconstructor=new c(a),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",a)):this.emit("decoded",a)}else if(r(a)||a.base64)if(this.reconstructor){if(a=this.reconstructor.takeBinaryData(a))this.reconstructor=null,this.emit("decoded",
a)}else throw Error("got binary data when not reconstructing a packet");else throw Error("Unknown type: "+a);};d.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};c.prototype.takeBinaryData=function(a){this.buffers.push(a);return this.buffers.length==this.reconPack.attachments?(a=p.reconstructPacket(this.reconPack,this.buffers),this.finishedReconstruction(),a):null};c.prototype.finishedReconstruction=function(){this.reconPack=null;this.buffers=[]}},{"./binary":39,
"./is-buffer":41,"component-emitter":42,debug:14,isarray:33,json3:34}],41:[function(a,f,e){(function(a){f.exports=function(e){return a.Buffer&&a.Buffer.isBuffer(e)||a.ArrayBuffer&&e instanceof ArrayBuffer}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{}],42:[function(a,f,e){arguments[4][26][0].apply(e,arguments)},{dup:26}],43:[function(a,f,e){f.exports=function(a,e){for(var g=[],d=(e=e||0)||0;d<a.length;d++)g[d-e]=a[d];return g}},
{}],44:[function(a,f,e){(function(a){(function(n){function g(a){for(var b=[],c=0,d=a.length,k,g;c<d;)k=a.charCodeAt(c++),55296<=k&&56319>=k&&c<d?(g=a.charCodeAt(c++),56320==(g&64512)?b.push(((k&1023)<<10)+(g&1023)+65536):(b.push(k),c--)):b.push(k);return b}function d(a){if(55296<=a&&57343>=a)throw Error("Lone surrogate U+"+a.toString(16).toUpperCase()+" is not a scalar value");}function c(){if(x>=w)throw Error("Invalid byte index");var a=h[x]&255;x++;if(128==(a&192))return a&63;throw Error("Invalid continuation byte");
}function b(){var a,b,k,g;if(x>w)throw Error("Invalid byte index");if(x==w)return!1;a=h[x]&255;x++;if(0==(a&128))return a;if(192==(a&224)){b=c();a=(a&31)<<6|b;if(128<=a)return a;throw Error("Invalid continuation byte");}if(224==(a&240)){b=c();k=c();a=(a&15)<<12|b<<6|k;if(2048<=a)return d(a),a;throw Error("Invalid continuation byte");}if(240==(a&248)&&(b=c(),k=c(),g=c(),a=(a&15)<<18|b<<12|k<<6|g,65536<=a&&1114111>=a))return a;throw Error("Invalid UTF-8 detected");}var k="object"==typeof e&&e,p="object"==
typeof f&&f&&f.exports==k&&f,r="object"==typeof a&&a;if(r.global===r||r.window===r)n=r;var q=String.fromCharCode,h,w,x,r={version:"2.0.0",encode:function(a){a=g(a);for(var b=a.length,c=-1,k,p="";++c<b;){k=a[c];if(0==(k&4294967168))k=q(k);else{var e="";0==(k&4294965248)?e=q(k>>6&31|192):0==(k&4294901760)?(d(k),e=q(k>>12&15|224),e+=q(k>>6&63|128)):0==(k&4292870144)&&(e=q(k>>18&7|240),e+=q(k>>12&63|128),e+=q(k>>6&63|128));k=e+=q(k&63|128)}p+=k}return p},decode:function(a){h=g(a);w=h.length;x=0;a=[];
for(var c;!1!==(c=b());)a.push(c);c=a.length;for(var d=-1,k,p="";++d<c;)k=a[d],65535<k&&(k-=65536,p+=q(k>>>10&1023|55296),k=56320|k&1023),p+=q(k);return p}};if(k&&!k.nodeType)if(p)p.exports=r;else{n={}.hasOwnProperty;for(var v in r)n.call(r,v)&&(k[v]=r[v])}else n.utf8=r})(this)}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{}],45:[function(a,f,e){function h(a){var b="";do b=g[a%64]+b,a=Math.floor(a/64);while(0<a);return b}function n(){var a=
h(+new Date);return a!==k?(c=0,k=a):a+"."+h(c++)}for(var g="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),d={},c=0,b=0,k;64>b;b++)d[g[b]]=b;n.encode=h;n.decode=function(a){var c=0;for(b=0;b<a.length;b++)c=64*c+d[a.charAt(b)];return c};f.exports=n},{}]},{},[1])(1)});/*
: http://creativecommons.org/publicdomain/zero/1.0/
 pixi.js - v4.4.1
 Compiled Tue, 28 Feb 2017 13:42:01 UTC

 pixi.js is licensed under the MIT License.
 http://www.opensource.org/licenses/mit-license
 https://mths.be/punycode v1.4.1 by @mathias */
(function(m){"object"===typeof exports&&"undefined"!==typeof module?module.exports=m():"function"===typeof define&&define.amd?define([],m):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).PIXI=m()})(function(){return function a(f,e,h){function n(c,b){if(!e[c]){if(!f[c]){var d="function"==typeof require&&require;if(!b&&d)return d(c,!0);if(g)return g(c,!0);d=Error("Cannot find module '"+c+"'");throw d.code="MODULE_NOT_FOUND",d;}d=e[c]={exports:{}};
f[c][0].call(d.exports,function(a){var b=f[c][1][a];return n(b?b:a)},d,d.exports,a,f,e,h)}return e[c].exports}for(var g="function"==typeof require&&require,d=0;d<h.length;d++)n(h[d]);return n}({1:[function(a,f,e){function h(a){var d=32;(a&=-a)&&d--;a&65535&&(d-=16);a&16711935&&(d-=8);a&252645135&&(d-=4);a&858993459&&(d-=2);a&1431655765&&--d;return d}"use restrict";e.INT_BITS=32;e.INT_MAX=2147483647;e.INT_MIN=-2147483648;e.sign=function(a){return(0<a)-(0>a)};e.abs=function(a){var d=a>>31;return(a^
d)-d};e.min=function(a,d){return d^(a^d)&-(a<d)};e.max=function(a,d){return a^(a^d)&-(a<d)};e.isPow2=function(a){return!(a&a-1)&&!!a};e.log2=function(a){var d,c;d=(65535<a)<<4;a>>>=d;c=(255<a)<<3;a>>>=c;d|=c;c=(15<a)<<2;a>>>=c;d|=c;c=(3<a)<<1;return d|c|a>>>c>>1};e.log10=function(a){return 1E9<=a?9:1E8<=a?8:1E7<=a?7:1E6<=a?6:1E5<=a?5:1E4<=a?4:1E3<=a?3:100<=a?2:10<=a?1:0};e.popCount=function(a){a-=a>>>1&1431655765;a=(a&858993459)+(a>>>2&858993459);return 16843009*(a+(a>>>4)&252645135)>>>24};e.countTrailingZeros=
h;e.nextPow2=function(a){a+=0===a;--a;a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;return(a|a>>>16)+1};e.prevPow2=function(a){a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;a|=a>>>16;return a-(a>>>1)};e.parity=function(a){a^=a>>>16;a^=a>>>8;return 27030>>>((a^a>>>4)&15)&1};var n=Array(256);(function(a){for(var d=0;256>d;++d){for(var c=d,b=d,k=7,c=c>>>1;c;c>>>=1)b<<=1,b|=c&1,--k;a[d]=b<<k&255}})(n);e.reverse=function(a){return n[a&255]<<24|n[a>>>8&255]<<16|n[a>>>16&255]<<8|n[a>>>24&255]};e.interleave2=function(a,d){a&=
65535;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;d&=65535;d=(d|d<<8)&16711935;d=(d|d<<4)&252645135;d=(d|d<<2)&858993459;return(a|a<<1)&1431655765|((d|d<<1)&1431655765)<<1};e.deinterleave2=function(a,d){a=a>>>d&1431655765;a=(a|a>>>1)&858993459;a=(a|a>>>2)&252645135;a=(a|a>>>4)&16711935;return((a|a>>>16)&65535)<<16>>16};e.interleave3=function(a,d,c){a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;d&=1023;d=(d|d<<16)&4278190335;d=(d|d<<8)&251719695;d=(d|d<<
4)&3272356035;c&=1023;c=(c|c<<16)&4278190335;c=(c|c<<8)&251719695;c=(c|c<<4)&3272356035;return(a|a<<2)&1227133513|((d|d<<2)&1227133513)<<1|((c|c<<2)&1227133513)<<2};e.deinterleave3=function(a,d){a=a>>>d&1227133513;a=(a|a>>>2)&3272356035;a=(a|a>>>4)&251719695;a=(a|a>>>8)&4278190335;return((a|a>>>16)&1023)<<22>>22};e.nextCombination=function(a){var d=a|a-1;return d+1|(~d&-~d)-1>>>h(a)+1}},{}],2:[function(a,f,e){function h(a,k,q){q=q||2;var e=k&&k.length,f=e?k[0]*q:a.length,r=n(a,0,f,q,!0),h=[];if(!r)return h;
var t,w,x,u;if(e){var y=q,e=[],z,B,A;u=0;for(z=k.length;u<z;u++)B=k[u]*y,A=u<z-1?k[u+1]*y:a.length,B=n(a,B,A,y,!1),B===B.next&&(B.steiner=!0),e.push(p(B));e.sort(c);for(u=0;u<e.length;u++){k=e[u];y=r;if(y=b(k,y))k=v(y,k),g(k,k.next);r=g(r,r.next)}}if(a.length>80*q){t=x=a[0];w=e=a[1];for(y=q;y<f;y+=q)u=a[y],k=a[y+1],u<t&&(t=u),k<w&&(w=k),u>x&&(x=u),k>e&&(e=k);x=Math.max(x-t,e-w)}d(r,h,q,t,w,x);return h}function n(a,b,c,d,k){var g;if(k===0<A(a,b,c,d))for(k=b;k<c;k+=d)g=u(k,a[k],a[k+1],g);else for(k=
c-d;k>=b;k-=d)g=u(k,a[k],a[k+1],g);g&&t(g,g.next)&&(y(g),g=g.next);return g}function g(a,b){if(!a)return a;b||(b=a);var c=a,d;do if(d=!1,c.steiner||!t(c,c.next)&&0!==q(c.prev,c,c.next))c=c.next;else{y(c);c=b=c.prev;if(c===c.next)return null;d=!0}while(d||c!==b);return b}function d(a,b,c,p,e,f,n){if(a){if(!n&&f){var h=a,u=h;do null===u.z&&(u.z=k(u.x,u.y,p,e,f)),u.prevZ=u.prev,u=u.nextZ=u.next;while(u!==h);u.prevZ.nextZ=null;u.prevZ=null;var h=u,z,A,B,F,E,G,C=1;do{u=h;B=h=null;for(F=0;u;){F++;A=u;for(z=
E=0;z<C&&(E++,A=A.nextZ,A);z++);for(G=C;0<E||0<G&&A;)0===E?(z=A,A=A.nextZ,G--):0!==G&&A?u.z<=A.z?(z=u,u=u.nextZ,E--):(z=A,A=A.nextZ,G--):(z=u,u=u.nextZ,E--),B?B.nextZ=z:h=z,z.prevZ=B,B=z;u=A}B.nextZ=null;C*=2}while(1<F)}for(h=a;a.prev!==a.next;){u=a.prev;A=a.next;if(f)a:{B=a;G=p;var H=e,J=f;F=B.prev;E=B;C=B.next;if(0<=q(F,E,C))B=!1;else{var D=F.x>E.x?F.x>C.x?F.x:C.x:E.x>C.x?E.x:C.x,W=F.y>E.y?F.y>C.y?F.y:C.y:E.y>C.y?E.y:C.y;z=k(F.x<E.x?F.x<C.x?F.x:C.x:E.x<C.x?E.x:C.x,F.y<E.y?F.y<C.y?F.y:C.y:E.y<C.y?
E.y:C.y,G,H,J);G=k(D,W,G,H,J);for(H=B.nextZ;H&&H.z<=G;){if(H!==B.prev&&H!==B.next&&r(F.x,F.y,E.x,E.y,C.x,C.y,H.x,H.y)&&0<=q(H.prev,H,H.next)){B=!1;break a}H=H.nextZ}for(H=B.prevZ;H&&H.z>=z;){if(H!==B.prev&&H!==B.next&&r(F.x,F.y,E.x,E.y,C.x,C.y,H.x,H.y)&&0<=q(H.prev,H,H.next)){B=!1;break a}H=H.prevZ}B=!0}}else a:if(B=a,F=B.prev,E=B,C=B.next,0<=q(F,E,C))B=!1;else{for(z=B.next.next;z!==B.prev;){if(r(F.x,F.y,E.x,E.y,C.x,C.y,z.x,z.y)&&0<=q(z.prev,z,z.next)){B=!1;break a}z=z.next}B=!0}if(B)b.push(u.i/c),
b.push(a.i/c),b.push(A.i/c),y(a),h=a=A.next;else if(a=A,a===h){if(!n)d(g(a),b,c,p,e,f,1);else if(1===n){n=b;h=c;u=a;do A=u.prev,B=u.next.next,!t(A,B)&&w(A,u,u.next,B)&&x(A,B)&&x(B,A)&&(n.push(A.i/h),n.push(u.i/h),n.push(B.i/h),y(u),y(u.next),u=a=B),u=u.next;while(u!==a);a=u;d(a,b,c,p,e,f,2)}else if(2===n)a:{n=a;do{for(h=n.next.next;h!==n.prev;){if(u=n.i!==h.i){u=n;A=h;if(B=u.next.i!==A.i&&u.prev.i!==A.i){b:{B=u;do{if(B.i!==u.i&&B.next.i!==u.i&&B.i!==A.i&&B.next.i!==A.i&&w(B,B.next,u,A)){B=!0;break b}B=
B.next}while(B!==u);B=!1}B=!B}if(B=B&&x(u,A)&&x(A,u)){B=u;F=!1;E=(u.x+A.x)/2;A=(u.y+A.y)/2;do B.y>A!==B.next.y>A&&E<(B.next.x-B.x)*(A-B.y)/(B.next.y-B.y)+B.x&&(F=!F),B=B.next;while(B!==u);B=F}u=B}if(u){a=v(n,h);n=g(n,n.next);a=g(a,a.next);d(n,b,c,p,e,f);d(a,b,c,p,e,f);break a}h=h.next}n=n.next}while(n!==a)}break}}}}function c(a,b){return a.x-b.x}function b(a,b){var c=b,d=a.x,k=a.y,g=-Infinity,p;do{if(k<=c.y&&k>=c.next.y){var q=c.x+(k-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(q<=d&&q>g){g=q;if(q===d){if(k===
c.y)return c;if(k===c.next.y)return c.next}p=c.x<c.next.x?c:c.next}}c=c.next}while(c!==b);if(!p)return null;if(d===g)return p.prev;for(var q=p,e=p.x,f=p.y,n=Infinity,h,c=p.next;c!==q;)d>=c.x&&c.x>=e&&r(k<f?d:g,k,e,f,k<f?g:d,k,c.x,c.y)&&(h=Math.abs(k-c.y)/(d-c.x),(h<n||h===n&&c.x>p.x)&&x(c,a)&&(p=c,n=h)),c=c.next;return p}function k(a,b,c,d,k){a=32767*(a-c)/k;b=32767*(b-d)/k;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;
return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function p(a){var b=a,c=a;do b.x<c.x&&(c=b),b=b.next;while(b!==a);return c}function r(a,b,c,d,k,g,p,q){return 0<=(k-p)*(b-q)-(a-p)*(g-q)&&0<=(a-p)*(d-q)-(c-p)*(b-q)&&0<=(c-p)*(g-q)-(k-p)*(d-q)}function q(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function t(a,b){return a.x===b.x&&a.y===b.y}function w(a,b,c,d){return t(a,b)&&t(c,d)||t(a,d)&&t(c,b)?!0:0<q(a,b,c)!==0<q(a,b,d)&&0<q(c,d,a)!==0<q(c,d,b)}function x(a,b){return 0>q(a.prev,a,a.next)?
0<=q(a,b,a.next)&&0<=q(a,a.prev,b):0>q(a,b,a.prev)||0>q(a,a.next,b)}function v(a,b){var c=new z(a.i,a.x,a.y),d=new z(b.i,b.x,b.y),k=a.next,g=b.prev;a.next=b;b.prev=a;c.next=k;k.prev=c;d.next=c;c.prev=d;g.next=d;d.prev=g;return d}function u(a,b,c,d){a=new z(a,b,c);d?(a.next=d.next,a.prev=d,d.next.prev=a,d.next=a):(a.prev=a,a.next=a);return a}function y(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function z(a,b,c){this.i=a;this.x=b;this.y=
c;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function A(a,b,c,d){for(var k=0,g=c-d;b<c;b+=d)k+=(a[g]-a[b])*(a[b+1]+a[g+1]),g=b;return k}f.exports=h;h.deviation=function(a,b,c,d){var k=b&&b.length,g=Math.abs(A(a,0,k?b[0]*c:a.length,c));if(k)for(var k=0,p=b.length;k<p;k++)g-=Math.abs(A(a,b[k]*c,k<p-1?b[k+1]*c:a.length,c));for(k=b=0;k<d.length;k+=3){var p=d[k]*c,q=d[k+1]*c,e=d[k+2]*c;b+=Math.abs((a[p]-a[e])*(a[q+1]-a[p+1])-(a[p]-a[q])*(a[e+1]-a[p+1]))}return 0===g&&0===b?0:
Math.abs((b-g)/g)};h.flatten=function(a){for(var b=a[0][0].length,c={vertices:[],holes:[],dimensions:b},d=0,k=0;k<a.length;k++){for(var g=0;g<a[k].length;g++)for(var p=0;p<b;p++)c.vertices.push(a[k][g][p]);0<k&&(d+=a[k-1].length,c.holes.push(d))}return c}},{}],3:[function(a,f,e){function h(){}function n(a,c,d){this.fn=a;this.context=c;this.once=d||!1}function g(){this._events=new h;this._eventsCount=0}var d=Object.prototype.hasOwnProperty,c="~";Object.create&&(h.prototype=Object.create(null),(new h).__proto__||
(c=!1));g.prototype.eventNames=function(){var a=[],k,g;if(0===this._eventsCount)return a;for(g in k=this._events)d.call(k,g)&&a.push(c?g.slice(1):g);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(k)):a};g.prototype.listeners=function(a,d){var b=this._events[c?c+a:a];if(d)return!!b;if(!b)return[];if(b.fn)return[b.fn];for(var k=0,g=b.length,e=Array(g);k<g;k++)e[k]=b[k].fn;return e};g.prototype.emit=function(a,d,g,e,q,f){var b=c?c+a:a;if(!this._events[b])return!1;var b=this._events[b],
k=arguments.length,p,n;if(b.fn){b.once&&this.removeListener(a,b.fn,void 0,!0);switch(k){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,g),!0;case 4:return b.fn.call(b.context,d,g,e),!0;case 5:return b.fn.call(b.context,d,g,e,q),!0;case 6:return b.fn.call(b.context,d,g,e,q,f),!0}n=1;for(p=Array(k-1);n<k;n++)p[n-1]=arguments[n];b.fn.apply(b.context,p)}else{var r=b.length,h;for(n=0;n<r;n++)switch(b[n].once&&this.removeListener(a,b[n].fn,
void 0,!0),k){case 1:b[n].fn.call(b[n].context);break;case 2:b[n].fn.call(b[n].context,d);break;case 3:b[n].fn.call(b[n].context,d,g);break;case 4:b[n].fn.call(b[n].context,d,g,e);break;default:if(!p)for(h=1,p=Array(k-1);h<k;h++)p[h-1]=arguments[h];b[n].fn.apply(b[n].context,p)}}return!0};g.prototype.on=function(a,d,g){d=new n(d,g||this);a=c?c+a:a;this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],d]:this._events[a].push(d):(this._events[a]=d,this._eventsCount++);return this};g.prototype.once=
function(a,d,g){d=new n(d,g||this,!0);a=c?c+a:a;this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],d]:this._events[a].push(d):(this._events[a]=d,this._eventsCount++);return this};g.prototype.removeListener=function(a,d,g,e){a=c?c+a:a;if(!this._events[a])return this;if(!d)return 0===--this._eventsCount?this._events=new h:delete this._events[a],this;var b=this._events[a];if(b.fn)b.fn!==d||e&&!b.once||g&&b.context!==g||(0===--this._eventsCount?this._events=new h:delete this._events[a]);
else{for(var k=0,p=[],n=b.length;k<n;k++)(b[k].fn!==d||e&&!b[k].once||g&&b[k].context!==g)&&p.push(b[k]);p.length?this._events[a]=1===p.length?p[0]:p:0===--this._eventsCount?this._events=new h:delete this._events[a]}return this};g.prototype.removeAllListeners=function(a){a?(a=c?c+a:a,this._events[a]&&(0===--this._eventsCount?this._events=new h:delete this._events[a])):(this._events=new h,this._eventsCount=0);return this};g.prototype.off=g.prototype.removeListener;g.prototype.addListener=g.prototype.on;
g.prototype.setMaxListeners=function(){return this};g.prefixed=c;g.EventEmitter=g;"undefined"!==typeof f&&(f.exports=g)},{}],4:[function(a,f,e){(function(a){var e=/iPhone/i,g=/iPod/i,d=/iPad/i,c=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,b=/Android/i,k=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,p=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,r=/IEMobile/i,q=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,h=/BlackBerry/i,w=/BB10/i,x=/Opera Mini/i,v=
/(CriOS|Chrome)(?=.*\bMobile\b)/i,u=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,y=/(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)/i,z=function(a){a=a||navigator.userAgent;var n=a.split("[FBAN");"undefined"!==typeof n[1]&&(a=n[0]);n=a.split("Twitter");"undefined"!==typeof n[1]&&(a=n[0]);this.apple={phone:e.test(a),ipod:g.test(a),tablet:!e.test(a)&&d.test(a),device:e.test(a)||g.test(a)||d.test(a)};this.amazon={phone:k.test(a),tablet:!k.test(a)&&p.test(a),device:k.test(a)||p.test(a)};this.android={phone:k.test(a)||
c.test(a),tablet:!k.test(a)&&!c.test(a)&&(p.test(a)||b.test(a)),device:k.test(a)||p.test(a)||c.test(a)||b.test(a)};this.windows={phone:r.test(a),tablet:q.test(a),device:r.test(a)||q.test(a)};this.other={blackberry:h.test(a),blackberry10:w.test(a),opera:x.test(a),firefox:u.test(a),chrome:v.test(a),device:h.test(a)||w.test(a)||x.test(a)||u.test(a)||v.test(a)};this.seven_inch=y.test(a);this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch;this.phone=
this.apple.phone||this.android.phone||this.windows.phone;this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet;if("undefined"===typeof window)return this},A=function(){var a=new z;a.Class=z;return a};"undefined"!==typeof f&&f.exports&&"undefined"===typeof window?f.exports=z:"undefined"!==typeof f&&f.exports&&"undefined"!==typeof window?f.exports=A():a.isMobile=A()})(this)},{}],5:[function(a,f,e){var h=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;
f.exports=function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;for(var c={},a=0;10>a;a++)c["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(c).map(function(a){return c[a]}).join(""))return!1;var b={};"abcdefghijklmnopqrst".split("").forEach(function(a){b[a]=a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},b)).join("")?!1:!0}catch(k){return!1}}()?Object.assign:function(a,c){var b,d;if(null===
a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");d=Object(a);for(var p,e=1;e<arguments.length;e++){b=Object(arguments[e]);for(var q in b)n.call(b,q)&&(d[q]=b[q]);if(h){p=h(b);for(var f=0;f<p.length;f++)g.call(b,p[f])&&(d[p[f]]=b[p[f]])}}return d}},{}],6:[function(a,f,e){var h=new ArrayBuffer(0),n=function(a,d,c,b){this.gl=a;this.buffer=a.createBuffer();this.type=d||a.ARRAY_BUFFER;this.drawType=b||a.STATIC_DRAW;this.data=h;c&&this.upload(c)};n.prototype.upload=
function(a,d,c){c||this.bind();c=this.gl;a=a||this.data;this.data.byteLength>=a.byteLength?c.bufferSubData(this.type,d||0,a):c.bufferData(this.type,a,this.drawType);this.data=a};n.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)};n.createVertexBuffer=function(a,d,c){return new n(a,a.ARRAY_BUFFER,d,c)};n.createIndexBuffer=function(a,d,c){return new n(a,a.ELEMENT_ARRAY_BUFFER,d,c)};n.create=function(a,d,c,b){return new n(a,d,c,b)};n.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)};
f.exports=n},{}],7:[function(a,f,e){var h=a("./GLTexture"),n=function(a,d,c){this.gl=a;this.framebuffer=a.createFramebuffer();this.texture=this.stencil=null;this.width=d||100;this.height=c||100};n.prototype.enableTexture=function(a){var d=this.gl;this.texture=a||new h(d);this.texture.bind();this.bind();d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,this.texture.texture,0)};n.prototype.enableStencil=function(){if(!this.stencil){var a=this.gl;this.stencil=a.createRenderbuffer();
a.bindRenderbuffer(a.RENDERBUFFER,this.stencil);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,this.stencil);a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,this.width,this.height)}};n.prototype.clear=function(a,d,c,b){this.bind();var k=this.gl;k.clearColor(a,d,c,b);k.clear(k.COLOR_BUFFER_BIT)};n.prototype.bind=function(){var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,this.framebuffer)};n.prototype.unbind=function(){var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,
null)};n.prototype.resize=function(a,d){var c=this.gl;this.width=a;this.height=d;this.texture&&this.texture.uploadData(null,a,d);this.stencil&&(c.bindRenderbuffer(c.RENDERBUFFER,this.stencil),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_STENCIL,a,d))};n.prototype.destroy=function(){var a=this.gl;this.texture&&this.texture.destroy();a.deleteFramebuffer(this.framebuffer);this.texture=this.stencil=this.gl=null};n.createRGBA=function(a,d,c,b){b=h.fromData(a,null,d,c);b.enableNearestScaling();b.enableWrapClamp();
a=new n(a,d,c);a.enableTexture(b);a.unbind();return a};n.createFloat32=function(a,d,c,b){b=new h.fromData(a,b,d,c);b.enableNearestScaling();b.enableWrapClamp();a=new n(a,d,c);a.enableTexture(b);a.unbind();return a};f.exports=n},{"./GLTexture":9}],8:[function(a,f,e){var h=a("./shader/compileProgram"),n=a("./shader/extractAttributes"),g=a("./shader/extractUniforms"),d=a("./shader/generateUniformAccessObject");a=function(a,b,k){this.gl=a;this.program=h(a,b,k);this.attributes=n(a,this.program);b=g(a,
this.program);this.uniforms=d(a,b)};a.prototype.bind=function(){this.gl.useProgram(this.program)};a.prototype.destroy=function(){};f.exports=a},{"./shader/compileProgram":14,"./shader/extractAttributes":16,"./shader/extractUniforms":17,"./shader/generateUniformAccessObject":18}],9:[function(a,f,e){var h=function(a,d,c,b,k){this.gl=a;this.texture=a.createTexture();this.premultiplyAlpha=this.mipmap=!1;this.width=d||-1;this.height=c||-1;this.format=b||a.RGBA;this.type=k||a.UNSIGNED_BYTE};h.prototype.upload=
function(a){this.bind();var d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var c=a.videoWidth||a.width,b=a.videoHeight||a.height;b!==this.height||c!==this.width?d.texImage2D(d.TEXTURE_2D,0,this.format,this.format,this.type,a):d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.format,this.type,a);this.width=c;this.height=b};var n=!1;h.prototype.uploadData=function(a,d,c){this.bind();var b=this.gl;if(a instanceof Float32Array){if(!n)if(b.getExtension("OES_texture_float"))n=!0;
else throw Error("floating point textures not available");this.type=b.FLOAT}else this.type=b.UNSIGNED_BYTE;b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);d!==this.width||c!==this.height?b.texImage2D(b.TEXTURE_2D,0,this.format,d,c,0,this.format,this.type,a||null):b.texSubImage2D(b.TEXTURE_2D,0,0,0,d,c,this.format,this.type,a||null);this.width=d;this.height=c};h.prototype.bind=function(a){var d=this.gl;void 0!==a&&d.activeTexture(d.TEXTURE0+a);d.bindTexture(d.TEXTURE_2D,this.texture)};
h.prototype.unbind=function(){var a=this.gl;a.bindTexture(a.TEXTURE_2D,null)};h.prototype.minFilter=function(a){var d=this.gl;this.bind();this.mipmap?d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,a?d.LINEAR_MIPMAP_LINEAR:d.NEAREST_MIPMAP_NEAREST):d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,a?d.LINEAR:d.NEAREST)};h.prototype.magFilter=function(a){var d=this.gl;this.bind();d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,a?d.LINEAR:d.NEAREST)};h.prototype.enableMipmap=function(){var a=this.gl;
this.bind();this.mipmap=!0;a.generateMipmap(a.TEXTURE_2D)};h.prototype.enableLinearScaling=function(){this.minFilter(!0);this.magFilter(!0)};h.prototype.enableNearestScaling=function(){this.minFilter(!1);this.magFilter(!1)};h.prototype.enableWrapClamp=function(){var a=this.gl;this.bind();a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE)};h.prototype.enableWrapRepeat=function(){var a=this.gl;this.bind();a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_WRAP_S,a.REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT)};h.prototype.enableWrapMirrorRepeat=function(){var a=this.gl;this.bind();a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.MIRRORED_REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.MIRRORED_REPEAT)};h.prototype.destroy=function(){this.gl.deleteTexture(this.texture)};h.fromSource=function(a,d,c){a=new h(a);a.premultiplyAlpha=c||!1;a.upload(d);return a};h.fromData=function(a,d,c,b){a=new h(a);a.uploadData(d,c,b);
return a};f.exports=h},{}],10:[function(a,f,e){function h(a,d){this.nativeVaoExtension=null;h.FORCE_NATIVE||(this.nativeVaoExtension=a.getExtension("OES_vertex_array_object")||a.getExtension("MOZ_OES_vertex_array_object")||a.getExtension("WEBKIT_OES_vertex_array_object"));this.nativeState=d;if(this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var c=a.getParameter(a.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:Array(c),attribState:Array(c)}}this.gl=a;this.attributes=
[];this.indexBuffer=null;this.dirty=!1}var n=a("./setVertexAttribArrays");h.prototype.constructor=h;f.exports=h;h.FORCE_NATIVE=!1;h.prototype.bind=function(){this.nativeVao?(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty&&(this.dirty=!1,this.activate())):this.activate();return this};h.prototype.unbind=function(){this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null);return this};h.prototype.activate=function(){for(var a=this.gl,d=null,c=0;c<this.attributes.length;c++){var b=
this.attributes[c];d!==b.buffer&&(b.buffer.bind(),d=b.buffer);a.vertexAttribPointer(b.attribute.location,b.attribute.size,b.type||a.FLOAT,b.normalized||!1,b.stride||0,b.start||0)}n(a,this.attributes,this.nativeState);this.indexBuffer.bind();return this};h.prototype.addAttribute=function(a,d,c,b,k,p){this.attributes.push({buffer:a,attribute:d,location:d.location,type:c||this.gl.FLOAT,normalized:b||!1,stride:k||0,start:p||0});this.dirty=!0;return this};h.prototype.addIndex=function(a){this.indexBuffer=
a;this.dirty=!0;return this};h.prototype.clear=function(){this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao);this.attributes.length=0;this.indexBuffer=null;return this};h.prototype.draw=function(a,d,c){var b=this.gl;b.drawElements(a,d,b.UNSIGNED_SHORT,c||0);return this};h.prototype.destroy=function(){this.nativeState=this.attributes=this.indexBuffer=this.gl=null;this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao);this.nativeVao=this.nativeVaoExtension=
null}},{"./setVertexAttribArrays":13}],11:[function(a,f,e){f.exports=function(a,e){var g=a.getContext("webgl",e)||a.getContext("experimental-webgl",e);if(!g)throw Error("This browser does not support webGL. Try using the canvas renderer");return g}},{}],12:[function(a,f,e){a={createContext:a("./createContext"),setVertexAttribArrays:a("./setVertexAttribArrays"),GLBuffer:a("./GLBuffer"),GLFramebuffer:a("./GLFramebuffer"),GLShader:a("./GLShader"),GLTexture:a("./GLTexture"),VertexArrayObject:a("./VertexArrayObject"),
shader:a("./shader")};"undefined"!==typeof f&&f.exports&&(f.exports=a);"undefined"!==typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=a)},{"./GLBuffer":6,"./GLFramebuffer":7,"./GLShader":8,"./GLTexture":9,"./VertexArrayObject":10,"./createContext":11,"./setVertexAttribArrays":13,"./shader":19}],13:[function(a,f,e){f.exports=function(a,e,g){var d;if(g){var c=g.tempAttribState,b=g.attribState;for(d=0;d<c.length;d++)c[d]=!1;for(d=0;d<e.length;d++)c[e[d].attribute.location]=!0;for(d=0;d<
b.length;d++)b[d]!==c[d]&&(b[d]=c[d],g.attribState[d]?a.enableVertexAttribArray(d):a.disableVertexAttribArray(d))}else for(d=0;d<e.length;d++)a.enableVertexAttribArray(e[d].attribute.location)}},{}],14:[function(a,f,e){var h=function(a,g,d){g=a.createShader(g);a.shaderSource(g,d);a.compileShader(g);return a.getShaderParameter(g,a.COMPILE_STATUS)?g:(console.log(a.getShaderInfoLog(g)),null)};f.exports=function(a,g,d){g=h(a,a.VERTEX_SHADER,g);d=h(a,a.FRAGMENT_SHADER,d);var c=a.createProgram();a.attachShader(c,
g);a.attachShader(c,d);a.linkProgram(c);a.getProgramParameter(c,a.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",a.getProgramParameter(c,a.VALIDATE_STATUS)),console.error("gl.getError()",a.getError()),""!==a.getProgramInfoLog(c)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",a.getProgramInfoLog(c)),a.deleteProgram(c),c=null);a.deleteShader(g);a.deleteShader(d);return c}},{}],15:[function(a,f,e){var h=function(a){a=Array(a);for(var g=
0;g<a.length;g++)a[g]=!1;return a};f.exports=function(a,g){switch(a){case "float":return 0;case "vec2":return new Float32Array(2*g);case "vec3":return new Float32Array(3*g);case "vec4":return new Float32Array(4*g);case "int":case "sampler2D":return 0;case "ivec2":return new Int32Array(2*g);case "ivec3":return new Int32Array(3*g);case "ivec4":return new Int32Array(4*g);case "bool":return!1;case "bvec2":return h(2*g);case "bvec3":return h(3*g);case "bvec4":return h(4*g);case "mat2":return new Float32Array([1,
0,0,1]);case "mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case "mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}}},{}],16:[function(a,f,e){var h=a("./mapType"),n=a("./mapSize"),g=function(a,c,b,k){gl.vertexAttribPointer(this.location,this.size,a||gl.FLOAT,c||!1,b||0,k||0)};f.exports=function(a,c){for(var b={},d=a.getProgramParameter(c,a.ACTIVE_ATTRIBUTES),p=0;p<d;p++){var e=a.getActiveAttrib(c,p),q=h(a,e.type);b[e.name]={type:q,size:n(q),location:a.getAttribLocation(c,e.name),
pointer:g}}return b}},{"./mapSize":20,"./mapType":21}],17:[function(a,f,e){var h=a("./mapType"),n=a("./defaultValue");f.exports=function(a,d){for(var c={},b=a.getProgramParameter(d,a.ACTIVE_UNIFORMS),k=0;k<b;k++){var g=a.getActiveUniform(d,k),e=g.name.replace(/\[.*?\]/,""),q=h(a,g.type);c[e]={type:q,size:g.size,location:a.getUniformLocation(d,e),value:n(q,g.size)}}return c}},{"./defaultValue":15,"./mapType":21}],18:[function(a,f,e){var h=function(a){a=g.replace("%%",a);return new Function(a)},n=function(a,
g){var k=d.replace(/%%/g,a),p;(p=1===g.size?c[g.type]:b[g.type])&&(k+="\nthis.gl."+p+";");return new Function("value",k)},g="return this.data.%%.value;",d="this.data.%%.value = value;\nvar location = this.data.%%.location;",c={"float":"uniform1f(location, value)",vec2:"uniform2f(location, value[0], value[1])",vec3:"uniform3f(location, value[0], value[1], value[2])",vec4:"uniform4f(location, value[0], value[1], value[2], value[3])","int":"uniform1i(location, value)",ivec2:"uniform2i(location, value[0], value[1])",
ivec3:"uniform3i(location, value[0], value[1], value[2])",ivec4:"uniform4i(location, value[0], value[1], value[2], value[3])",bool:"uniform1i(location, value)",bvec2:"uniform2i(location, value[0], value[1])",bvec3:"uniform3i(location, value[0], value[1], value[2])",bvec4:"uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"uniformMatrix2fv(location, false, value)",mat3:"uniformMatrix3fv(location, false, value)",mat4:"uniformMatrix4fv(location, false, value)",sampler2D:"uniform1i(location, value)"},
b={"float":"uniform1fv(location, value)",vec2:"uniform2fv(location, value)",vec3:"uniform3fv(location, value)",vec4:"uniform4fv(location, value)","int":"uniform1iv(location, value)",ivec2:"uniform2iv(location, value)",ivec3:"uniform3iv(location, value)",ivec4:"uniform4iv(location, value)",bool:"uniform1iv(location, value)",bvec2:"uniform2iv(location, value)",bvec3:"uniform3iv(location, value)",bvec4:"uniform4iv(location, value)",sampler2D:"uniform1iv(location, value)"};f.exports=function(a,b){var c=
{data:{}};c.gl=a;for(var d=Object.keys(b),k=0;k<d.length;k++){for(var g=d[k],p=g.split("."),e=p[p.length-1],f=c,y=0;y<p.length-1;y++)var z=f[p[y]]||{data:{}},f=f[p[y]]=z;p=f;g=b[g];p.data[e]=g;p.gl=a;Object.defineProperty(p,e,{get:h(e),set:n(e,g)})}return c}},{}],19:[function(a,f,e){f.exports={compileProgram:a("./compileProgram"),defaultValue:a("./defaultValue"),extractAttributes:a("./extractAttributes"),extractUniforms:a("./extractUniforms"),generateUniformAccessObject:a("./generateUniformAccessObject"),
mapSize:a("./mapSize"),mapType:a("./mapType")}},{"./compileProgram":14,"./defaultValue":15,"./extractAttributes":16,"./extractUniforms":17,"./generateUniformAccessObject":18,"./mapSize":20,"./mapType":21}],20:[function(a,f,e){var h={"float":1,vec2:2,vec3:3,vec4:4,"int":1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};f.exports=function(a){return h[a]}},{}],21:[function(a,f,e){var h=null,n={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",
INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};f.exports=function(a,d){if(!h){var c=Object.keys(n);h={};for(var b=0;b<c.length;++b){var k=c[b];h[a[k]]=n[k]}}return h[d]}},{}],22:[function(a,f,e){(function(a){function f(a,c){for(var b=0,d=a.length-1;0<=d;d--){var k=a[d];"."===k?a.splice(d,1):".."===k?(a.splice(d,1),b++):b&&(a.splice(d,1),b--)}if(c)for(;b--;b)a.unshift("..");
return a}function g(a,c){if(a.filter)return a.filter(c);for(var b=[],d=0;d<a.length;d++)c(a[d],d,a)&&b.push(a[d]);return b}var d=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;e.resolve=function(){for(var b="",c=!1,d=arguments.length-1;-1<=d&&!c;d--){var e=0<=d?arguments[d]:a.cwd();if("string"!==typeof e)throw new TypeError("Arguments to path.resolve must be strings");e&&(b=e+"/"+b,c="/"===e.charAt(0))}b=f(g(b.split("/"),function(a){return!!a}),!c).join("/");return(c?"/":"")+b||"."};
e.normalize=function(a){var b=e.isAbsolute(a),d="/"===c(a,-1);(a=f(g(a.split("/"),function(a){return!!a}),!b).join("/"))||b||(a=".");a&&d&&(a+="/");return(b?"/":"")+a};e.isAbsolute=function(a){return"/"===a.charAt(0)};e.join=function(){var a=Array.prototype.slice.call(arguments,0);return e.normalize(g(a,function(a,b){if("string"!==typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))};e.relative=function(a,c){function b(a){for(var b=0;b<a.length&&""===a[b];b++);
for(var c=a.length-1;0<=c&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=e.resolve(a).substr(1);c=e.resolve(c).substr(1);for(var d=b(a.split("/")),k=b(c.split("/")),g=Math.min(d.length,k.length),f=g,n=0;n<g;n++)if(d[n]!==k[n]){f=n;break}g=[];for(n=f;n<d.length;n++)g.push("..");g=g.concat(k.slice(f));return g.join("/")};e.sep="/";e.delimiter=":";e.dirname=function(a){var b=d.exec(a).slice(1);a=b[0];b=b[1];if(!a&&!b)return".";b&&(b=b.substr(0,b.length-1));return a+b};e.basename=function(a,c){var b=
d.exec(a).slice(1)[2];c&&b.substr(-1*c.length)===c&&(b=b.substr(0,b.length-c.length));return b};e.extname=function(a){return d.exec(a).slice(1)[3]};var c="b"==="ab".substr(-1)?function(a,c,d){return a.substr(c,d)}:function(a,c,d){0>c&&(c=a.length+c);return a.substr(c,d)}}).call(this,a("_process"))},{_process:23}],23:[function(a,f,e){function h(){throw Error("setTimeout has not been defined");}function n(){throw Error("clearTimeout has not been defined");}function g(a){if(r===setTimeout)return setTimeout(a,
0);if((r===h||!r)&&setTimeout)return r=setTimeout,setTimeout(a,0);try{return r(a,0)}catch(y){try{return r.call(null,a,0)}catch(z){return r.call(this,a,0)}}}function d(a){if(q===clearTimeout)return clearTimeout(a);if((q===n||!q)&&clearTimeout)return q=clearTimeout,clearTimeout(a);try{return q(a)}catch(y){try{return q.call(null,a)}catch(z){return q.call(this,a)}}}function c(){w&&x&&(w=!1,x.length?t=x.concat(t):v=-1,t.length&&b())}function b(){if(!w){var a=g(c);w=!0;for(var b=t.length;b;){x=t;for(t=
[];++v<b;)x&&x[v].run();v=-1;b=t.length}x=null;w=!1;d(a)}}function k(a,b){this.fun=a;this.array=b}function p(){}a=f.exports={};var r,q;try{r="function"===typeof setTimeout?setTimeout:h}catch(u){r=h}try{q="function"===typeof clearTimeout?clearTimeout:n}catch(u){q=n}var t=[],w=!1,x,v=-1;a.nextTick=function(a){var c=Array(arguments.length-1);if(1<arguments.length)for(var d=1;d<arguments.length;d++)c[d-1]=arguments[d];t.push(new k(a,c));1!==t.length||w||g(b)};k.prototype.run=function(){this.fun.apply(null,
this.array)};a.title="browser";a.browser=!0;a.env={};a.argv=[];a.version="";a.versions={};a.on=p;a.addListener=p;a.once=p;a.off=p;a.removeListener=p;a.removeAllListeners=p;a.emit=p;a.binding=function(a){throw Error("process.binding is not supported");};a.cwd=function(){return"/"};a.chdir=function(a){throw Error("process.chdir is not supported");};a.umask=function(){return 0}},{}],24:[function(a,f,e){(function(a){(function(n){function g(a){throw new RangeError(A[a]);}function d(a,b){for(var c=a.length,
d=[];c--;)d[c]=b(a[c]);return d}function c(a,b){var c=a.split("@"),k="";1<c.length&&(k=c[0]+"@",a=c[1]);a=a.replace(z,".");c=a.split(".");c=d(c,b).join(".");return k+c}function b(a){for(var b=[],c=0,d=a.length,k,g;c<d;)k=a.charCodeAt(c++),55296<=k&&56319>=k&&c<d?(g=a.charCodeAt(c++),56320==(g&64512)?b.push(((k&1023)<<10)+(g&1023)+65536):(b.push(k),c--)):b.push(k);return b}function k(a){return d(a,function(a){var b="";65535<a&&(a-=65536,b+=E(a>>>10&1023|55296),a=56320|a&1023);return b+=E(a)}).join("")}
function p(a,b){return a+22+75*(26>a)-((0!=b)<<5)}function r(a,b,c){var d=0;a=c?B(a/700):a>>1;for(a+=B(a/b);455<a;d+=36)a=B(a/35);return B(d+36*a/(a+38))}function q(a){var b=[],c=a.length,d,p=0,e=128,q=72,f,n,h,t,w;f=a.lastIndexOf("-");0>f&&(f=0);for(n=0;n<f;++n)128<=a.charCodeAt(n)&&g("not-basic"),b.push(a.charCodeAt(n));for(f=0<f?f+1:0;f<c;){n=p;d=1;for(h=36;;h+=36){f>=c&&g("invalid-input");t=a.charCodeAt(f++);t=10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:36;(36<=t||t>B((2147483647-p)/d))&&g("overflow");
p+=t*d;w=h<=q?1:h>=q+26?26:h-q;if(t<w)break;t=36-w;d>B(2147483647/t)&&g("overflow");d*=t}d=b.length+1;q=r(p-n,d,0==n);B(p/d)>2147483647-e&&g("overflow");e+=B(p/d);p%=d;b.splice(p++,0,e)}return k(b)}function h(a){var c,d,k,e,q,f,n,h,t,w=[],x,u,v;a=b(a);x=a.length;c=128;d=0;q=72;for(f=0;f<x;++f)t=a[f],128>t&&w.push(E(t));for((k=e=w.length)&&w.push("-");k<x;){n=2147483647;for(f=0;f<x;++f)t=a[f],t>=c&&t<n&&(n=t);u=k+1;n-c>B((2147483647-d)/u)&&g("overflow");d+=(n-c)*u;c=n;for(f=0;f<x;++f)if(t=a[f],t<c&&
2147483647<++d&&g("overflow"),t==c){h=d;for(n=36;;n+=36){t=n<=q?1:n>=q+26?26:n-q;if(h<t)break;v=h-t;h=36-t;w.push(E(p(t+v%h,0)));h=B(v/h)}w.push(E(p(h,0)));q=r(d,u,k==e);d=0;++k}++d;++c}return w.join("")}var w="object"==typeof e&&e&&!e.nodeType&&e,x="object"==typeof f&&f&&!f.nodeType&&f,v="object"==typeof a&&a;if(v.global===v||v.window===v||v.self===v)n=v;var u=/^xn--/,y=/[^\x20-\x7E]/,z=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)",
"invalid-input":"Invalid input"},B=Math.floor,E=String.fromCharCode,F,v={version:"1.4.1",ucs2:{decode:b,encode:k},decode:q,encode:h,toASCII:function(a){return c(a,function(a){return y.test(a)?"xn--"+h(a):a})},toUnicode:function(a){return c(a,function(a){return u.test(a)?q(a.slice(4).toLowerCase()):a})}};if(w&&x)if(f.exports==w)x.exports=v;else for(F in v)v.hasOwnProperty(F)&&(w[F]=v[F]);else n.punycode=v})(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==
typeof window?window:{})},{}],25:[function(a,f,e){f.exports=function(a,g,d,c){d=d||"=";var b={};if("string"!==typeof a||0===a.length)return b;var k=/\+/g;a=a.split(g||"&");g=1E3;c&&"number"===typeof c.maxKeys&&(g=c.maxKeys);c=a.length;0<g&&c>g&&(c=g);for(g=0;g<c;++g){var p=a[g].replace(k,"%20"),e=p.indexOf(d),q;0<=e?(q=p.substr(0,e),p=p.substr(e+1)):(q=p,p="");q=decodeURIComponent(q);p=decodeURIComponent(p);Object.prototype.hasOwnProperty.call(b,q)?h(b[q])?b[q].push(p):b[q]=[b[q],p]:b[q]=p}return b};
var h=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],26:[function(a,f,e){function h(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var n=function(a){switch(typeof a){case "string":return a;case "boolean":return a?"true":"false";case "number":return isFinite(a)?a:"";default:return""}};f.exports=function(a,b,k,p){b=b||"&";k=k||"=";null===a&&(a=void 0);return"object"===typeof a?h(d(a),function(c){var d=encodeURIComponent(n(c))+
k;return g(a[c])?h(a[c],function(a){return d+encodeURIComponent(n(a))}).join(b):d+encodeURIComponent(n(a[c]))}).join(b):p?encodeURIComponent(n(p))+k+encodeURIComponent(n(a)):""};var g=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},d=Object.keys||function(a){var b=[],c;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],27:[function(a,f,e){e.decode=e.parse=a("./decode");e.encode=e.stringify=a("./encode")},{"./decode":25,"./encode":26}],
28:[function(a,f,e){function h(){this.href=this.path=this.pathname=this.query=this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}function n(a,b,c){if(a&&d.isObject(a)&&a instanceof h)return a;var k=new h;k.parse(a,b,c);return k}var g=a("punycode"),d=a("./util");e.parse=n;e.resolve=function(a,b){return n(a,!1,!0).resolve(b)};e.resolveObject=function(a,b){return a?n(a,!1,!0).resolveObject(b):b};e.format=function(a){d.isString(a)&&(a=n(a));return a instanceof
h?a.format():h.prototype.format.call(a)};e.Url=h;var c=/^([a-z0-9.+-]+:)/i,b=/:[0-9]*$/,k=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/;f="{}|\\^`".split("").concat('<>"` \r\n\t'.split(""));var p=["'"].concat(f),r=["%","/","?",";","#"].concat(p),q=["/","?","#"],t=/^[+a-z0-9A-Z_-]{0,63}$/,w=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},u={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=a("querystring");
h.prototype.parse=function(a,b,e){if(!d.isString(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var f=a.indexOf("?"),f=-1!==f&&f<a.indexOf("#")?"?":"#";a=a.split(f);a[0]=a[0].replace(/\\/g,"/");a=a.join(f);f=a.trim();if(!e&&1===a.split("#").length&&(a=k.exec(f)))return this.href=this.path=f,this.pathname=a[1],a[2]?(this.search=a[2],this.query=b?y.parse(this.search.substr(1)):this.search.substr(1)):b&&(this.search="",this.query={}),this;if(a=c.exec(f)){a=a[0];var n=a.toLowerCase();
this.protocol=n;f=f.substr(a.length)}if(e||a||f.match(/^\/\/[^@\/]+@[^@\/]+/)){var h="//"===f.substr(0,2);!h||a&&v[a]||(f=f.substr(2),this.slashes=!0)}if(!v[a]&&(h||a&&!u[a])){h=-1;for(e=0;e<q.length;e++)a=f.indexOf(q[e]),-1!==a&&(-1===h||a<h)&&(h=a);h=-1===h?f.lastIndexOf("@"):f.lastIndexOf("@",h);-1!==h&&(e=f.slice(0,h),f=f.slice(h+1),this.auth=decodeURIComponent(e));h=-1;for(e=0;e<r.length;e++)a=f.indexOf(r[e]),-1!==a&&(-1===h||a<h)&&(h=a);-1===h&&(h=f.length);this.host=f.slice(0,h);f=f.slice(h);
this.parseHost();this.hostname=this.hostname||"";h="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!h){var z=this.hostname.split(/\./);e=0;for(a=z.length;e<a;e++){var A=z[e];if(A&&!A.match(t)){for(var B="",I=0,N=A.length;I<N;I++)B=127<A.charCodeAt(I)?B+"x":B+A[I];if(!B.match(t)){a=z.slice(0,e);e=z.slice(e+1);if(A=A.match(w))a.push(A[1]),e.unshift(A[2]);e.length&&(f="/"+e.join(".")+f);this.hostname=a.join(".");break}}}}this.hostname=255<this.hostname.length?"":this.hostname.toLowerCase();
h||(this.hostname=g.toASCII(this.hostname));e=this.port?":"+this.port:"";this.host=(this.hostname||"")+e;this.href+=this.host;h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==f[0]&&(f="/"+f))}if(!x[n])for(e=0,a=p.length;e<a;e++)h=p[e],-1!==f.indexOf(h)&&(A=encodeURIComponent(h),A===h&&(A=escape(h)),f=f.split(h).join(A));e=f.indexOf("#");-1!==e&&(this.hash=f.substr(e),f=f.slice(0,e));e=f.indexOf("?");-1!==e?(this.search=f.substr(e),this.query=f.substr(e+1),b&&(this.query=y.parse(this.query)),
f=f.slice(0,e)):b&&(this.search="",this.query={});f&&(this.pathname=f);u[n]&&this.hostname&&!this.pathname&&(this.pathname="/");if(this.pathname||this.search)e=this.pathname||"",this.path=e+(this.search||"");this.href=this.format();return this};h.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",k=this.hash||"",g=!1,p="";this.host?g=a+this.host:this.hostname&&(g=a+(-1===this.hostname.indexOf(":")?
this.hostname:"["+this.hostname+"]"),this.port&&(g+=":"+this.port));this.query&&d.isObject(this.query)&&Object.keys(this.query).length&&(p=y.stringify(this.query));a=this.search||p&&"?"+p||"";b&&":"!==b.substr(-1)&&(b+=":");this.slashes||(!b||u[b])&&!1!==g?(g="//"+(g||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):g||(g="");k&&"#"!==k.charAt(0)&&(k="#"+k);a&&"?"!==a.charAt(0)&&(a="?"+a);c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)});a=a.replace("#","%23");return b+g+c+a+k};h.prototype.resolve=
function(a){return this.resolveObject(n(a,!1,!0)).format()};h.prototype.resolveObject=function(a){if(d.isString(a)){var b=new h;b.parse(a,!1,!0);a=b}for(var b=new h,c=Object.keys(this),k=0;k<c.length;k++){var g=c[k];b[g]=this[g]}b.hash=a.hash;if(""===a.href)return b.href=b.format(),b;if(a.slashes&&!a.protocol){c=Object.keys(a);for(k=0;k<c.length;k++)g=c[k],"protocol"!==g&&(b[g]=a[g]);u[b.protocol]&&b.hostname&&!b.pathname&&(b.path=b.pathname="/");b.href=b.format();return b}if(a.protocol&&a.protocol!==
b.protocol){if(!u[a.protocol]){c=Object.keys(a);for(k=0;k<c.length;k++)g=c[k],b[g]=a[g];b.href=b.format();return b}b.protocol=a.protocol;if(a.host||v[a.protocol])b.pathname=a.pathname;else{for(var p=(a.pathname||"").split("/");p.length&&!(a.host=p.shift()););a.host||(a.host="");a.hostname||(a.hostname="");""!==p[0]&&p.unshift("");2>p.length&&p.unshift("");b.pathname=p.join("/")}b.search=a.search;b.query=a.query;b.host=a.host||"";b.auth=a.auth;b.hostname=a.hostname||a.host;b.port=a.port;if(b.pathname||
b.search)b.path=(b.pathname||"")+(b.search||"");b.slashes=b.slashes||a.slashes;b.href=b.format();return b}var c=b.pathname&&"/"===b.pathname.charAt(0),e=a.host||a.pathname&&"/"===a.pathname.charAt(0),q=c=e||c||b.host&&a.pathname,k=b.pathname&&b.pathname.split("/")||[],p=a.pathname&&a.pathname.split("/")||[];if(g=b.protocol&&!u[b.protocol])b.hostname="",b.port=null,b.host&&(""===k[0]?k[0]=b.host:k.unshift(b.host)),b.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===p[0]?p[0]=a.host:p.unshift(a.host)),
a.host=null),c=c&&(""===p[0]||""===k[0]);if(e)b.host=a.host||""===a.host?a.host:b.host,b.hostname=a.hostname||""===a.hostname?a.hostname:b.hostname,b.search=a.search,b.query=a.query,k=p;else if(p.length)k||(k=[]),k.pop(),k=k.concat(p),b.search=a.search,b.query=a.query;else if(!d.isNullOrUndefined(a.search))return g&&(b.hostname=b.host=k.shift(),g=b.host&&0<b.host.indexOf("@")?b.host.split("@"):!1)&&(b.auth=g.shift(),b.host=b.hostname=g.shift()),b.search=a.search,b.query=a.query,d.isNull(b.pathname)&&
d.isNull(b.search)||(b.path=(b.pathname?b.pathname:"")+(b.search?b.search:"")),b.href=b.format(),b;if(!k.length)return b.pathname=null,b.path=b.search?"/"+b.search:null,b.href=b.format(),b;for(var e=k.slice(-1)[0],p=(b.host||a.host||1<k.length)&&("."===e||".."===e)||""===e,f=0,n=k.length;0<=n;n--)e=k[n],"."===e?k.splice(n,1):".."===e?(k.splice(n,1),f++):f&&(k.splice(n,1),f--);if(!c&&!q)for(;f--;f)k.unshift("..");!c||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift("");p&&"/"!==k.join("/").substr(-1)&&
k.push("");q=""===k[0]||k[0]&&"/"===k[0].charAt(0);g&&(b.hostname=b.host=q?"":k.length?k.shift():"",g=b.host&&0<b.host.indexOf("@")?b.host.split("@"):!1)&&(b.auth=g.shift(),b.host=b.hostname=g.shift());(c=c||b.host&&k.length)&&!q&&k.unshift("");k.length?b.pathname=k.join("/"):(b.pathname=null,b.path=null);d.isNull(b.pathname)&&d.isNull(b.search)||(b.path=(b.pathname?b.pathname:"")+(b.search?b.search:""));b.auth=a.auth||b.auth;b.slashes=b.slashes||a.slashes;b.href=b.format();return b};h.prototype.parseHost=
function(){var a=this.host,c=b.exec(a);c&&(c=c[0],":"!==c&&(this.port=c.substr(1)),a=a.substr(0,a.length-c.length));a&&(this.hostname=a)}},{"./util":29,punycode:24,querystring:27}],29:[function(a,f,e){f.exports={isString:function(a){return"string"===typeof a},isObject:function(a){return"object"===typeof a&&null!==a},isNull:function(a){return null===a},isNullOrUndefined:function(a){return null==a}}},{}],30:[function(a,f,e){function h(a){return a&&a.__esModule?a:{"default":a}}e.__esModule=!0;var n=
"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};f=a("mini-signals");var g=h(f);f=a("parse-uri");var d=h(f),c=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}(a("./async"));a=a("./Resource");var b=h(a),k=/(#[\w-]+)?$/;a=function(){function a(){var b=
this,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.baseUrl=d;this.progress=0;this.loading=!1;this.defaultQueryString="";this._beforeMiddleware=[];this._afterMiddleware=[];this._resourcesParsing=[];this._boundLoadResource=function(a,c){return b._loadResource(a,c)};this._queue=c.queue(this._boundLoadResource,k);this._queue.pause();this.resources=
{};this.onProgress=new g["default"];this.onError=new g["default"];this.onLoad=new g["default"];this.onStart=new g["default"];this.onComplete=new g["default"]}a.prototype.add=function(a,c,d,k){if(Array.isArray(a)){for(c=0;c<a.length;++c)this.add(a[c]);return this}"object"===("undefined"===typeof a?"undefined":n(a))&&(k=c||a.callback||a.onComplete,d=a,c=a.url,a=a.name||a.key||a.url);"string"!==typeof c&&(k=d,d=c,c=a);if("string"!==typeof c)throw Error("No url passed to add resource to loader.");"function"===
typeof d&&(k=d,d=null);if(this.loading&&(!d||!d.parentResource))throw Error("Cannot add resources while the loader is running.");if(this.resources[a])throw Error('Resource named "'+a+'" already exists.');c=this._prepareUrl(c);this.resources[a]=new b["default"](a,c,d);if("function"===typeof k)this.resources[a].onAfterMiddleware.once(k);if(this.loading){d=d.parentResource;c=[];for(k=0;k<d.children.length;++k)d.children[k].isComplete||c.push(d.children[k]);k=d.progressChunk*(c.length+1)/(c.length+2);
d.children.push(this.resources[a]);d.progressChunk=k;for(d=0;d<c.length;++d)c[d].progressChunk=k;this.resources[a].progressChunk=k}this._queue.push(this.resources[a]);return this};a.prototype.pre=function(a){this._beforeMiddleware.push(a);return this};a.prototype.use=function(a){this._afterMiddleware.push(a);return this};a.prototype.reset=function(){this.progress=0;this.loading=!1;this._queue.kill();this._queue.pause();for(var a in this.resources){var b=this.resources[a];b._onLoadBinding&&b._onLoadBinding.detach();
b.isLoading&&b.abort()}this.resources={};return this};a.prototype.load=function(a){if("function"===typeof a)this.onComplete.once(a);if(this.loading)return this;a=100/this._queue._tasks.length;for(var b=0;b<this._queue._tasks.length;++b)this._queue._tasks[b].data.progressChunk=a;this.loading=!0;this.onStart.dispatch(this);this._queue.resume();return this};a.prototype._prepareUrl=function(a){var b=(0,d["default"])(a,{strictMode:!0});a=b.protocol||!b.path||0===a.indexOf("//")?a:this.baseUrl.length&&
this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==a.charAt(0)?this.baseUrl+"/"+a:this.baseUrl+a;this.defaultQueryString&&(b=k.exec(a)[0],a=a.substr(0,a.length-b.length),a=-1!==a.indexOf("?")?a+("&"+this.defaultQueryString):a+("?"+this.defaultQueryString),a+=b);return a};a.prototype._loadResource=function(a,b){var d=this;a._dequeue=b;c.eachSeries(this._beforeMiddleware,function(b,c){b.call(d,a,function(){c(a.isComplete?{}:null)})},function(){a.isComplete?d._onLoad(a):(a._onLoadBinding=a.onComplete.once(d._onLoad,
d),a.load())})};a.prototype._onComplete=function(){this.loading=!1;this.onComplete.dispatch(this,this.resources)};a.prototype._onLoad=function(a){var b=this;a._onLoadBinding=null;a._dequeue();this._resourcesParsing.push(a);c.eachSeries(this._afterMiddleware,function(c,d){c.call(b,a,d)},function(){a.onAfterMiddleware.dispatch(a);b.progress+=a.progressChunk;b.onProgress.dispatch(b,a);a.error?b.onError.dispatch(a.error,b,a):b.onLoad.dispatch(b,a);b._resourcesParsing.splice(b._resourcesParsing.indexOf(a),
1);b._queue.idle()&&0===b._resourcesParsing.length&&(b.progress=100,b._onComplete())})};return a}();e["default"]=a},{"./Resource":31,"./async":32,"mini-signals":36,"parse-uri":37}],31:[function(a,f,e){function h(){}function n(a,b,c){b&&0===b.indexOf(".")&&(b=b.substring(1));b&&(a[b]=c)}function g(a){return a.toString().replace("object ","")}e.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=
!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),c=(f=a("parse-uri"))&&f.__esModule?f:{"default":f},b=(a=a("mini-signals"))&&a.__esModule?a:{"default":a},k=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),p=null;a=function(){function a(c,d,k){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");if("string"!==typeof c||"string"!==typeof d)throw Error("Both name and url are required for constructing a resource.");
k=k||{};this._flags=0;this._setFlag(a.STATUS_FLAGS.DATA_URL,0===d.indexOf("data:"));this.name=c;this.url=d;this.extension=this._getExtension();this.data=null;this.crossOrigin=!0===k.crossOrigin?"anonymous":k.crossOrigin;this.loadType=k.loadType||this._determineLoadType();this.xhrType=k.xhrType;this.metadata=k.metadata||{};this.xhr=this.error=null;this.children=[];this.type=a.TYPE.UNKNOWN;this.progressChunk=0;this._dequeue=h;this._onLoadBinding=null;this._boundComplete=this.complete.bind(this);this._boundOnError=
this._onError.bind(this);this._boundOnProgress=this._onProgress.bind(this);this._boundXhrOnError=this._xhrOnError.bind(this);this._boundXhrOnAbort=this._xhrOnAbort.bind(this);this._boundXhrOnLoad=this._xhrOnLoad.bind(this);this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this);this.onStart=new b["default"];this.onProgress=new b["default"];this.onComplete=new b["default"];this.onAfterMiddleware=new b["default"]}a.setExtensionLoadType=function(b,c){n(a._loadTypeMap,b,c)};a.setExtensionXhrType=function(b,
c){n(a._xhrTypeMap,b,c)};a.prototype.complete=function(){this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1));this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",
this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null));if(this.isComplete)throw Error("Complete called again for an already completed resource.");this._setFlag(a.STATUS_FLAGS.COMPLETE,!0);this._setFlag(a.STATUS_FLAGS.LOADING,!1);this.onComplete.dispatch(this)};a.prototype.abort=function(b){if(!this.error){this.error=
Error(b);if(this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=a.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}};a.prototype.load=function(b){var c=this;if(!this.isLoading)if(this.isComplete)b&&setTimeout(function(){return b(c)},1);else{if(b)this.onComplete.once(b);this._setFlag(a.STATUS_FLAGS.LOADING,!0);this.onStart.dispatch(this);if(!1===this.crossOrigin||"string"!==typeof this.crossOrigin)this.crossOrigin=
this._determineCrossOrigin(this.url);switch(this.loadType){case a.LOAD_TYPE.IMAGE:this.type=a.TYPE.IMAGE;this._loadElement("image");break;case a.LOAD_TYPE.AUDIO:this.type=a.TYPE.AUDIO;this._loadSourceElement("audio");break;case a.LOAD_TYPE.VIDEO:this.type=a.TYPE.VIDEO;this._loadSourceElement("video");break;default:k&&this.crossOrigin?this._loadXdr():this._loadXhr()}}};a.prototype._hasFlag=function(a){return!!(this._flags&a)};a.prototype._setFlag=function(a,b){this._flags=b?this._flags|a:this._flags&
~a};a.prototype._loadElement=function(a){this.data=this.metadata.loadElement?this.metadata.loadElement:"image"===a&&"undefined"!==typeof window.Image?new Image:document.createElement(a);this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin);this.metadata.skipSource||(this.data.src=this.url);this.data.addEventListener("error",this._boundOnError,!1);this.data.addEventListener("load",this._boundComplete,!1);this.data.addEventListener("progress",this._boundOnProgress,!1)};a.prototype._loadSourceElement=
function(a){this.data=this.metadata.loadElement?this.metadata.loadElement:"audio"===a&&"undefined"!==typeof window.Audio?new Audio:document.createElement(a);if(null===this.data)this.abort("Unsupported element: "+a);else{if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var b=0;b<this.url.length;++b)this.data.appendChild(this._createSource(a,this.url[b]));else this.data.appendChild(this._createSource(a,
this.url));this.data.addEventListener("error",this._boundOnError,!1);this.data.addEventListener("load",this._boundComplete,!1);this.data.addEventListener("progress",this._boundOnProgress,!1);this.data.addEventListener("canplaythrough",this._boundComplete,!1);this.data.load()}};a.prototype._loadXhr=function(){"string"!==typeof this.xhrType&&(this.xhrType=this._determineXhrType());var b=this.xhr=new XMLHttpRequest;b.open("GET",this.url,!0);b.responseType=this.xhrType===a.XHR_RESPONSE_TYPE.JSON||this.xhrType===
a.XHR_RESPONSE_TYPE.DOCUMENT?a.XHR_RESPONSE_TYPE.TEXT:this.xhrType;b.addEventListener("error",this._boundXhrOnError,!1);b.addEventListener("abort",this._boundXhrOnAbort,!1);b.addEventListener("progress",this._boundOnProgress,!1);b.addEventListener("load",this._boundXhrOnLoad,!1);b.send()};a.prototype._loadXdr=function(){"string"!==typeof this.xhrType&&(this.xhrType=this._determineXhrType());var a=this.xhr=new XDomainRequest;a.timeout=5E3;a.onerror=this._boundXhrOnError;a.ontimeout=this._boundXdrOnTimeout;
a.onprogress=this._boundOnProgress;a.onload=this._boundXhrOnLoad;a.open("GET",this.url,!0);setTimeout(function(){return a.send()},1)};a.prototype._createSource=function(a,b,c){c||(c=a+"/"+b.substr(b.lastIndexOf(".")+1));a=document.createElement("source");a.src=b;a.type=c;return a};a.prototype._onError=function(a){this.abort("Failed to load element using: "+a.target.nodeName)};a.prototype._onProgress=function(a){a&&a.lengthComputable&&this.onProgress.dispatch(this,a.loaded/a.total)};a.prototype._xhrOnError=
function(){var a=this.xhr;this.abort(g(a)+" Request failed. Status: "+a.status+', text: "'+a.statusText+'"')};a.prototype._xhrOnAbort=function(){this.abort(g(this.xhr)+" Request was aborted by the user.")};a.prototype._xdrOnTimeout=function(){this.abort(g(this.xhr)+" Request timed out.")};a.prototype._xhrOnLoad=function(){var b=this.xhr,c="undefined"===typeof b.status?b.status:200;if(200===c||204===c||0===c&&0<b.responseText.length){if(this.xhrType===a.XHR_RESPONSE_TYPE.TEXT)this.data=b.responseText,
this.type=a.TYPE.TEXT;else if(this.xhrType===a.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(b.responseText),this.type=a.TYPE.JSON}catch(x){this.abort("Error trying to parse loaded json: "+x);return}else if(this.xhrType===a.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser)this.data=(new DOMParser).parseFromString(b.responseText,"text/xml");else{var d=document.createElement("div");d.innerHTML=b.responseText;this.data=d}this.type=a.TYPE.XML}catch(x){this.abort("Error trying to parse loaded xml: "+
x);return}else this.data=b.response||b.responseText;this.complete()}else this.abort("["+b.status+"] "+b.statusText+": "+b.responseURL)};a.prototype._determineCrossOrigin=function(a,b){if(0===a.indexOf("data:"))return"";b=b||window.location;p||(p=document.createElement("a"));p.href=a;a=(0,c["default"])(p.href,{strictMode:!0});var d=!a.port&&""===b.port||a.port===b.port,k=a.protocol?a.protocol+":":"";return a.host===b.hostname&&d&&k===b.protocol?"":"anonymous"};a.prototype._determineXhrType=function(){return a._xhrTypeMap[this.extension]||
a.XHR_RESPONSE_TYPE.TEXT};a.prototype._determineLoadType=function(){return a._loadTypeMap[this.extension]||a.LOAD_TYPE.XHR};a.prototype._getExtension=function(){var a=this.url;if(this.isDataUrl)var b=a.indexOf("/"),a=a.substring(b+1,a.indexOf(";",b));else b=a.indexOf("?"),-1!==b&&(a=a.substring(0,b)),a=a.substring(a.lastIndexOf(".")+1);return a.toLowerCase()};a.prototype._getMimeFromXhrType=function(b){switch(b){case a.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case a.XHR_RESPONSE_TYPE.BLOB:return"application/blob";
case a.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case a.XHR_RESPONSE_TYPE.JSON:return"application/json";default:return"text/plain"}};d(a,[{key:"isDataUrl",get:function(){return this._hasFlag(a.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(a.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(a.STATUS_FLAGS.LOADING)}}]);return a}();e["default"]=a;a.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4};a.TYPE={UNKNOWN:0,JSON:1,XML:2,
IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6};a.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4};a.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"};a._loadTypeMap={gif:a.LOAD_TYPE.IMAGE,png:a.LOAD_TYPE.IMAGE,bmp:a.LOAD_TYPE.IMAGE,jpg:a.LOAD_TYPE.IMAGE,jpeg:a.LOAD_TYPE.IMAGE,tif:a.LOAD_TYPE.IMAGE,tiff:a.LOAD_TYPE.IMAGE,webp:a.LOAD_TYPE.IMAGE,tga:a.LOAD_TYPE.IMAGE,svg:a.LOAD_TYPE.IMAGE,"svg+xml":a.LOAD_TYPE.IMAGE,mp3:a.LOAD_TYPE.AUDIO,ogg:a.LOAD_TYPE.AUDIO,
wav:a.LOAD_TYPE.AUDIO,mp4:a.LOAD_TYPE.VIDEO,webm:a.LOAD_TYPE.VIDEO};a._xhrTypeMap={xhtml:a.XHR_RESPONSE_TYPE.DOCUMENT,html:a.XHR_RESPONSE_TYPE.DOCUMENT,htm:a.XHR_RESPONSE_TYPE.DOCUMENT,xml:a.XHR_RESPONSE_TYPE.DOCUMENT,tmx:a.XHR_RESPONSE_TYPE.DOCUMENT,svg:a.XHR_RESPONSE_TYPE.DOCUMENT,tsx:a.XHR_RESPONSE_TYPE.DOCUMENT,gif:a.XHR_RESPONSE_TYPE.BLOB,png:a.XHR_RESPONSE_TYPE.BLOB,bmp:a.XHR_RESPONSE_TYPE.BLOB,jpg:a.XHR_RESPONSE_TYPE.BLOB,jpeg:a.XHR_RESPONSE_TYPE.BLOB,tif:a.XHR_RESPONSE_TYPE.BLOB,tiff:a.XHR_RESPONSE_TYPE.BLOB,
webp:a.XHR_RESPONSE_TYPE.BLOB,tga:a.XHR_RESPONSE_TYPE.BLOB,json:a.XHR_RESPONSE_TYPE.JSON,text:a.XHR_RESPONSE_TYPE.TEXT,txt:a.XHR_RESPONSE_TYPE.TEXT,ttf:a.XHR_RESPONSE_TYPE.BUFFER,otf:a.XHR_RESPONSE_TYPE.BUFFER};a.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},{"mini-signals":36,"parse-uri":37}],32:[function(a,f,e){function h(){}function n(a){return function(){if(null===a)throw Error("Callback was already called.");var d=a;a=null;d.apply(this,arguments)}}
e.__esModule=!0;e.eachSeries=function(a,d,c){var b=0,k=a.length;(function r(g){g||b===k?c&&c(g):d(a[b++],r)})()};e.queue=function(a,d){function c(a,b,c){if(null!=c&&"function"!==typeof c)throw Error("task callback must be a function");g.started=!0;null==a&&g.idle()?setTimeout(function(){return g.drain()},1):(a={data:a,callback:"function"===typeof c?c:h},b?g._tasks.unshift(a):g._tasks.push(a),setTimeout(function(){return g.process()},1))}function b(a){return function(){--k;a.callback.apply(a,arguments);
null!=arguments[0]&&g.error(arguments[0],a.data);k<=g.concurrency-g.buffer&&g.unsaturated();g.idle()&&g.drain();g.process()}}if(null==d)d=1;else if(0===d)throw Error("Concurrency must not be zero");var k=0,g={_tasks:[],concurrency:d,saturated:h,unsaturated:h,buffer:d/4,empty:h,drain:h,error:h,started:!1,paused:!1,push:function(a,b){c(a,!1,b)},kill:function(){k=0;g.drain=h;g.started=!1;g._tasks=[]},unshift:function(a,b){c(a,!0,b)},process:function(){for(;!g.paused&&k<g.concurrency&&g._tasks.length;){var c=
g._tasks.shift();0===g._tasks.length&&g.empty();k+=1;k===g.concurrency&&g.saturated();a(c.data,n(b(c)))}},length:function(){return g._tasks.length},running:function(){return k},idle:function(){return 0===g._tasks.length+k},pause:function(){!0!==g.paused&&(g.paused=!0)},resume:function(){if(!1!==g.paused){g.paused=!1;for(var a=1;a<=g.concurrency;a++)g.process()}}};return g}},{}],33:[function(a,f,e){e.__esModule=!0;e.encodeBinary=function(a){for(var g="",d=0;d<a.length;){for(var c=[0,0,0],b=[0,0,0,
0],k=0;k<c.length;++k)c[k]=d<a.length?a.charCodeAt(d++)&255:0;b[0]=c[0]>>2;b[1]=(c[0]&3)<<4|c[1]>>4;b[2]=(c[1]&15)<<2|c[2]>>6;b[3]=c[2]&63;switch(d-(a.length-1)){case 2:b[3]=64;b[2]=64;break;case 1:b[3]=64}for(c=0;c<b.length;++c)g+=h.charAt(b[c])}return g};var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},{}],34:[function(a,f,e){function h(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=
a;return b}e.__esModule=!0;var n=a("./Loader"),n=n&&n.__esModule?n:{"default":n},g=a("./Resource"),g=g&&g.__esModule?g:{"default":g},d=a("./async"),d=h(d);a=a("./b64");a=h(a);n["default"].Resource=g["default"];n["default"].async=d;n["default"].base64=a;f.exports=n["default"];e["default"]=n["default"]},{"./Loader":30,"./Resource":31,"./async":32,"./b64":33}],35:[function(a,f,e){e.__esModule=!0;var h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&
"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};e.blobMiddlewareFactory=function(){return function(a,b){if(a.data&&a.xhr&&a.xhrType===n["default"].XHR_RESPONSE_TYPE.BLOB)if(!window.Blob||"string"===typeof a.data){var c=a.xhr.getResponseHeader("content-type");if(c&&0===c.indexOf("image")){a.data=new Image;a.data.src="data:"+c+";base64,"+g["default"].encodeBinary(a.xhr.responseText);a.type=n["default"].TYPE.IMAGE;a.data.onload=function(){a.data.onload=null;
b()};return}}else if(0===a.data.type.indexOf("image")&&(c=function(){var c=d.createObjectURL(a.data);a.blob=a.data;a.data=new Image;a.data.src=c;a.type=n["default"].TYPE.IMAGE;a.data.onload=function(){d.revokeObjectURL(c);a.data.onload=null;b()};return{v:void 0}}(),"object"===("undefined"===typeof c?"undefined":h(c))))return c.v;b()}};var n=(f=a("../../Resource"))&&f.__esModule?f:{"default":f},g=(a=a("../../b64"))&&a.__esModule?a:{"default":a},d=window.URL||window.webkitURL},{"../../Resource":31,
"../../b64":33}],36:[function(a,f,e){function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function n(a,b){a._head?(a._tail._next=b,b._prev=a._tail):a._head=b;a._tail=b;b._owner=a;return b}Object.defineProperty(e,"__esModule",{value:!0});var g=function(){function a(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,
c);d&&a(b,d);return b}}(),d=function(){function a(b,c,d){void 0===c&&(c=!1);h(this,a);this._fn=b;this._once=c;this._thisArg=d;this._next=this._prev=this._owner=null}g(a,[{key:"detach",value:function(){if(null===this._owner)return!1;this._owner.detach(this);return!0}}]);return a}();a=function(){function a(){h(this,a);this._head=this._tail=void 0}g(a,[{key:"handlers",value:function(){var a=this._head;if(0>=arguments.length||void 0===arguments[0]?0:arguments[0])return!!a;for(var c=[];a;)c.push(a),a=
a._next;return c}},{key:"has",value:function(a){if(!(a instanceof d))throw Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return a._owner===this}},{key:"dispatch",value:function(){var a=this._head;if(!a)return!1;for(;a;)a._once&&this.detach(a),a._fn.apply(a._thisArg,arguments),a=a._next;return!0}},{key:"add",value:function(a){var b=1>=arguments.length||void 0===arguments[1]?null:arguments[1];if("function"!==typeof a)throw Error("MiniSignal#add(): First arg must be a Function.");
return n(this,new d(a,!1,b))}},{key:"once",value:function(a){var b=1>=arguments.length||void 0===arguments[1]?null:arguments[1];if("function"!==typeof a)throw Error("MiniSignal#once(): First arg must be a Function.");return n(this,new d(a,!0,b))}},{key:"detach",value:function(a){if(!(a instanceof d))throw Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");if(a._owner!==this)return this;a._prev&&(a._prev._next=a._next);a._next&&(a._next._prev=a._prev);a===this._head?(this._head=
a._next,null===a._next&&(this._tail=null)):a===this._tail&&(this._tail=a._prev,this._tail._next=null);a._owner=null;return this}},{key:"detachAll",value:function(){var a=this._head;if(!a)return this;for(this._head=this._tail=null;a;)a._owner=null,a=a._next;return this}}]);return a}();a.MiniSignalBinding=d;e["default"]=a;f.exports=e["default"]},{}],37:[function(a,f,e){f.exports=function(a,e){e=e||{};for(var g="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),
d={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}[e.strictMode?"strict":"loose"].exec(a),c={},b=14;b--;)c[g[b]]=d[b]||"";c.queryKey={};c[g[12]].replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,b,d){b&&(c.queryKey[b]=
d)});return c}},{}],38:[function(a,f,e){e.__esModule=!0;var h=function(a){if(a&&a.__esModule)return a;var d={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);d["default"]=a;return d}(a("../core")),n=(f=a("ismobilejs"))&&f.__esModule?f:{"default":f};a=a("./accessibleTarget");h.utils.mixins.delayMixin(h.DisplayObject.prototype,(a&&a.__esModule?a:{"default":a})["default"]);a=function(){function a(d){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
!n["default"].tablet&&!n["default"].phone||navigator.isCocoonJS||this.createTouchHook();var c=document.createElement("div");c.style.width="100px";c.style.height="100px";c.style.position="absolute";c.style.top="0px";c.style.left="0px";c.style.zIndex=2;this.div=c;this.pool=[];this.renderId=0;this.debug=!1;this.renderer=d;this.children=[];this._onKeyDown=this._onKeyDown.bind(this);this._onMouseMove=this._onMouseMove.bind(this);this.isMobileAccessabillity=this.isActive=!1;window.addEventListener("keydown",
this._onKeyDown,!1)}a.prototype.createTouchHook=function(){var a=this,c=document.createElement("button");c.style.width="1px";c.style.height="1px";c.style.position="absolute";c.style.top="-1000px";c.style.left="-1000px";c.style.zIndex=2;c.style.backgroundColor="#FF0000";c.title="HOOK DIV";c.addEventListener("focus",function(){a.isMobileAccessabillity=!0;a.activate();document.body.removeChild(c)});document.body.appendChild(c)};a.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",
this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))};a.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))};
a.prototype.updateAccessibleObjects=function(a){if(a.visible){a.accessible&&a.interactive&&(a._accessibleActive||this.addChild(a),a.renderId=this.renderId);a=a.children;for(var c=a.length-1;0<=c;c--)this.updateAccessibleObjects(a[c])}};a.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var a=this.renderer.view.getBoundingClientRect(),c=a.width/this.renderer.width,b=a.height/this.renderer.height,k=this.div;k.style.left=
a.left+"px";k.style.top=a.top+"px";k.style.width=this.renderer.width+"px";k.style.height=this.renderer.height+"px";for(a=0;a<this.children.length;a++){var g=this.children[a];if(g.renderId!==this.renderId)g._accessibleActive=!1,h.utils.removeItems(this.children,a,1),this.div.removeChild(g._accessibleDiv),this.pool.push(g._accessibleDiv),g._accessibleDiv=null,a--,0===this.children.length&&this.deactivate();else{var k=g._accessibleDiv,e=g.hitArea,f=g.worldTransform;g.hitArea?(k.style.left=(f.tx+e.x*
f.a)*c+"px",k.style.top=(f.ty+e.y*f.d)*b+"px",k.style.width=e.width*f.a*c+"px",k.style.height=e.height*f.d*b+"px"):(e=g.getBounds(),this.capHitArea(e),k.style.left=e.x*c+"px",k.style.top=e.y*b+"px",k.style.width=e.width*c+"px",k.style.height=e.height*b+"px")}}this.renderId++}};a.prototype.capHitArea=function(a){0>a.x&&(a.width+=a.x,a.x=0);0>a.y&&(a.height+=a.y,a.y=0);a.x+a.width>this.renderer.width&&(a.width=this.renderer.width-a.x);a.y+a.height>this.renderer.height&&(a.height=this.renderer.height-
a.y)};a.prototype.addChild=function(a){var c=this.pool.pop();c||(c=document.createElement("button"),c.style.width="100px",c.style.height="100px",c.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",c.style.position="absolute",c.style.zIndex=2,c.style.borderStyle="none",c.addEventListener("click",this._onClick.bind(this)),c.addEventListener("focus",this._onFocus.bind(this)),c.addEventListener("focusout",this._onFocusOut.bind(this)));a.accessibleTitle?c.title=a.accessibleTitle:a.accessibleTitle||
a.accessibleHint||(c.title="displayObject "+this.tabIndex);a.accessibleHint&&c.setAttribute("aria-label",a.accessibleHint);a._accessibleActive=!0;a._accessibleDiv=c;c.displayObject=a;this.children.push(a);this.div.appendChild(a._accessibleDiv);a._accessibleDiv.tabIndex=a.tabIndex};a.prototype._onClick=function(a){var c=this.renderer.plugins.interaction;c.dispatchEvent(a.target.displayObject,"click",c.eventData)};a.prototype._onFocus=function(a){var c=this.renderer.plugins.interaction;c.dispatchEvent(a.target.displayObject,
"mouseover",c.eventData)};a.prototype._onFocusOut=function(a){var c=this.renderer.plugins.interaction;c.dispatchEvent(a.target.displayObject,"mouseout",c.eventData)};a.prototype._onKeyDown=function(a){9===a.keyCode&&this.activate()};a.prototype._onMouseMove=function(){this.deactivate()};a.prototype.destroy=function(){this.div=null;for(var a=0;a<this.children.length;a++)this.children[a].div=null;window.document.removeEventListener("mousemove",this._onMouseMove);window.removeEventListener("keydown",
this._onKeyDown);this.renderer=this.children=this.pool=null};return a}();e["default"]=a;h.WebGLRenderer.registerPlugin("accessibility",a);h.CanvasRenderer.registerPlugin("accessibility",a)},{"../core":63,"./accessibleTarget":39,ismobilejs:4}],39:[function(a,f,e){e.__esModule=!0;e["default"]={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],40:[function(a,f,e){e.__esModule=!0;var h=a("./accessibleTarget");Object.defineProperty(e,"accessibleTarget",
{enumerable:!0,get:function(){return(h&&h.__esModule?h:{"default":h})["default"]}});var n=a("./AccessibilityManager");Object.defineProperty(e,"AccessibilityManager",{enumerable:!0,get:function(){return(n&&n.__esModule?n:{"default":n})["default"]}})},{"./AccessibilityManager":38,"./accessibleTarget":39}],41:[function(a,f,e){e.__esModule=!0;var h=function(){function a(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,
d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),n=a("./autoDetectRenderer"),g=(f=a("./display/Container"))&&f.__esModule?f:{"default":f},d=a("./ticker");a=function(){function a(b,c,p,e){var k=4<arguments.length&&void 0!==arguments[4]?arguments[4]:!1;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.renderer=(0,n.autoDetectRenderer)(b,c,p,e);this.stage=new g["default"];this._ticker=null;this.ticker=k?d.shared:new d.Ticker;this.start()}
a.prototype.render=function(){this.renderer.render(this.stage)};a.prototype.stop=function(){this._ticker.stop()};a.prototype.start=function(){this._ticker.start()};a.prototype.destroy=function(a){this.stop();this.ticker=null;this.stage.destroy();this.stage=null;this.renderer.destroy(a);this.renderer=null};h(a,[{key:"ticker",set:function(a){this._ticker&&this._ticker.remove(this.render,this);(this._ticker=a)&&a.add(this.render,this)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},
{key:"screen",get:function(){return this.renderer.screen}}]);return a}();e["default"]=a},{"./autoDetectRenderer":43,"./display/Container":46,"./ticker":116}],42:[function(a,f,e){function h(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}function n(a,
c){if(a instanceof Array){if("precision"!==a[0].substring(0,9)){var b=a.slice(0);b.unshift("precision "+c+" float;");return b}}else if("precision"!==a.substring(0,9))return"precision "+c+" float;\n"+a;return a}e.__esModule=!0;f=a("pixi-gl-core");var g=(a=a("./settings"))&&a.__esModule?a:{"default":a};a=function(a){function c(b,d,p){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");b=a.call(this,b,n(d,g["default"].PRECISION_VERTEX),n(p,g["default"].PRECISION_FRAGMENT));
if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?this:b}h(c,a);return c}(f.GLShader);e["default"]=a},{"./settings":99,"pixi-gl-core":12}],43:[function(a,f,e){e.__esModule=!0;e.autoDetectRenderer=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:800,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:600,b=arguments[2];return!arguments[3]&&h.isWebGLSupported()?new g["default"](a,
c,b):new n["default"](a,c,b)};var h=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);c["default"]=a;return c}(a("./utils")),n=(f=a("./renderers/canvas/CanvasRenderer"))&&f.__esModule?f:{"default":f},g=(a=a("./renderers/webgl/WebGLRenderer"))&&a.__esModule?a:{"default":a}},{"./renderers/canvas/CanvasRenderer":75,"./renderers/webgl/WebGLRenderer":82,"./utils":120}],44:[function(a,f,e){e.__esModule=!0;e.VERSION="4.4.1";
e.PI_2=2*Math.PI;e.RAD_TO_DEG=180/Math.PI;e.DEG_TO_RAD=Math.PI/180;e.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2};e.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16};e.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};e.SCALE_MODES={LINEAR:0,NEAREST:1};e.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2};
e.GC_MODES={AUTO:0,MANUAL:1};e.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i;e.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i;e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;e.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4};e.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"};e.TRANSFORM_MODE={STATIC:0,DYNAMIC:1};e.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1}},{}],45:[function(a,
f,e){e.__esModule=!0;var h=a("../math");a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity;this.rect=null}a.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY};a.prototype.clear=function(){this.updateID++;this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};a.prototype.getRectangle=function(a){if(this.minX>this.maxX||this.minY>this.maxY)return h.Rectangle.EMPTY;
a=a||new h.Rectangle(0,0,1,1);a.x=this.minX;a.y=this.minY;a.width=this.maxX-this.minX;a.height=this.maxY-this.minY;return a};a.prototype.addPoint=function(a){this.minX=Math.min(this.minX,a.x);this.maxX=Math.max(this.maxX,a.x);this.minY=Math.min(this.minY,a.y);this.maxY=Math.max(this.maxY,a.y)};a.prototype.addQuad=function(a){var d=this.minX,c=this.minY,b=this.maxX,k=this.maxY,g=a[0],e=a[1],d=g<d?g:d,c=e<c?e:c,b=g>b?g:b,k=e>k?e:k,g=a[2],e=a[3],d=g<d?g:d,c=e<c?e:c,b=g>b?g:b,k=e>k?e:k,g=a[4],e=a[5],
d=g<d?g:d,c=e<c?e:c,b=g>b?g:b,k=e>k?e:k,g=a[6],e=a[7];this.minX=g<d?g:d;this.minY=e<c?e:c;this.maxX=g>b?g:b;this.maxY=e>k?e:k};a.prototype.addFrame=function(a,d,c,b,k){var g=a.worldTransform;a=g.a;var e=g.b,f=g.c,n=g.d,h=g.tx,g=g.ty,x=this.minX,v=this.minY,u=this.maxX,y=this.maxY,z=a*d+f*c+h,A=e*d+n*c+g,x=z<x?z:x,v=A<v?A:v,u=z>u?z:u,y=A>y?A:y,z=a*b+f*c+h,A=e*b+n*c+g,x=z<x?z:x,v=A<v?A:v,u=z>u?z:u,y=A>y?A:y,z=a*d+f*k+h,A=e*d+n*k+g,x=z<x?z:x,v=A<v?A:v,u=z>u?z:u,y=A>y?A:y,z=a*b+f*k+h,A=e*b+n*k+g;this.minX=
z<x?z:x;this.minY=A<v?A:v;this.maxX=z>u?z:u;this.maxY=A>y?A:y};a.prototype.addVertices=function(a,d,c,b){var k=a.worldTransform;a=k.a;for(var g=k.b,e=k.c,f=k.d,n=k.tx,k=k.ty,h=this.minX,x=this.minY,v=this.maxX,u=this.maxY;c<b;c+=2)var y=d[c],z=d[c+1],A=a*y+e*z+n,y=f*z+g*y+k,h=A<h?A:h,x=y<x?y:x,v=A>v?A:v,u=y>u?y:u;this.minX=h;this.minY=x;this.maxX=v;this.maxY=u};a.prototype.addBounds=function(a){var d=this.minX,c=this.minY,b=this.maxX,k=this.maxY;this.minX=a.minX<d?a.minX:d;this.minY=a.minY<c?a.minY:
c;this.maxX=a.maxX>b?a.maxX:b;this.maxY=a.maxY>k?a.maxY:k};a.prototype.addBoundsMask=function(a,d){var c=a.minX>d.minX?a.minX:d.minX,b=a.minY>d.minY?a.minY:d.minY,k=a.maxX<d.maxX?a.maxX:d.maxX,g=a.maxY<d.maxY?a.maxY:d.maxY;if(c<=k&&b<=g){var e=this.minX,f=this.minY,n=this.maxX,h=this.maxY;this.minX=c<e?c:e;this.minY=b<f?b:f;this.maxX=k>n?k:n;this.maxY=g>h?g:h}};a.prototype.addBoundsArea=function(a,d){var c=a.minX>d.x?a.minX:d.x,b=a.minY>d.y?a.minY:d.y,k=a.maxX<d.x+d.width?a.maxX:d.x+d.width,g=a.maxY<
d.y+d.height?a.maxY:d.y+d.height;if(c<=k&&b<=g){var e=this.minX,f=this.minY,n=this.maxX,h=this.maxY;this.minX=c<e?c:e;this.minY=b<f?b:f;this.maxX=k>n?k:n;this.maxY=g>h?g:h}};return a}();e["default"]=a},{"../math":68}],46:[function(a,f,e){function h(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?
Object.setPrototypeOf(a,c):a.__proto__=c)}e.__esModule=!0;var n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(c,b,d){b&&a(c.prototype,b);d&&a(c,d);return c}}(),g=a("../utils");a=a("./DisplayObject");a=function(a){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var b;b=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
b=!b||"object"!==typeof b&&"function"!==typeof b?this:b;b.children=[];return b}h(c,a);c.prototype.onChildrenChange=function(){};c.prototype.addChild=function(a){var b=arguments.length;if(1<b)for(var c=0;c<b;c++)this.addChild(arguments[c]);else a.parent&&a.parent.removeChild(a),a.parent=this,a.transform._parentID=-1,this.children.push(a),this._boundsID++,this.onChildrenChange(this.children.length-1),a.emit("added",this);return a};c.prototype.addChildAt=function(a,c){if(0>c||c>this.children.length)throw Error(a+
"addChildAt: The index "+c+" supplied is out of bounds "+this.children.length);a.parent&&a.parent.removeChild(a);a.parent=this;a.transform._parentID=-1;this.children.splice(c,0,a);this._boundsID++;this.onChildrenChange(c);a.emit("added",this);return a};c.prototype.swapChildren=function(a,c){if(a!==c){var b=this.getChildIndex(a),d=this.getChildIndex(c);this.children[b]=c;this.children[d]=a;this.onChildrenChange(b<d?b:d)}};c.prototype.getChildIndex=function(a){a=this.children.indexOf(a);if(-1===a)throw Error("The supplied DisplayObject must be a child of the caller");
return a};c.prototype.setChildIndex=function(a,c){if(0>c||c>=this.children.length)throw Error("The supplied index is out of bounds");var b=this.getChildIndex(a);(0,g.removeItems)(this.children,b,1);this.children.splice(c,0,a);this.onChildrenChange(c)};c.prototype.getChildAt=function(a){if(0>a||a>=this.children.length)throw Error("getChildAt: Index ("+a+") does not exist.");return this.children[a]};c.prototype.removeChild=function(a){var b=arguments.length;if(1<b)for(var c=0;c<b;c++)this.removeChild(arguments[c]);
else{b=this.children.indexOf(a);if(-1===b)return null;a.parent=null;a.transform._parentID=-1;(0,g.removeItems)(this.children,b,1);this._boundsID++;this.onChildrenChange(b);a.emit("removed",this)}return a};c.prototype.removeChildAt=function(a){var b=this.getChildAt(a);b.parent=null;b.transform._parentID=-1;(0,g.removeItems)(this.children,a,1);this._boundsID++;this.onChildrenChange(a);b.emit("removed",this);return b};c.prototype.removeChildren=function(){var a=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:0,c=arguments[1],c="number"===typeof c?c:this.children.length,d=c-a;if(0<d&&d<=c){c=this.children.splice(a,d);for(d=0;d<c.length;++d)c[d].parent=null,c[d].transform&&(c[d].transform._parentID=-1);this._boundsID++;this.onChildrenChange(a);for(a=0;a<c.length;++a)c[a].emit("removed",this);return c}if(0===d&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.");};c.prototype.updateTransform=function(){this._boundsID++;this.transform.updateTransform(this.parent.transform);
this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var a=0,c=this.children.length;a<c;++a){var d=this.children[a];d.visible&&d.updateTransform()}};c.prototype.calculateBounds=function(){this._bounds.clear();this._calculateBounds();for(var a=0;a<this.children.length;a++){var c=this.children[a];c.visible&&c.renderable&&(c.calculateBounds(),c._mask?(c._mask.calculateBounds(),this._bounds.addBoundsMask(c._bounds,c._mask._bounds)):c.filterArea?this._bounds.addBoundsArea(c._bounds,c.filterArea):this._bounds.addBounds(c._bounds))}this._lastBoundsID=
this._boundsID};c.prototype._calculateBounds=function(){};c.prototype.renderWebGL=function(a){if(this.visible&&!(0>=this.worldAlpha)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(a);else{this._renderWebGL(a);for(var b=0,c=this.children.length;b<c;++b)this.children[b].renderWebGL(a)}};c.prototype.renderAdvancedWebGL=function(a){a.flush();var b=this._filters,c=this._mask;if(b){this._enabledFilters||(this._enabledFilters=[]);for(var d=this._enabledFilters.length=0;d<b.length;d++)b[d].enabled&&
this._enabledFilters.push(b[d]);this._enabledFilters.length&&a.filterManager.pushFilter(this,this._enabledFilters)}c&&a.maskManager.pushMask(this,this._mask);this._renderWebGL(a);for(var d=0,g=this.children.length;d<g;d++)this.children[d].renderWebGL(a);a.flush();c&&a.maskManager.popMask(this,this._mask);b&&this._enabledFilters&&this._enabledFilters.length&&a.filterManager.popFilter()};c.prototype._renderWebGL=function(a){};c.prototype._renderCanvas=function(a){};c.prototype.renderCanvas=function(a){if(this.visible&&
!(0>=this.worldAlpha)&&this.renderable){this._mask&&a.maskManager.pushMask(this._mask);this._renderCanvas(a);for(var b=0,c=this.children.length;b<c;++b)this.children[b].renderCanvas(a);this._mask&&a.maskManager.popMask(a)}};c.prototype.destroy=function(b){a.prototype.destroy.call(this);var c="boolean"===typeof b?b:b&&b.children,d=this.removeChildren(0,this.children.length);if(c)for(c=0;c<d.length;++c)d[c].destroy(b)};n(c,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},
set:function(a){var b=this.getLocalBounds().width;this.scale.x=0!==b?a/b:1;this._width=a}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(a){var b=this.getLocalBounds().height;this.scale.y=0!==b?a/b:1;this._height=a}}]);return c}((a&&a.__esModule?a:{"default":a})["default"]);e["default"]=a;a.prototype.containerUpdateTransform=a.prototype.updateTransform},{"../utils":120,"./DisplayObject":47}],47:[function(a,f,e){function h(a){return a&&a.__esModule?a:{"default":a}}
function n(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.__esModule=!0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,
d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();f=a("eventemitter3");f=h(f);var d=a("../const"),c=a("../settings"),b=h(c),c=a("./TransformStatic"),k=h(c),c=a("./Transform"),p=h(c),c=a("./Bounds"),r=h(c),q=a("../math");a=function(a){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var g;g=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");g=!g||"object"!==typeof g&&"function"!==
typeof g?this:g;var e=b["default"].TRANSFORM_MODE===d.TRANSFORM_MODE.STATIC?k["default"]:p["default"];g.tempDisplayObjectParent=null;g.transform=new e;g.alpha=1;g.visible=!0;g.renderable=!0;g.parent=null;g.worldAlpha=1;g.filterArea=null;g._filters=null;g._enabledFilters=null;g._bounds=new r["default"];g._boundsID=0;g._lastBoundsID=-1;g._boundsRect=null;g._localBoundsRect=null;g._mask=null;return g}n(c,a);c.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform);
this.worldAlpha=this.alpha*this.parent.worldAlpha;this._bounds.updateID++};c.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)};c.prototype.getBounds=function(a,b){a||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=
null));this._boundsID!==this._lastBoundsID&&this.calculateBounds();b||(this._boundsRect||(this._boundsRect=new q.Rectangle),b=this._boundsRect);return this._bounds.getRectangle(b)};c.prototype.getLocalBounds=function(a){var b=this.transform,c=this.parent;this.parent=null;this.transform=this._tempDisplayObjectParent.transform;a||(this._localBoundsRect||(this._localBoundsRect=new q.Rectangle),a=this._localBoundsRect);a=this.getBounds(!1,a);this.parent=c;this.transform=b;return a};c.prototype.toGlobal=
function(a,b){2<arguments.length&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null));return this.worldTransform.apply(a,b)};c.prototype.toLocal=function(a,b,c,d){b&&(a=b.toGlobal(a,c,d));d||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),
this.parent=null));return this.worldTransform.applyInverse(a,c)};c.prototype.renderWebGL=function(a){};c.prototype.renderCanvas=function(a){};c.prototype.setParent=function(a){if(!a||!a.addChild)throw Error("setParent: Argument must be a Container");a.addChild(this);return a};c.prototype.setTransform=function(){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,c=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,d=4<arguments.length&&
void 0!==arguments[4]?arguments[4]:0,k=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,g=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,e=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,p=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0;this.position.x=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this.position.y=a;this.scale.x=b?b:1;this.scale.y=c?c:1;this.rotation=d;this.skew.x=k;this.skew.y=g;this.pivot.x=e;this.pivot.y=p;return this};c.prototype.destroy=
function(){this.removeAllListeners();this.parent&&this.parent.removeChild(this);this.filterArea=this._mask=this._currentBounds=this._bounds=this.parent=this.transform=null;this.interactiveChildren=this.interactive=!1};g(c,[{key:"_tempDisplayObjectParent",get:function(){null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new c);return this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(a){this.transform.position.x=a}},{key:"y",get:function(){return this.position.y},
set:function(a){this.transform.position.y=a}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(a){this.transform.position.copy(a)}},{key:"scale",get:function(){return this.transform.scale},set:function(a){this.transform.scale.copy(a)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(a){this.transform.pivot.copy(a)}},
{key:"skew",get:function(){return this.transform.skew},set:function(a){this.transform.skew.copy(a)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(a){this.transform.rotation=a}},{key:"worldVisible",get:function(){var a=this;do{if(!a.visible)return!1;a=a.parent}while(a);return!0}},{key:"mask",get:function(){return this._mask},set:function(a){this._mask&&(this._mask.renderable=!0);if(this._mask=a)this._mask.renderable=!1}},{key:"filters",get:function(){return this._filters&&
this._filters.slice()},set:function(a){this._filters=a&&a.slice()}}]);return c}(f["default"]);e["default"]=a;a.prototype.displayObjectUpdateTransform=a.prototype.updateTransform},{"../const":44,"../math":68,"../settings":99,"./Bounds":45,"./Transform":48,"./TransformStatic":50,eventemitter3:3}],48:[function(a,f,e){function h(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}e.__esModule=!0;var n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(c,b,d){b&&a(c.prototype,b);d&&a(c,d);return c}}(),g=a("../math");a=a("./TransformBase");a=function(a){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
var b;b=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");b=!b||"object"!==typeof b&&"function"!==typeof b?this:b;b.position=new g.Point(0,0);b.scale=new g.Point(1,1);b.skew=new g.ObservablePoint(b.updateSkew,b,0,0);b.pivot=new g.Point(0,0);b._rotation=0;b._cx=1;b._sx=0;b._cy=0;b._sy=1;return b}h(c,a);c.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y);this._sx=Math.sin(this._rotation+this.skew._y);this._cy=-Math.sin(this._rotation-
this.skew._x);this._sy=Math.cos(this._rotation-this.skew._x)};c.prototype.updateLocalTransform=function(){var a=this.localTransform;a.a=this._cx*this.scale.x;a.b=this._sx*this.scale.x;a.c=this._cy*this.scale.y;a.d=this._sy*this.scale.y;a.tx=this.position.x-(this.pivot.x*a.a+this.pivot.y*a.c);a.ty=this.position.y-(this.pivot.x*a.b+this.pivot.y*a.d)};c.prototype.updateTransform=function(a){var b=this.localTransform;b.a=this._cx*this.scale.x;b.b=this._sx*this.scale.x;b.c=this._cy*this.scale.y;b.d=this._sy*
this.scale.y;b.tx=this.position.x-(this.pivot.x*b.a+this.pivot.y*b.c);b.ty=this.position.y-(this.pivot.x*b.b+this.pivot.y*b.d);a=a.worldTransform;var c=this.worldTransform;c.a=b.a*a.a+b.b*a.c;c.b=b.a*a.b+b.b*a.d;c.c=b.c*a.a+b.d*a.c;c.d=b.c*a.b+b.d*a.d;c.tx=b.tx*a.a+b.ty*a.c+a.tx;c.ty=b.tx*a.b+b.ty*a.d+a.ty;this._worldID++};c.prototype.setFromMatrix=function(a){a.decompose(this)};n(c,[{key:"rotation",get:function(){return this._rotation},set:function(a){this._rotation=a;this.updateSkew()}}]);return c}((a&&
a.__esModule?a:{"default":a})["default"]);e["default"]=a},{"../math":68,"./TransformBase":49}],49:[function(a,f,e){e.__esModule=!0;var h=a("../math");a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.worldTransform=new h.Matrix;this.localTransform=new h.Matrix;this._parentID=this._worldID=0}a.prototype.updateLocalTransform=function(){};a.prototype.updateTransform=function(a){a=a.worldTransform;var d=this.worldTransform,c=this.localTransform;
d.a=c.a*a.a+c.b*a.c;d.b=c.a*a.b+c.b*a.d;d.c=c.c*a.a+c.d*a.c;d.d=c.c*a.b+c.d*a.d;d.tx=c.tx*a.a+c.ty*a.c+a.tx;d.ty=c.tx*a.b+c.ty*a.d+a.ty;this._worldID++};return a}();e["default"]=a;a.prototype.updateWorldTransform=a.prototype.updateTransform;a.IDENTITY=new a},{"../math":68}],50:[function(a,f,e){function h(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,
writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}e.__esModule=!0;var n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(c,b,d){b&&a(c.prototype,b);d&&a(c,d);return c}}(),g=a("../math");a=a("./TransformBase");a=function(a){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
var b;b=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");b=!b||"object"!==typeof b&&"function"!==typeof b?this:b;b.position=new g.ObservablePoint(b.onChange,b,0,0);b.scale=new g.ObservablePoint(b.onChange,b,1,1);b.pivot=new g.ObservablePoint(b.onChange,b,0,0);b.skew=new g.ObservablePoint(b.updateSkew,b,0,0);b._rotation=0;b._cx=1;b._sx=0;b._cy=0;b._sy=1;b._localID=0;b._currentLocalID=0;return b}h(c,a);c.prototype.onChange=function(){this._localID++};
c.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y);this._sx=Math.sin(this._rotation+this.skew._y);this._cy=-Math.sin(this._rotation-this.skew._x);this._sy=Math.cos(this._rotation-this.skew._x);this._localID++};c.prototype.updateLocalTransform=function(){var a=this.localTransform;this._localID!==this._currentLocalID&&(a.a=this._cx*this.scale._x,a.b=this._sx*this.scale._x,a.c=this._cy*this.scale._y,a.d=this._sy*this.scale._y,a.tx=this.position._x-(this.pivot._x*a.a+this.pivot._y*
a.c),a.ty=this.position._y-(this.pivot._x*a.b+this.pivot._y*a.d),this._currentLocalID=this._localID,this._parentID=-1)};c.prototype.updateTransform=function(a){var b=this.localTransform;this._localID!==this._currentLocalID&&(b.a=this._cx*this.scale._x,b.b=this._sx*this.scale._x,b.c=this._cy*this.scale._y,b.d=this._sy*this.scale._y,b.tx=this.position._x-(this.pivot._x*b.a+this.pivot._y*b.c),b.ty=this.position._y-(this.pivot._x*b.b+this.pivot._y*b.d),this._currentLocalID=this._localID,this._parentID=
-1);if(this._parentID!==a._worldID){var c=a.worldTransform,d=this.worldTransform;d.a=b.a*c.a+b.b*c.c;d.b=b.a*c.b+b.b*c.d;d.c=b.c*c.a+b.d*c.c;d.d=b.c*c.b+b.d*c.d;d.tx=b.tx*c.a+b.ty*c.c+c.tx;d.ty=b.tx*c.b+b.ty*c.d+c.ty;this._parentID=a._worldID;this._worldID++}};c.prototype.setFromMatrix=function(a){a.decompose(this);this._localID++};n(c,[{key:"rotation",get:function(){return this._rotation},set:function(a){this._rotation=a;this.updateSkew()}}]);return c}((a&&a.__esModule?a:{"default":a})["default"]);
e["default"]=a},{"../math":68,"./TransformBase":49}],51:[function(a,f,e){function h(a){return a&&a.__esModule?a:{"default":a}}function n(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.__esModule=!0;f=a("../display/Container");f=h(f);var g=a("../textures/RenderTexture"),
d=h(g),g=a("../textures/Texture"),c=h(g),g=a("./GraphicsData"),b=h(g),g=a("../sprites/Sprite"),k=h(g),p=a("../math"),r=a("../utils"),q=a("../const"),g=a("../display/Bounds"),t=h(g),g=a("./utils/bezierCurveTo"),w=h(g);a=a("../renderers/canvas/CanvasRenderer");var x=h(a),v=void 0,u=new p.Matrix,y=new p.Point,z=new Float32Array(4),A=new Float32Array(4);a=function(a){function g(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1;if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");
var c;c=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.fillAlpha=1;c.lineWidth=0;c.nativeLines=b;c.lineColor=0;c.graphicsData=[];c.tint=16777215;c._prevTint=16777215;c.blendMode=q.BLEND_MODES.NORMAL;c.currentPath=null;c._webGL={};c.isMask=!1;c.boundsPadding=0;c._localBounds=new t["default"];c.dirty=0;c.fastRectDirty=-1;c.clearDirty=0;c.boundsDirty=-1;c.cachedSpriteDirty=!1;c._spriteRect=
null;c._fastRect=!1;return c}n(g,a);g.prototype.clone=function(){var a=new g;a.renderable=this.renderable;a.fillAlpha=this.fillAlpha;a.lineWidth=this.lineWidth;a.lineColor=this.lineColor;a.tint=this.tint;a.blendMode=this.blendMode;a.isMask=this.isMask;a.boundsPadding=this.boundsPadding;a.dirty=0;a.cachedSpriteDirty=this.cachedSpriteDirty;for(var b=0;b<this.graphicsData.length;++b)a.graphicsData.push(this.graphicsData[b].clone());a.currentPath=a.graphicsData[a.graphicsData.length-1];a.updateLocalBounds();
return a};g.prototype.lineStyle=function(){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;this.lineWidth=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this.lineColor=a;this.lineAlpha=b;this.currentPath&&(this.currentPath.shape.points.length?(a=new p.Polygon(this.currentPath.shape.points.slice(-2)),a.closed=!1,this.drawShape(a)):(this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,
this.currentPath.lineAlpha=this.lineAlpha));return this};g.prototype.moveTo=function(a,b){var c=new p.Polygon([a,b]);c.closed=!1;this.drawShape(c);return this};g.prototype.lineTo=function(a,b){this.currentPath.shape.points.push(a,b);this.dirty++;return this};g.prototype.quadraticCurveTo=function(a,b,c,d){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var k=this.currentPath.shape.points,g,e;0===k.length&&this.moveTo(0,0);for(var p=
k[k.length-2],f=k[k.length-1],n=1;20>=n;++n){var q=n/20;g=p+(a-p)*q;e=f+(b-f)*q;k.push(g+(a+(c-a)*q-g)*q,e+(b+(d-b)*q-e)*q)}this.dirty++;return this};g.prototype.bezierCurveTo=function(a,b,c,d,k,g){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var e=this.currentPath.shape.points,p=e[e.length-2],f=e[e.length-1];e.length-=2;(0,w["default"])(p,f,a,b,c,d,k,g,e);this.dirty++;return this};g.prototype.arcTo=function(a,b,c,d,k){this.currentPath?
0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(a,b):this.moveTo(a,b);var g=this.currentPath.shape.points,e=g[g.length-1]-b,p=g[g.length-2]-a;d-=b;c-=a;var f=Math.abs(e*c-p*d);if(1E-8>f||0===k)g[g.length-2]===a&&g[g.length-1]===b||g.push(a,b);else{var n=e*e+p*p,q=d*d+c*c,h=e*d+p*c,g=k*Math.sqrt(n)/f,f=k*Math.sqrt(q)/f,n=g*h/n,q=f*h/q,h=g*c+f*p,t=g*d+f*e;this.arc(h+a,t+b,k,Math.atan2(e*(f+n)-t,p*(f+n)-h),Math.atan2(d*(g+q)-t,c*(g+q)-h),p*d>c*e)}this.dirty++;return this};
g.prototype.arc=function(a,b,c,d,k){var g=5<arguments.length&&void 0!==arguments[5]?arguments[5]:!1;if(d===k)return this;!g&&k<=d?k+=2*Math.PI:g&&d<=k&&(d+=2*Math.PI);var e=k-d,p=40*Math.ceil(Math.abs(e)/(2*Math.PI));if(0===e)return this;var f=a+Math.cos(d)*c,n=b+Math.sin(d)*c;(g=this.currentPath?this.currentPath.shape.points:null)?g[g.length-2]===f&&g[g.length-1]===n||g.push(f,n):(this.moveTo(f,n),g=this.currentPath.shape.points);for(var e=e/(2*p),f=2*e,n=Math.cos(e),q=Math.sin(e),p=p-1,h=p%1/p,
t=0;t<=p;++t){var r=e+d+f*(t+h*t),w=Math.cos(r),r=-Math.sin(r);g.push((n*w+q*r)*c+a,(n*-r+q*w)*c+b)}this.dirty++;return this};g.prototype.beginFill=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.filling=!0;this.fillColor=a;this.fillAlpha=b;this.currentPath&&2>=this.currentPath.shape.points.length&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha);
return this};g.prototype.endFill=function(){this.filling=!1;this.fillColor=null;this.fillAlpha=1;return this};g.prototype.drawRect=function(a,b,c,d){this.drawShape(new p.Rectangle(a,b,c,d));return this};g.prototype.drawRoundedRect=function(a,b,c,d,k){this.drawShape(new p.RoundedRectangle(a,b,c,d,k));return this};g.prototype.drawCircle=function(a,b,c){this.drawShape(new p.Circle(a,b,c));return this};g.prototype.drawEllipse=function(a,b,c,d){this.drawShape(new p.Ellipse(a,b,c,d));return this};g.prototype.drawPolygon=
function(a){var b=a,c=!0;b instanceof p.Polygon&&(c=b.closed,b=b.points);if(!Array.isArray(b))for(var b=Array(arguments.length),d=0;d<b.length;++d)b[d]=arguments[d];b=new p.Polygon(b);b.closed=c;this.drawShape(b);return this};g.prototype.clear=function(){if(this.lineWidth||this.filling||0<this.graphicsData.length)this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0;this._spriteRect=this.currentPath=null;return this};g.prototype.isFastRect=
function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===q.SHAPES.RECT&&!this.graphicsData[0].lineWidth};g.prototype._renderWebGL=function(a){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect());this._fastRect?this._renderSpriteRect(a):(a.setObjectRenderer(a.plugins.graphics),a.plugins.graphics.render(this))};g.prototype._renderSpriteRect=function(a){var b=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new k["default"](new c["default"](c["default"].WHITE)));
var d=this._spriteRect;16777215===this.tint?d.tint=this.graphicsData[0].fillColor:((0,r.hex2rgb)(this.graphicsData[0].fillColor,z),(0,r.hex2rgb)(this.tint,A),z[0]*=A[0],z[1]*=A[1],z[2]*=A[2],d.tint=(0,r.rgb2hex)(z));d.alpha=this.graphicsData[0].fillAlpha;d.worldAlpha=this.worldAlpha*d.alpha;d.blendMode=this.blendMode;d.texture._frame.width=b.width;d.texture._frame.height=b.height;d.transform.worldTransform=this.transform.worldTransform;d.anchor.set(-b.x/b.width,-b.y/b.height);d._onAnchorUpdate();
d._renderWebGL(a)};g.prototype._renderCanvas=function(a){!0!==this.isMask&&a.plugins.graphics.render(this)};g.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var a=this._localBounds;this._bounds.addFrame(this.transform,a.minX,a.minY,a.maxX,a.maxY)};g.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,y);a=this.graphicsData;for(var b=0;b<a.length;++b){var c=a[b];if(c.fill&&c.shape&&
c.shape.contains(y.x,y.y))return!0}return!1};g.prototype.updateLocalBounds=function(){var a=Infinity,b=-Infinity,c=Infinity,d=-Infinity;if(this.graphicsData.length)for(var k,g,e,p,f,n=0;n<this.graphicsData.length;n++){k=this.graphicsData[n];e=k.type;var h=k.lineWidth;k=k.shape;if(e===q.SHAPES.RECT||e===q.SHAPES.RREC)g=k.x-h/2,e=k.y-h/2,p=k.width+h,f=k.height+h,a=g<a?g:a,b=g+p>b?g+p:b,c=e<c?e:c,d=e+f>d?e+f:d;else if(e===q.SHAPES.CIRC)g=k.x,e=k.y,p=k.radius+h/2,f=k.radius+h/2,a=g-p<a?g-p:a,b=g+p>b?
g+p:b,c=e-f<c?e-f:c,d=e+f>d?e+f:d;else if(e===q.SHAPES.ELIP)g=k.x,e=k.y,p=k.width+h/2,f=k.height+h/2,a=g-p<a?g-p:a,b=g+p>b?g+p:b,c=e-f<c?e-f:c,d=e+f>d?e+f:d;else{k=k.points;for(var t,r,w,x,u,v=0;v+2<k.length;v+=2)g=k[v],e=k[v+1],t=k[v+2],r=k[v+3],w=Math.abs(t-g),x=Math.abs(r-e),f=h,p=Math.sqrt(w*w+x*x),1E-9>p||(u=(f/p*x+w)/2,p=(f/p*w+x)/2,g=(t+g)/2,e=(r+e)/2,a=g-u<a?g-u:a,b=g+u>b?g+u:b,c=e-p<c?e-p:c,d=e+p>d?e+p:d)}}else d=c=b=a=0;n=this.boundsPadding;this._localBounds.minX=a-n;this._localBounds.maxX=
b+2*n;this._localBounds.minY=c-n;this._localBounds.maxY=d+2*n};g.prototype.drawShape=function(a){this.currentPath&&2>=this.currentPath.shape.points.length&&this.graphicsData.pop();this.currentPath=null;a=new b["default"](this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,a);this.graphicsData.push(a);a.type===q.SHAPES.POLY&&(a.shape.closed=a.shape.closed||this.filling,this.currentPath=a);this.dirty++;return a};g.prototype.generateCanvasTexture=
function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,k=this.getLocalBounds(),g=d["default"].create(k.width,k.height,a,b);v||(v=new x["default"]);this.transform.updateLocalTransform();this.transform.localTransform.copy(u);u.invert();u.tx-=k.x;u.ty-=k.y;v.render(this,g,!0,u);k=c["default"].fromCanvas(g.baseTexture._canvasRenderTarget.canvas,a);k.baseTexture.resolution=b;k.baseTexture.update();return k};g.prototype.closePath=function(){var a=this.currentPath;a&&a.shape&&a.shape.close();
return this};g.prototype.addHole=function(){var a=this.graphicsData.pop();this.currentPath=this.graphicsData[this.graphicsData.length-1];this.currentPath.addHole(a.shape);this.currentPath=null;return this};g.prototype.destroy=function(b){a.prototype.destroy.call(this,b);for(b=0;b<this.graphicsData.length;++b)this.graphicsData[b].destroy();for(var c in this._webgl)for(b=0;b<this._webgl[c].data.length;++b)this._webgl[c].data[b].destroy();this._spriteRect&&this._spriteRect.destroy();this._localBounds=
this._webgl=this.currentPath=this.graphicsData=null};return g}(f["default"]);e["default"]=a;a._SPRITE_TEXTURE=null},{"../const":44,"../display/Bounds":45,"../display/Container":46,"../math":68,"../renderers/canvas/CanvasRenderer":75,"../sprites/Sprite":100,"../textures/RenderTexture":110,"../textures/Texture":112,"../utils":120,"./GraphicsData":52,"./utils/bezierCurveTo":54}],52:[function(a,f,e){e.__esModule=!0;a=function(){function a(e,g,d,c,b,k,p,f){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.lineWidth=e;this.nativeLines=p;this.lineColor=g;this.lineAlpha=d;this._lineTint=g;this.fillColor=c;this.fillAlpha=b;this._fillTint=c;this.fill=k;this.holes=[];this.shape=f;this.type=f.type}a.prototype.clone=function(){return new a(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)};a.prototype.addHole=function(a){this.holes.push(a)};a.prototype.destroy=function(){this.holes=this.shape=null};return a}();e["default"]=a},{}],53:[function(a,
f,e){e.__esModule=!0;f=(f=a("../../renderers/canvas/CanvasRenderer"))&&f.__esModule?f:{"default":f};var h=a("../../const");a=function(){function a(g){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.renderer=g}a.prototype.render=function(a){var d=this.renderer,c=d.context,b=a.worldAlpha,k=a.transform.worldTransform,g=d.resolution;this._prevTint!==this.tint&&(this.dirty=!0);c.setTransform(k.a*g,k.b*g,k.c*g,k.d*g,k.tx*g,k.ty*g);a.dirty&&(this.updateGraphicsTint(a),
a.dirty=!1);d.setBlendMode(a.blendMode);for(d=0;d<a.graphicsData.length;d++){var k=a.graphicsData[d],e=k.shape,g=k._fillTint,f=k._lineTint;c.lineWidth=k.lineWidth;if(k.type===h.SHAPES.POLY){c.beginPath();this.renderPolygon(e.points,e.closed,c);for(var n=0;n<k.holes.length;n++)this.renderPolygon(k.holes[n].points,!0,c);k.fill&&(c.globalAlpha=k.fillAlpha*b,c.fillStyle="#"+("00000"+(g|0).toString(16)).substr(-6),c.fill());k.lineWidth&&(c.globalAlpha=k.lineAlpha*b,c.strokeStyle="#"+("00000"+(f|0).toString(16)).substr(-6),
c.stroke())}else if(k.type===h.SHAPES.RECT){if(k.fillColor||0===k.fillColor)c.globalAlpha=k.fillAlpha*b,c.fillStyle="#"+("00000"+(g|0).toString(16)).substr(-6),c.fillRect(e.x,e.y,e.width,e.height);k.lineWidth&&(c.globalAlpha=k.lineAlpha*b,c.strokeStyle="#"+("00000"+(f|0).toString(16)).substr(-6),c.strokeRect(e.x,e.y,e.width,e.height))}else if(k.type===h.SHAPES.CIRC)c.beginPath(),c.arc(e.x,e.y,e.radius,0,2*Math.PI),c.closePath(),k.fill&&(c.globalAlpha=k.fillAlpha*b,c.fillStyle="#"+("00000"+(g|0).toString(16)).substr(-6),
c.fill()),k.lineWidth&&(c.globalAlpha=k.lineAlpha*b,c.strokeStyle="#"+("00000"+(f|0).toString(16)).substr(-6),c.stroke());else if(k.type===h.SHAPES.ELIP){var w=2*e.width,x=2*e.height,n=e.x-w/2,e=e.y-x/2;c.beginPath();var v=w/2*.5522848,u=x/2*.5522848,y=n+w,z=e+x,w=n+w/2,x=e+x/2;c.moveTo(n,x);c.bezierCurveTo(n,x-u,w-v,e,w,e);c.bezierCurveTo(w+v,e,y,x-u,y,x);c.bezierCurveTo(y,x+u,w+v,z,w,z);c.bezierCurveTo(w-v,z,n,x+u,n,x);c.closePath();k.fill&&(c.globalAlpha=k.fillAlpha*b,c.fillStyle="#"+("00000"+
(g|0).toString(16)).substr(-6),c.fill());k.lineWidth&&(c.globalAlpha=k.lineAlpha*b,c.strokeStyle="#"+("00000"+(f|0).toString(16)).substr(-6),c.stroke())}else if(k.type===h.SHAPES.RREC){n=e.x;x=e.y;v=e.width;u=e.height;e=e.radius;y=Math.min(v,u)/2|0;e=e>y?y:e;c.beginPath();c.moveTo(n,x+e);c.lineTo(n,x+u-e);c.quadraticCurveTo(n,x+u,n+e,x+u);c.lineTo(n+v-e,x+u);c.quadraticCurveTo(n+v,x+u,n+v,x+u-e);c.lineTo(n+v,x+e);c.quadraticCurveTo(n+v,x,n+v-e,x);c.lineTo(n+e,x);c.quadraticCurveTo(n,x,n,x+e);c.closePath();
if(k.fillColor||0===k.fillColor)c.globalAlpha=k.fillAlpha*b,c.fillStyle="#"+("00000"+(g|0).toString(16)).substr(-6),c.fill();k.lineWidth&&(c.globalAlpha=k.lineAlpha*b,c.strokeStyle="#"+("00000"+(f|0).toString(16)).substr(-6),c.stroke())}}};a.prototype.updateGraphicsTint=function(a){a._prevTint=a.tint;for(var d=(a.tint>>16&255)/255,c=(a.tint>>8&255)/255,b=(a.tint&255)/255,k=0;k<a.graphicsData.length;++k){var g=a.graphicsData[k],e=g.fillColor|0,f=g.lineColor|0;g._fillTint=((e>>16&255)/255*d*255<<16)+
((e>>8&255)/255*c*255<<8)+(e&255)/255*b*255;g._lineTint=((f>>16&255)/255*d*255<<16)+((f>>8&255)/255*c*255<<8)+(f&255)/255*b*255}};a.prototype.renderPolygon=function(a,d,c){c.moveTo(a[0],a[1]);for(var b=1;b<a.length/2;++b)c.lineTo(a[2*b],a[2*b+1]);d&&c.closePath()};a.prototype.destroy=function(){this.renderer=null};return a}();e["default"]=a;f["default"].registerPlugin("graphics",a)},{"../../const":44,"../../renderers/canvas/CanvasRenderer":75}],54:[function(a,f,e){e.__esModule=!0;e["default"]=function(a,
e,g,d,c,b,k,f){var p=8<arguments.length&&void 0!==arguments[8]?arguments[8]:[],n,h,w,x,v;p.push(a,e);for(var u=1,y;20>=u;++u)y=u/20,n=1-y,h=n*n,w=h*n,x=y*y,v=x*y,p.push(w*a+3*h*y*g+3*n*x*c+v*k,w*e+3*h*y*d+3*n*x*b+v*f);return p}},{}],55:[function(a,f,e){function h(a){return a&&a.__esModule?a:{"default":a}}function n(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.__esModule=!0;var g=a("../../utils"),d=a("../../const");f=a("../../renderers/webgl/utils/ObjectRenderer");var c=h(f);f=a("../../renderers/webgl/WebGLRenderer");f=h(f);var b=a("./WebGLGraphicsData"),k=h(b),b=a("./shaders/PrimitiveShader"),p=h(b),b=a("./utils/buildPoly"),r=h(b),b=a("./utils/buildRectangle"),q=h(b),b=a("./utils/buildRoundedRectangle"),t=h(b);a=a("./utils/buildCircle");var w=
h(a);a=function(a){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var d;d=a.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");d=!d||"object"!==typeof d&&"function"!==typeof d?this:d;d.graphicsDataPool=[];d.primitiveShader=null;d.gl=c.gl;d.CONTEXT_UID=0;return d}n(b,a);b.prototype.onContextChange=function(){this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID;this.primitiveShader=
new p["default"](this.gl)};b.prototype.destroy=function(){c["default"].prototype.destroy.call(this);for(var a=0;a<this.graphicsDataPool.length;++a)this.graphicsDataPool[a].destroy();this.graphicsDataPool=null};b.prototype.render=function(a){var b=this.renderer,c=b.gl,d,k=a._webGL[this.CONTEXT_UID];k&&a.dirty===k.dirty||(this.updateGraphics(a),k=a._webGL[this.CONTEXT_UID]);b.bindShader(this.primitiveShader);b.state.setBlendMode(a.blendMode);for(var e=0,f=k.data.length;e<f;e++){d=k.data[e];var p=d.shader;
b.bindShader(p);p.uniforms.translationMatrix=a.transform.worldTransform.toArray(!0);p.uniforms.tint=(0,g.hex2rgb)(a.tint);p.uniforms.alpha=a.worldAlpha;b.bindVao(d.vao);a.nativeLines?c.drawArrays(c.LINES,0,d.points.length/6):d.vao.draw(c.TRIANGLE_STRIP,d.indices.length)}};b.prototype.updateGraphics=function(a){var b=this.renderer.gl,c=a._webGL[this.CONTEXT_UID];c||(c=a._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:b,clearDirty:-1,dirty:-1});c.dirty=a.dirty;if(a.clearDirty!==c.clearDirty){c.clearDirty=
a.clearDirty;for(b=0;b<c.data.length;b++)this.graphicsDataPool.push(c.data[b]);c.data.length=0;c.lastIndex=0}for(var k=c.lastIndex;k<a.graphicsData.length;k++){var g=a.graphicsData[k],b=this.getWebGLData(c,0);g.type===d.SHAPES.POLY&&(0,r["default"])(g,b);g.type===d.SHAPES.RECT?(0,q["default"])(g,b):g.type===d.SHAPES.CIRC||g.type===d.SHAPES.ELIP?(0,w["default"])(g,b):g.type===d.SHAPES.RREC&&(0,t["default"])(g,b);c.lastIndex++}this.renderer.bindVao(null);for(a=0;a<c.data.length;a++)b=c.data[a],b.dirty&&
b.upload()};b.prototype.getWebGLData=function(a,b){var c=a.data[a.data.length-1];if(!c||32E4<c.points.length)c=this.graphicsDataPool.pop()||new k["default"](this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),c.reset(b),a.data.push(c);c.dirty=!0;return c};return b}(c["default"]);e["default"]=a;f["default"].registerPlugin("graphics",a)},{"../../const":44,"../../renderers/webgl/WebGLRenderer":82,"../../renderers/webgl/utils/ObjectRenderer":92,"../../utils":120,"./WebGLGraphicsData":56,
"./shaders/PrimitiveShader":57,"./utils/buildCircle":58,"./utils/buildPoly":60,"./utils/buildRectangle":61,"./utils/buildRoundedRectangle":62}],56:[function(a,f,e){e.__esModule=!0;var h=(a=a("pixi-gl-core"))&&a.__esModule?a:{"default":a};a=function(){function a(g,d,c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.gl=g;this.color=[0,0,0];this.points=[];this.indices=[];this.buffer=h["default"].GLBuffer.createVertexBuffer(g);this.indexBuffer=h["default"].GLBuffer.createIndexBuffer(g);
this.dirty=!0;this.glIndices=this.glPoints=null;this.shader=d;this.vao=(new h["default"].VertexArrayObject(g,c)).addIndex(this.indexBuffer).addAttribute(this.buffer,d.attributes.aVertexPosition,g.FLOAT,!1,24,0).addAttribute(this.buffer,d.attributes.aColor,g.FLOAT,!1,24,8)}a.prototype.reset=function(){this.points.length=0;this.indices.length=0};a.prototype.upload=function(){this.glPoints=new Float32Array(this.points);this.buffer.upload(this.glPoints);this.glIndices=new Uint16Array(this.indices);this.indexBuffer.upload(this.glIndices);
this.dirty=!1};a.prototype.destroy=function(){this.indices=this.points=this.color=null;this.vao.destroy();this.buffer.destroy();this.indexBuffer.destroy();this.glIndices=this.glPoints=this.indexBuffer=this.buffer=this.gl=null};return a}();e["default"]=a},{"pixi-gl-core":12}],57:[function(a,f,e){function h(a,g){if("function"!==typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);a.prototype=Object.create(g&&g.prototype,{constructor:{value:a,enumerable:!1,
writable:!0,configurable:!0}});g&&(Object.setPrototypeOf?Object.setPrototypeOf(a,g):a.__proto__=g)}e.__esModule=!0;a=a("../../../Shader");a=function(a){function g(d){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");d=a.call(this,d,"attribute vec2 aVertexPosition;\nattribute vec4 aColor;\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\nuniform float alpha;\nuniform vec3 tint;\nvarying vec4 vColor;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vColor = aColor * vec4(tint * alpha, alpha);\n}",
"varying vec4 vColor;\nvoid main(void){\n   gl_FragColor = vColor;\n}");if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!d||"object"!==typeof d&&"function"!==typeof d?this:d}h(g,a);return g}((a&&a.__esModule?a:{"default":a})["default"]);e["default"]=a},{"../../../Shader":42}],58:[function(a,f,e){e.__esModule=!0;e["default"]=function(a,c){var b=a.shape,d=b.x,e=b.y,f,q;a.type===n.SHAPES.CIRC?q=f=b.radius:(f=b.width,q=b.height);if(0!==f&&0!==q){var b=
Math.floor(30*Math.sqrt(b.radius))||Math.floor(15*Math.sqrt(b.width+b.height)),t=2*Math.PI/b;if(a.fill){var w=(0,g.hex2rgb)(a.fillColor),x=a.fillAlpha,v=w[0]*x,u=w[1]*x,w=w[2]*x,y=c.points,z=c.indices,A=y.length/6;z.push(A);for(var B=0;B<b+1;B++)y.push(d,e,v,u,w,x),y.push(d+Math.sin(t*B)*f,e+Math.cos(t*B)*q,v,u,w,x),z.push(A++,A++);z.push(A-1)}if(a.lineWidth){x=a.points;a.points=[];for(v=0;v<b+1;v++)a.points.push(d+Math.sin(t*v)*f,e+Math.cos(t*v)*q);(0,h["default"])(a,c);a.points=x}}};var h=(f=a("./buildLine"))&&
f.__esModule?f:{"default":f},n=a("../../../const"),g=a("../../../utils")},{"../../../const":44,"../../../utils":120,"./buildLine":59}],59:[function(a,f,e){e.__esModule=!0;e["default"]=function(a,d){if(a.nativeLines){var c,b=a.points;if(0!==b.length){var k=d.points,g=b.length/2;c=(0,n.hex2rgb)(a.lineColor);var e=a.lineAlpha,f=c[0]*e,t=c[1]*e,w=c[2]*e;for(c=1;c<g;c++){var x=b[2*c],v=b[2*c+1];k.push(b[2*(c-1)],b[2*(c-1)+1]);k.push(f,t,w,e);k.push(x,v);k.push(f,t,w,e)}}}else if(b=a.points,0!==b.length){g=
new h.Point(b[0],b[1]);e=new h.Point(b[b.length-2],b[b.length-1]);g.x===e.x&&g.y===e.y&&(b=b.slice(),b.pop(),b.pop(),e=new h.Point(b[b.length-2],b[b.length-1]),k=e.x+.5*(g.x-e.x),g=e.y+.5*(g.y-e.y),b.unshift(k,g),b.push(k,g));f=d.points;k=d.indices;t=b.length/2;g=b.length;e=f.length/6;c=a.lineWidth/2;var u=(0,n.hex2rgb)(a.lineColor),w=a.lineAlpha,x=u[0]*w,v=u[1]*w,u=u[2]*w,y=b[0],z=b[1],A=b[2],B=b[3],E,F,G=-(z-B),C=y-A,H,J,I=Math.sqrt(G*G+C*C),G=G/I*c,C=C/I*c;f.push(y-G,z-C,x,v,u,w);f.push(y+G,z+
C,x,v,u,w);for(var N=1;N<t-1;++N){y=b[2*(N-1)];z=b[2*(N-1)+1];A=b[2*N];B=b[2*N+1];E=b[2*(N+1)];F=b[2*(N+1)+1];G=-(z-B);C=y-A;I=Math.sqrt(G*G+C*C);G/=I;C/=I;G*=c;C*=c;H=-(B-F);J=A-E;I=Math.sqrt(H*H+J*J);H/=I;J/=I;H*=c;J*=c;var I=-C+z-(-C+B),O=-G+A-(-G+y),y=(-G+y)*(-C+B)-(-G+A)*(-C+z),z=-J+F-(-J+B),V=-H+A-(-H+E);E=(-H+E)*(-J+B)-(-H+A)*(-J+F);F=I*V-z*O;.1>Math.abs(F)?(f.push(A-G,B-C,x,v,u,w),f.push(A+G,B+C,x,v,u,w)):(O=(O*E-V*y)/F,I=(z*y-I*E)/F,(O-A)*(O-A)+(I-B)*(I-B)>196*c*c?(G-=H,C-=J,I=Math.sqrt(G*
G+C*C),G/=I,C/=I,G*=c,C*=c,f.push(A-G,B-C),f.push(x,v,u,w),f.push(A+G,B+C),f.push(x,v,u,w),f.push(A-G,B-C),f.push(x,v,u,w),g++):(f.push(O,I),f.push(x,v,u,w),f.push(A-(O-A),B-(I-B)),f.push(x,v,u,w)))}y=b[2*(t-2)];z=b[2*(t-2)+1];A=b[2*(t-1)];B=b[2*(t-1)+1];G=-(z-B);C=y-A;I=Math.sqrt(G*G+C*C);G=G/I*c;C=C/I*c;f.push(A-G,B-C);f.push(x,v,u,w);f.push(A+G,B+C);f.push(x,v,u,w);k.push(e);for(b=0;b<g;++b)k.push(e++);k.push(e-1)}};var h=a("../../../math"),n=a("../../../utils")},{"../../../math":68,"../../../utils":120}],
60:[function(a,f,e){e.__esModule=!0;e["default"]=function(a,c){a.points=a.shape.points.slice();var b=a.points;if(a.fill&&6<=b.length){for(var d=[],e=a.holes,f=0;f<e.length;f++){var q=e[f];d.push(b.length/2);b=b.concat(q.points)}var e=c.points,t=c.indices,f=b.length/2,w=(0,n.hex2rgb)(a.fillColor),q=a.fillAlpha,x=w[0]*q,v=w[1]*q,w=w[2]*q,d=(0,g["default"])(b,d,2);if(!d)return;for(var u=e.length/6,y=0;y<d.length;y+=3)t.push(d[y]+u),t.push(d[y]+u),t.push(d[y+1]+u),t.push(d[y+2]+u),t.push(d[y+2]+u);for(d=
0;d<f;d++)e.push(b[2*d],b[2*d+1],x,v,w,q)}0<a.lineWidth&&(0,h["default"])(a,c)};var h=(f=a("./buildLine"))&&f.__esModule?f:{"default":f},n=a("../../../utils"),g=(a=a("earcut"))&&a.__esModule?a:{"default":a}},{"../../../utils":120,"./buildLine":59,earcut:2}],61:[function(a,f,e){e.__esModule=!0;e["default"]=function(a,d){var c=a.shape,b=c.x,k=c.y,g=c.width,c=c.height;if(a.fill){var e=(0,n.hex2rgb)(a.fillColor),f=a.fillAlpha,t=e[0]*f,w=e[1]*f,e=e[2]*f,x=d.points,v=d.indices,u=x.length/6;x.push(b,k);
x.push(t,w,e,f);x.push(b+g,k);x.push(t,w,e,f);x.push(b,k+c);x.push(t,w,e,f);x.push(b+g,k+c);x.push(t,w,e,f);v.push(u,u,u+1,u+2,u+3,u+3)}a.lineWidth&&(f=a.points,a.points=[b,k,b+g,k,b+g,k+c,b,k+c,b,k],(0,h["default"])(a,d),a.points=f)};var h=(f=a("./buildLine"))&&f.__esModule?f:{"default":f},n=a("../../../utils")},{"../../../utils":120,"./buildLine":59}],62:[function(a,f,e){function h(a,b,d,g,e,f){for(var c=6<arguments.length&&void 0!==arguments[6]?arguments[6]:[],k,p,n,h,q=0,r;20>=q;++q)r=q/20,k=
a+(d-a)*r,p=b+(g-b)*r,n=d+(e-d)*r,h=g+(f-g)*r,k+=(n-k)*r,p+=(h-p)*r,c.push(k,p);return c}e.__esModule=!0;e["default"]=function(a,b){var c=a.shape,e=c.x,f=c.y,q=c.width,t=c.height,w=c.radius,c=[];c.push(e,f+w);h(e,f+t-w,e,f+t,e+w,f+t,c);h(e+q-w,f+t,e+q,f+t,e+q,f+t-w,c);h(e+q,f+w,e+q,f,e+q-w,f,c);h(e+w,f,e,f,e,f+w+1E-10,c);if(a.fill){for(var t=(0,d.hex2rgb)(a.fillColor),e=a.fillAlpha,f=t[0]*e,q=t[1]*e,t=t[2]*e,w=b.points,x=b.indices,v=w.length/6,u=(0,n["default"])(c,null,2),y=0,z=u.length;y<z;y+=3)x.push(u[y]+
v),x.push(u[y]+v),x.push(u[y+1]+v),x.push(u[y+2]+v),x.push(u[y+2]+v);x=0;for(v=c.length;x<v;x++)w.push(c[x],c[++x],f,q,t,e)}a.lineWidth&&(e=a.points,a.points=c,(0,g["default"])(a,b),a.points=e)};var n=(f=a("earcut"))&&f.__esModule?f:{"default":f},g=(f=a("./buildLine"))&&f.__esModule?f:{"default":f},d=a("../../../utils")},{"../../../utils":120,"./buildLine":59,earcut:2}],63:[function(a,f,e){function h(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,
c)&&(b[c]=a[c]);b["default"]=a;return b}function n(a){return a&&a.__esModule?a:{"default":a}}e.__esModule=!0;e.autoDetectRenderer=e.Application=e.Filter=e.SpriteMaskFilter=e.Quad=e.RenderTarget=e.ObjectRenderer=e.WebGLManager=e.Shader=e.CanvasRenderTarget=e.TextureUvs=e.VideoBaseTexture=e.BaseRenderTexture=e.RenderTexture=e.BaseTexture=e.Texture=e.Spritesheet=e.CanvasGraphicsRenderer=e.GraphicsRenderer=e.GraphicsData=e.Graphics=e.TextStyle=e.Text=e.SpriteRenderer=e.CanvasTinter=e.CanvasSpriteRenderer=
e.Sprite=e.TransformBase=e.TransformStatic=e.Transform=e.Container=e.DisplayObject=e.Bounds=e.glCore=e.WebGLRenderer=e.CanvasRenderer=e.ticker=e.utils=e.settings=void 0;var g=a("./const");Object.keys(g).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(e,a,{enumerable:!0,get:function(){return g[a]}})});var d=a("./math");Object.keys(d).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(e,a,{enumerable:!0,get:function(){return d[a]}})});var c=a("pixi-gl-core");
Object.defineProperty(e,"glCore",{enumerable:!0,get:function(){return n(c)["default"]}});var b=a("./display/Bounds");Object.defineProperty(e,"Bounds",{enumerable:!0,get:function(){return n(b)["default"]}});var k=a("./display/DisplayObject");Object.defineProperty(e,"DisplayObject",{enumerable:!0,get:function(){return n(k)["default"]}});var p=a("./display/Container");Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return n(p)["default"]}});var r=a("./display/Transform");Object.defineProperty(e,
"Transform",{enumerable:!0,get:function(){return n(r)["default"]}});var q=a("./display/TransformStatic");Object.defineProperty(e,"TransformStatic",{enumerable:!0,get:function(){return n(q)["default"]}});var t=a("./display/TransformBase");Object.defineProperty(e,"TransformBase",{enumerable:!0,get:function(){return n(t)["default"]}});var w=a("./sprites/Sprite");Object.defineProperty(e,"Sprite",{enumerable:!0,get:function(){return n(w)["default"]}});var x=a("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(e,
"CanvasSpriteRenderer",{enumerable:!0,get:function(){return n(x)["default"]}});var v=a("./sprites/canvas/CanvasTinter");Object.defineProperty(e,"CanvasTinter",{enumerable:!0,get:function(){return n(v)["default"]}});var u=a("./sprites/webgl/SpriteRenderer");Object.defineProperty(e,"SpriteRenderer",{enumerable:!0,get:function(){return n(u)["default"]}});var y=a("./text/Text");Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return n(y)["default"]}});var z=a("./text/TextStyle");Object.defineProperty(e,
"TextStyle",{enumerable:!0,get:function(){return n(z)["default"]}});var A=a("./graphics/Graphics");Object.defineProperty(e,"Graphics",{enumerable:!0,get:function(){return n(A)["default"]}});var B=a("./graphics/GraphicsData");Object.defineProperty(e,"GraphicsData",{enumerable:!0,get:function(){return n(B)["default"]}});var E=a("./graphics/webgl/GraphicsRenderer");Object.defineProperty(e,"GraphicsRenderer",{enumerable:!0,get:function(){return n(E)["default"]}});var F=a("./graphics/canvas/CanvasGraphicsRenderer");
Object.defineProperty(e,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return n(F)["default"]}});var G=a("./textures/Spritesheet");Object.defineProperty(e,"Spritesheet",{enumerable:!0,get:function(){return n(G)["default"]}});var C=a("./textures/Texture");Object.defineProperty(e,"Texture",{enumerable:!0,get:function(){return n(C)["default"]}});var H=a("./textures/BaseTexture");Object.defineProperty(e,"BaseTexture",{enumerable:!0,get:function(){return n(H)["default"]}});var J=a("./textures/RenderTexture");
Object.defineProperty(e,"RenderTexture",{enumerable:!0,get:function(){return n(J)["default"]}});var I=a("./textures/BaseRenderTexture");Object.defineProperty(e,"BaseRenderTexture",{enumerable:!0,get:function(){return n(I)["default"]}});var N=a("./textures/VideoBaseTexture");Object.defineProperty(e,"VideoBaseTexture",{enumerable:!0,get:function(){return n(N)["default"]}});var O=a("./textures/TextureUvs");Object.defineProperty(e,"TextureUvs",{enumerable:!0,get:function(){return n(O)["default"]}});var V=
a("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(e,"CanvasRenderTarget",{enumerable:!0,get:function(){return n(V)["default"]}});var R=a("./Shader");Object.defineProperty(e,"Shader",{enumerable:!0,get:function(){return n(R)["default"]}});var P=a("./renderers/webgl/managers/WebGLManager");Object.defineProperty(e,"WebGLManager",{enumerable:!0,get:function(){return n(P)["default"]}});var K=a("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(e,"ObjectRenderer",{enumerable:!0,
get:function(){return n(K)["default"]}});var Q=a("./renderers/webgl/utils/RenderTarget");Object.defineProperty(e,"RenderTarget",{enumerable:!0,get:function(){return n(Q)["default"]}});var U=a("./renderers/webgl/utils/Quad");Object.defineProperty(e,"Quad",{enumerable:!0,get:function(){return n(U)["default"]}});var L=a("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(e,"SpriteMaskFilter",{enumerable:!0,get:function(){return n(L)["default"]}});var T=a("./renderers/webgl/filters/Filter");
Object.defineProperty(e,"Filter",{enumerable:!0,get:function(){return n(T)["default"]}});var D=a("./Application");Object.defineProperty(e,"Application",{enumerable:!0,get:function(){return n(D)["default"]}});var W=a("./autoDetectRenderer");Object.defineProperty(e,"autoDetectRenderer",{enumerable:!0,get:function(){return W.autoDetectRenderer}});f=a("./utils");f=h(f);var M=a("./ticker"),M=h(M),S=a("./settings"),S=n(S),X=a("./renderers/canvas/CanvasRenderer"),X=n(X);a=a("./renderers/webgl/WebGLRenderer");
a=n(a);e.settings=S["default"];e.utils=f;e.ticker=M;e.CanvasRenderer=X["default"];e.WebGLRenderer=a["default"]},{"./Application":41,"./Shader":42,"./autoDetectRenderer":43,"./const":44,"./display/Bounds":45,"./display/Container":46,"./display/DisplayObject":47,"./display/Transform":48,"./display/TransformBase":49,"./display/TransformStatic":50,"./graphics/Graphics":51,"./graphics/GraphicsData":52,"./graphics/canvas/CanvasGraphicsRenderer":53,"./graphics/webgl/GraphicsRenderer":55,"./math":68,"./renderers/canvas/CanvasRenderer":75,
"./renderers/canvas/utils/CanvasRenderTarget":77,"./renderers/webgl/WebGLRenderer":82,"./renderers/webgl/filters/Filter":84,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":87,"./renderers/webgl/managers/WebGLManager":91,"./renderers/webgl/utils/ObjectRenderer":92,"./renderers/webgl/utils/Quad":93,"./renderers/webgl/utils/RenderTarget":94,"./settings":99,"./sprites/Sprite":100,"./sprites/canvas/CanvasSpriteRenderer":101,"./sprites/canvas/CanvasTinter":102,"./sprites/webgl/SpriteRenderer":104,
"./text/Text":106,"./text/TextStyle":107,"./textures/BaseRenderTexture":108,"./textures/BaseTexture":109,"./textures/RenderTexture":110,"./textures/Spritesheet":111,"./textures/Texture":112,"./textures/TextureUvs":113,"./textures/VideoBaseTexture":114,"./ticker":116,"./utils":120,"pixi-gl-core":12}],64:[function(a,f,e){function h(a){return 0>a?-1:0<a?1:0}e.__esModule=!0;var n=(a=a("./Matrix"))&&a.__esModule?a:{"default":a},g=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],d=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,
-1,-1,-1],c=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],b=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],k=[],p=[];(function(){for(var a=0;16>a;a++){var e=[];p.push(e);for(var f=0;16>f;f++)for(var r=h(g[a]*g[f]+c[a]*d[f]),v=h(d[a]*g[f]+b[a]*d[f]),u=h(g[a]*c[f]+c[a]*b[f]),y=h(d[a]*c[f]+b[a]*b[f]),z=0;16>z;z++)if(g[z]===r&&d[z]===v&&c[z]===u&&b[z]===y){e.push(z);break}}for(a=0;16>a;a++)e=new n["default"],e.set(g[a],d[a],c[a],b[a],0,0),k.push(e)})();var r={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,
MIRROR_HORIZONTAL:12,uX:function(a){return g[a]},uY:function(a){return d[a]},vX:function(a){return c[a]},vY:function(a){return b[a]},inv:function(a){return a&8?a&15:-a&7},add:function(a,b){return p[a][b]},sub:function(a,b){return p[a][r.inv(b)]},rotate180:function(a){return a^4},isSwapWidthHeight:function(a){return 2===(a&3)},byDirection:function(a,b){return 2*Math.abs(a)<=Math.abs(b)?0<=b?r.S:r.N:2*Math.abs(b)<=Math.abs(a)?0<a?r.E:r.W:0<b?0<a?r.SE:r.SW:0<a?r.NE:r.NW},matrixAppendRotationInv:function(a,
b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,g=k[r.inv(b)];g.tx=c;g.ty=d;a.append(g)}};e["default"]=r},{"./Matrix":65}],65:[function(a,f,e){e.__esModule=!0;var h=function(){function a(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(d,c,b){c&&a(d.prototype,c);b&&a(d,b);return d}}(),n=(a=a("./Point"))&&
a.__esModule?a:{"default":a};a=function(){function a(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,k=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,g=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,e=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.a=
d;this.b=c;this.c=b;this.d=k;this.tx=g;this.ty=e;this.array=null}a.prototype.fromArray=function(a){this.a=a[0];this.b=a[1];this.c=a[3];this.d=a[4];this.tx=a[2];this.ty=a[5]};a.prototype.set=function(a,c,b,k,g,e){this.a=a;this.b=c;this.c=b;this.d=k;this.tx=g;this.ty=e;return this};a.prototype.toArray=function(a,c){this.array||(this.array=new Float32Array(9));var b=c||this.array;a?(b[0]=this.a,b[1]=this.b,b[2]=0,b[3]=this.c,b[4]=this.d,b[5]=0,b[6]=this.tx,b[7]=this.ty):(b[0]=this.a,b[1]=this.c,b[2]=
this.tx,b[3]=this.b,b[4]=this.d,b[5]=this.ty,b[6]=0,b[7]=0);b[8]=1;return b};a.prototype.apply=function(a,c){c=c||new n["default"];var b=a.x,d=a.y;c.x=this.a*b+this.c*d+this.tx;c.y=this.b*b+this.d*d+this.ty;return c};a.prototype.applyInverse=function(a,c){c=c||new n["default"];var b=1/(this.a*this.d+this.c*-this.b),d=a.x,g=a.y;c.x=this.d*b*d+-this.c*b*g+(this.ty*this.c-this.tx*this.d)*b;c.y=this.a*b*g+-this.b*b*d+(-this.ty*this.a+this.tx*this.b)*b;return c};a.prototype.translate=function(a,c){this.tx+=
a;this.ty+=c;return this};a.prototype.scale=function(a,c){this.a*=a;this.d*=c;this.c*=a;this.b*=c;this.tx*=a;this.ty*=c;return this};a.prototype.rotate=function(a){var c=Math.cos(a);a=Math.sin(a);var b=this.a,d=this.c,g=this.tx;this.a=b*c-this.b*a;this.b=b*a+this.b*c;this.c=d*c-this.d*a;this.d=d*a+this.d*c;this.tx=g*c-this.ty*a;this.ty=g*a+this.ty*c;return this};a.prototype.append=function(a){var c=this.a,b=this.b,d=this.c,g=this.d;this.a=a.a*c+a.b*d;this.b=a.a*b+a.b*g;this.c=a.c*c+a.d*d;this.d=a.c*
b+a.d*g;this.tx=a.tx*c+a.ty*d+this.tx;this.ty=a.tx*b+a.ty*g+this.ty;return this};a.prototype.setTransform=function(a,c,b,k,g,e,f,n,h){var d=Math.sin(f),p=Math.cos(f);f=Math.cos(h);h=Math.sin(h);var q=-Math.sin(n);n=Math.cos(n);var t=p*g;g*=d;d=-d*e;e*=p;this.a=f*t+h*d;this.b=f*g+h*e;this.c=q*t+n*d;this.d=q*g+n*e;this.tx=a+(b*t+k*d);this.ty=c+(b*g+k*e);return this};a.prototype.prepend=function(a){var c=this.tx;if(1!==a.a||0!==a.b||0!==a.c||1!==a.d){var b=this.a,d=this.c;this.a=b*a.a+this.b*a.c;this.b=
b*a.b+this.b*a.d;this.c=d*a.a+this.d*a.c;this.d=d*a.b+this.d*a.d}this.tx=c*a.a+this.ty*a.c+a.tx;this.ty=c*a.b+this.ty*a.d+a.ty;return this};a.prototype.decompose=function(a){var c=this.a,b=this.b,d=this.c,g=this.d,e=-Math.atan2(-d,g),f=Math.atan2(b,c);1E-5>Math.abs(e+f)?(a.rotation=f,0>c&&0<=g&&(a.rotation+=0>=a.rotation?Math.PI:-Math.PI),a.skew.x=a.skew.y=0):(a.skew.x=e,a.skew.y=f);a.scale.x=Math.sqrt(c*c+b*b);a.scale.y=Math.sqrt(d*d+g*g);a.position.x=this.tx;a.position.y=this.ty;return a};a.prototype.invert=
function(){var a=this.a,c=this.b,b=this.c,k=this.d,g=this.tx,e=a*k-c*b;this.a=k/e;this.b=-c/e;this.c=-b/e;this.d=a/e;this.tx=(b*this.ty-k*g)/e;this.ty=-(a*this.ty-c*g)/e;return this};a.prototype.identity=function(){this.a=1;this.c=this.b=0;this.d=1;this.ty=this.tx=0;return this};a.prototype.clone=function(){var d=new a;d.a=this.a;d.b=this.b;d.c=this.c;d.d=this.d;d.tx=this.tx;d.ty=this.ty;return d};a.prototype.copy=function(a){a.a=this.a;a.b=this.b;a.c=this.c;a.d=this.d;a.tx=this.tx;a.ty=this.ty;return a};
h(a,null,[{key:"IDENTITY",get:function(){return new a}},{key:"TEMP_MATRIX",get:function(){return new a}}]);return a}();e["default"]=a},{"./Point":67}],66:[function(a,f,e){e.__esModule=!0;var h=function(){function a(a,d){for(var c=0;c<d.length;c++){var b=d[c];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(a,b.key,b)}}return function(g,d,c){d&&a(g.prototype,d);c&&a(g,c);return g}}();a=function(){function a(g,d){var c=2<arguments.length&&void 0!==arguments[2]?
arguments[2]:0,b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._x=c;this._y=b;this.cb=g;this.scope=d}a.prototype.set=function(a,d){var c=a||0,b=d||(0!==d?c:0);if(this._x!==c||this._y!==b)this._x=c,this._y=b,this.cb.call(this.scope)};a.prototype.copy=function(a){if(this._x!==a.x||this._y!==a.y)this._x=a.x,this._y=a.y,this.cb.call(this.scope)};h(a,[{key:"x",get:function(){return this._x},set:function(a){this._x!==
a&&(this._x=a,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(a){this._y!==a&&(this._y=a,this.cb.call(this.scope))}}]);return a}();e["default"]=a},{}],67:[function(a,f,e){e.__esModule=!0;a=function(){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.x=e;this.y=g}a.prototype.clone=function(){return new a(this.x,
this.y)};a.prototype.copy=function(a){this.set(a.x,a.y)};a.prototype.equals=function(a){return a.x===this.x&&a.y===this.y};a.prototype.set=function(a,g){this.x=a||0;this.y=g||(0!==g?this.x:0)};return a}();e["default"]=a},{}],68:[function(a,f,e){function h(a){return a&&a.__esModule?a:{"default":a}}e.__esModule=!0;var n=a("./Point");Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return h(n)["default"]}});var g=a("./ObservablePoint");Object.defineProperty(e,"ObservablePoint",{enumerable:!0,
get:function(){return h(g)["default"]}});var d=a("./Matrix");Object.defineProperty(e,"Matrix",{enumerable:!0,get:function(){return h(d)["default"]}});var c=a("./GroupD8");Object.defineProperty(e,"GroupD8",{enumerable:!0,get:function(){return h(c)["default"]}});var b=a("./shapes/Circle");Object.defineProperty(e,"Circle",{enumerable:!0,get:function(){return h(b)["default"]}});var k=a("./shapes/Ellipse");Object.defineProperty(e,"Ellipse",{enumerable:!0,get:function(){return h(k)["default"]}});var p=
a("./shapes/Polygon");Object.defineProperty(e,"Polygon",{enumerable:!0,get:function(){return h(p)["default"]}});var r=a("./shapes/Rectangle");Object.defineProperty(e,"Rectangle",{enumerable:!0,get:function(){return h(r)["default"]}});var q=a("./shapes/RoundedRectangle");Object.defineProperty(e,"RoundedRectangle",{enumerable:!0,get:function(){return h(q)["default"]}})},{"./GroupD8":64,"./Matrix":65,"./ObservablePoint":66,"./Point":67,"./shapes/Circle":69,"./shapes/Ellipse":70,"./shapes/Polygon":71,
"./shapes/Rectangle":72,"./shapes/RoundedRectangle":73}],69:[function(a,f,e){e.__esModule=!0;var h=(f=a("./Rectangle"))&&f.__esModule?f:{"default":f},n=a("../../const");a=function(){function a(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.x=d;this.y=c;this.radius=b;this.type=n.SHAPES.CIRC}
a.prototype.clone=function(){return new a(this.x,this.y,this.radius)};a.prototype.contains=function(a,c){if(0>=this.radius)return!1;var b=this.x-a,d=this.y-c;return b*b+d*d<=this.radius*this.radius};a.prototype.getBounds=function(){return new h["default"](this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)};return a}();e["default"]=a},{"../../const":44,"./Rectangle":72}],70:[function(a,f,e){e.__esModule=!0;var h=(f=a("./Rectangle"))&&f.__esModule?f:{"default":f},n=a("../../const");
a=function(){function a(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,k=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.x=d;this.y=c;this.width=b;this.height=k;this.type=n.SHAPES.ELIP}a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)};a.prototype.contains=
function(a,c){if(0>=this.width||0>=this.height)return!1;var b=(a-this.x)/this.width,d=(c-this.y)/this.height;return 1>=b*b+d*d};a.prototype.getBounds=function(){return new h["default"](this.x-this.width,this.y-this.height,this.width,this.height)};return a}();e["default"]=a},{"../../const":44,"./Rectangle":72}],71:[function(a,f,e){e.__esModule=!0;var h=(f=a("../Point"))&&f.__esModule?f:{"default":f},n=a("../../const");a=function(){function a(){for(var d=arguments.length,c=Array(d),b=0;b<d;b++)c[b]=
arguments[b];if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");Array.isArray(c[0])&&(c=c[0]);if(c[0]instanceof h["default"]){for(var d=[],b=0,k=c.length;b<k;b++)d.push(c[b].x,c[b].y);c=d}this.closed=!0;this.points=c;this.type=n.SHAPES.POLY}a.prototype.clone=function(){return new a(this.points.slice())};a.prototype.close=function(){var a=this.points;a[0]===a[a.length-2]&&a[1]===a[a.length-1]||a.push(a[0],a[1])};a.prototype.contains=function(a,c){for(var b=!1,d=this.points.length/
2,g=0,e=d-1;g<d;e=g++){var f=this.points[2*g],n=this.points[2*g+1],h=this.points[2*e],e=this.points[2*e+1];n>c!==e>c&&a<(c-n)/(e-n)*(h-f)+f&&(b=!b)}return b};return a}();e["default"]=a},{"../../const":44,"../Point":67}],72:[function(a,f,e){e.__esModule=!0;var h=function(){function a(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(d,c,b){c&&a(d.prototype,c);b&&a(d,b);return d}}(),
n=a("../../const");a=function(){function a(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,k=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.x=d;this.y=c;this.width=b;this.height=k;this.type=n.SHAPES.RECT}a.prototype.clone=function(){return new a(this.x,this.y,this.width,
this.height)};a.prototype.copy=function(a){this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height;return this};a.prototype.contains=function(a,c){return 0>=this.width||0>=this.height?!1:a>=this.x&&a<this.x+this.width&&c>=this.y&&c<this.y+this.height?!0:!1};a.prototype.pad=function(a,c){a=a||0;c=c||(0!==c?a:0);this.x-=a;this.y-=c;this.width+=2*a;this.height+=2*c};a.prototype.fit=function(a){this.x<a.x&&(this.width+=this.x,0>this.width&&(this.width=0),this.x=a.x);this.y<a.y&&(this.height+=this.y,
0>this.height&&(this.height=0),this.y=a.y);this.x+this.width>a.x+a.width&&(this.width=a.width-this.x,0>this.width&&(this.width=0));this.y+this.height>a.y+a.height&&(this.height=a.height-this.y,0>this.height&&(this.height=0))};a.prototype.enlarge=function(a){var c=Math.min(this.x,a.x),b=Math.max(this.x+this.width,a.x+a.width),d=Math.min(this.y,a.y);a=Math.max(this.y+this.height,a.y+a.height);this.x=c;this.width=b-c;this.y=d;this.height=a-d};h(a,[{key:"left",get:function(){return this.x}},{key:"right",
get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new a(0,0,0,0)}}]);return a}();e["default"]=a},{"../../const":44}],73:[function(a,f,e){e.__esModule=!0;var h=a("../../const");a=function(){function a(){var g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:
0,b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,k=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.x=g;this.y=d;this.width=c;this.height=b;this.radius=k;this.type=h.SHAPES.RREC}a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.radius)};a.prototype.contains=function(a,d){if(0>=this.width||0>=this.height)return!1;if(a>=this.x&&a<=this.x+this.width&&d>=this.y&&
d<=this.y+this.height){if(d>=this.y+this.radius&&d<=this.y+this.height-this.radius||a>=this.x+this.radius&&a<=this.x+this.width-this.radius)return!0;var c=a-(this.x+this.radius),b=d-(this.y+this.radius),k=this.radius*this.radius;if(c*c+b*b<=k)return!0;c=a-(this.x+this.width-this.radius);if(c*c+b*b<=k)return!0;b=d-(this.y+this.height-this.radius);if(c*c+b*b<=k)return!0;c=a-(this.x+this.radius);if(c*c+b*b<=k)return!0}return!1};return a}();e["default"]=a},{"../../const":44}],74:[function(a,f,e){function h(a){return a&&
a.__esModule?a:{"default":a}}function n(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.__esModule=!0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=
!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),d=a("../utils"),c=a("../math"),b=a("../const");f=a("../settings");var k=h(f);f=a("../display/Container");var p=h(f);f=a("../textures/RenderTexture");var r=h(f);a=a("eventemitter3");a=h(a);var q=new c.Matrix;a=function(a){function e(g,f,n,h){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var q;q=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
q=!q||"object"!==typeof q&&"function"!==typeof q?this:q;(0,d.sayHello)(g);if(h)for(var t in k["default"].RENDER_OPTIONS)"undefined"===typeof h[t]&&(h[t]=k["default"].RENDER_OPTIONS[t]);else h=k["default"].RENDER_OPTIONS;q.type=b.RENDERER_TYPE.UNKNOWN;q.screen=new c.Rectangle(0,0,f||800,n||600);q.view=h.view||document.createElement("canvas");q.resolution=h.resolution||k["default"].RESOLUTION;q.transparent=h.transparent;q.autoResize=h.autoResize||!1;q.blendModes=null;q.preserveDrawingBuffer=h.preserveDrawingBuffer;
q.clearBeforeRender=h.clearBeforeRender;q.roundPixels=h.roundPixels;q._backgroundColor=0;q._backgroundColorRgba=[0,0,0,0];q._backgroundColorString="#000000";q.backgroundColor=h.backgroundColor||q._backgroundColor;q._tempDisplayObjectParent=new p["default"];q._lastObjectRendered=q._tempDisplayObjectParent;return q}n(e,a);e.prototype.resize=function(a,b){this.screen.width=a;this.screen.height=b;this.view.width=a*this.resolution;this.view.height=b*this.resolution;this.autoResize&&(this.view.style.width=
a+"px",this.view.style.height=b+"px")};e.prototype.generateTexture=function(a,b,c){var d=a.getLocalBounds();b=r["default"].create(d.width|0,d.height|0,b,c);q.tx=-d.x;q.ty=-d.y;this.render(a,b,!1,q,!0);return b};e.prototype.destroy=function(a){a&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.type=b.RENDERER_TYPE.UNKNOWN;this.screen=this.view=null;this.resolution=0;this.autoResize=this.transparent=!1;this.blendModes=null;this.roundPixels=this.clearBeforeRender=this.preserveDrawingBuffer=
!1;this._backgroundColor=0;this._backgroundColorString=this._backgroundColorRgba=null;this.backgroundColor=0;this._lastObjectRendered=this._tempDisplayObjectParent=null};g(e,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(a){this._backgroundColor=a;this._backgroundColorString=(0,d.hex2string)(a);(0,d.hex2rgb)(a,this._backgroundColorRgba)}}]);return e}(a["default"]);
e["default"]=a},{"../const":44,"../display/Container":46,"../math":68,"../settings":99,"../textures/RenderTexture":110,"../utils":120,eventemitter3:3}],75:[function(a,f,e){function h(a){return a&&a.__esModule?a:{"default":a}}function n(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
b):a.__proto__=b)}e.__esModule=!0;f=a("../SystemRenderer");f=h(f);var g=a("./utils/CanvasMaskManager"),d=h(g),g=a("./utils/CanvasRenderTarget"),c=h(g),g=a("./utils/mapCanvasBlendModesToPixi"),b=h(g),g=a("../../utils"),k=a("../../const");a=a("../../settings");var p=h(a);a=function(a){function g(c,e){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");f=a.call(this,"Canvas",c,e,f);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
f=!f||"object"!==typeof f&&"function"!==typeof f?this:f;f.type=k.RENDERER_TYPE.CANVAS;f.rootContext=f.view.getContext("2d",{alpha:f.transparent});f.refresh=!0;f.maskManager=new d["default"](f);f.smoothProperty="imageSmoothingEnabled";f.rootContext.imageSmoothingEnabled||(f.rootContext.webkitImageSmoothingEnabled?f.smoothProperty="webkitImageSmoothingEnabled":f.rootContext.mozImageSmoothingEnabled?f.smoothProperty="mozImageSmoothingEnabled":f.rootContext.oImageSmoothingEnabled?f.smoothProperty="oImageSmoothingEnabled":
f.rootContext.msImageSmoothingEnabled&&(f.smoothProperty="msImageSmoothingEnabled"));f.initPlugins();f.blendModes=(0,b["default"])();f._activeBlendMode=null;f.context=null;f.renderingToScreen=!1;f.resize(c,e);return f}n(g,a);g.prototype.render=function(a,b,d,g,e){if(this.view){this.renderingToScreen=!b;this.emit("prerender");var f=this.resolution;b?(b=b.baseTexture||b,b._canvasRenderTarget||(b._canvasRenderTarget=new c["default"](b.width,b.height,b.resolution),b.source=b._canvasRenderTarget.canvas,
b.valid=!0),this.context=b._canvasRenderTarget.context,this.resolution=b._canvasRenderTarget.resolution):this.context=this.rootContext;var p=this.context;b||(this._lastObjectRendered=a);e||(b=a.parent,e=this._tempDisplayObjectParent.transform.worldTransform,g?(g.copy(e),this._tempDisplayObjectParent.transform._worldID=-1):e.identity(),a.parent=this._tempDisplayObjectParent,a.updateTransform(),a.parent=b);p.setTransform(1,0,0,1,0,0);p.globalAlpha=1;p.globalCompositeOperation=this.blendModes[k.BLEND_MODES.NORMAL];
navigator.isCocoonJS&&this.view.screencanvas&&(p.fillStyle="black",p.clear());(void 0!==d?d:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?p.clearRect(0,0,this.width,this.height):(p.fillStyle=this._backgroundColorString,p.fillRect(0,0,this.width,this.height)));d=this.context;this.context=p;a.renderCanvas(this);this.context=d;this.resolution=f;this.emit("postrender")}};g.prototype.clear=function(a){var b=this.context;a=a||this._backgroundColorString;!this.transparent&&a?(b.fillStyle=
a,b.fillRect(0,0,this.width,this.height)):b.clearRect(0,0,this.width,this.height)};g.prototype.setBlendMode=function(a){this._activeBlendMode!==a&&(this._activeBlendMode=a,this.context.globalCompositeOperation=this.blendModes[a])};g.prototype.destroy=function(b){this.destroyPlugins();a.prototype.destroy.call(this,b);this.context=null;this.refresh=!0;this.maskManager.destroy();this.smoothProperty=this.maskManager=null};g.prototype.resize=function(b,c){a.prototype.resize.call(this,b,c);this.smoothProperty&&
(this.rootContext[this.smoothProperty]=p["default"].SCALE_MODE===k.SCALE_MODES.LINEAR)};return g}(f["default"]);e["default"]=a;g.pluginTarget.mixin(a)},{"../../const":44,"../../settings":99,"../../utils":120,"../SystemRenderer":74,"./utils/CanvasMaskManager":76,"./utils/CanvasRenderTarget":77,"./utils/mapCanvasBlendModesToPixi":79}],76:[function(a,f,e){e.__esModule=!0;var h=a("../../../const");a=function(){function a(g){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.renderer=g}a.prototype.pushMask=function(a){var d=this.renderer;d.context.save();var c=a.alpha,b=a.transform.worldTransform,k=d.resolution;d.context.setTransform(b.a*k,b.b*k,b.c*k,b.d*k,b.tx*k,b.ty*k);a._texture||(this.renderGraphicsShape(a),d.context.clip());a.worldAlpha=c};a.prototype.renderGraphicsShape=function(a){var d=this.renderer.context,c=a.graphicsData.length;if(0!==c){d.beginPath();for(var b=0;b<c;b++){var k=a.graphicsData[b],g=k.shape;if(k.type===h.SHAPES.POLY){k=g.points;d.moveTo(k[0],
k[1]);for(var e=1;e<k.length/2;e++)d.lineTo(k[2*e],k[2*e+1]);k[0]===k[k.length-2]&&k[1]===k[k.length-1]&&d.closePath()}else if(k.type===h.SHAPES.RECT)d.rect(g.x,g.y,g.width,g.height),d.closePath();else if(k.type===h.SHAPES.CIRC)d.arc(g.x,g.y,g.radius,0,2*Math.PI),d.closePath();else if(k.type===h.SHAPES.ELIP){var f=2*g.width,e=2*g.height,k=g.x-f/2,g=g.y-e/2,n=f/2*.5522848,w=e/2*.5522848,x=k+f,v=g+e,f=k+f/2,e=g+e/2;d.moveTo(k,e);d.bezierCurveTo(k,e-w,f-n,g,f,g);d.bezierCurveTo(f+n,g,x,e-w,x,e);d.bezierCurveTo(x,
e+w,f+n,v,f,v);d.bezierCurveTo(f-n,v,k,e+w,k,e);d.closePath()}else k.type===h.SHAPES.RREC&&(k=g.x,e=g.y,n=g.width,w=g.height,g=g.radius,x=Math.min(n,w)/2|0,g=g>x?x:g,d.moveTo(k,e+g),d.lineTo(k,e+w-g),d.quadraticCurveTo(k,e+w,k+g,e+w),d.lineTo(k+n-g,e+w),d.quadraticCurveTo(k+n,e+w,k+n,e+w-g),d.lineTo(k+n,e+g),d.quadraticCurveTo(k+n,e,k+n-g,e),d.lineTo(k+g,e),d.quadraticCurveTo(k,e,k,e+g),d.closePath())}}};a.prototype.popMask=function(a){a.context.restore()};a.prototype.destroy=function(){};return a}();
e["default"]=a},{"../../../const":44}],77:[function(a,f,e){e.__esModule=!0;var h=function(){function a(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(d,c,b){c&&a(d.prototype,c);b&&a(d,b);return d}}(),n=(a=a("../../../settings"))&&a.__esModule?a:{"default":a};a=function(){function a(d,c,b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.canvas=
document.createElement("canvas");this.context=this.canvas.getContext("2d");this.resolution=b||n["default"].RESOLUTION;this.resize(d,c)}a.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0);this.context.clearRect(0,0,this.canvas.width,this.canvas.height)};a.prototype.resize=function(a,c){this.canvas.width=a*this.resolution;this.canvas.height=c*this.resolution};a.prototype.destroy=function(){this.canvas=this.context=null};h(a,[{key:"width",get:function(){return this.canvas.width},set:function(a){this.canvas.width=
a}},{key:"height",get:function(){return this.canvas.height},set:function(a){this.canvas.height=a}}]);return a}();e["default"]=a},{"../../../settings":99}],78:[function(a,f,e){function h(a){var g=document.createElement("canvas");g.width=6;g.height=1;var d=g.getContext("2d");d.fillStyle=a;d.fillRect(0,0,6,1);return g}e.__esModule=!0;e["default"]=function(){if("undefined"===typeof document)return!1;var a=h("#ff00ff"),g=h("#ffff00"),d=document.createElement("canvas");d.width=6;d.height=1;d=d.getContext("2d");
d.globalCompositeOperation="multiply";d.drawImage(a,0,0);d.drawImage(g,2,0);a=d.getImageData(2,0,1,1);if(!a)return!1;a=a.data;return 255===a[0]&&0===a[1]&&0===a[2]}},{}],79:[function(a,f,e){e.__esModule=!0;e["default"]=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];(0,n["default"])()?(a[h.BLEND_MODES.NORMAL]="source-over",a[h.BLEND_MODES.ADD]="lighter",a[h.BLEND_MODES.MULTIPLY]="multiply",a[h.BLEND_MODES.SCREEN]="screen",a[h.BLEND_MODES.OVERLAY]="overlay",a[h.BLEND_MODES.DARKEN]=
"darken",a[h.BLEND_MODES.LIGHTEN]="lighten",a[h.BLEND_MODES.COLOR_DODGE]="color-dodge",a[h.BLEND_MODES.COLOR_BURN]="color-burn",a[h.BLEND_MODES.HARD_LIGHT]="hard-light",a[h.BLEND_MODES.SOFT_LIGHT]="soft-light",a[h.BLEND_MODES.DIFFERENCE]="difference",a[h.BLEND_MODES.EXCLUSION]="exclusion",a[h.BLEND_MODES.HUE]="hue",a[h.BLEND_MODES.SATURATION]="saturate",a[h.BLEND_MODES.COLOR]="color",a[h.BLEND_MODES.LUMINOSITY]="luminosity"):(a[h.BLEND_MODES.NORMAL]="source-over",a[h.BLEND_MODES.ADD]="lighter",a[h.BLEND_MODES.MULTIPLY]=
"source-over",a[h.BLEND_MODES.SCREEN]="source-over",a[h.BLEND_MODES.OVERLAY]="source-over",a[h.BLEND_MODES.DARKEN]="source-over",a[h.BLEND_MODES.LIGHTEN]="source-over",a[h.BLEND_MODES.COLOR_DODGE]="source-over",a[h.BLEND_MODES.COLOR_BURN]="source-over",a[h.BLEND_MODES.HARD_LIGHT]="source-over",a[h.BLEND_MODES.SOFT_LIGHT]="source-over",a[h.BLEND_MODES.DIFFERENCE]="source-over",a[h.BLEND_MODES.EXCLUSION]="source-over",a[h.BLEND_MODES.HUE]="source-over",a[h.BLEND_MODES.SATURATION]="source-over",a[h.BLEND_MODES.COLOR]=
"source-over",a[h.BLEND_MODES.LUMINOSITY]="source-over");return a};var h=a("../../../const"),n=(a=a("./canUseNewCanvasBlendModes"))&&a.__esModule?a:{"default":a}},{"../../../const":44,"./canUseNewCanvasBlendModes":78}],80:[function(a,f,e){e.__esModule=!0;var h=a("../../const"),n=(a=a("../../settings"))&&a.__esModule?a:{"default":a};a=function(){function a(d){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.renderer=d;this.checkCount=this.count=0;this.maxIdle=n["default"].GC_MAX_IDLE;
this.checkCountMax=n["default"].GC_MAX_CHECK_COUNT;this.mode=n["default"].GC_MODE}a.prototype.update=function(){this.count++;this.mode!==h.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))};a.prototype.run=function(){for(var a=this.renderer.textureManager,c=a._managedTextures,b=!1,k=0;k<c.length;k++){var g=c[k];!g._glRenderTargets&&this.count-g.touched>this.maxIdle&&(a.destroyTexture(g,!0),c[k]=null,b=!0)}if(b){for(b=a=0;b<c.length;b++)null!==
c[b]&&(c[a++]=c[b]);c.length=a}};a.prototype.unload=function(a){var c=this.renderer.textureManager;a._texture&&a._texture._glRenderTargets&&c.destroyTexture(a._texture,!0);for(c=a.children.length-1;0<=c;c--)this.unload(a.children[c])};return a}();e["default"]=a},{"../../const":44,"../../settings":99}],81:[function(a,f,e){e.__esModule=!0;var h=a("pixi-gl-core"),n=a("../../const"),g=(f=a("./utils/RenderTarget"))&&f.__esModule?f:{"default":f},d=a("../../utils");a=function(){function a(b){if(!(this instanceof
a))throw new TypeError("Cannot call a class as a function");this.renderer=b;this.gl=b.gl;this._managedTextures=[]}a.prototype.bindTexture=function(){};a.prototype.getTexture=function(){};a.prototype.updateTexture=function(a,c){var b=this.gl,d=!!a._glRenderTargets;if(!a.hasLoaded)return null;var k=this.renderer.boundTextures;if(void 0===c)for(var e=c=0;e<k.length;++e)if(k[e]===a){c=e;break}k[c]=a;b.activeTexture(b.TEXTURE0+c);(b=a._glTextures[this.renderer.CONTEXT_UID])?d?a._glRenderTargets[this.renderer.CONTEXT_UID].resize(a.width,
a.height):b.upload(a.source):(d?(d=new g["default"](this.gl,a.width,a.height,a.scaleMode,a.resolution),d.resize(a.width,a.height),a._glRenderTargets[this.renderer.CONTEXT_UID]=d,b=d.texture):(b=new h.GLTexture(this.gl,null,null,null,null),b.bind(c),b.premultiplyAlpha=!0,b.upload(a.source)),a._glTextures[this.renderer.CONTEXT_UID]=b,a.on("update",this.updateTexture,this),a.on("dispose",this.destroyTexture,this),this._managedTextures.push(a),a.isPowerOfTwo?(a.mipmap&&b.enableMipmap(),a.wrapMode===n.WRAP_MODES.CLAMP?
b.enableWrapClamp():a.wrapMode===n.WRAP_MODES.REPEAT?b.enableWrapRepeat():b.enableWrapMirrorRepeat()):b.enableWrapClamp(),a.scaleMode===n.SCALE_MODES.NEAREST?b.enableNearestScaling():b.enableLinearScaling());return b};a.prototype.destroyTexture=function(a,c){a=a.baseTexture||a;if(a.hasLoaded&&a._glTextures[this.renderer.CONTEXT_UID]&&(this.renderer.unbindTexture(a),a._glTextures[this.renderer.CONTEXT_UID].destroy(),a.off("update",this.updateTexture,this),a.off("dispose",this.destroyTexture,this),
delete a._glTextures[this.renderer.CONTEXT_UID],!c)){var b=this._managedTextures.indexOf(a);-1!==b&&(0,d.removeItems)(this._managedTextures,b,1)}};a.prototype.removeAll=function(){for(var a=0;a<this._managedTextures.length;++a){var c=this._managedTextures[a];c._glTextures[this.renderer.CONTEXT_UID]&&delete c._glTextures[this.renderer.CONTEXT_UID]}};a.prototype.destroy=function(){for(var a=0;a<this._managedTextures.length;++a){var c=this._managedTextures[a];this.destroyTexture(c,!0);c.off("update",
this.updateTexture,this);c.off("dispose",this.destroyTexture,this)}this._managedTextures=null};return a}();e["default"]=a},{"../../const":44,"../../utils":120,"./utils/RenderTarget":94,"pixi-gl-core":12}],82:[function(a,f,e){function h(a){return a&&a.__esModule?a:{"default":a}}function n(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,
configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.__esModule=!0;f=a("../SystemRenderer");var g=h(f);f=a("./managers/MaskManager");var d=h(f);f=a("./managers/StencilManager");var c=h(f);f=a("./managers/FilterManager");var b=h(f);f=a("./utils/RenderTarget");var k=h(f);f=a("./utils/ObjectRenderer");var p=h(f);f=a("./TextureManager");var r=h(f);f=a("../../textures/BaseTexture");var q=h(f);f=a("./TextureGarbageCollector");var t=h(f);f=a("./WebGLState");var w=h(f);
f=a("./utils/mapWebGLDrawModesToPixi");var x=h(f);f=a("./utils/validateContext");var v=h(f);f=a("../../utils");var u=a("pixi-gl-core"),y=h(u),z=a("../../const"),A=0;a=function(a){function e(k,g){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var n;n=a.call(this,"WebGL",k,g,f);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");n=!n||"object"!==typeof n&&"function"!==
typeof n?this:n;n.legacy=!!f.legacy;n.legacy&&(y["default"].VertexArrayObject.FORCE_NATIVE=!0);n.type=z.RENDERER_TYPE.WEBGL;n.handleContextLost=n.handleContextLost.bind(n);n.handleContextRestored=n.handleContextRestored.bind(n);n.view.addEventListener("webglcontextlost",n.handleContextLost,!1);n.view.addEventListener("webglcontextrestored",n.handleContextRestored,!1);n._contextOptions={alpha:n.transparent,antialias:f.antialias,premultipliedAlpha:n.transparent&&"notMultiplied"!==n.transparent,stencil:!0,
preserveDrawingBuffer:f.preserveDrawingBuffer};n._backgroundColorRgba[3]=n.transparent?0:1;n.maskManager=new d["default"](n);n.stencilManager=new c["default"](n);n.emptyRenderer=new p["default"](n);n.currentRenderer=n.emptyRenderer;n.initPlugins();f.context&&(0,v["default"])(f.context);n.gl=f.context||y["default"].createContext(n.view,n._contextOptions);n.CONTEXT_UID=A++;n.state=new w["default"](n.gl);n.renderingToScreen=!0;n.boundTextures=null;n._activeShader=null;n._activeVao=null;n._activeRenderTarget=
null;n._initContext();n.filterManager=new b["default"](n);n.drawModes=(0,x["default"])(n.gl);n._nextTextureLocation=0;n.setBlendMode(0);return n}n(e,a);e.prototype._initContext=function(){var a=this.gl;a.isContextLost()&&a.getExtension("WEBGL_lose_context")&&a.getExtension("WEBGL_lose_context").restoreContext();var b=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures=Array(b);this.emptyTextures=Array(b);this.textureManager=new r["default"](this);this.textureGC=new t["default"](this);this.state.resetToDefault();
this.rootRenderTarget=new k["default"](a,this.width,this.height,null,this.resolution,!0);this.rootRenderTarget.clearColor=this._backgroundColorRgba;this.bindRenderTarget(this.rootRenderTarget);var c=new y["default"].GLTexture.fromData(a,null,1,1),d={_glTextures:{}};d._glTextures[this.CONTEXT_UID]={};for(var e=0;e<b;e++){var g=new q["default"];g._glTextures[this.CONTEXT_UID]=c;this.boundTextures[e]=d;this.emptyTextures[e]=g;this.bindTexture(null,e)}this.emit("context",a);this.resize(this.screen.width,
this.screen.height)};e.prototype.render=function(a,b,c,d,k){this.renderingToScreen=!b;this.emit("prerender");this.gl&&!this.gl.isContextLost()&&(this._nextTextureLocation=0,b||(this._lastObjectRendered=a),k||(k=a.parent,a.parent=this._tempDisplayObjectParent,a.updateTransform(),a.parent=k),this.bindRenderTexture(b,d),this.currentRenderer.start(),(void 0!==c?c:this.clearBeforeRender)&&this._activeRenderTarget.clear(),a.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender"))};
e.prototype.setObjectRenderer=function(a){this.currentRenderer!==a&&(this.currentRenderer.stop(),this.currentRenderer=a,this.currentRenderer.start())};e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)};e.prototype.resize=function(a,b){g["default"].prototype.resize.call(this,a,b);this.rootRenderTarget.resize(a,b);this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))};
e.prototype.setBlendMode=function(a){this.state.setBlendMode(a)};e.prototype.clear=function(a){this._activeRenderTarget.clear(a)};e.prototype.setTransform=function(a){this._activeRenderTarget.transform=a};e.prototype.clearRenderTexture=function(a,b){var c=a.baseTexture._glRenderTargets[this.CONTEXT_UID];c&&c.clear(b);return this};e.prototype.bindRenderTexture=function(a,b){var c;a?(c=a.baseTexture,c._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(c,0),this.unbindTexture(c),c=
c._glRenderTargets[this.CONTEXT_UID],c.setFrame(a.frame)):c=this.rootRenderTarget;c.transform=b;this.bindRenderTarget(c);return this};e.prototype.bindRenderTarget=function(a){a!==this._activeRenderTarget&&(this._activeRenderTarget=a,a.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=a.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(a.stencilMaskStack));return this};e.prototype.bindShader=function(a,b){this._activeShader!==a&&(this._activeShader=a,a.bind(),
!1!==b&&(a.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0)));return this};e.prototype.bindTexture=function(a,b,c){a=a||this.emptyTextures[b];a=a.baseTexture||a;a.touched=this.textureGC.count;if(c)b=b||0;else{for(c=0;c<this.boundTextures.length;c++)if(this.boundTextures[c]===a)return c;void 0===b&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,b=this.boundTextures.length-this._nextTextureLocation-1)}c=this.gl;var d=a._glTextures[this.CONTEXT_UID];
d?(this.boundTextures[b]=a,c.activeTexture(c.TEXTURE0+b),c.bindTexture(c.TEXTURE_2D,d.texture)):this.textureManager.updateTexture(a,b);return b};e.prototype.unbindTexture=function(a){var b=this.gl;a=a.baseTexture||a;for(var c=0;c<this.boundTextures.length;c++)this.boundTextures[c]===a&&(this.boundTextures[c]=this.emptyTextures[c],b.activeTexture(b.TEXTURE0+c),b.bindTexture(b.TEXTURE_2D,this.emptyTextures[c]._glTextures[this.CONTEXT_UID].texture));return this};e.prototype.createVao=function(){return new y["default"].VertexArrayObject(this.gl,
this.state.attribState)};e.prototype.bindVao=function(a){if(this._activeVao===a)return this;a?a.bind():this._activeVao&&this._activeVao.unbind();this._activeVao=a;return this};e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer);this._activeShader=null;this._activeRenderTarget=this.rootRenderTarget;this.rootRenderTarget.activate();this.state.resetToDefault();return this};e.prototype.handleContextLost=function(a){a.preventDefault()};e.prototype.handleContextRestored=function(){this._initContext();
this.textureManager.removeAll()};e.prototype.destroy=function(b){this.destroyPlugins();this.view.removeEventListener("webglcontextlost",this.handleContextLost);this.view.removeEventListener("webglcontextrestored",this.handleContextRestored);this.textureManager.destroy();a.prototype.destroy.call(this,b);this.uid=0;this.maskManager.destroy();this.stencilManager.destroy();this.filterManager.destroy();this._contextOptions=this.handleContextRestored=this.handleContextLost=this.currentRenderer=this.textureManager=
this.filterManager=this.maskManager=null;this.gl.useProgram(null);this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext();this.gl=null};return e}(g["default"]);e["default"]=a;f.pluginTarget.mixin(a)},{"../../const":44,"../../textures/BaseTexture":109,"../../utils":120,"../SystemRenderer":74,"./TextureGarbageCollector":80,"./TextureManager":81,"./WebGLState":83,"./managers/FilterManager":88,"./managers/MaskManager":89,"./managers/StencilManager":90,"./utils/ObjectRenderer":92,
"./utils/RenderTarget":94,"./utils/mapWebGLDrawModesToPixi":97,"./utils/validateContext":98,"pixi-gl-core":12}],83:[function(a,f,e){e.__esModule=!0;var h=(a=a("./utils/mapWebGLBlendModesToPixi"))&&a.__esModule?a:{"default":a};a=function(){function a(e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.activeState=new Uint8Array(16);this.defaultState=new Uint8Array(16);this.defaultState[0]=1;this.stackIndex=0;this.stack=[];this.gl=e;this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS);
this.attribState={tempAttribState:Array(this.maxAttribs),attribState:Array(this.maxAttribs)};this.blendModes=(0,h["default"])(e);this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}a.prototype.push=function(){var a=this.stack[this.stackIndex];a||(a=this.stack[this.stackIndex]=new Uint8Array(16));++this.stackIndex;for(var d=0;d<this.activeState.length;d++)a[d]=this.activeState[d]};a.prototype.pop=
function(){var a=this.stack[--this.stackIndex];this.setState(a)};a.prototype.setState=function(a){this.setBlend(a[0]);this.setDepthTest(a[1]);this.setFrontFace(a[2]);this.setCullFace(a[3]);this.setBlendMode(a[4])};a.prototype.setBlend=function(a){a=a?1:0;this.activeState[0]!==a&&(this.activeState[0]=a,this.gl[a?"enable":"disable"](this.gl.BLEND))};a.prototype.setBlendMode=function(a){a!==this.activeState[4]&&(this.activeState[4]=a,this.gl.blendFunc(this.blendModes[a][0],this.blendModes[a][1]))};a.prototype.setDepthTest=
function(a){a=a?1:0;this.activeState[1]!==a&&(this.activeState[1]=a,this.gl[a?"enable":"disable"](this.gl.DEPTH_TEST))};a.prototype.setCullFace=function(a){a=a?1:0;this.activeState[3]!==a&&(this.activeState[3]=a,this.gl[a?"enable":"disable"](this.gl.CULL_FACE))};a.prototype.setFrontFace=function(a){a=a?1:0;this.activeState[2]!==a&&(this.activeState[2]=a,this.gl.frontFace(this.gl[a?"CW":"CCW"]))};a.prototype.resetAttributes=function(){for(var a=0;a<this.attribState.tempAttribState.length;a++)this.attribState.tempAttribState[a]=
0;for(a=0;a<this.attribState.attribState.length;a++)this.attribState.attribState[a]=0;for(a=1;a<this.maxAttribs;a++)this.gl.disableVertexAttribArray(a)};a.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null);this.resetAttributes();for(var a=0;a<this.activeState.length;++a)this.activeState[a]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1);this.setState(this.defaultState)};return a}();e["default"]=a},{"./utils/mapWebGLBlendModesToPixi":96}],
84:[function(a,f,e){e.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),n=(f=a("./extractUniformsFromSrc"))&&f.__esModule?f:{"default":f},g=a("../../../utils"),d=a("../../../const"),c=(a=a("../../../settings"))&&a.__esModule?a:{"default":a},b={};a=function(){function a(k,e,f){if(!(this instanceof
a))throw new TypeError("Cannot call a class as a function");this.vertexSrc=k||a.defaultVertexSrc;this.fragmentSrc=e||a.defaultFragmentSrc;this.blendMode=d.BLEND_MODES.NORMAL;this.uniformData=f||(0,n["default"])(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler");this.uniforms={};for(var p in this.uniformData)this.uniforms[p]=this.uniformData[p].value;this.glShaders={};b[this.vertexSrc+this.fragmentSrc]||(b[this.vertexSrc+this.fragmentSrc]=(0,g.uid)());this.glShaderKey=b[this.vertexSrc+this.fragmentSrc];
this.padding=4;this.resolution=c["default"].RESOLUTION;this.enabled=!0}a.prototype.apply=function(a,b,c,d,k){a.applyFilter(this,b,c,d)};h(a,null,[{key:"defaultVertexSrc",get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord ;\n}"}},
{key:"defaultFragmentSrc",get:function(){return"varying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\nuniform sampler2D uSampler;\nuniform sampler2D filterSampler;\nvoid main(void){\n   vec4 masky = texture2D(filterSampler, vFilterCoord);\n   vec4 sample = texture2D(uSampler, vTextureCoord);\n   vec4 color;\n   if(mod(vFilterCoord.x, 1.0) > 0.5)\n   {\n     color = vec4(1.0, 0.0, 0.0, 1.0);\n   }\n   else\n   {\n     color = vec4(0.0, 1.0, 0.0, 1.0);\n   }\n   gl_FragColor = mix(sample, masky, 0.5);\n   gl_FragColor *= sample.a;\n}"}}]);
return a}();e["default"]=a},{"../../../const":44,"../../../settings":99,"../../../utils":120,"./extractUniformsFromSrc":85}],85:[function(a,f,e){function h(a){var d=/^(projectionMatrix|uSampler|filterArea|filterClamp)$/,c={},b;a=a.replace(/\s+/g," ").split(/\s*;\s*/);for(var k=0;k<a.length;k++){var e=a[k].trim();if(-1<e.indexOf("uniform")){b=e.split(" ");var e=b[1],g=b[2],f=1;-1<g.indexOf("[")&&(b=g.split(/\[|]/),g=b[0],f*=Number(b[1]));g.match(d)||(c[g]={value:n(e,f),name:g,type:e})}}return c}e.__esModule=
!0;e["default"]=function(a,d,c){a=h(a,c);d=h(d,c);return Object.assign(a,d)};a=a("pixi-gl-core");var n=(a&&a.__esModule?a:{"default":a})["default"].shader.defaultValue},{"pixi-gl-core":12}],86:[function(a,f,e){e.__esModule=!0;e.calculateScreenSpaceMatrix=function(a,e,d){a=a.identity();a.translate(e.x/d.width,e.y/d.height);a.scale(d.width,d.height);return a};e.calculateNormalizedScreenSpaceMatrix=function(a,e,d){a=a.identity();a.translate(e.x/d.width,e.y/d.height);a.scale(d.width/e.width,d.height/
e.height);return a};e.calculateSpriteMatrix=function(a,e,d,c){var b=c.worldTransform.copy(h.Matrix.TEMP_MATRIX),k=c._texture.baseTexture;a=a.identity();var g=d.height/d.width;a.translate(e.x/d.width,e.y/d.height);a.scale(1,g);e=d.width/k.width;d=d.height/k.height;b.tx/=k.width*e;b.ty/=k.width*e;b.invert();a.prepend(b);a.scale(1,1/g);a.scale(e,d);a.translate(c.anchor.x,c.anchor.y);return a};var h=a("../../../math")},{"../../../math":68}],87:[function(a,f,e){function h(a,d){if("function"!==typeof d&&
null!==d)throw new TypeError("Super expression must either be null or a function, not "+typeof d);a.prototype=Object.create(d&&d.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});d&&(Object.setPrototypeOf?Object.setPrototypeOf(a,d):a.__proto__=d)}e.__esModule=!0;f=(f=a("../Filter"))&&f.__esModule?f:{"default":f};var n=a("../../../../math");a("path");a=function(a){function d(c){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");var b=new n.Matrix,
k;k=a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n");
if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");k=!k||"object"!==typeof k&&"function"!==typeof k?this:k;c.renderable=!1;k.maskSprite=c;k.maskMatrix=b;return k}h(d,a);d.prototype.apply=function(a,b,d){var c=this.maskSprite;this.uniforms.mask=c._texture;this.uniforms.otherMatrix=a.calculateSpriteMatrix(this.maskMatrix,c);this.uniforms.alpha=c.worldAlpha;a.applyFilter(this,b,d)};return d}(f["default"]);e["default"]=a},{"../../../../math":68,"../Filter":84,
path:22}],88:[function(a,f,e){function h(a){return a&&a.__esModule?a:{"default":a}}function n(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}e.__esModule=
!0;f=a("./WebGLManager");f=h(f);var d=a("../utils/RenderTarget"),c=h(d),d=a("../utils/Quad"),b=h(d),k=a("../../../math"),d=a("../../../Shader"),p=h(d),r=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}(a("../filters/filterTransforms"));a=a("bit-twiddle");var q=h(a),t=function x(){g(this,x);this.renderTarget=null;this.sourceFrame=new k.Rectangle;this.destinationFrame=new k.Rectangle;this.filters=
[];this.target=null;this.resolution=1};a=function(a){function d(c){g(this,d);var k;k=a.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");k=!k||"object"!==typeof k&&"function"!==typeof k?this:k;k.gl=k.renderer.gl;k.quad=new b["default"](k.gl,c.state.attribState);k.shaderCache={};k.pool={};k.filterData=null;return k}n(d,a);d.prototype.pushFilter=function(a,b){var c=this.renderer,d=this.filterData;if(!d){var k=new t;k.sourceFrame=k.destinationFrame=
this.renderer._activeRenderTarget.size;k.renderTarget=c._activeRenderTarget;this.filterData=this.renderer._activeRenderTarget.filterData=d={index:0,stack:[k]}}(k=d.stack[++d.index])||(k=d.stack[d.index]=new t);var e=b[0].resolution,g=b[0].padding|0,f=a.filterArea||a.getBounds(!0),n=k.sourceFrame,p=k.destinationFrame;n.x=(f.x*e|0)/e;n.y=(f.y*e|0)/e;n.width=(f.width*e|0)/e;n.height=(f.height*e|0)/e;d.stack[0].renderTarget.transform||n.fit(d.stack[0].destinationFrame);n.pad(g);p.width=n.width;p.height=
n.height;d=this.getPotRenderTarget(c.gl,n.width,n.height,e);k.target=a;k.filters=b;k.resolution=e;k.renderTarget=d;d.setFrame(p,n);c.bindRenderTarget(d);d.clear()};d.prototype.popFilter=function(){var a=this.filterData,b=a.stack[a.index-1],c=a.stack[a.index];this.quad.map(c.renderTarget.size,c.sourceFrame).upload();var d=c.filters;if(1===d.length)d[0].apply(this,c.renderTarget,b.renderTarget,!1,c),this.freePotRenderTarget(c.renderTarget);else{var k=c.renderTarget,e=this.getPotRenderTarget(this.renderer.gl,
c.sourceFrame.width,c.sourceFrame.height,c.resolution);e.setFrame(c.destinationFrame,c.sourceFrame);e.clear();var g;for(g=0;g<d.length-1;++g){d[g].apply(this,k,e,!0,c);var f=k,k=e,e=f}d[g].apply(this,k,b.renderTarget,!1,c);this.freePotRenderTarget(k);this.freePotRenderTarget(e)}a.index--;0===a.index&&(this.filterData=null)};d.prototype.applyFilter=function(a,b,c,d){var k=this.renderer,e=k.gl,g=a.glShaders[k.CONTEXT_UID];g||(a.glShaderKey?(g=this.shaderCache[a.glShaderKey],g||(g=new p["default"](this.gl,
a.vertexSrc,a.fragmentSrc),a.glShaders[k.CONTEXT_UID]=this.shaderCache[a.glShaderKey]=g)):g=a.glShaders[k.CONTEXT_UID]=new p["default"](this.gl,a.vertexSrc,a.fragmentSrc),k.bindVao(null),this.quad.initVao(g));k.bindVao(this.quad.vao);k.bindRenderTarget(c);d&&(e.disable(e.SCISSOR_TEST),k.clear(),e.enable(e.SCISSOR_TEST));c===k.maskManager.scissorRenderTarget&&k.maskManager.pushScissorMask(null,k.maskManager.scissorData);k.bindShader(g);c=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=
c;this.syncUniforms(g,a);k.state.setBlendMode(a.blendMode);e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,b.texture.texture);this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0);e.bindTexture(e.TEXTURE_2D,c._glTextures[this.renderer.CONTEXT_UID].texture)};d.prototype.syncUniforms=function(a,b){var c=b.uniformData,d=b.uniforms,k=1,e=void 0;if(a.uniforms.filterArea){var e=this.filterData.stack[this.filterData.index],g=a.uniforms.filterArea;g[0]=e.renderTarget.size.width;g[1]=e.renderTarget.size.height;
g[2]=e.sourceFrame.x;g[3]=e.sourceFrame.y;a.uniforms.filterArea=g}a.uniforms.filterClamp&&(e=e||this.filterData.stack[this.filterData.index],g=a.uniforms.filterClamp,g[0]=0,g[1]=0,g[2]=(e.sourceFrame.width-1)/e.renderTarget.size.width,g[3]=(e.sourceFrame.height-1)/e.renderTarget.size.height,a.uniforms.filterClamp=g);for(var f in c)"sampler2D"===c[f].type&&0!==d[f]?(d[f].baseTexture?a.uniforms[f]=this.renderer.bindTexture(d[f].baseTexture,k):(a.uniforms[f]=k,e=this.renderer.gl,this.renderer.boundTextures[k]=
this.renderer.emptyTextures[k],e.activeTexture(e.TEXTURE0+k),d[f].texture.bind()),k++):"mat3"===c[f].type?a.uniforms[f]=void 0!==d[f].a?d[f].toArray(!0):d[f]:"vec2"===c[f].type?void 0!==d[f].x?(e=a.uniforms[f]||new Float32Array(2),e[0]=d[f].x,e[1]=d[f].y,a.uniforms[f]=e):a.uniforms[f]=d[f]:"float"===c[f].type?a.uniforms.data[f].value!==c[f]&&(a.uniforms[f]=d[f]):a.uniforms[f]=d[f]};d.prototype.getRenderTarget=function(a,b){var c=this.filterData.stack[this.filterData.index],d=this.getPotRenderTarget(this.renderer.gl,
c.sourceFrame.width,c.sourceFrame.height,b||c.resolution);d.setFrame(c.destinationFrame,c.sourceFrame);return d};d.prototype.returnRenderTarget=function(a){this.freePotRenderTarget(a)};d.prototype.calculateScreenSpaceMatrix=function(a){var b=this.filterData.stack[this.filterData.index];return r.calculateScreenSpaceMatrix(a,b.sourceFrame,b.renderTarget.size)};d.prototype.calculateNormalizedScreenSpaceMatrix=function(a){var b=this.filterData.stack[this.filterData.index];return r.calculateNormalizedScreenSpaceMatrix(a,
b.sourceFrame,b.renderTarget.size,b.destinationFrame)};d.prototype.calculateSpriteMatrix=function(a,b){var c=this.filterData.stack[this.filterData.index];return r.calculateSpriteMatrix(a,c.sourceFrame,c.renderTarget.size,b)};d.prototype.destroy=function(){this.shaderCache={};this.emptyPool()};d.prototype.getPotRenderTarget=function(a,b,d,k){b=q["default"].nextPow2(b*k);d=q["default"].nextPow2(d*k);var e=(b&65535)<<16|d&65535;this.pool[e]||(this.pool[e]=[]);e=this.pool[e].pop();if(!e){var g=this.renderer.boundTextures[0];
a.activeTexture(a.TEXTURE0);e=new c["default"](a,b,d,null,1);a.bindTexture(a.TEXTURE_2D,g._glTextures[this.renderer.CONTEXT_UID].texture)}e.resolution=k;e.defaultFrame.width=e.size.width=b/k;e.defaultFrame.height=e.size.height=d/k;return e};d.prototype.emptyPool=function(){for(var a in this.pool){var b=this.pool[a];if(b)for(var c=0;c<b.length;c++)b[c].destroy(!0)}this.pool={}};d.prototype.freePotRenderTarget=function(a){this.pool[(a.size.width*a.resolution&65535)<<16|a.size.height*a.resolution&65535].push(a)};
return d}(f["default"]);e["default"]=a},{"../../../Shader":42,"../../../math":68,"../filters/filterTransforms":86,"../utils/Quad":93,"../utils/RenderTarget":94,"./WebGLManager":91,"bit-twiddle":1}],89:[function(a,f,e){function h(a,d){if("function"!==typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function, not "+typeof d);a.prototype=Object.create(d&&d.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});d&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
d):a.__proto__=d)}e.__esModule=!0;f=(f=a("./WebGLManager"))&&f.__esModule?f:{"default":f};var n=(a=a("../filters/spriteMask/SpriteMaskFilter"))&&a.__esModule?a:{"default":a};a=function(a){function d(c){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");c=a.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.scissor=!1;c.scissorData=null;c.scissorRenderTarget=
null;c.enableScissor=!0;c.alphaMaskPool=[];c.alphaMaskIndex=0;return c}h(d,a);d.prototype.pushMask=function(a,b){if(b.texture)this.pushSpriteMask(a,b);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&b.isFastRect()){var c=b.worldTransform,c=Math.atan2(c.b,c.a),c=Math.round(180/Math.PI*c);c%90?this.pushStencilMask(b):this.pushScissorMask(a,b)}else this.pushStencilMask(b)};d.prototype.popMask=function(a,b){b.texture?
this.popSpriteMask(a,b):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(a,b):this.popStencilMask(a,b)};d.prototype.pushSpriteMask=function(a,b){var c=this.alphaMaskPool[this.alphaMaskIndex];c||(c=this.alphaMaskPool[this.alphaMaskIndex]=[new n["default"](b)]);c[0].resolution=this.renderer.resolution;c[0].maskSprite=b;a.filterArea=b.getBounds(!0);this.renderer.filterManager.pushFilter(a,c);this.alphaMaskIndex++};d.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter();
this.alphaMaskIndex--};d.prototype.pushStencilMask=function(a){this.renderer.currentRenderer.stop();this.renderer.stencilManager.pushStencil(a)};d.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop();this.renderer.stencilManager.popStencil()};d.prototype.pushScissorMask=function(a,b){b.renderable=!0;var c=this.renderer._activeRenderTarget,d=b.getBounds();d.fit(c.size);b.renderable=!1;this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var e=this.renderer.resolution;this.renderer.gl.scissor(d.x*
e,(c.root?c.size.height-d.y-d.height:d.y)*e,d.width*e,d.height*e);this.scissorRenderTarget=c;this.scissorData=b;this.scissor=!0};d.prototype.popScissorMask=function(){this.scissorData=this.scissorRenderTarget=null;this.scissor=!1;var a=this.renderer.gl;a.disable(a.SCISSOR_TEST)};return d}(f["default"]);e["default"]=a},{"../filters/spriteMask/SpriteMaskFilter":87,"./WebGLManager":91}],90:[function(a,f,e){function h(a,d){if("function"!==typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function, not "+
typeof d);a.prototype=Object.create(d&&d.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});d&&(Object.setPrototypeOf?Object.setPrototypeOf(a,d):a.__proto__=d)}e.__esModule=!0;var n=(a=a("./WebGLManager"))&&a.__esModule?a:{"default":a};a=function(a){function d(c){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");c=a.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&
"function"!==typeof c?this:c;c.stencilMaskStack=null;return c}h(d,a);d.prototype.setMaskStack=function(a){this.stencilMaskStack=a;var b=this.renderer.gl;0===a.length?b.disable(b.STENCIL_TEST):b.enable(b.STENCIL_TEST)};d.prototype.pushStencil=function(a){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);this.renderer._activeRenderTarget.attachStencilBuffer();var b=this.renderer.gl,c=this.stencilMaskStack;0===c.length&&(b.enable(b.STENCIL_TEST),b.clear(b.STENCIL_BUFFER_BIT),b.stencilFunc(b.ALWAYS,
1,1));c.push(a);b.colorMask(!1,!1,!1,!1);b.stencilOp(b.KEEP,b.KEEP,b.INCR);this.renderer.plugins.graphics.render(a);b.colorMask(!0,!0,!0,!0);b.stencilFunc(b.NOTEQUAL,0,c.length);b.stencilOp(b.KEEP,b.KEEP,b.KEEP)};d.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var a=this.renderer.gl,b=this.stencilMaskStack,d=b.pop();0===b.length?a.disable(a.STENCIL_TEST):(a.colorMask(!1,!1,!1,!1),a.stencilOp(a.KEEP,a.KEEP,a.DECR),this.renderer.plugins.graphics.render(d),
a.colorMask(!0,!0,!0,!0),a.stencilFunc(a.NOTEQUAL,0,b.length),a.stencilOp(a.KEEP,a.KEEP,a.KEEP))};d.prototype.destroy=function(){n["default"].prototype.destroy.call(this);this.stencilMaskStack.stencilStack=null};return d}(n["default"]);e["default"]=a},{"./WebGLManager":91}],91:[function(a,f,e){e.__esModule=!0;a=function(){function a(e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.renderer=e;this.renderer.on("context",this.onContextChange,this)}a.prototype.onContextChange=
function(){};a.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this);this.renderer=null};return a}();e["default"]=a},{}],92:[function(a,f,e){function h(a,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}e.__esModule=!0;
a=a("../managers/WebGLManager");a=function(a){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var d=a.apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!d||"object"!==typeof d&&"function"!==typeof d?this:d}h(e,a);e.prototype.start=function(){};e.prototype.stop=function(){this.flush()};e.prototype.flush=function(){};e.prototype.render=function(a){};return e}((a&&a.__esModule?a:{"default":a})["default"]);
e["default"]=a},{"../managers/WebGLManager":91}],93:[function(a,f,e){e.__esModule=!0;var h=(f=a("pixi-gl-core"))&&f.__esModule?f:{"default":f},n=(a=a("../../../utils/createIndicesForQuads"))&&a.__esModule?a:{"default":a};a=function(){function a(d,c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.gl=d;this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]);this.uvs=new Float32Array([0,0,1,0,1,1,0,1]);this.interleaved=new Float32Array(16);for(var b=0;4>b;b++)this.interleaved[4*
b]=this.vertices[2*b],this.interleaved[4*b+1]=this.vertices[2*b+1],this.interleaved[4*b+2]=this.uvs[2*b],this.interleaved[4*b+3]=this.uvs[2*b+1];this.indices=(0,n["default"])(1);this.vertexBuffer=h["default"].GLBuffer.createVertexBuffer(d,this.interleaved,d.STATIC_DRAW);this.indexBuffer=h["default"].GLBuffer.createIndexBuffer(d,this.indices,d.STATIC_DRAW);this.vao=new h["default"].VertexArrayObject(d,c)}a.prototype.initVao=function(a){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,
a.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,a.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)};a.prototype.map=function(a,c){var b=0,d=0;this.uvs[0]=b;this.uvs[1]=d;this.uvs[2]=b+c.width/a.width;this.uvs[3]=d;this.uvs[4]=b+c.width/a.width;this.uvs[5]=d+c.height/a.height;this.uvs[6]=b;this.uvs[7]=d+c.height/a.height;b=c.x;d=c.y;this.vertices[0]=b;this.vertices[1]=d;this.vertices[2]=b+c.width;this.vertices[3]=d;this.vertices[4]=b+c.width;this.vertices[5]=d+c.height;
this.vertices[6]=b;this.vertices[7]=d+c.height;return this};a.prototype.upload=function(){for(var a=0;4>a;a++)this.interleaved[4*a]=this.vertices[2*a],this.interleaved[4*a+1]=this.vertices[2*a+1],this.interleaved[4*a+2]=this.uvs[2*a],this.interleaved[4*a+3]=this.uvs[2*a+1];this.vertexBuffer.upload(this.interleaved);return this};a.prototype.destroy=function(){var a=this.gl;a.deleteBuffer(this.vertexBuffer);a.deleteBuffer(this.indexBuffer)};return a}();e["default"]=a},{"../../../utils/createIndicesForQuads":118,
"pixi-gl-core":12}],94:[function(a,f,e){e.__esModule=!0;var h=a("../../../math"),n=a("../../../const"),g=(f=a("../../../settings"))&&f.__esModule?f:{"default":f},d=a("pixi-gl-core");a=function(){function a(b,c,e,f,q,t){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.gl=b;this.texture=this.frameBuffer=null;this.clearColor=[0,0,0,0];this.size=new h.Rectangle(0,0,1,1);this.resolution=q||g["default"].RESOLUTION;this.projectionMatrix=new h.Matrix;this.frame=this.transform=
null;this.defaultFrame=new h.Rectangle;this.stencilBuffer=this.sourceFrame=this.destinationFrame=null;this.stencilMaskStack=[];this.filterData=null;this.scaleMode=void 0!==f?f:g["default"].SCALE_MODE;(this.root=t)?(this.frameBuffer=new d.GLFramebuffer(b,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=d.GLFramebuffer.createRGBA(b,100,100),this.scaleMode===n.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=
this.frameBuffer.texture);this.setFrame();this.resize(c,e)}a.prototype.clear=function(a){a=a||this.clearColor;this.frameBuffer.clear(a[0],a[1],a[2],a[3])};a.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()};a.prototype.setFrame=function(a,c){this.destinationFrame=a||this.destinationFrame||this.defaultFrame;this.sourceFrame=c||this.sourceFrame||a};a.prototype.activate=function(){var a=this.gl;this.frameBuffer.bind();this.calculateProjection(this.destinationFrame,
this.sourceFrame);this.transform&&this.projectionMatrix.append(this.transform);this.destinationFrame!==this.sourceFrame?(a.enable(a.SCISSOR_TEST),a.scissor(this.destinationFrame.x|0,this.destinationFrame.y|0,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):a.disable(a.SCISSOR_TEST);a.viewport(this.destinationFrame.x|0,this.destinationFrame.y|0,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)};a.prototype.calculateProjection=
function(a,c){var b=this.projectionMatrix;c=c||a;b.identity();this.root?(b.a=1/a.width*2,b.d=-1/a.height*2,b.tx=-1-c.x*b.a,b.ty=1-c.y*b.d):(b.a=1/a.width*2,b.d=1/a.height*2,b.tx=-1-c.x*b.a,b.ty=-1-c.y*b.d)};a.prototype.resize=function(a,c){a|=0;c|=0;if(this.size.width!==a||this.size.height!==c)this.size.width=a,this.size.height=c,this.defaultFrame.width=a,this.defaultFrame.height=c,this.frameBuffer.resize(a*this.resolution,c*this.resolution),this.calculateProjection(this.frame||this.size)};a.prototype.destroy=
function(){this.frameBuffer.destroy();this.texture=this.frameBuffer=null};return a}();e["default"]=a},{"../../../const":44,"../../../math":68,"../../../settings":99,"pixi-gl-core":12}],95:[function(a,f,e){function h(a){for(var c="",b=0;b<a;++b)0<b&&(c+="\nelse "),b<a-1&&(c+="if(test == "+b+".0){}");return c}e.__esModule=!0;e["default"]=function(a,c){var b=!c;if(0===a)throw Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(b){var d=document.createElement("canvas");d.width=1;
d.height=1;c=n["default"].createContext(d)}for(d=c.createShader(c.FRAGMENT_SHADER);;){var e=g.replace(/%forloop%/gi,h(a));c.shaderSource(d,e);c.compileShader(d);if(c.getShaderParameter(d,c.COMPILE_STATUS))break;else a=a/2|0}b&&c.getExtension("WEBGL_lose_context")&&c.getExtension("WEBGL_lose_context").loseContext();return a};var n=(a=a("pixi-gl-core"))&&a.__esModule?a:{"default":a},g="precision mediump float;\nvoid main(void){\nfloat test = 0.1;\n%forloop%\ngl_FragColor = vec4(0.0);\n}"},{"pixi-gl-core":12}],
96:[function(a,f,e){e.__esModule=!0;e["default"]=function(a){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];e[h.BLEND_MODES.NORMAL]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];e[h.BLEND_MODES.ADD]=[a.ONE,a.DST_ALPHA];e[h.BLEND_MODES.MULTIPLY]=[a.DST_COLOR,a.ONE_MINUS_SRC_ALPHA];e[h.BLEND_MODES.SCREEN]=[a.ONE,a.ONE_MINUS_SRC_COLOR];e[h.BLEND_MODES.OVERLAY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];e[h.BLEND_MODES.DARKEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];e[h.BLEND_MODES.LIGHTEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];e[h.BLEND_MODES.COLOR_DODGE]=
[a.ONE,a.ONE_MINUS_SRC_ALPHA];e[h.BLEND_MODES.COLOR_BURN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];e[h.BLEND_MODES.HARD_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];e[h.BLEND_MODES.SOFT_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];e[h.BLEND_MODES.DIFFERENCE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];e[h.BLEND_MODES.EXCLUSION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];e[h.BLEND_MODES.HUE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];e[h.BLEND_MODES.SATURATION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];e[h.BLEND_MODES.COLOR]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];e[h.BLEND_MODES.LUMINOSITY]=
[a.ONE,a.ONE_MINUS_SRC_ALPHA];return e};var h=a("../../../const")},{"../../../const":44}],97:[function(a,f,e){e.__esModule=!0;e["default"]=function(a){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e[h.DRAW_MODES.POINTS]=a.POINTS;e[h.DRAW_MODES.LINES]=a.LINES;e[h.DRAW_MODES.LINE_LOOP]=a.LINE_LOOP;e[h.DRAW_MODES.LINE_STRIP]=a.LINE_STRIP;e[h.DRAW_MODES.TRIANGLES]=a.TRIANGLES;e[h.DRAW_MODES.TRIANGLE_STRIP]=a.TRIANGLE_STRIP;e[h.DRAW_MODES.TRIANGLE_FAN]=a.TRIANGLE_FAN;return e};var h=
a("../../../const")},{"../../../const":44}],98:[function(a,f,e){e.__esModule=!0;e["default"]=function(a){a.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}},{}],99:[function(a,f,e){e.__esModule=!0;f=(f=a("./utils/maxRecommendedTextures"))&&f.__esModule?f:{"default":f};a=(a=a("./utils/canUploadSameBuffer"))&&a.__esModule?a:{"default":a};e["default"]={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,
SPRITE_MAX_TEXTURES:(0,f["default"])(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,a["default"])()}},{"./utils/canUploadSameBuffer":117,"./utils/maxRecommendedTextures":121}],
100:[function(a,f,e){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.__esModule=!0;var n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);
Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),g=a("../math"),d=a("../utils"),c=a("../const"),b=(f=a("../textures/Texture"))&&f.__esModule?f:{"default":f};a=(a=a("../display/Container"))&&a.__esModule?a:{"default":a};var k=new g.Point;a=function(a){function e(d){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var k;k=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
k=!k||"object"!==typeof k&&"function"!==typeof k?this:k;k._anchor=new g.ObservablePoint(k._onAnchorUpdate,k);k._texture=null;k._width=0;k._height=0;k._tint=null;k._tintRGB=null;k.tint=16777215;k.blendMode=c.BLEND_MODES.NORMAL;k.shader=null;k.cachedTint=16777215;k.texture=d||b["default"].EMPTY;k.vertexData=new Float32Array(8);k.vertexTrimmedData=null;k._transformID=-1;k._textureID=-1;k._transformTrimmedID=-1;k._textureTrimmedID=-1;k.pluginName="sprite";return k}h(e,a);e.prototype._onTextureUpdate=
function(){this._textureTrimmedID=this._textureID=-1;this._width&&(this.scale.x=(0,d.sign)(this.scale.x)*this._width/this.texture.orig.width);this._height&&(this.scale.y=(0,d.sign)(this.scale.y)*this._height/this.texture.orig.height)};e.prototype._onAnchorUpdate=function(){this._transformTrimmedID=this._transformID=-1};e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID;this._textureID=
this._texture._updateID;var a=this._texture,b=this.transform.worldTransform,c=b.a,d=b.b,k=b.c,e=b.d,g=b.tx,b=b.ty,f=this.vertexData,n=a.trim,p=a.orig,h=this._anchor,r;n?(r=n.x-h._x*p.width,a=r+n.width,h=n.y-h._y*p.height,n=h+n.height):(r=-h._x*p.width,a=r+p.width,h=-h._y*p.height,n=h+p.height);f[0]=c*r+k*h+g;f[1]=e*h+d*r+b;f[2]=c*a+k*h+g;f[3]=e*h+d*a+b;f[4]=c*a+k*n+g;f[5]=e*n+d*a+b;f[6]=c*r+k*n+g;f[7]=e*n+d*r+b}};e.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=
new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID;this._textureTrimmedID=this._texture._updateID;var a=this.vertexTrimmedData,b=this._texture.orig,c=this._anchor,d=this.transform.worldTransform,k=d.a,e=d.b,g=d.c,f=d.d,n=d.tx,d=d.ty,p=-c._x*b.width,h=p+b.width,c=-c._y*b.height,b=c+b.height;a[0]=k*p+g*c+n;a[1]=f*c+e*p+d;a[2]=k*h+g*c+n;a[3]=f*c+e*h+d;a[4]=k*h+g*b+n;a[5]=
f*b+e*h+d;a[6]=k*p+g*b+n;a[7]=f*b+e*p+d};e.prototype._renderWebGL=function(a){this.calculateVertices();a.setObjectRenderer(a.plugins[this.pluginName]);a.plugins[this.pluginName].render(this)};e.prototype._renderCanvas=function(a){a.plugins[this.pluginName].render(this)};e.prototype._calculateBounds=function(){var a=this._texture.trim,b=this._texture.orig;!a||a.width===b.width&&a.height===b.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))};
e.prototype.getLocalBounds=function(b){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._x),b||(this._localBoundsRect||(this._localBoundsRect=new g.Rectangle),b=this._localBoundsRect),this._bounds.getRectangle(b)):a.prototype.getLocalBounds.call(this,b)};e.prototype.containsPoint=
function(a){this.worldTransform.applyInverse(a,k);var b=this._texture.orig.width;a=this._texture.orig.height;var c=-b*this.anchor.x;return k.x>c&&k.x<c+b&&(b=-a*this.anchor.y,k.y>b&&k.y<b+a)?!0:!1};e.prototype.destroy=function(b){a.prototype.destroy.call(this,b);this._anchor=null;("boolean"===typeof b?b:b&&b.texture)&&this._texture.destroy(!!("boolean"===typeof b?b:b&&b.baseTexture));this.shader=this._texture=null};e.from=function(a){return new e(b["default"].from(a))};e.fromFrame=function(a){var b=
d.TextureCache[a];if(!b)throw Error('The frameId "'+a+'" does not exist in the texture cache');return new e(b)};e.fromImage=function(a,c,d){return new e(b["default"].fromImage(a,c,d))};n(e,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(a){var b=(0,d.sign)(this.scale.x)||1;this.scale.x=b*a/this._texture.orig.width;this._width=a}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(a){var b=(0,d.sign)(this.scale.y)||
1;this.scale.y=b*a/this._texture.orig.height;this._height=a}},{key:"anchor",get:function(){return this._anchor},set:function(a){this._anchor.copy(a)}},{key:"tint",get:function(){return this._tint},set:function(a){this._tint=a;this._tintRGB=(a>>16)+(a&65280)+((a&255)<<16)}},{key:"texture",get:function(){return this._texture},set:function(a){if(this._texture!==a&&(this._texture=a,this.cachedTint=16777215,this._textureTrimmedID=this._textureID=-1,a))if(a.baseTexture.hasLoaded)this._onTextureUpdate();
else a.once("update",this._onTextureUpdate,this)}}]);return e}(a["default"]);e["default"]=a},{"../const":44,"../display/Container":46,"../math":68,"../textures/Texture":112,"../utils":120}],101:[function(a,f,e){e.__esModule=!0;f=(f=a("../../renderers/canvas/CanvasRenderer"))&&f.__esModule?f:{"default":f};var h=a("../../const"),n=a("../../math"),g=(a=a("./CanvasTinter"))&&a.__esModule?a:{"default":a},d=new n.Matrix;a=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.renderer=b}a.prototype.render=function(a){var b=a._texture,c=this.renderer,e=b._frame.width,f=b._frame.height,t=a.transform.worldTransform,w,x;0>=b.orig.width||0>=b.orig.height||!b.baseTexture.source||(c.setBlendMode(a.blendMode),b.valid&&(c.context.globalAlpha=a.worldAlpha,w=b.baseTexture.scaleMode===h.SCALE_MODES.LINEAR,c.smoothProperty&&c.context[c.smoothProperty]!==w&&(c.context[c.smoothProperty]=w),b.trim?(w=b.trim.width/2+b.trim.x-a.anchor.x*b.orig.width,x=b.trim.height/2+b.trim.y-a.anchor.y*
b.orig.height):(w=(.5-a.anchor.x)*b.orig.width,x=(.5-a.anchor.y)*b.orig.height),b.rotate&&(t.copy(d),t=d,n.GroupD8.matrixAppendRotationInv(t,b.rotate,w,x),x=w=0),w-=e/2,x-=f/2,c.roundPixels?(c.context.setTransform(t.a,t.b,t.c,t.d,t.tx*c.resolution|0,t.ty*c.resolution|0),w|=0,x|=0):c.context.setTransform(t.a,t.b,t.c,t.d,t.tx*c.resolution,t.ty*c.resolution),t=b.baseTexture.resolution,16777215!==a.tint?(a.cachedTint!==a.tint&&(a.cachedTint=a.tint,a.tintedTexture=g["default"].getTintedTexture(a,a.tint)),
c.context.drawImage(a.tintedTexture,0,0,e*t,f*t,w*c.resolution,x*c.resolution,e*c.resolution,f*c.resolution)):c.context.drawImage(b.baseTexture.source,b._frame.x*t,b._frame.y*t,e*t,f*t,w*c.resolution,x*c.resolution,e*c.resolution,f*c.resolution)))};a.prototype.destroy=function(){this.renderer=null};return a}();e["default"]=a;f["default"].registerPlugin("sprite",a)},{"../../const":44,"../../math":68,"../../renderers/canvas/CanvasRenderer":75,"./CanvasTinter":102}],102:[function(a,f,e){e.__esModule=
!0;var h=a("../../utils");a=(a=a("../../renderers/canvas/utils/canUseNewCanvasBlendModes"))&&a.__esModule?a:{"default":a};var n={getTintedTexture:function(a,d){var c=a.texture;d=n.roundColor(d);var b="#"+("00000"+(d|0).toString(16)).substr(-6);c.tintCache=c.tintCache||{};if(c.tintCache[b])return c.tintCache[b];var k=n.canvas||document.createElement("canvas");n.tintMethod(c,d,k);if(n.convertTintToImage){var e=new Image;e.src=k.toDataURL();c.tintCache[b]=e}else c.tintCache[b]=k,n.canvas=null;return k},
tintWithMultiply:function(a,d,c){var b=c.getContext("2d"),k=a._frame.clone(),e=a.baseTexture.resolution;k.x*=e;k.y*=e;k.width*=e;k.height*=e;c.width=Math.ceil(k.width);c.height=Math.ceil(k.height);b.fillStyle="#"+("00000"+(d|0).toString(16)).substr(-6);b.fillRect(0,0,k.width,k.height);b.globalCompositeOperation="multiply";b.drawImage(a.baseTexture.source,k.x,k.y,k.width,k.height,0,0,k.width,k.height);b.globalCompositeOperation="destination-atop";b.drawImage(a.baseTexture.source,k.x,k.y,k.width,k.height,
0,0,k.width,k.height)},tintWithOverlay:function(a,d,c){var b=c.getContext("2d"),k=a._frame.clone(),e=a.baseTexture.resolution;k.x*=e;k.y*=e;k.width*=e;k.height*=e;c.width=Math.ceil(k.width);c.height=Math.ceil(k.height);b.globalCompositeOperation="copy";b.fillStyle="#"+("00000"+(d|0).toString(16)).substr(-6);b.fillRect(0,0,k.width,k.height);b.globalCompositeOperation="destination-atop";b.drawImage(a.baseTexture.source,k.x,k.y,k.width,k.height,0,0,k.width,k.height)},tintWithPerPixel:function(a,d,c){var b=
c.getContext("2d"),k=a._frame.clone(),e=a.baseTexture.resolution;k.x*=e;k.y*=e;k.width*=e;k.height*=e;c.width=Math.ceil(k.width);c.height=Math.ceil(k.height);b.globalCompositeOperation="copy";b.drawImage(a.baseTexture.source,k.x,k.y,k.width,k.height,0,0,k.width,k.height);c=(0,h.hex2rgb)(d);a=c[0];d=c[1];c=c[2];for(var k=b.getImageData(0,0,k.width,k.height),e=k.data,g=0;g<e.length;g+=4)e[g+0]*=a,e[g+1]*=d,e[g+2]*=c;b.putImageData(k,0,0)},roundColor:function(a){var d=n.cacheStepsPerColorChannel;a=(0,
h.hex2rgb)(a);a[0]=Math.min(255,a[0]/d*d);a[1]=Math.min(255,a[1]/d*d);a[2]=Math.min(255,a[2]/d*d);return(0,h.rgb2hex)(a)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,a["default"])(),tintMethod:0};n.tintMethod=n.canUseMultiply?n.tintWithMultiply:n.tintWithPerPixel;e["default"]=n},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":78,"../../utils":120}],103:[function(a,f,e){e.__esModule=!0;a=function(){function a(e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.vertices=new ArrayBuffer(e);this.float32View=new Float32Array(this.vertices);this.uint32View=new Uint32Array(this.vertices)}a.prototype.destroy=function(){this.colors=this.uvs=this.positions=this.vertices=null};return a}();e["default"]=a},{}],104:[function(a,f,e){function h(a){return a&&a.__esModule?a:{"default":a}}function n(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,
{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.__esModule=!0;f=a("../../renderers/webgl/utils/ObjectRenderer");f=h(f);var g=a("../../renderers/webgl/WebGLRenderer"),g=h(g),d=a("../../utils/createIndicesForQuads"),c=h(d),d=a("./generateMultiTextureShader"),b=h(d),d=a("../../renderers/webgl/utils/checkMaxIfStatmentsInShader"),k=h(d),d=a("./BatchBuffer"),p=h(d),d=a("../../settings"),r=h(d),d=a("pixi-gl-core"),q=
h(d);a=a("bit-twiddle");var t=h(a),w=0,x=0;a=function(a){function d(b){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");b=a.call(this,b);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");b=!b||"object"!==typeof b&&"function"!==typeof b?this:b;b.vertSize=5;b.vertByteSize=4*b.vertSize;b.size=r["default"].SPRITE_BATCH_SIZE;b.buffers=[];for(var k=1;k<=t["default"].nextPow2(b.size);k*=2)b.buffers.push(new p["default"](4*k*b.vertByteSize));
b.indices=(0,c["default"])(b.size);b.shader=null;b.currentIndex=0;b.groups=[];for(k=0;k<b.size;k++)b.groups[k]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};b.sprites=[];b.vertexBuffers=[];b.vaos=[];b.vaoMax=2;b.vertexCount=0;b.renderer.on("prerender",b.onPrerender,b);return b}n(d,a);d.prototype.onContextChange=function(){var a=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),r["default"].SPRITE_MAX_TEXTURES),
this.MAX_TEXTURES=(0,k["default"])(this.MAX_TEXTURES,a));var c=this.shader=(0,b["default"])(a,this.MAX_TEXTURES);this.indexBuffer=q["default"].GLBuffer.createIndexBuffer(a,this.indices,a.STATIC_DRAW);this.renderer.bindVao(null);for(var d=0;d<this.vaoMax;d++)this.vertexBuffers[d]=q["default"].GLBuffer.createVertexBuffer(a,null,a.STREAM_DRAW),this.vaos[d]=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[d],c.attributes.aVertexPosition,a.FLOAT,!1,this.vertByteSize,
0).addAttribute(this.vertexBuffers[d],c.attributes.aTextureCoord,a.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(this.vertexBuffers[d],c.attributes.aColor,a.UNSIGNED_BYTE,!0,this.vertByteSize,12),c.attributes.aTextureId&&this.vaos[d].addAttribute(this.vertexBuffers[d],c.attributes.aTextureId,a.FLOAT,!1,this.vertByteSize,16);this.vao=this.vaos[0];this.currentBlendMode=99999;this.boundTextures=Array(this.MAX_TEXTURES)};d.prototype.onPrerender=function(){this.vertexCount=0};d.prototype.render=
function(a){this.currentIndex>=this.size&&this.flush();a._texture._uvs&&(this.sprites[this.currentIndex++]=a)};d.prototype.flush=function(){if(0!==this.currentIndex){var a=this.renderer.gl,b=this.MAX_TEXTURES,c=t["default"].nextPow2(this.currentIndex),c=t["default"].log2(c),d=this.buffers[c],k=this.sprites,c=this.groups,e=d.float32View,g=d.uint32View,f=this.boundTextures,n=this.renderer.boundTextures,p=this.renderer.textureGC.count,h=0,v,u=void 0,V=1,R=0,P=c[0],K,Q,U=k[0].blendMode;P.textureCount=
0;P.start=0;P.blend=U;w++;var L;for(L=0;L<b;++L)f[L]=n[L],f[L]._virtalBoundId=L;for(L=0;L<this.currentIndex;++L){var T=k[L];v=T._texture.baseTexture;U!==T.blendMode&&(U=T.blendMode,u=null,R=b,w++);if(u!==v&&(u=v,v._enabled!==w)){R===b&&(w++,P.size=L-P.start,R=0,P=c[V++],P.blend=U,P.textureCount=0,P.start=L);v.touched=p;if(-1===v._virtalBoundId)for(K=0;K<b;++K){Q=(K+x)%b;var D=f[Q];if(D._enabled!==w){x++;D._virtalBoundId=-1;v._virtalBoundId=Q;f[Q]=v;break}}v._enabled=w;P.textureCount++;P.ids[R]=v._virtalBoundId;
P.textures[R++]=v}K=T.vertexData;Q=T._texture._uvs.uvsUint32;this.renderer.roundPixels?(D=this.renderer.resolution,e[h]=(K[0]*D|0)/D,e[h+1]=(K[1]*D|0)/D,e[h+5]=(K[2]*D|0)/D,e[h+6]=(K[3]*D|0)/D,e[h+10]=(K[4]*D|0)/D,e[h+11]=(K[5]*D|0)/D,e[h+15]=(K[6]*D|0)/D,e[h+16]=(K[7]*D|0)/D):(e[h]=K[0],e[h+1]=K[1],e[h+5]=K[2],e[h+6]=K[3],e[h+10]=K[4],e[h+11]=K[5],e[h+15]=K[6],e[h+16]=K[7]);g[h+2]=Q[0];g[h+7]=Q[1];g[h+12]=Q[2];g[h+17]=Q[3];g[h+3]=g[h+8]=g[h+13]=g[h+18]=T._tintRGB+(255*Math.min(T.worldAlpha,1)<<24);
e[h+4]=e[h+9]=e[h+14]=e[h+19]=v._virtalBoundId;h+=20}P.size=L-P.start;r["default"].CAN_UPLOAD_SAME_BUFFER?this.vertexBuffers[this.vertexCount].upload(d.vertices,0,!0):(this.vaoMax<=this.vertexCount&&(this.vaoMax++,this.vertexBuffers[this.vertexCount]=q["default"].GLBuffer.createVertexBuffer(a,null,a.STREAM_DRAW),this.vaos[this.vertexCount]=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[this.vertexCount],this.shader.attributes.aVertexPosition,a.FLOAT,!1,this.vertByteSize,
0).addAttribute(this.vertexBuffers[this.vertexCount],this.shader.attributes.aTextureCoord,a.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(this.vertexBuffers[this.vertexCount],this.shader.attributes.aColor,a.UNSIGNED_BYTE,!0,this.vertByteSize,12),this.shader.attributes.aTextureId&&this.vaos[this.vertexCount].addAttribute(this.vertexBuffers[this.vertexCount],this.shader.attributes.aTextureId,a.FLOAT,!1,this.vertByteSize,16)),this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(d.vertices,
0,!1),this.vertexCount++);for(L=0;L<b;++L)n[L]._virtalBoundId=-1;for(L=0;L<V;++L){b=c[L];d=b.textureCount;for(k=0;k<d;k++)u=b.textures[k],n[b.ids[k]]!==u&&this.renderer.bindTexture(u,b.ids[k],!0),u._virtalBoundId=-1;this.renderer.state.setBlendMode(b.blend);a.drawElements(a.TRIANGLES,6*b.size,a.UNSIGNED_SHORT,12*b.start)}this.currentIndex=0}};d.prototype.start=function(){this.renderer.bindShader(this.shader);r["default"].CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),
this.vertexBuffers[this.vertexCount].bind())};d.prototype.stop=function(){this.flush()};d.prototype.destroy=function(){for(var b=0;b<this.vaoMax;b++)this.vertexBuffers[b]&&this.vertexBuffers[b].destroy(),this.vaos[b]&&this.vaos[b].destroy();this.indexBuffer&&this.indexBuffer.destroy();this.renderer.off("prerender",this.onPrerender,this);a.prototype.destroy.call(this);this.shader&&(this.shader.destroy(),this.shader=null);this.sprites=this.indices=this.indexBuffer=this.vaos=this.vertexBuffers=null;
for(b=0;b<this.buffers.length;++b)this.buffers[b].destroy()};return d}(f["default"]);e["default"]=a;g["default"].registerPlugin("sprite",a)},{"../../renderers/webgl/WebGLRenderer":82,"../../renderers/webgl/utils/ObjectRenderer":92,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":95,"../../settings":99,"../../utils/createIndicesForQuads":118,"./BatchBuffer":103,"./generateMultiTextureShader":105,"bit-twiddle":1,"pixi-gl-core":12}],105:[function(a,f,e){function h(a){var c;c="\n\n";for(var b=
0;b<a;b++)0<b&&(c+="\nelse "),b<a-1&&(c+="if(textureId == "+b+".0)"),c+="\n{",c+="\n\tcolor = texture2D(uSamplers["+b+"], vTextureCoord);",c+="\n}";return c+"\n\n"}e.__esModule=!0;e["default"]=function(a,c){for(var b=g,b=b.replace(/%count%/gi,c),b=b.replace(/%forloop%/gi,h(c)),b=new n["default"](a,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",
b),d=[],e=0;e<c;e++)d[e]=e;b.bind();b.uniforms.uSamplers=d;return b};var n=(f=a("../../Shader"))&&f.__esModule?f:{"default":f};a("path");var g="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\nvoid main(void){\nvec4 color;\nfloat textureId = floor(vTextureId+0.5);\n%forloop%\ngl_FragColor = color * vColor;\n}"},{"../../Shader":42,path:22}],106:[function(a,f,e){function h(a){return a&&a.__esModule?a:{"default":a}}function n(a,b){if("function"!==
typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.__esModule=!0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,
c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();f=a("../sprites/Sprite");f=h(f);var d=a("../textures/Texture"),c=h(d),b=a("../math"),k=a("../utils"),p=a("../const"),d=a("../settings"),r=h(d),d=a("./TextStyle"),q=h(d);a=a("../utils/trimCanvas");var t=h(a),w={texture:!0,children:!1,baseTexture:!0};a=function(a){function d(k,e,g){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");g=g||document.createElement("canvas");g.width=3;g.height=3;var f=c["default"].fromCanvas(g);
f.orig=new b.Rectangle;f.trim=new b.Rectangle;f=a.call(this,f);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");f=!f||"object"!==typeof f&&"function"!==typeof f?this:f;f.canvas=g;f.context=f.canvas.getContext("2d");f.resolution=r["default"].RESOLUTION;f._text=null;f._style=null;f._styleListener=null;f._font="";f.text=k;f.style=e;f.localStyleID=-1;return f}n(d,a);d.prototype.updateText=function(a){var b=this._style;this.localStyleID!==b.styleID&&(this.dirty=
!0,this.localStyleID=b.styleID);if(this.dirty||!a){this._font=d.getFontStyle(b);this.context.font=this._font;a=(b.wordWrap?this.wordWrap(this._text):this._text).split(/(?:\r\n|\r|\n)/);for(var c=Array(a.length),k=0,e=d.calculateFontProperties(this._font),g=0;g<a.length;g++){var f=this.context.measureText(a[g]).width+(a[g].length-1)*b.letterSpacing;c[g]=f;k=Math.max(k,f)}g=k+b.strokeThickness;b.dropShadow&&(g+=b.dropShadowDistance);this.canvas.width=Math.ceil((g+2*b.padding)*this.resolution);g=b.lineHeight||
e.fontSize+b.strokeThickness;f=Math.max(g,e.fontSize+b.strokeThickness)+(a.length-1)*g;b.dropShadow&&(f+=b.dropShadowDistance);this.canvas.height=Math.ceil((f+2*b.padding)*this.resolution);this.context.scale(this.resolution,this.resolution);this.context.clearRect(0,0,this.canvas.width,this.canvas.height);this.context.font=this._font;this.context.strokeStyle=b.stroke;this.context.lineWidth=b.strokeThickness;this.context.textBaseline=b.textBaseline;this.context.lineJoin=b.lineJoin;this.context.miterLimit=
b.miterLimit;var n;if(b.dropShadow){this.context.shadowBlur=b.dropShadowBlur;this.context.globalAlpha=b.dropShadowAlpha;0<b.dropShadowBlur?this.context.shadowColor=b.dropShadowColor:this.context.fillStyle=b.dropShadowColor;for(var h=Math.cos(b.dropShadowAngle)*b.dropShadowDistance,p=Math.sin(b.dropShadowAngle)*b.dropShadowDistance,q=0;q<a.length;q++)f=b.strokeThickness/2,n=b.strokeThickness/2+q*g+e.ascent,"right"===b.align?f+=k-c[q]:"center"===b.align&&(f+=(k-c[q])/2),b.fill&&(this.drawLetterSpacing(a[q],
f+h+b.padding,n+p+b.padding),b.stroke&&b.strokeThickness&&(this.context.strokeStyle=b.dropShadowColor,this.drawLetterSpacing(a[q],f+h+b.padding,n+p+b.padding,!0),this.context.strokeStyle=b.stroke))}this.context.shadowBlur=0;this.context.globalAlpha=1;this.context.fillStyle=this._generateFillStyle(b,a);for(h=0;h<a.length;h++)f=b.strokeThickness/2,n=b.strokeThickness/2+h*g+e.ascent,"right"===b.align?f+=k-c[h]:"center"===b.align&&(f+=(k-c[h])/2),b.stroke&&b.strokeThickness&&this.drawLetterSpacing(a[h],
f+b.padding,n+b.padding,!0),b.fill&&this.drawLetterSpacing(a[h],f+b.padding,n+b.padding);this.updateTexture()}};d.prototype.drawLetterSpacing=function(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1,k=this._style.letterSpacing;if(0===k)d?this.context.strokeText(a,b,c):this.context.fillText(a,b,c);else for(var e=String.prototype.split.call(a,""),g=b,f=0,n;f<a.length;)n=e[f++],d?this.context.strokeText(n,g,c):this.context.fillText(n,g,c),g+=this.context.measureText(n).width+k};
d.prototype.updateTexture=function(){if(this._style.trim){var a=(0,t["default"])(this.canvas);this.canvas.width=a.width;this.canvas.height=a.height;this.context.putImageData(a.data,0,0)}var a=this._texture,b=this._style;a.baseTexture.hasLoaded=!0;a.baseTexture.resolution=this.resolution;a.baseTexture.realWidth=this.canvas.width;a.baseTexture.realHeight=this.canvas.height;a.baseTexture.width=this.canvas.width/this.resolution;a.baseTexture.height=this.canvas.height/this.resolution;a.trim.width=a._frame.width=
this.canvas.width/this.resolution;a.trim.height=a._frame.height=this.canvas.height/this.resolution;a.trim.x=-b.padding;a.trim.y=-b.padding;a.orig.width=a._frame.width-2*b.padding;a.orig.height=a._frame.height-2*b.padding;this._onTextureUpdate();a.baseTexture.emit("update",a.baseTexture);this.dirty=!1};d.prototype.renderWebGL=function(b){this.resolution!==b.resolution&&(this.resolution=b.resolution,this.dirty=!0);this.updateText(!0);a.prototype.renderWebGL.call(this,b)};d.prototype._renderCanvas=function(b){this.resolution!==
b.resolution&&(this.resolution=b.resolution,this.dirty=!0);this.updateText(!0);a.prototype._renderCanvas.call(this,b)};d.prototype.wordWrap=function(a){var b="",c=this._style;a=a.split("\n");for(var d=c.wordWrapWidth,k=0;k<a.length;k++){for(var e=d,g=a[k].split(" "),f=0;f<g.length;f++){var n=this.context.measureText(g[f]).width;if(c.breakWords&&n>d)for(var n=g[f].split(""),h=0;h<n.length;h++){var p=this.context.measureText(n[h]).width;p>e?(b+="\n"+n[h],e=d-p):(0===h&&(b+=" "),b+=n[h],e-=p)}else h=
n+this.context.measureText(" ").width,0===f||h>e?(0<f&&(b+="\n"),b+=g[f],e=d-n):(e-=h,b+=" "+g[f])}k<a.length-1&&(b+="\n")}return b};d.prototype.getLocalBounds=function(b){this.updateText(!0);return a.prototype.getLocalBounds.call(this,b)};d.prototype._calculateBounds=function(){this.updateText(!0);this.calculateVertices();this._bounds.addQuad(this.vertexData)};d.prototype._onStyleChange=function(){this.dirty=!0};d.prototype._generateFillStyle=function(a,b){if(!Array.isArray(a.fill))return a.fill;
if(navigator.isCocoonJS)return a.fill[0];var c,d,k,e;c=this.canvas.width/this.resolution;d=this.canvas.height/this.resolution;var g=a.fill.slice(),f=a.fillGradientStops.slice();if(!f.length)for(k=g.length+1,e=1;e<k;++e)f.push(e/k);g.unshift(a.fill[0]);f.unshift(0);g.push(a.fill[a.fill.length-1]);f.push(1);if(a.fillGradientType===p.TEXT_GRADIENT.LINEAR_VERTICAL){c=this.context.createLinearGradient(c/2,0,c/2,d);d=(g.length+1)*b.length;for(var n=k=0;n<b.length;n++){k+=1;for(var h=0;h<g.length;h++)e=
f[h]?f[h]/b.length+n/b.length:k/d,c.addColorStop(e,g[h]),k++}}else for(c=this.context.createLinearGradient(0,d/2,c,d/2),d=g.length+1,k=1,n=0;n<g.length;n++)e=f[n]?f[n]:k/d,c.addColorStop(e,g[n]),k++;return c};d.prototype.destroy=function(b){"boolean"===typeof b&&(b={children:b});b=Object.assign({},w,b);a.prototype.destroy.call(this,b);this._style=this.canvas=this.context=null};d.getFontStyle=function(a){a=a||{};a instanceof q["default"]||(a=new q["default"](a));var b="number"===typeof a.fontSize?
a.fontSize+"px":a.fontSize,c=a.fontFamily;Array.isArray(a.fontFamily)||(c=a.fontFamily.split(","));for(var d=c.length-1;0<=d;d--){var k=c[d].trim();/([\"\'])[^\'\"]+\1/.test(k)||(k='"'+k+'"');c[d]=k}return a.fontStyle+" "+a.fontVariant+" "+a.fontWeight+" "+b+" "+c.join(",")};d.calculateFontProperties=function(a){if(d.fontPropertiesCache[a])return d.fontPropertiesCache[a];var b={},c=d.fontPropertiesCanvas,k=d.fontPropertiesContext;k.font=a;var e=Math.ceil(k.measureText("|M\u00c9q").width),g=Math.ceil(k.measureText("M").width),
f=2*g,g=1.4*g|0;c.width=e;c.height=f;k.fillStyle="#f00";k.fillRect(0,0,e,f);k.font=a;k.textBaseline="alphabetic";k.fillStyle="#000";k.fillText("|M\u00c9q",0,g);var c=k.getImageData(0,0,e,f).data,k=c.length,e=4*e,n,h=0,p=!1;for(n=0;n<g;++n){for(var q=0;q<e;q+=4)if(255!==c[h+q]){p=!0;break}if(p)break;else h+=e}b.ascent=g-n;h=k-e;p=!1;for(n=f;n>g;--n){for(f=0;f<e;f+=4)if(255!==c[h+f]){p=!0;break}if(p)break;else h-=e}b.descent=n-g;b.fontSize=b.ascent+b.descent;return d.fontPropertiesCache[a]=b};g(d,[{key:"width",
get:function(){this.updateText(!0);return Math.abs(this.scale.x)*this._texture.orig.width},set:function(a){this.updateText(!0);var b=(0,k.sign)(this.scale.x)||1;this.scale.x=b*a/this._texture.orig.width;this._width=a}},{key:"height",get:function(){this.updateText(!0);return Math.abs(this.scale.y)*this._texture.orig.height},set:function(a){this.updateText(!0);var b=(0,k.sign)(this.scale.y)||1;this.scale.y=b*a/this._texture.orig.height;this._height=a}},{key:"style",get:function(){return this._style},
set:function(a){a=a||{};this._style=a instanceof q["default"]?a:new q["default"](a);this.localStyleID=-1;this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(a){a=String(""===a||null===a||void 0===a?" ":a);this._text!==a&&(this._text=a,this.dirty=!0)}}]);return d}(f["default"]);e["default"]=a;a.fontPropertiesCache={};a.fontPropertiesCanvas=document.createElement("canvas");a.fontPropertiesContext=a.fontPropertiesCanvas.getContext("2d")},{"../const":44,"../math":68,"../settings":99,
"../sprites/Sprite":100,"../textures/Texture":112,"../utils":120,"../utils/trimCanvas":124,"./TextStyle":107}],107:[function(a,f,e){function h(a){if("number"===typeof a)return(0,d.hex2string)(a);"string"===typeof a&&0===a.indexOf("0x")&&(a=a.replace("0x","#"));return a}function n(a){if(Array.isArray(a)){for(var b=0;b<a.length;++b)a[b]=h(a[b]);return a}return h(a)}e.__esModule=!0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;
"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();f=a("../const");var d=a("../utils"),c={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"#000000",dropShadowDistance:5,fill:"black",fillGradientType:f.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,
lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,wordWrap:!1,wordWrapWidth:100};a=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.styleID=0;Object.assign(this,c,b)}a.prototype.clone=function(){var b={},d;for(d in c)b[d]=this[d];return new a(b)};a.prototype.reset=function(){Object.assign(this,c)};g(a,[{key:"align",get:function(){return this._align},set:function(a){this._align!==
a&&(this._align=a,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(a){this._breakWords!==a&&(this._breakWords=a,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(a){this._dropShadow!==a&&(this._dropShadow=a,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(a){this._dropShadowAlpha!==a&&(this._dropShadowAlpha=a,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},
set:function(a){this._dropShadowAngle!==a&&(this._dropShadowAngle=a,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(a){this._dropShadowBlur!==a&&(this._dropShadowBlur=a,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(a){a=n(a);this._dropShadowColor!==a&&(this._dropShadowColor=a,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(a){this._dropShadowDistance!==
a&&(this._dropShadowDistance=a,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(a){a=n(a);this._fill!==a&&(this._fill=a,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(a){this._fillGradientType!==a&&(this._fillGradientType=a,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(a){var b;a:if(b=this._fillGradientStops,Array.isArray(b)&&Array.isArray(a)&&b.length===a.length){for(var c=
0;c<b.length;++c)if(b[c]!==a[c]){b=!1;break a}b=!0}else b=!1;b||(this._fillGradientStops=a,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(a){this.fontFamily!==a&&(this._fontFamily=a,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(a){this._fontSize!==a&&(this._fontSize=a,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(a){this._fontStyle!==a&&(this._fontStyle=a,this.styleID++)}},{key:"fontVariant",
get:function(){return this._fontVariant},set:function(a){this._fontVariant!==a&&(this._fontVariant=a,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(a){this._fontWeight!==a&&(this._fontWeight=a,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(a){this._letterSpacing!==a&&(this._letterSpacing=a,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(a){this._lineHeight!==a&&(this._lineHeight=
a,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(a){this._lineJoin!==a&&(this._lineJoin=a,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(a){this._miterLimit!==a&&(this._miterLimit=a,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(a){this._padding!==a&&(this._padding=a,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(a){a=n(a);this._stroke!==a&&(this._stroke=
a,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(a){this._strokeThickness!==a&&(this._strokeThickness=a,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(a){this._textBaseline!==a&&(this._textBaseline=a,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(a){this._trim!==a&&(this._trim=a,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(a){this._wordWrap!==
a&&(this._wordWrap=a,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(a){this._wordWrapWidth!==a&&(this._wordWrapWidth=a,this.styleID++)}}]);return a}();e["default"]=a},{"../const":44,"../utils":120}],108:[function(a,f,e){function h(a,d){if("function"!==typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function, not "+typeof d);a.prototype=Object.create(d&&d.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});
d&&(Object.setPrototypeOf?Object.setPrototypeOf(a,d):a.__proto__=d)}e.__esModule=!0;f=(f=a("./BaseTexture"))&&f.__esModule?f:{"default":f};var n=(a=a("../settings"))&&a.__esModule?a:{"default":a};a=function(a){function d(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100,b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,e=arguments[2],g=arguments[3];if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");var f;f=a.call(this,null,e);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
f=!f||"object"!==typeof f&&"function"!==typeof f?this:f;f.resolution=g||n["default"].RESOLUTION;f.width=c;f.height=b;f.realWidth=f.width*f.resolution;f.realHeight=f.height*f.resolution;f.scaleMode=void 0!==e?e:n["default"].SCALE_MODE;f.hasLoaded=!0;f._glRenderTargets={};f._canvasRenderTarget=null;f.valid=!1;return f}h(d,a);d.prototype.resize=function(a,b){if(a!==this.width||b!==this.height)this.valid=0<a&&0<b,this.width=a,this.height=b,this.realWidth=this.width*this.resolution,this.realHeight=this.height*
this.resolution,this.valid&&this.emit("update",this)};d.prototype.destroy=function(){a.prototype.destroy.call(this,!0);this.renderer=null};return d}(f["default"]);e["default"]=a},{"../settings":99,"./BaseTexture":109}],109:[function(a,f,e){function h(a){return a&&a.__esModule?a:{"default":a}}function n(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,
writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.__esModule=!0;var g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},d=a("../utils");f=a("../settings");var c=h(f);f=a("eventemitter3");f=h(f);var b=a("../utils/determineCrossOrigin"),k=h(b);a=a("bit-twiddle");var p=h(a);a=function(a){function b(e,
k,f){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var g;g=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");g=!g||"object"!==typeof g&&"function"!==typeof g?this:g;g.uid=(0,d.uid)();g.touched=0;g.resolution=f||c["default"].RESOLUTION;g.width=100;g.height=100;g.realWidth=100;g.realHeight=100;g.scaleMode=void 0!==k?k:c["default"].SCALE_MODE;g.hasLoaded=!1;g.isLoading=!1;g.source=null;g.origSource=null;g.imageType=
null;g.sourceScale=1;g.premultipliedAlpha=!0;g.imageUrl=null;g.isPowerOfTwo=!1;g.mipmap=c["default"].MIPMAP_TEXTURES;g.wrapMode=c["default"].WRAP_MODE;g._glTextures={};g._enabled=0;g._virtalBoundId=-1;e&&g.loadSource(e);return g}n(b,a);b.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions());this.emit("update",
this)};b.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution;this.height=this.realHeight/this.resolution;this.isPowerOfTwo=p["default"].isPow2(this.realWidth)&&p["default"].isPow2(this.realHeight)};b.prototype.loadSource=function(a){var b=this,c=this.isLoading;this.isLoading=this.hasLoaded=!1;c&&this.source&&(this.source.onload=null,this.source.onerror=null);var d=!this.source;this.source=a;if((a.src&&a.complete||a.getContext)&&a.width&&a.height)this._updateImageType(),
"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),d&&this.emit("loaded",this);else if(!a.getContext&&(d=function(){b.isLoading=!0;a.onload=function(){b._updateImageType();a.onload=null;a.onerror=null;b.isLoading&&(b.isLoading=!1,b._sourceLoaded(),"svg"===b.imageType?b._loadSvgSource():b.emit("loaded",b))};a.onerror=function(){a.onload=null;a.onerror=null;b.isLoading&&(b.isLoading=!1,b.emit("error",b))};if(a.complete&&a.src){a.onload=null;a.onerror=null;if("svg"===b.imageType)return b._loadSvgSource(),
{v:void 0};b.isLoading=!1;a.width&&a.height?(b._sourceLoaded(),c&&b.emit("loaded",b)):c&&b.emit("error",b)}}(),"object"===("undefined"===typeof d?"undefined":g(d))))return d.v};b.prototype._updateImageType=function(){if(this.imageUrl){var a=(0,d.decomposeDataUri)(this.imageUrl);if(a&&"image"===a.mediaType){if(a=a.subType.split("+")[0],a=(0,d.getUrlFileExtension)("."+a),!a)throw Error("Invalid image type in data URI.");}else(a=(0,d.getUrlFileExtension)(this.imageUrl))||(a="png");this.imageType=a}};
b.prototype._loadSvgSource=function(){if("svg"===this.imageType){var a=(0,d.decomposeDataUri)(this.imageUrl);a?this._loadSvgSourceUsingDataUri(a):this._loadSvgSourceUsingXhr()}};b.prototype._loadSvgSourceUsingDataUri=function(a){if("base64"===a.encoding){if(!atob)throw Error("Your browser doesn't support base64 conversions.");a=atob(a.data)}else a=a.data;this._loadSvgSourceUsingString(a)};b.prototype._loadSvgSourceUsingXhr=function(){var a=this,b=new XMLHttpRequest;b.onload=function(){if(b.readyState!==
b.DONE||200!==b.status)throw Error("Failed to load SVG using XHR.");a._loadSvgSourceUsingString(b.response)};b.onerror=function(){return a.emit("error",a)};b.open("GET",this.imageUrl,!0);b.send()};b.prototype._loadSvgSourceUsingString=function(a){var b=(0,d.getSvgSize)(a);a=b.width;b=b.height;if(!a||!b)throw Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(a*this.sourceScale);this.realHeight=Math.round(b*this.sourceScale);this._updateDimensions();
var c=document.createElement("canvas");c.width=this.realWidth;c.height=this.realHeight;c._pixiId="canvas_"+(0,d.uid)();c.getContext("2d").drawImage(this.source,0,0,a,b,0,0,this.realWidth,this.realHeight);this.origSource=this.source;this.source=c;d.BaseTextureCache[c._pixiId]=this;this.isLoading=!1;this._sourceLoaded();this.emit("loaded",this)};b.prototype._sourceLoaded=function(){this.hasLoaded=!0;this.update()};b.prototype.destroy=function(){this.imageUrl&&(delete d.BaseTextureCache[this.imageUrl],
delete d.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src=""));this.source&&this.source._pixiId&&delete d.BaseTextureCache[this.source._pixiId];this.source=null;this.dispose()};b.prototype.dispose=function(){this.emit("dispose",this)};b.prototype.updateSourceImage=function(a){this.source.src=a;this.loadSource(this.source)};b.fromImage=function(a,c,e,g){var f=d.BaseTextureCache[a];if(!f){var n=new Image;void 0===c&&0!==a.indexOf("data:")&&(n.crossOrigin=(0,k["default"])(a));
f=new b(n,e);f.imageUrl=a;g&&(f.sourceScale=g);f.resolution=(0,d.getResolutionOfUrl)(a);n.src=a;d.BaseTextureCache[a]=f}return f};b.fromCanvas=function(a,c){a._pixiId||(a._pixiId="canvas_"+(0,d.uid)());var e=d.BaseTextureCache[a._pixiId];e||(e=new b(a,c),d.BaseTextureCache[a._pixiId]=e);return e};b.from=function(a,c,e){if("string"===typeof a)return b.fromImage(a,void 0,c,e);if(a instanceof HTMLImageElement){var k=a.src,g=d.BaseTextureCache[k];g||(g=new b(a,c),g.imageUrl=k,e&&(g.sourceScale=e),g.resolution=
(0,d.getResolutionOfUrl)(k),d.BaseTextureCache[k]=g);return g}return a instanceof HTMLCanvasElement?b.fromCanvas(a,c):a};return b}(f["default"]);e["default"]=a},{"../settings":99,"../utils":120,"../utils/determineCrossOrigin":119,"bit-twiddle":1,eventemitter3:3}],110:[function(a,f,e){function h(a,d){if("function"!==typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function, not "+typeof d);a.prototype=Object.create(d&&d.prototype,{constructor:{value:a,enumerable:!1,
writable:!0,configurable:!0}});d&&(Object.setPrototypeOf?Object.setPrototypeOf(a,d):a.__proto__=d)}e.__esModule=!0;var n=(f=a("./BaseRenderTexture"))&&f.__esModule?f:{"default":f};a=a("./Texture");a=function(a){function d(c,b,e,g,f){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");var k=null;if(!(c instanceof n["default"])){var h=b;console.warn("Please use RenderTexture.create("+h+", "+e+") instead of the ctor directly.");k=c;b=null;c=new n["default"](h,e,g,f)}c=a.call(this,
c,b);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.legacyRenderer=k;c.valid=!0;c._updateUvs();return c}h(d,a);d.prototype.resize=function(a,b,d){this.valid=0<a&&0<b;this._frame.width=this.orig.width=a;this._frame.height=this.orig.height=b;d||this.baseTexture.resize(a,b);this._updateUvs()};d.create=function(a,b,e,g){return new d(new n["default"](a,b,e,g))};return d}((a&&a.__esModule?a:{"default":a})["default"]);
e["default"]=a},{"./BaseRenderTexture":108,"./Texture":112}],111:[function(a,f,e){e.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(c,b,d){b&&a(c.prototype,b);d&&a(c,d);return c}}(),n=a("../"),g=a("../utils");a=function(){function a(c,b){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.baseTexture=c;this.textures={};this.data=b;this.resolution=this._updateResolution(d||this.baseTexture.imageUrl);this._frames=this.data.frames;this._frameKeys=Object.keys(this._frames);this._batchIndex=0;this._callback=null}h(a,null,[{key:"BATCH_SIZE",get:function(){return 1E3}}]);a.prototype._updateResolution=function(a){var b=this.data.meta.scale;a=(0,g.getResolutionOfUrl)(a,null);null===a&&(a=void 0!==b?parseFloat(b):1);1!==a&&(this.baseTexture.resolution=a,this.baseTexture.update());return a};
a.prototype.parse=function(c){this._batchIndex=0;this._callback=c;this._frameKeys.length<=a.BATCH_SIZE?(this._processFrames(0),this._parseComplete()):this._nextBatch()};a.prototype._processFrames=function(c){for(var b=c,d=a.BATCH_SIZE;b-c<d&&b<this._frameKeys.length;){var e=this._frameKeys[b],f=this._frames[e].frame;if(f){var h,t=null,w=new n.Rectangle(0,0,this._frames[e].sourceSize.w/this.resolution,this._frames[e].sourceSize.h/this.resolution);h=this._frames[e].rotated?new n.Rectangle(f.x/this.resolution,
f.y/this.resolution,f.h/this.resolution,f.w/this.resolution):new n.Rectangle(f.x/this.resolution,f.y/this.resolution,f.w/this.resolution,f.h/this.resolution);this._frames[e].trimmed&&(t=new n.Rectangle(this._frames[e].spriteSourceSize.x/this.resolution,this._frames[e].spriteSourceSize.y/this.resolution,f.w/this.resolution,f.h/this.resolution));this.textures[e]=new n.Texture(this.baseTexture,h,w,t,this._frames[e].rotated?2:0);g.TextureCache[e]=this.textures[e]}b++}};a.prototype._parseComplete=function(){var a=
this._callback;this._callback=null;this._batchIndex=0;a.call(this,this.textures)};a.prototype._nextBatch=function(){var c=this;this._processFrames(this._batchIndex*a.BATCH_SIZE);this._batchIndex++;setTimeout(function(){c._batchIndex*a.BATCH_SIZE<c._frameKeys.length?c._nextBatch():c._parseComplete()},0)};a.prototype.destroy=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1,b;for(b in this.textures)this.textures[b].destroy();this.textures=this.data=this._frameKeys=this._frames=
null;a&&this.baseTexture.destroy();this.baseTexture=null};return a}();e["default"]=a},{"../":63,"../utils":120}],112:[function(a,f,e){function h(a){return a&&a.__esModule?a:{"default":a}}function n(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}
function g(a){a.destroy=function(){};a.on=function(){};a.once=function(){};a.emit=function(){}}e.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();f=a("./BaseTexture");var c=h(f);f=a("./VideoBaseTexture");var b=h(f);f=a("./TextureUvs");var k=h(f);f=a("eventemitter3");f=h(f);var p=a("../math"),
r=a("../utils"),q=function(a){function e(b,c,d,k,f){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var g;g=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");g=!g||"object"!==typeof g&&"function"!==typeof g?this:g;g.noFrame=!1;c||(g.noFrame=!0,c=new p.Rectangle(0,0,1,1));b instanceof e&&(b=b.baseTexture);g.baseTexture=b;g._frame=c;g.trim=k;g.valid=!1;g.requiresUpdate=!1;g._uvs=null;g.orig=d||c;g._rotate=Number(f||
0);if(!0===f)g._rotate=2;else if(0!==g._rotate%2)throw Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");if(b.hasLoaded)g.noFrame&&(c=new p.Rectangle(0,0,b.width,b.height),b.on("update",g.onBaseTextureUpdated,g)),g.frame=c;else b.once("loaded",g.onBaseTextureLoaded,g);g._updateID=0;g.transform=null;return g}n(e,a);e.prototype.update=function(){this.baseTexture.update()};e.prototype.onBaseTextureLoaded=function(a){this._updateID++;this.frame=this.noFrame?new p.Rectangle(0,
0,a.width,a.height):this._frame;this.baseTexture.on("update",this.onBaseTextureUpdated,this);this.emit("update",this)};e.prototype.onBaseTextureUpdated=function(a){this._updateID++;this._frame.width=a.width;this._frame.height=a.height;this.emit("update",this)};e.prototype.destroy=function(a){this.baseTexture&&(a&&(r.TextureCache[this.baseTexture.imageUrl]&&delete r.TextureCache[this.baseTexture.imageUrl],this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",
this.onBaseTextureLoaded,this),this.baseTexture=null);this.orig=this.trim=this._uvs=this._frame=null;this.valid=!1;this.off("dispose",this.dispose,this);this.off("update",this.update,this)};e.prototype.clone=function(){return new e(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)};e.prototype._updateUvs=function(){this._uvs||(this._uvs=new k["default"]);this._uvs.set(this._frame,this.baseTexture,this.rotate);this._updateID++};e.fromImage=function(a,b,d,k){var g=r.TextureCache[a];g||(g=
new e(c["default"].fromImage(a,b,d,k)),r.TextureCache[a]=g);return g};e.fromFrame=function(a){var b=r.TextureCache[a];if(!b)throw Error('The frameId "'+a+'" does not exist in the texture cache');return b};e.fromCanvas=function(a,b){return new e(c["default"].fromCanvas(a,b))};e.fromVideo=function(a,c){return"string"===typeof a?e.fromVideoUrl(a,c):new e(b["default"].fromVideo(a,c))};e.fromVideoUrl=function(a,c){return new e(b["default"].fromUrl(a,c))};e.from=function(a){if("string"===typeof a){var b=
r.TextureCache[a];return b?b:null!==a.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?e.fromVideoUrl(a):e.fromImage(a)}return a instanceof HTMLImageElement?new e(c["default"].from(a)):a instanceof HTMLCanvasElement?e.fromCanvas(a):a instanceof HTMLVideoElement?e.fromVideo(a):a instanceof c["default"]?new e(a):a};e.fromLoader=function(a,b,d){a=new c["default"](a,void 0,(0,r.getResolutionOfUrl)(b));var k=new e(a);a.imageUrl=b;d||(d=b);r.BaseTextureCache[d]=a;r.TextureCache[d]=k;d!==b&&(r.BaseTextureCache[b]=
a,r.TextureCache[b]=k);return k};e.addTextureToCache=function(a,b){r.TextureCache[b]=a};e.removeTextureFromCache=function(a){var b=r.TextureCache[a];delete r.TextureCache[a];delete r.BaseTextureCache[a];return b};d(e,[{key:"frame",get:function(){return this._frame},set:function(a){this._frame=a;this.noFrame=!1;if(a.x+a.width>this.baseTexture.width||a.y+a.height>this.baseTexture.height)throw Error("Texture Error: frame does not fit inside the base Texture dimensions: "+("X: "+a.x+" + "+a.width+" > "+
this.baseTexture.width+" ")+("Y: "+a.y+" + "+a.height+" > "+this.baseTexture.height));this.valid=a&&a.width&&a.height&&this.baseTexture.hasLoaded;this.trim||this.rotate||(this.orig=a);this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(a){this._rotate=a;this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]);return e}(f["default"]);e["default"]=q;q.EMPTY=new q(new c["default"]);
g(q.EMPTY);q.WHITE=function(){var a=document.createElement("canvas");a.width=10;a.height=10;var b=a.getContext("2d");b.fillStyle="white";b.fillRect(0,0,10,10);return new q(new c["default"](a))}();g(q.WHITE)},{"../math":68,"../utils":120,"./BaseTexture":109,"./TextureUvs":113,"./VideoBaseTexture":114,eventemitter3:3}],113:[function(a,f,e){e.__esModule=!0;var h=(a=a("../math/GroupD8"))&&a.__esModule?a:{"default":a};a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.y0=this.x0=0;this.x1=1;this.y1=0;this.y2=this.x2=1;this.x3=0;this.y3=1;this.uvsUint32=new Uint32Array(4)}a.prototype.set=function(a,d,c){var b=d.width,e=d.height;if(c){d=a.width/2/b;var g=a.height/2/e,b=a.x/b+d;a=a.y/e+g;c=h["default"].add(c,h["default"].NW);this.x0=b+d*h["default"].uX(c);this.y0=a+g*h["default"].uY(c);c=h["default"].add(c,2);this.x1=b+d*h["default"].uX(c);this.y1=a+g*h["default"].uY(c);c=h["default"].add(c,2);this.x2=b+d*h["default"].uX(c);this.y2=a+g*h["default"].uY(c);c=h["default"].add(c,
2);this.x3=b+d*h["default"].uX(c);this.y3=a+g*h["default"].uY(c)}else this.x0=a.x/b,this.y0=a.y/e,this.x1=(a.x+a.width)/b,this.y1=a.y/e,this.x2=(a.x+a.width)/b,this.y2=(a.y+a.height)/e,this.x3=a.x/b,this.y3=(a.y+a.height)/e;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535;this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535;this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535;this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535};return a}();e["default"]=
a},{"../math/GroupD8":64}],114:[function(a,f,e){function h(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}function n(a,c){c||(c="video/"+a.substr(a.lastIndexOf(".")+1));var b=document.createElement("source");b.src=a;b.type=c;return b}e.__esModule=
!0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();f=(f=a("./BaseTexture"))&&f.__esModule?f:{"default":f};var d=a("../utils"),c=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}(a("../ticker"));a=
function(a){function b(c,d){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");if(!c)throw Error("No video source element specified.");(c.readyState===c.HAVE_ENOUGH_DATA||c.readyState===c.HAVE_FUTURE_DATA)&&c.width&&c.height&&(c.complete=!0);var e;e=a.call(this,c,d);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");e=!e||"object"!==typeof e&&"function"!==typeof e?this:e;e.width=c.videoWidth;e.height=c.videoHeight;e._autoUpdate=
!0;e._isAutoUpdating=!1;e.autoPlay=!0;e.update=e.update.bind(e);e._onCanPlay=e._onCanPlay.bind(e);c.addEventListener("play",e._onPlayStart.bind(e));c.addEventListener("pause",e._onPlayStop.bind(e));e.hasLoaded=!1;e.__loaded=!1;e._isSourceReady()?e._onCanPlay():(c.addEventListener("canplay",e._onCanPlay),c.addEventListener("canplaythrough",e._onCanPlay));return e}h(b,a);b.prototype._isSourcePlaying=function(){var a=this.source;return 0<a.currentTime&&!1===a.paused&&!1===a.ended&&2<a.readyState};b.prototype._isSourceReady=
function(){return 3===this.source.readyState||4===this.source.readyState};b.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay();!this._isAutoUpdating&&this.autoUpdate&&(c.shared.add(this.update,this),this._isAutoUpdating=!0)};b.prototype._onPlayStop=function(){this._isAutoUpdating&&(c.shared.remove(this.update,this),this._isAutoUpdating=!1)};b.prototype._onCanPlay=function(){this.hasLoaded=!0;this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",
this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())};b.prototype.destroy=function(){this._isAutoUpdating&&c.shared.remove(this.update,this);this.source&&this.source._pixiId&&(delete d.BaseTextureCache[this.source._pixiId],delete this.source._pixiId);a.prototype.destroy.call(this)};b.fromVideo=function(a,c){a._pixiId||(a._pixiId=
"video_"+(0,d.uid)());var e=d.BaseTextureCache[a._pixiId];e||(e=new b(a,c),d.BaseTextureCache[a._pixiId]=e);return e};b.fromUrl=function(a,c){var d=document.createElement("video");d.setAttribute("webkit-playsinline","");d.setAttribute("playsinline","");if(Array.isArray(a))for(var e=0;e<a.length;++e)d.appendChild(n(a[e].src||a[e],a[e].mime));else d.appendChild(n(a.src||a,a.mime));d.load();return b.fromVideo(d,c)};g(b,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(a){a!==this._autoUpdate&&
(this._autoUpdate=a,!this._autoUpdate&&this._isAutoUpdating?(c.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(c.shared.add(this.update,this),this._isAutoUpdating=!0))}}]);return b}(f["default"]);e["default"]=a;a.fromUrls=a.fromUrl},{"../ticker":116,"../utils":120,"./BaseTexture":109}],115:[function(a,f,e){e.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in
d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(c,b,d){b&&a(c.prototype,b);d&&a(c,d);return c}}(),n=(f=a("../settings"))&&f.__esModule?f:{"default":f},g=(a=a("eventemitter3"))&&a.__esModule?a:{"default":a};a=function(){function a(){var c=this;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._emitter=new g["default"];this._requestId=null;this._maxElapsedMS=100;this.autoStart=!1;this.deltaTime=1;this.elapsedMS=1/n["default"].TARGET_FPMS;this.lastTime=
0;this.speed=1;this.started=!1;this._tick=function(a){c._requestId=null;c.started&&(c.update(a),c.started&&null===c._requestId&&c._emitter.listeners("tick",!0)&&(c._requestId=requestAnimationFrame(c._tick)))}}a.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners("tick",!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))};a.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=
null)};a.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()};a.prototype.add=function(a,b){this._emitter.on("tick",a,b);this._startIfPossible();return this};a.prototype.addOnce=function(a,b){this._emitter.once("tick",a,b);this._startIfPossible();return this};a.prototype.remove=function(a,b){this._emitter.off("tick",a,b);this._emitter.listeners("tick",!0)||this._cancelIfNeeded();return this};a.prototype.start=function(){this.started||(this.started=
!0,this._requestIfNeeded())};a.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())};a.prototype.update=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:performance.now(),b;a>this.lastTime?(b=this.elapsedMS=a-this.lastTime,b>this._maxElapsedMS&&(b=this._maxElapsedMS),this.deltaTime=b*n["default"].TARGET_FPMS*this.speed,this._emitter.emit("tick",this.deltaTime)):this.deltaTime=this.elapsedMS=0;this.lastTime=a};h(a,[{key:"FPS",get:function(){return 1E3/
this.elapsedMS}},{key:"minFPS",get:function(){return 1E3/this._maxElapsedMS},set:function(a){this._maxElapsedMS=1/Math.min(Math.max(0,a)/1E3,n["default"].TARGET_FPMS)}}]);return a}();e["default"]=a},{"../settings":99,eventemitter3:3}],116:[function(a,f,e){e.__esModule=!0;e.Ticker=e.shared=void 0;a=(a=a("./Ticker"))&&a.__esModule?a:{"default":a};f=new a["default"];f.autoStart=!0;e.shared=f;e.Ticker=a["default"]},{"./Ticker":115}],117:[function(a,f,e){e.__esModule=!0;e["default"]=function(){return!(navigator.platform&&
/iPad|iPhone|iPod/.test(navigator.platform))}},{}],118:[function(a,f,e){e.__esModule=!0;e["default"]=function(a){a*=6;for(var e=new Uint16Array(a),g=0,d=0;g<a;g+=6,d+=4)e[g+0]=d+0,e[g+1]=d+1,e[g+2]=d+2,e[g+3]=d+0,e[g+4]=d+2,e[g+5]=d+3;return e}},{}],119:[function(a,f,e){e.__esModule=!0;e["default"]=function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window.location;if(0===a.indexOf("data:"))return"";d=d||window.location;n||(n=document.createElement("a"));n.href=a;a=h["default"].parse(n.href);
var c=!a.port&&""===d.port||a.port===d.port;return a.hostname===d.hostname&&c&&a.protocol===d.protocol?"":"anonymous"};var h=(a=a("url"))&&a.__esModule?a:{"default":a},n=void 0},{url:28}],120:[function(a,f,e){function h(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}function n(a){return a&&a.__esModule?a:{"default":a}}e.__esModule=!0;e.BaseTextureCache=e.TextureCache=e.mixins=e.pluginTarget=e.EventEmitter=
e.isMobile=void 0;e.uid=function(){return++k};e.hex2rgb=function(a,b){b=b||[];b[0]=(a>>16&255)/255;b[1]=(a>>8&255)/255;b[2]=(a&255)/255;return b};e.hex2string=function(a){a=a.toString(16);a="000000".substr(0,6-a.length)+a;return"#"+a};e.rgb2hex=function(a){return(255*a[0]<<16)+(255*a[1]<<8)+(255*a[2]|0)};e.getResolutionOfUrl=function(a,b){var c=d["default"].RETINA_PREFIX.exec(a);return c?parseFloat(c[1]):void 0!==b?b:1};e.decomposeDataUri=function(a){if(a=g.DATA_URI.exec(a))return{mediaType:a[1]?
a[1].toLowerCase():void 0,subType:a[2]?a[2].toLowerCase():void 0,encoding:a[3]?a[3].toLowerCase():void 0,data:a[4]}};e.getUrlFileExtension=function(a){if(a=g.URL_FILE_EXTENSION.exec(a))return a[1].toLowerCase()};e.getSvgSize=function(a){a=g.SVG_SIZE.exec(a);var b={};a&&(b[a[1]]=Math.round(parseFloat(a[3])),b[a[5]]=Math.round(parseFloat(a[7])));return b};e.skipHello=function(){p=!0};e.sayHello=function(a){p||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?window.console.log.apply(console,["\n %c %c %c Pixi.js "+
g.VERSION+" - \u2730 "+a+" \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):
window.console&&window.console.log("Pixi.js "+g.VERSION+" - "+a+" - http://www.pixijs.com/"),p=!0)};e.isWebGLSupported=function(){var a={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var b=document.createElement("canvas"),c=b.getContext("webgl",a)||b.getContext("experimental-webgl",a),d=!(!c||!c.getContextAttributes().stencil);if(c){var e=c.getExtension("WEBGL_lose_context");e&&e.loseContext()}return d}catch(y){return!1}};e.sign=function(a){return 0===a?
0:0>a?-1:1};e.removeItems=function(a,b,c){var d=a.length;if(!(b>=d||0===c)){c=b+c>d?d-b:c;for(d-=c;b<d;++b)a[b]=a[b+c];a.length=d}};e.destroyTextureCache=function(){var a=void 0;for(a in r)r[a].destroy();for(a in q)q[a].destroy()};e.clearTextureCache=function(){var a=void 0;for(a in r)delete r[a];for(a in q)delete q[a]};var g=a("../const");f=a("../settings");var d=n(f);f=a("eventemitter3");f=n(f);var c=a("./pluginTarget"),c=n(c),b=a("./mixin"),b=h(b);a=a("ismobilejs");a=h(a);var k=0,p=!1;e.isMobile=
a;e.EventEmitter=f["default"];e.pluginTarget=c["default"];e.mixins=b;var r=e.TextureCache={},q=e.BaseTextureCache={}},{"../const":44,"../settings":99,"./mixin":122,"./pluginTarget":123,eventemitter3:3,ismobilejs:4}],121:[function(a,f,e){e.__esModule=!0;e["default"]=function(a){return h["default"].tablet||h["default"].phone?4:a};var h=(a=a("ismobilejs"))&&a.__esModule?a:{"default":a}},{ismobilejs:4}],122:[function(a,f,e){function h(a,d){if(a&&d)for(var c=Object.keys(d),b=0;b<c.length;++b){var e=c[b];
Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(d,e))}}e.__esModule=!0;e.mixin=h;e.delayMixin=function(a,d){n.push(a,d)};e.performMixins=function(){for(var a=0;a<n.length;a+=2)h(n[a],n[a+1]);n.length=0};var n=[]},{}],123:[function(a,f,e){function h(a){a.__plugins={};a.registerPlugin=function(e,d){a.__plugins[e]=d};a.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var e in a.__plugins)this.plugins[e]=new a.__plugins[e](this)};a.prototype.destroyPlugins=function(){for(var a in this.plugins)this.plugins[a].destroy(),
this.plugins[a]=null;this.plugins=null}}e.__esModule=!0;e["default"]={mixin:function(a){h(a)}}},{}],124:[function(a,f,e){e.__esModule=!0;e["default"]=function(a){var e=a.width,f=a.height;a=a.getContext("2d");var f=a.getImageData(0,0,e,f).data,d=f.length,c=null,b=null,k=null,h=null,r,q,t;for(r=0;r<d;r+=4)0!==f[r+3]&&(q=r/4%e,t=~~(r/4/e),null===c&&(c=t),null===b?b=q:q<b&&(b=q),null===k?k=q+1:k<q&&(k=q+1),null===h?h=t:h<t&&(h=t));e=k-b;f=h-c+1;a=a.getImageData(b,c,e,f);return{height:f,width:e,data:a}}},
{}],125:[function(a,f,e){function h(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}function n(a){var b=Error().stack;"undefined"===typeof b?console.warn("Deprecation Warning: ",a):(b=b.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",a),console.warn(b),
console.groupEnd()):(console.warn("Deprecation Warning: ",a),console.warn(b)))}f=a("./core");var g=h(f);f=a("./mesh");var d=h(f);f=a("./particles");var c=h(f);f=a("./extras");var b=h(f);f=a("./filters");f=h(f);e=a("./prepare");e=h(e);var k=a("./loaders"),p=h(k);a=a("./interaction");a=h(a);g.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.");};g.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.");
};Object.defineProperties(g,{Stage:{enumerable:!0,get:function(){n("You do not need to use a PIXI Stage any more, you can simply render any container.");return g.Container}},DisplayObjectContainer:{enumerable:!0,get:function(){n("DisplayObjectContainer has been shortened to Container, please use Container from now on.");return g.Container}},Strip:{enumerable:!0,get:function(){n("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on.");return d.Mesh}},Rope:{enumerable:!0,
get:function(){n("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on.");return d.Rope}},ParticleContainer:{enumerable:!0,get:function(){n("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on.");return c.ParticleContainer}},MovieClip:{enumerable:!0,get:function(){n("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite.");return b.AnimatedSprite}},TilingSprite:{enumerable:!0,
get:function(){n("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on.");return b.TilingSprite}},BitmapText:{enumerable:!0,get:function(){n("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on.");return b.BitmapText}},blendModes:{enumerable:!0,get:function(){n("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on.");return g.BLEND_MODES}},scaleModes:{enumerable:!0,get:function(){n("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on.");
return g.SCALE_MODES}},BaseTextureCache:{enumerable:!0,get:function(){n("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on.");return g.utils.BaseTextureCache}},TextureCache:{enumerable:!0,get:function(){n("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on.");return g.utils.TextureCache}},math:{enumerable:!0,get:function(){n("The math namespace is deprecated, please access members already accessible on PIXI.");
return g}},AbstractFilter:{enumerable:!0,get:function(){n("AstractFilter has been renamed to Filter, please use PIXI.Filter");return g.Filter}},TransformManual:{enumerable:!0,get:function(){n("TransformManual has been renamed to TransformBase, please update your pixi-spine");return g.TransformBase}},TARGET_FPMS:{enumerable:!0,get:function(){n("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS");return g.settings.TARGET_FPMS},set:function(a){n("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS");
g.settings.TARGET_FPMS=a}},FILTER_RESOLUTION:{enumerable:!0,get:function(){n("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION");return g.settings.FILTER_RESOLUTION},set:function(a){n("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION");g.settings.FILTER_RESOLUTION=a}},RESOLUTION:{enumerable:!0,get:function(){n("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION");return g.settings.RESOLUTION},set:function(a){n("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION");
g.settings.RESOLUTION=a}},MIPMAP_TEXTURES:{enumerable:!0,get:function(){n("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES");return g.settings.MIPMAP_TEXTURES},set:function(a){n("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES");g.settings.MIPMAP_TEXTURES=a}},SPRITE_BATCH_SIZE:{enumerable:!0,get:function(){n("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE");return g.settings.SPRITE_BATCH_SIZE},
set:function(a){n("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE");g.settings.SPRITE_BATCH_SIZE=a}},SPRITE_MAX_TEXTURES:{enumerable:!0,get:function(){n("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES");return g.settings.SPRITE_MAX_TEXTURES},set:function(a){n("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES");g.settings.SPRITE_MAX_TEXTURES=a}},RETINA_PREFIX:{enumerable:!0,
get:function(){n("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX");return g.settings.RETINA_PREFIX},set:function(a){n("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX");g.settings.RETINA_PREFIX=a}},DEFAULT_RENDER_OPTIONS:{enumerable:!0,get:function(){n("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS");return g.settings.RENDER_OPTIONS}}});for(var r=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},
{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],k=function(a){var b=r[a];Object.defineProperty(g[b.parent],"DEFAULT",{enumerable:!0,get:function(){n("PIXI."+b.parent+".DEFAULT has been deprecated, please use PIXI.settings."+b.target);return g.settings[b.target]},set:function(a){n("PIXI."+b.parent+".DEFAULT has been deprecated, please use PIXI.settings."+b.target);g.settings[b.target]=
a}})},q=0;q<r.length;q++)k(q);Object.defineProperties(g.settings,{PRECISION:{enumerable:!0,get:function(){n("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT");return g.settings.PRECISION_FRAGMENT},set:function(a){n("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT");g.settings.PRECISION_FRAGMENT=a}}});Object.defineProperties(b,{MovieClip:{enumerable:!0,get:function(){n("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on.");
return b.AnimatedSprite}}});g.DisplayObject.prototype.generateTexture=function(a,b,c){n("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)");return a.generateTexture(this,b,c)};g.Graphics.prototype.generateTexture=function(a,b){n("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture");return this.generateCanvasTexture(a,b)};g.RenderTexture.prototype.render=function(a,b,c,
d){this.legacyRenderer.render(a,this,c,b,!d);n("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")};g.RenderTexture.prototype.getImage=function(a){n("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)");return this.legacyRenderer.extract.image(a)};g.RenderTexture.prototype.getBase64=function(a){n("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)");return this.legacyRenderer.extract.base64(a)};
g.RenderTexture.prototype.getCanvas=function(a){n("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)");return this.legacyRenderer.extract.canvas(a)};g.RenderTexture.prototype.getPixels=function(a){n("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)");return this.legacyRenderer.pixels(a)};g.Sprite.prototype.setTexture=function(a){this.texture=a;n("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")};
b.BitmapText.prototype.setText=function(a){this.text=a;n("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")};g.Text.prototype.setText=function(a){this.text=a;n("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")};g.Text.prototype.setStyle=function(a){this.style=a;n("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")};g.Text.prototype.determineFontProperties=function(a){n("determineFontProperties is now deprecated, please use the static calculateFontProperties method, e.g : Text.calculateFontProperties(fontStyle);");
return g.Text.calculateFontProperties(a)};Object.defineProperties(g.TextStyle.prototype,{font:{get:function(){n("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+("number"===typeof this._fontSize?this._fontSize+"px":this._fontSize)+" "+this._fontFamily},set:function(a){n("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on");
1<a.indexOf("italic")?this._fontStyle="italic":-1<a.indexOf("oblique")?this._fontStyle="oblique":this._fontStyle="normal";-1<a.indexOf("small-caps")?this._fontVariant="small-caps":this._fontVariant="normal";a=a.split(" ");var b=-1;this._fontSize=26;for(var c=0;c<a.length;++c)if(a[c].match(/(px|pt|em|%)/)){b=c;this._fontSize=a[c];break}this._fontWeight="normal";for(c=0;c<b;++c)if(a[c].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=a[c];break}if(-1<b&&b<a.length-
1){this._fontFamily="";for(b+=1;b<a.length;++b)this._fontFamily+=a[b]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}});g.Texture.prototype.setFrame=function(a){this.frame=a;n("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")};Object.defineProperties(f,{AbstractFilter:{get:function(){n("AstractFilter has been renamed to Filter, please use PIXI.Filter");return g.AbstractFilter}},SpriteMaskFilter:{get:function(){n("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on.");
return g.SpriteMaskFilter}}});g.utils.uuid=function(){n("utils.uuid() is deprecated, please use utils.uid() from now on.");return g.utils.uid()};g.utils.canUseNewCanvasBlendModes=function(){n("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on");return g.CanvasTinter.canUseMultiply};var t=!0;Object.defineProperty(g.utils,"_saidHello",{set:function(a){a&&(n("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello());t=
a},get:function(){return t}});Object.defineProperty(e.canvas,"UPLOADS_PER_FRAME",{set:function(){n("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){n("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter");return NaN}});Object.defineProperty(e.webgl,"UPLOADS_PER_FRAME",{set:function(){n("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},
get:function(){n("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter");return NaN}});Object.defineProperties(p.Resource.prototype,{isJson:{get:function(){n("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`.");return this.type===p.Loader.Resource.TYPE.JSON}},isXml:{get:function(){n("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`.");return this.type===p.Loader.Resource.TYPE.XML}},isImage:{get:function(){n("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`.");
return this.type===p.Loader.Resource.TYPE.IMAGE}},isAudio:{get:function(){n("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`.");return this.type===p.Loader.Resource.TYPE.AUDIO}},isVideo:{get:function(){n("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`.");return this.type===p.Loader.Resource.TYPE.VIDEO}}});Object.defineProperties(p.Loader.prototype,{before:{get:function(){n("The before() method is deprecated, please use pre().");
return this.pre}},after:{get:function(){n("The after() method is deprecated, please use use().");return this.use}}});Object.defineProperty(a.interactiveTarget,"defaultCursor",{set:function(a){n("Property defaultCursor has been replaced with 'cursor'. ");this.cursor=a},get:function(){n("Property defaultCursor has been replaced with 'cursor'. ");return this.cursor},enumerable:!0});Object.defineProperty(a.InteractionManager,"defaultCursorStyle",{set:function(a){n("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. ");
this.cursorStyles["default"]=a},get:function(){n("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. ");return this.cursorStyles["default"]}});Object.defineProperty(a.InteractionManager,"currentCursorStyle",{set:function(a){n("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently.");this.currentCursorMode=a},get:function(){n("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently.");
return this.currentCursorMode}})},{"./core":63,"./extras":136,"./filters":147,"./interaction":154,"./loaders":157,"./mesh":166,"./particles":169,"./prepare":179}],126:[function(a,f,e){e.__esModule=!0;var h=function(a){if(a&&a.__esModule)return a;var d={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);d["default"]=a;return d}(a("../../core")),n=new h.Rectangle;a=function(){function a(d){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.renderer=d;d.extract=this}a.prototype.image=function(a){var c=new Image;c.src=this.base64(a);return c};a.prototype.base64=function(a){return this.canvas(a).toDataURL()};a.prototype.canvas=function(a){var c=this.renderer,b=void 0,d=void 0;a&&(d=a instanceof h.RenderTexture?a:c.generateTexture(a));d?(a=d.baseTexture._canvasRenderTarget.context,b=d.baseTexture._canvasRenderTarget.resolution,c=d.frame):(a=c.rootContext,c=n,c.width=this.renderer.width,c.height=this.renderer.height);var e=c.width*
b,f=c.height*b,d=new h.CanvasRenderTarget(e,f),b=a.getImageData(c.x*b,c.y*b,e,f);d.context.putImageData(b,0,0);return d.canvas};a.prototype.pixels=function(a){var c=this.renderer,b=void 0,d;d=void 0;a&&(d=a instanceof h.RenderTexture?a:c.generateTexture(a));d?(a=d.baseTexture._canvasRenderTarget.context,b=d.baseTexture._canvasRenderTarget.resolution,d=d.frame):(a=c.rootContext,d=n,d.width=c.width,d.height=c.height);return a.getImageData(0,0,d.width*b,d.height*b).data};a.prototype.destroy=function(){this.renderer=
this.renderer.extract=null};return a}();e["default"]=a;h.CanvasRenderer.registerPlugin("extract",a)},{"../../core":63}],127:[function(a,f,e){e.__esModule=!0;var h=a("./webgl/WebGLExtract");Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return(h&&h.__esModule?h:{"default":h})["default"]}});var n=a("./canvas/CanvasExtract");Object.defineProperty(e,"canvas",{enumerable:!0,get:function(){return(n&&n.__esModule?n:{"default":n})["default"]}})},{"./canvas/CanvasExtract":126,"./webgl/WebGLExtract":128}],
128:[function(a,f,e){e.__esModule=!0;var h=function(a){if(a&&a.__esModule)return a;var d={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);d["default"]=a;return d}(a("../../core")),n=new h.Rectangle;a=function(){function a(d){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.renderer=d;d.extract=this}a.prototype.image=function(a){var c=new Image;c.src=this.base64(a);return c};a.prototype.base64=function(a){return this.canvas(a).toDataURL()};
a.prototype.canvas=function(a){var c=this.renderer,b,d,e;e=void 0;a&&(e=a instanceof h.RenderTexture?a:this.renderer.generateTexture(a));e?(b=e.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],a=b.resolution,d=e.frame,e=!1):(b=this.renderer.rootRenderTarget,a=b.resolution,e=!0,d=n,d.width=b.size.width,d.height=b.size.height);var f=d.width*a,g=d.height*a,t=new h.CanvasRenderTarget(f,g);b&&(c.bindRenderTarget(b),b=new Uint8Array(4*f*g),c=c.gl,c.readPixels(d.x*a,d.y*a,f,g,c.RGBA,c.UNSIGNED_BYTE,
b),c=t.context.getImageData(0,0,f,g),c.data.set(b),t.context.putImageData(c,0,0),e&&(t.context.scale(1,-1),t.context.drawImage(t.canvas,0,-g)));return t.canvas};a.prototype.pixels=function(a){var c=this.renderer,b,d;d=void 0;a&&(d=a instanceof h.RenderTexture?a:this.renderer.generateTexture(a));d?(b=d.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],a=b.resolution,d=d.frame):(b=this.renderer.rootRenderTarget,a=b.resolution,d=n,d.width=b.size.width,d.height=b.size.height);var e=d.width*a,f=
d.height*a,g=new Uint8Array(4*e*f);b&&(c.bindRenderTarget(b),c=c.gl,c.readPixels(d.x*a,d.y*a,e,f,c.RGBA,c.UNSIGNED_BYTE,g));return g};a.prototype.destroy=function(){this.renderer=this.renderer.extract=null};return a}();e["default"]=a;h.WebGLRenderer.registerPlugin("extract",a)},{"../../core":63}],129:[function(a,f,e){function h(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}e.__esModule=!0;var n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(c,b,d){b&&a(c.prototype,b);d&&a(c,d);return c}}(),g=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=
a[b]);c["default"]=a;return c}(a("../core"));a=function(a){function c(b,d){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var e;e=a.call(this,b[0]instanceof g.Texture?b[0]:b[0].texture);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");e=!e||"object"!==typeof e&&"function"!==typeof e?this:e;e._textures=null;e._durations=null;e.textures=b;e._autoUpdate=!1!==d;e.animationSpeed=1;e.loop=!0;e.onComplete=null;e.onFrameChange=
null;e._currentTime=0;e.playing=!1;return e}h(c,a);c.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&g.ticker.shared.remove(this.update,this))};c.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&g.ticker.shared.add(this.update,this))};c.prototype.gotoAndStop=function(a){this.stop();var b=this.currentFrame;this._currentTime=a;b!==this.currentFrame&&this.updateTexture()};c.prototype.gotoAndPlay=function(a){var b=this.currentFrame;this._currentTime=
a;b!==this.currentFrame&&this.updateTexture();this.play()};c.prototype.update=function(a){var b=this.animationSpeed*a,c=this.currentFrame;if(null!==this._durations){for(var d=this._currentTime%1*this._durations[this.currentFrame],d=d+b/60*1E3;0>d;)this._currentTime--,d+=this._durations[this.currentFrame];a=Math.sign(this.animationSpeed*a);for(this._currentTime=Math.floor(this._currentTime);d>=this._durations[this.currentFrame];)d-=this._durations[this.currentFrame]*a,this._currentTime+=a;this._currentTime+=
d/this._durations[this.currentFrame]}else this._currentTime+=b;if(0>this._currentTime&&!this.loop){if(this.gotoAndStop(0),this.onComplete)this.onComplete()}else if(this._currentTime>=this._textures.length&&!this.loop){if(this.gotoAndStop(this._textures.length-1),this.onComplete)this.onComplete()}else c!==this.currentFrame&&this.updateTexture()};c.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame];this._textureID=-1;if(this.onFrameChange)this.onFrameChange(this.currentFrame)};
c.prototype.destroy=function(){this.stop();a.prototype.destroy.call(this)};c.fromFrames=function(a){for(var b=[],d=0;d<a.length;++d)b.push(g.Texture.fromFrame(a[d]));return new c(b)};c.fromImages=function(a){for(var b=[],d=0;d<a.length;++d)b.push(g.Texture.fromImage(a[d]));return new c(b)};n(c,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(a){if(a[0]instanceof g.Texture)this._textures=a,this._durations=null;else{this._textures=
[];this._durations=[];for(var b=0;b<a.length;b++)this._textures.push(a[b].texture),this._durations.push(a[b].time)}}},{key:"currentFrame",get:function(){var a=Math.floor(this._currentTime)%this._textures.length;0>a&&(a+=this._textures.length);return a}}]);return c}(g.Sprite);e["default"]=a},{"../core":63}],130:[function(a,f,e){function h(a,c){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||"object"!==typeof c&&"function"!==typeof c?a:c}function n(a,
c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}e.__esModule=!0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}
return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),d=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}(a("../core")),c=(a=a("../core/math/ObservablePoint"))&&a.__esModule?a:{"default":a};a=function(a){function b(d){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var k=h(this,a.call(this));
k._textWidth=0;k._textHeight=0;k._glyphs=[];k._font={tint:void 0!==e.tint?e.tint:16777215,align:e.align||"left",name:null,size:0};k.font=e.font;k._text=d;k.maxWidth=0;k.maxLineHeight=0;k._anchor=new c["default"](function(){k.dirty=!0},k,0,0);k.dirty=!1;k.updateText();return k}n(b,a);b.prototype.updateText=function(){for(var a=b.fonts[this._font.name],c=this._font.size/a.size,e=new d.Point,k=[],f=[],g=null,n=0,h=0,y=0,z=-1,A=0,B=0,E=0;E<this.text.length;E++){var F=this.text.charCodeAt(E);/(\s)/.test(this.text.charAt(E))&&
(z=E,A=n);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(E)))f.push(n),h=Math.max(h,n),y++,e.x=0,e.y+=a.lineHeight,g=null;else if(-1!==z&&0<this.maxWidth&&e.x*c>this.maxWidth)d.utils.removeItems(k,z,E-z),E=z,z=-1,f.push(A),h=Math.max(h,A),y++,e.x=0,e.y+=a.lineHeight,g=null;else{var G=a.chars[F];G&&(g&&G.kerning[g]&&(e.x+=G.kerning[g]),k.push({texture:G.texture,line:y,charCode:F,position:new d.Point(e.x+G.xOffset,e.y+G.yOffset)}),n=e.x+(G.texture.width+G.xOffset),e.x+=G.xAdvance,B=Math.max(B,G.yOffset+
G.texture.height),g=F)}}f.push(n);h=Math.max(h,n);g=[];for(n=0;n<=y;n++)z=0,"right"===this._font.align?z=h-f[n]:"center"===this._font.align&&(z=(h-f[n])/2),g.push(z);f=k.length;y=this.tint;for(n=0;n<f;n++)(z=this._glyphs[n])?z.texture=k[n].texture:(z=new d.Sprite(k[n].texture),this._glyphs.push(z)),z.position.x=(k[n].position.x+g[k[n].line])*c,z.position.y=k[n].position.y*c,z.scale.x=z.scale.y=c,z.tint=y,z.parent||this.addChild(z);for(k=f;k<this._glyphs.length;++k)this.removeChild(this._glyphs[k]);
this._textWidth=h*c;this._textHeight=(e.y+a.lineHeight)*c;if(0!==this.anchor.x||0!==this.anchor.y)for(a=0;a<f;a++)this._glyphs[a].x-=this._textWidth*this.anchor.x,this._glyphs[a].y-=this._textHeight*this.anchor.y;this.maxLineHeight=B*c};b.prototype.updateTransform=function(){this.validate();this.containerUpdateTransform()};b.prototype.getLocalBounds=function(){this.validate();return a.prototype.getLocalBounds.call(this)};b.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)};
b.registerFont=function(a,c){var e={},k=a.getElementsByTagName("info")[0],f=a.getElementsByTagName("common")[0];e.font=k.getAttribute("face");e.size=parseInt(k.getAttribute("size"),10);e.lineHeight=parseInt(f.getAttribute("lineHeight"),10);e.chars={};k=a.getElementsByTagName("char");for(f=0;f<k.length;f++){var g=k[f],n=parseInt(g.getAttribute("id"),10),h=new d.Rectangle(parseInt(g.getAttribute("x"),10)+c.frame.x,parseInt(g.getAttribute("y"),10)+c.frame.y,parseInt(g.getAttribute("width"),10),parseInt(g.getAttribute("height"),
10));e.chars[n]={xOffset:parseInt(g.getAttribute("xoffset"),10),yOffset:parseInt(g.getAttribute("yoffset"),10),xAdvance:parseInt(g.getAttribute("xadvance"),10),kerning:{},texture:new d.Texture(c.baseTexture,h)}}k=a.getElementsByTagName("kerning");for(f=0;f<k.length;f++)h=k[f],g=parseInt(h.getAttribute("first"),10),n=parseInt(h.getAttribute("second"),10),h=parseInt(h.getAttribute("amount"),10),e.chars[n]&&(e.chars[n].kerning[g]=h);return b.fonts[e.font]=e};g(b,[{key:"tint",get:function(){return this._font.tint},
set:function(a){this._font.tint="number"===typeof a&&0<=a?a:16777215;this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(a){this._font.align=a||"left";this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(a){"number"===typeof a?this._anchor.set(a):this._anchor.copy(a)}},{key:"font",get:function(){return this._font},set:function(a){a&&("string"===typeof a?(a=a.split(" "),this._font.name=1===a.length?a[0]:a.slice(1).join(" "),this._font.size=2<=
a.length?parseInt(a[0],10):b.fonts[this._font.name].size):(this._font.name=a.name,this._font.size="number"===typeof a.size?a.size:parseInt(a.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(a){a=a.toString()||" ";this._text!==a&&(this._text=a,this.dirty=!0)}},{key:"textWidth",get:function(){this.validate();return this._textWidth}},{key:"textHeight",get:function(){this.validate();return this._textHeight}}]);return b}(d.Container);e["default"]=a;a.fonts={}},{"../core":63,
"../core/math/ObservablePoint":66}],131:[function(a,f,e){e.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(c,b,d){b&&a(c.prototype,b);d&&a(c,d);return c}}(),n=(a=a("../core/math/Matrix"))&&a.__esModule?a:{"default":a},g=new n["default"];a=function(){function a(c,b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this._texture=c;this.mapCoord=new n["default"];this.uClampFrame=new Float32Array(4);this.uClampOffset=new Float32Array(2);this._lastTextureID=-1;this.clampOffset=0;this.clampMargin="undefined"===typeof b?.5:b}a.prototype.update=function(a){var b=this._texture;if(b&&b.valid&&(a||this._lastTextureID!==b._updateID)){this._lastTextureID=b._updateID;a=b._uvs;this.mapCoord.set(a.x1-a.x0,a.y1-a.y0,a.x3-a.x0,a.y3-a.y0,a.x0,a.y0);a=b.orig;var c=b.trim;c&&(g.set(a.width/c.width,0,0,a.height/c.height,-c.x/c.width,
-c.y/c.height),this.mapCoord.append(g));a=b.baseTexture;var c=this.uClampFrame,d=this.clampMargin/a.resolution,e=this.clampOffset;c[0]=(b._frame.x+d+e)/a.width;c[1]=(b._frame.y+d+e)/a.height;c[2]=(b._frame.x+b._frame.width-d+e)/a.width;c[3]=(b._frame.y+b._frame.height-d+e)/a.height;this.uClampOffset[0]=e/a.realWidth;this.uClampOffset[1]=e/a.realHeight}};h(a,[{key:"texture",get:function(){return this._texture},set:function(a){this._texture=a;this._lastTextureID=-1}}]);return a}();e["default"]=a},{"../core/math/Matrix":65}],
132:[function(a,f,e){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.__esModule=!0;var n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);
Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),g=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}(a("../core")),d=(f=a("../core/sprites/canvas/CanvasTinter"))&&f.__esModule?f:{"default":f},c=(a=a("./TextureTransform"))&&a.__esModule?a:{"default":a},b=new g.Point;a=function(a){function e(b){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:
100,k=2<arguments.length&&void 0!==arguments[2]?arguments[2]:100;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var f;f=a.call(this,b);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");f=!f||"object"!==typeof f&&"function"!==typeof f?this:f;f.tileTransform=new g.TransformStatic;f._width=d;f._height=k;f._canvasPattern=null;f.uvTransform=b.transform||new c["default"](b);f.pluginName="tilingSprite";f.uvRespectAnchor=!1;return f}
h(e,a);e.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture)};e.prototype._renderWebGL=function(a){var b=this._texture;b&&b.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),a.setObjectRenderer(a.plugins[this.pluginName]),a.plugins[this.pluginName].render(this))};e.prototype._renderCanvas=function(a){var b=this._texture;if(b.baseTexture.hasLoaded){var c=a.context,e=this.worldTransform,k=a.resolution,f=b.baseTexture,n=b.baseTexture.resolution,
h=this.tilePosition.x/this.tileScale.x%b._frame.width,p=this.tilePosition.y/this.tileScale.y%b._frame.height;if(!this._canvasPattern){var r=new g.CanvasRenderTarget(b._frame.width,b._frame.height,n);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=d["default"].getTintedTexture(this,this.tint)),r.context.drawImage(this.tintedTexture,0,0)):r.context.drawImage(f.source,-b._frame.x,-b._frame.y);this._canvasPattern=r.context.createPattern(r.canvas,"repeat")}c.globalAlpha=
this.worldAlpha;c.setTransform(e.a*k,e.b*k,e.c*k,e.d*k,e.tx*k,e.ty*k);a.setBlendMode(this.blendMode);c.fillStyle=this._canvasPattern;c.scale(this.tileScale.x/n,this.tileScale.y/n);a=this.anchor.x*-this._width;b=this.anchor.y*-this._height;this.uvRespectAnchor?(c.translate(h,p),c.fillRect(-h+a,-p+b,this._width/this.tileScale.x*n,this._height/this.tileScale.y*n)):(c.translate(h+a,p+b),c.fillRect(-h,-p,this._width/this.tileScale.x*n,this._height/this.tileScale.y*n))}};e.prototype._calculateBounds=function(){this._bounds.addFrame(this.transform,
this._width*-this._anchor._x,this._height*-this._anchor._y,this._width*(1-this._anchor._x),this._height*(1-this._anchor._y))};e.prototype.getLocalBounds=function(b){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),b||(this._localBoundsRect||(this._localBoundsRect=new g.Rectangle),b=this._localBoundsRect),this._bounds.getRectangle(b)):
a.prototype.getLocalBounds.call(this,b)};e.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,b);var c=this._width;a=this._height;var d=-c*this.anchor._x;return b.x>d&&b.x<d+c&&(c=-a*this.anchor._y,b.y>c&&b.y<c+a)?!0:!1};e.prototype.destroy=function(){a.prototype.destroy.call(this);this.uvTransform=this.tileTransform=null};e.from=function(a,b,c){return new e(g.Texture.from(a),b,c)};e.fromFrame=function(a,b,c){var d=g.utils.TextureCache[a];if(!d)throw Error('The frameId "'+a+'" does not exist in the texture cache '+
this);return new e(d,b,c)};e.fromImage=function(a,b,c,d,k){return new e(g.Texture.fromImage(a,d,k),b,c)};n(e,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(a){this.uvTransform.clampMargin=a;this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(a){this.tileTransform.scale.copy(a)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(a){this.tileTransform.position.copy(a)}},{key:"width",
get:function(){return this._width},set:function(a){this._width=a}},{key:"height",get:function(){return this._height},set:function(a){this._height=a}}]);return e}(g.Sprite);e["default"]=a},{"../core":63,"../core/sprites/canvas/CanvasTinter":102,"./TextureTransform":131}],133:[function(a,f,e){var h=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);c["default"]=a;return c}(a("../core"));a=h.DisplayObject;var n=new h.Matrix;
a.prototype._cacheAsBitmap=!1;a.prototype._cacheData=!1;var g=function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.sprite=this.originalFilterArea=this.originalMask=this.originalDestroy=this.originalHitTest=this.originalUpdateTransform=this.originalGetLocalBounds=this.originalCalculateBounds=this.originalRenderCanvas=this.originalRenderWebGL=null};Object.defineProperties(a.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(a){this._cacheAsBitmap!==
a&&((this._cacheAsBitmap=a)?(this._cacheData||(this._cacheData=new g),a=this._cacheData,a.originalRenderWebGL=this.renderWebGL,a.originalRenderCanvas=this.renderCanvas,a.originalUpdateTransform=this.updateTransform,a.originalCalculateBounds=this._calculateBounds,a.originalGetLocalBounds=this.getLocalBounds,a.originalDestroy=this.destroy,a.originalContainsPoint=this.containsPoint,a.originalMask=this._mask,a.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=
this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(a=this._cacheData,a.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=a.originalRenderWebGL,this.renderCanvas=a.originalRenderCanvas,this._calculateBounds=a.originalCalculateBounds,this.getLocalBounds=a.originalGetLocalBounds,this.destroy=a.originalDestroy,this.updateTransform=a.originalUpdateTransform,this.containsPoint=a.originalContainsPoint,this._mask=a.originalMask,this.filterArea=a.originalFilterArea))}}});a.prototype._renderCachedWebGL=
function(a){!this.visible||0>=this.worldAlpha||!this.renderable||(this._initCachedDisplayObject(a),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(a))};a.prototype._initCachedDisplayObject=function(a){if(!this._cacheData||!this._cacheData.sprite){var b=this.alpha;this.alpha=1;a.currentRenderer.flush();var c=this.getLocalBounds().clone();this._filters&&c.pad(this._filters[0].padding);var e=a._activeRenderTarget,f=a.filterManager.filterStack,
g=h.RenderTexture.create(c.width|0,c.height|0);n.tx=-c.x;n.ty=-c.y;this.transform.worldTransform.identity();this.renderWebGL=this._cacheData.originalRenderWebGL;a.render(this,g,!0,n,!0);a.bindRenderTarget(e);a.filterManager.filterStack=f;this.renderWebGL=this._renderCachedWebGL;this.updateTransform=this.displayObjectUpdateTransform;this.filterArea=this._mask=null;a=new h.Sprite(g);a.transform.worldTransform=this.transform.worldTransform;a.anchor.x=-(c.x/c.width);a.anchor.y=-(c.y/c.height);a.alpha=
b;a._bounds=this._bounds;this._calculateBounds=this._calculateCachedBounds;this.getLocalBounds=this._getCachedLocalBounds;this._cacheData.sprite=a;this.transform._parentID=-1;this.updateTransform();this.containsPoint=a.containsPoint.bind(a)}};a.prototype._renderCachedCanvas=function(a){!this.visible||0>=this.worldAlpha||!this.renderable||(this._initCachedDisplayObjectCanvas(a),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(a))};a.prototype._initCachedDisplayObjectCanvas=
function(a){if(!this._cacheData||!this._cacheData.sprite){var b=this.getLocalBounds(),c=this.alpha;this.alpha=1;var e=a.context,f=h.RenderTexture.create(b.width|0,b.height|0);this.transform.localTransform.copy(n);n.invert();n.tx-=b.x;n.ty-=b.y;this.renderCanvas=this._cacheData.originalRenderCanvas;a.render(this,f,!0,n,!1);a.context=e;this.renderCanvas=this._renderCachedCanvas;this._calculateBounds=this._calculateCachedBounds;this.filterArea=this._mask=null;a=new h.Sprite(f);a.transform.worldTransform=
this.transform.worldTransform;a.anchor.x=-(b.x/b.width);a.anchor.y=-(b.y/b.height);a._bounds=this._bounds;a.alpha=c;this.updateTransform();this.updateTransform=this.displayObjectUpdateTransform;this._cacheData.sprite=a;this.containsPoint=a.containsPoint.bind(a)}};a.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()};a.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()};a.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0);
this._cacheData.sprite=null};a.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=!1;this.destroy()}},{"../core":63}],134:[function(a,f,e){a=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(e[f]=a[f]);e["default"]=a;return e}(a("../core"));a.DisplayObject.prototype.name=null;a.Container.prototype.getChildByName=function(a){for(var e=0;e<this.children.length;e++)if(this.children[e].name===a)return this.children[e];return null}},
{"../core":63}],135:[function(a,f,e){var h=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(e[d]=a[d]);e["default"]=a;return e}(a("../core"));h.DisplayObject.prototype.getGlobalPosition=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new h.Point,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;this.parent?this.parent.toGlobal(this.position,a,e):(a.x=this.position.x,a.y=this.position.y);return a}},
{"../core":63}],136:[function(a,f,e){function h(a){return a&&a.__esModule?a:{"default":a}}e.__esModule=!0;e.BitmapText=e.TilingSpriteRenderer=e.TilingSprite=e.AnimatedSprite=e.TextureTransform=void 0;var n=a("./TextureTransform");Object.defineProperty(e,"TextureTransform",{enumerable:!0,get:function(){return h(n)["default"]}});var g=a("./AnimatedSprite");Object.defineProperty(e,"AnimatedSprite",{enumerable:!0,get:function(){return h(g)["default"]}});var d=a("./TilingSprite");Object.defineProperty(e,
"TilingSprite",{enumerable:!0,get:function(){return h(d)["default"]}});var c=a("./webgl/TilingSpriteRenderer");Object.defineProperty(e,"TilingSpriteRenderer",{enumerable:!0,get:function(){return h(c)["default"]}});var b=a("./BitmapText");Object.defineProperty(e,"BitmapText",{enumerable:!0,get:function(){return h(b)["default"]}});a("./cacheAsBitmap");a("./getChildByName");a("./getGlobalPosition")},{"./AnimatedSprite":129,"./BitmapText":130,"./TextureTransform":131,"./TilingSprite":132,"./cacheAsBitmap":133,
"./getChildByName":134,"./getGlobalPosition":135,"./webgl/TilingSpriteRenderer":137}],137:[function(a,f,e){function h(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}e.__esModule=!0;var n=function(a){if(a&&a.__esModule)return a;var b={};if(null!=
a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}(a("../../core")),g=a("../../core/const");a("path");var d=new n.Matrix,c=new Float32Array(4);a=function(a){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");c=a.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.shader=null;c.simpleShader=null;c.quad=
null;return c}h(b,a);b.prototype.onContextChange=function(){var a=this.renderer.gl;this.shader=new n.Shader(a,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n\n    gl_FragColor = sample * color ;\n}\n");
this.simpleShader=new n.Shader(a,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n    gl_FragColor = sample * color;\n}\n");
this.renderer.bindVao(null);this.quad=new n.Quad(a,this.renderer.state.attribState);this.quad.initVao(this.shader)};b.prototype.render=function(a){var b=this.renderer,e=this.quad;b.bindVao(e.vao);var k=e.vertices;k[0]=k[6]=a._width*-a.anchor.x;k[1]=k[3]=a._height*-a.anchor.y;k[2]=k[4]=a._width*(1-a.anchor.x);k[5]=k[7]=a._height*(1-a.anchor.y);a.uvRespectAnchor&&(k=e.uvs,k[0]=k[6]=-a.anchor.x,k[1]=k[3]=-a.anchor.y,k[2]=k[4]=1-a.anchor.x,k[5]=k[7]=1-a.anchor.y);e.upload();var k=a._texture,f=k.baseTexture,
h=a.tileTransform.localTransform,p=a.uvTransform,u=f.isPowerOfTwo&&k.frame.width===f.width&&k.frame.height===f.height;u&&(f._glTextures[b.CONTEXT_UID]?u=f.wrapMode!==g.WRAP_MODES.CLAMP:f.wrapMode===g.WRAP_MODES.CLAMP&&(f.wrapMode=g.WRAP_MODES.REPEAT));f=u?this.simpleShader:this.shader;b.bindShader(f);var y=k.width,z=k.height,A=a._width,B=a._height;d.set(h.a*y/A,h.b*y/B,h.c*z/A,h.d*z/B,h.tx/A,h.ty/B);d.invert();u?d.append(p.mapCoord):(f.uniforms.uMapCoord=p.mapCoord.toArray(!0),f.uniforms.uClampFrame=
p.uClampFrame,f.uniforms.uClampOffset=p.uClampOffset);f.uniforms.uTransform=d.toArray(!0);n.utils.hex2rgb(a.tint,c);c[3]=a.worldAlpha;f.uniforms.uColor=c;f.uniforms.translationMatrix=a.transform.worldTransform.toArray(!0);f.uniforms.uSampler=b.bindTexture(k);b.setBlendMode(a.blendMode);e.vao.draw(this.renderer.gl.TRIANGLES,6,0)};return b}(n.ObjectRenderer);e["default"]=a;n.WebGLRenderer.registerPlugin("tilingSprite",a)},{"../../core":63,"../../core/const":44,path:22}],138:[function(a,f,e){function h(a,
c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}e.__esModule=!0;var n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}
return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),g=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}(a("../../core")),d=(f=a("./BlurXFilter"))&&f.__esModule?f:{"default":f},c=(a=a("./BlurYFilter"))&&a.__esModule?a:{"default":a};a=function(a){function b(e,f,k,n){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var h;h=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
h=!h||"object"!==typeof h&&"function"!==typeof h?this:h;h.blurXFilter=new d["default"](e,f,k,n);h.blurYFilter=new c["default"](e,f,k,n);h.padding=0;h.resolution=k||g.settings.RESOLUTION;h.quality=f||4;h.blur=e||8;return h}h(b,a);b.prototype.apply=function(a,b,c){var d=a.getRenderTarget(!0);this.blurXFilter.apply(a,b,d,!0);this.blurYFilter.apply(a,d,c,!1);a.returnRenderTarget(d)};n(b,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=this.blurYFilter.blur=
a;this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(a){this.blurXFilter.quality=this.blurYFilter.quality=a}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=a;this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(a){this.blurYFilter.blur=
a;this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}}]);return b}(g.Filter);e["default"]=a},{"../../core":63,"./BlurXFilter":139,"./BlurYFilter":140}],139:[function(a,f,e){function h(a){return a&&a.__esModule?a:{"default":a}}function n(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,
configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.__esModule=!0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),d=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}(a("../../core"));
f=a("./generateBlurVertSource");var c=h(f);f=a("./generateBlurFragSource");var b=h(f);a=a("./getMaxBlurKernelSize");var k=h(a);a=function(a){function e(f,k,g,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");n=n||5;var h=(0,c["default"])(n,!0);n=(0,b["default"])(n);h=a.call(this,h,n);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");h=!h||"object"!==typeof h&&"function"!==typeof h?this:h;h.resolution=g||d.settings.RESOLUTION;
h._quality=0;h.quality=k||4;h.strength=f||8;h.firstRun=!0;return h}n(e,a);e.prototype.apply=function(a,d,e,f){if(this.firstRun){var g=a.renderer.gl,g=(0,k["default"])(g);this.vertexSrc=(0,c["default"])(g,!0);this.fragmentSrc=(0,b["default"])(g);this.firstRun=!1}this.uniforms.strength=1/e.size.width*(e.size.width/d.size.width);this.uniforms.strength*=this.strength;this.uniforms.strength/=this.passes;if(1===this.passes)a.applyFilter(this,d,e,f);else{for(var n=g=a.getRenderTarget(!0),h=0;h<this.passes-
1;h++){a.applyFilter(this,d,n,!0);var p=n,n=d;d=p}a.applyFilter(this,d,e,f);a.returnRenderTarget(g)}};g(e,[{key:"blur",get:function(){return this.strength},set:function(a){this.padding=2*Math.abs(a);this.strength=a}},{key:"quality",get:function(){return this._quality},set:function(a){this.passes=this._quality=a}}]);return e}(d.Filter);e["default"]=a},{"../../core":63,"./generateBlurFragSource":141,"./generateBlurVertSource":142,"./getMaxBlurKernelSize":143}],140:[function(a,f,e){function h(a){return a&&
a.__esModule?a:{"default":a}}function n(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.__esModule=!0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=
!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),d=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}(a("../../core"));f=a("./generateBlurVertSource");var c=h(f);f=a("./generateBlurFragSource");var b=h(f);a=a("./getMaxBlurKernelSize");var k=h(a);a=function(a){function e(f,k,g,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");
n=n||5;var h=(0,c["default"])(n,!1);n=(0,b["default"])(n);h=a.call(this,h,n);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");h=!h||"object"!==typeof h&&"function"!==typeof h?this:h;h.resolution=g||d.settings.RESOLUTION;h._quality=0;h.quality=k||4;h.strength=f||8;h.firstRun=!0;return h}n(e,a);e.prototype.apply=function(a,d,e,f){if(this.firstRun){var g=a.renderer.gl,g=(0,k["default"])(g);this.vertexSrc=(0,c["default"])(g,!1);this.fragmentSrc=(0,b["default"])(g);
this.firstRun=!1}this.uniforms.strength=1/e.size.height*(e.size.height/d.size.height);this.uniforms.strength*=this.strength;this.uniforms.strength/=this.passes;if(1===this.passes)a.applyFilter(this,d,e,f);else{for(var n=g=a.getRenderTarget(!0),h=0;h<this.passes-1;h++){a.applyFilter(this,d,n,!0);var p=n,n=d;d=p}a.applyFilter(this,d,e,f);a.returnRenderTarget(g)}};g(e,[{key:"blur",get:function(){return this.strength},set:function(a){this.padding=2*Math.abs(a);this.strength=a}},{key:"quality",get:function(){return this._quality},
set:function(a){this.passes=this._quality=a}}]);return e}(d.Filter);e["default"]=a},{"../../core":63,"./generateBlurFragSource":141,"./generateBlurVertSource":142,"./getMaxBlurKernelSize":143}],141:[function(a,f,e){e.__esModule=!0;e["default"]=function(a){for(var d=h[a],c=d.length,b=n,e="",f,g=0;g<a;g++){var q="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",g);f=g;g>=c&&(f=a-g-1);q=q.replace("%value%",d[f]);e+=q;e+="\n"}b=b.replace("%blur%",e);return b=
b.replace("%size%",a)};var h={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[4.89E-4,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},n="varying vec2 vBlurTexCoords[%size%];\nuniform sampler2D uSampler;\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n    %blur%\n}"},{}],142:[function(a,f,e){e.__esModule=!0;e["default"]=
function(a,e){var d=Math.ceil(a/2),c=h,b="",f;f=e?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var g=0;g<a;g++)var n=f.replace("%index%",g),n=n.replace("%sampleIndex%",g-(d-1)+".0"),b=b+n,b=b+"\n";c=c.replace("%blur%",b);return c=c.replace("%size%",a)};var h="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform float strength;\nuniform mat3 projectionMatrix;\nvarying vec2 vBlurTexCoords[%size%];\nvoid main(void)\n{\ngl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n%blur%\n}"},
{}],143:[function(a,f,e){e.__esModule=!0;e["default"]=function(a){a=a.getParameter(a.MAX_VARYING_VECTORS);for(var e=15;e>a;)e-=2;return e}},{}],144:[function(a,f,e){function h(a,d){if("function"!==typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function, not "+typeof d);a.prototype=Object.create(d&&d.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});d&&(Object.setPrototypeOf?Object.setPrototypeOf(a,d):a.__proto__=d)}e.__esModule=!0;var n=
function(){function a(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(d,c,b){c&&a(d.prototype,c);b&&a(d,b);return d}}();f=function(a){if(a&&a.__esModule)return a;var d={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);d["default"]=a;return d}(a("../../core"));a("path");a=function(a){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");
var c;c=a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n    vec4 result;\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    // Premultiply alpha again.\n    result.rgb *= result.a;\n\n    gl_FragColor = result;\n}\n");
if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];return c}h(d,a);d.prototype._loadMatrix=function(a){var b=a;1<arguments.length&&void 0!==arguments[1]&&arguments[1]&&(this._multiply(b,this.uniforms.m,a),b=this._colorMatrix(b));this.uniforms.m=b};d.prototype._multiply=function(a,b,d){a[0]=b[0]*d[0]+b[1]*d[5]+b[2]*d[10]+b[3]*d[15];a[1]=b[0]*d[1]+
b[1]*d[6]+b[2]*d[11]+b[3]*d[16];a[2]=b[0]*d[2]+b[1]*d[7]+b[2]*d[12]+b[3]*d[17];a[3]=b[0]*d[3]+b[1]*d[8]+b[2]*d[13]+b[3]*d[18];a[4]=b[0]*d[4]+b[1]*d[9]+b[2]*d[14]+b[3]*d[19]+b[4];a[5]=b[5]*d[0]+b[6]*d[5]+b[7]*d[10]+b[8]*d[15];a[6]=b[5]*d[1]+b[6]*d[6]+b[7]*d[11]+b[8]*d[16];a[7]=b[5]*d[2]+b[6]*d[7]+b[7]*d[12]+b[8]*d[17];a[8]=b[5]*d[3]+b[6]*d[8]+b[7]*d[13]+b[8]*d[18];a[9]=b[5]*d[4]+b[6]*d[9]+b[7]*d[14]+b[8]*d[19]+b[9];a[10]=b[10]*d[0]+b[11]*d[5]+b[12]*d[10]+b[13]*d[15];a[11]=b[10]*d[1]+b[11]*d[6]+b[12]*
d[11]+b[13]*d[16];a[12]=b[10]*d[2]+b[11]*d[7]+b[12]*d[12]+b[13]*d[17];a[13]=b[10]*d[3]+b[11]*d[8]+b[12]*d[13]+b[13]*d[18];a[14]=b[10]*d[4]+b[11]*d[9]+b[12]*d[14]+b[13]*d[19]+b[14];a[15]=b[15]*d[0]+b[16]*d[5]+b[17]*d[10]+b[18]*d[15];a[16]=b[15]*d[1]+b[16]*d[6]+b[17]*d[11]+b[18]*d[16];a[17]=b[15]*d[2]+b[16]*d[7]+b[17]*d[12]+b[18]*d[17];a[18]=b[15]*d[3]+b[16]*d[8]+b[17]*d[13]+b[18]*d[18];a[19]=b[15]*d[4]+b[16]*d[9]+b[17]*d[14]+b[18]*d[19]+b[19];return a};d.prototype._colorMatrix=function(a){a=new Float32Array(a);
a[4]/=255;a[9]/=255;a[14]/=255;a[19]/=255;return a};d.prototype.brightness=function(a,b){this._loadMatrix([a,0,0,0,0,0,a,0,0,0,0,0,a,0,0,0,0,0,1,0],b)};d.prototype.greyscale=function(a,b){this._loadMatrix([a,a,a,0,0,a,a,a,0,0,a,a,a,0,0,0,0,0,1,0],b)};d.prototype.blackAndWhite=function(a){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],a)};d.prototype.hue=function(a,b){a=(a||0)/180*Math.PI;var c=Math.cos(a),d=Math.sin(a),e=Math.sqrt,f=1/3,e=e(f);this._loadMatrix([c+(1-c)*f,f*(1-
c)-e*d,f*(1-c)+e*d,0,0,f*(1-c)+e*d,c+f*(1-c),f*(1-c)-e*d,0,0,f*(1-c)-e*d,f*(1-c)+e*d,c+f*(1-c),0,0,0,0,0,1,0],b)};d.prototype.contrast=function(a,b){var c=(a||0)+1,d=-128*(c-1);this._loadMatrix([c,0,0,0,d,0,c,0,0,d,0,0,c,0,d,0,0,0,1,0],b)};d.prototype.saturate=function(){var a=2*(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0)/3+1,b=-.5*(a-1);this._loadMatrix([a,b,b,0,0,b,a,b,0,0,b,b,a,0,0,0,0,0,1,0],arguments[1])};d.prototype.desaturate=function(){this.saturate(-1)};d.prototype.negative=
function(a){this._loadMatrix([0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0],a)};d.prototype.sepia=function(a){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],a)};d.prototype.technicolor=function(a){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,
0,0,0,1,0],a)};d.prototype.polaroid=function(a){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],a)};d.prototype.toBGR=function(a){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],a)};d.prototype.kodachrome=function(a){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,
0,35.62982807460946,0,0,0,1,0],a)};d.prototype.browni=function(a){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],a)};d.prototype.vintage=function(a){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,
0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],a)};d.prototype.colorTone=function(a,b,d,e,f){d=d||16770432;e=e||3375104;var c=(d>>16&255)/255,g=(d>>8&255)/255;d=(d&255)/255;var k=(e>>16&255)/255,n=(e>>8&255)/255;e=(e&255)/255;this._loadMatrix([.3,.59,.11,0,0,c,g,d,a||.2,0,k,n,e,b||.15,0,c-k,g-n,d-e,0,0],f)};d.prototype.night=function(a,b){a=a||.1;this._loadMatrix([-2*a,-a,0,0,0,-a,0,a,0,0,0,a,2*a,0,0,0,0,0,1,0],b)};d.prototype.predator=function(a,
b){this._loadMatrix([11.224130630493164*a,-4.794486999511719*a,-2.8746118545532227*a,0*a,.40342438220977783*a,-3.6330697536468506*a,9.193157196044922*a,-2.951810836791992*a,0*a,-1.316135048866272*a,-3.2184197902679443*a,-4.2375030517578125*a,7.476448059082031*a,0*a,.8044459223747253*a,0,0,0,1,0],b)};d.prototype.lsd=function(a){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],a)};d.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)};n(d,[{key:"matrix",
get:function(){return this.uniforms.m},set:function(a){this.uniforms.m=a}}]);return d}(f.Filter);e["default"]=a;a.prototype.grayscale=a.prototype.greyscale},{"../../core":63,path:22}],145:[function(a,f,e){function h(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
c):a.__proto__=c)}e.__esModule=!0;var n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(c,b,d){b&&a(c.prototype,b);d&&a(c,d);return c}}(),g=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);c["default"]=a;return c}(a("../../core"));a("path");a=function(a){function c(b,d){if(!(this instanceof
c))throw new TypeError("Cannot call a class as a function");var e=new g.Matrix;b.renderable=!1;var f;f=a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}",
"varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n");if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
f=!f||"object"!==typeof f&&"function"!==typeof f?this:f;f.maskSprite=b;f.maskMatrix=e;f.uniforms.mapSampler=b.texture;f.uniforms.filterMatrix=e;f.uniforms.scale={x:1,y:1};if(null===d||void 0===d)d=20;f.scale=new g.Point(d,d);return f}h(c,a);c.prototype.apply=function(a,c,d){var b=1/d.destinationFrame.width*(d.size.width/c.size.width);this.uniforms.filterMatrix=a.calculateSpriteMatrix(this.maskMatrix,this.maskSprite);this.uniforms.scale.x=this.scale.x*b;this.uniforms.scale.y=this.scale.y*b;a.applyFilter(this,
c,d)};n(c,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(a){this.uniforms.mapSampler=a}}]);return c}(g.Filter);e["default"]=a},{"../../core":63,path:22}],146:[function(a,f,e){function h(a,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):
a.__proto__=e)}e.__esModule=!0;f=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(e[d]=a[d]);e["default"]=a;return e}(a("../../core"));a("path");a=function(a){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var d=a.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",
'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n');
if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!d||"object"!==typeof d&&"function"!==typeof d?this:d}h(e,a);return e}(f.Filter);e["default"]=a},{"../../core":63,path:22}],147:[function(a,f,e){function h(a){return a&&a.__esModule?a:{"default":a}}e.__esModule=!0;var n=a("./fxaa/FXAAFilter");Object.defineProperty(e,"FXAAFilter",{enumerable:!0,get:function(){return h(n)["default"]}});var g=a("./noise/NoiseFilter");Object.defineProperty(e,"NoiseFilter",
{enumerable:!0,get:function(){return h(g)["default"]}});var d=a("./displacement/DisplacementFilter");Object.defineProperty(e,"DisplacementFilter",{enumerable:!0,get:function(){return h(d)["default"]}});var c=a("./blur/BlurFilter");Object.defineProperty(e,"BlurFilter",{enumerable:!0,get:function(){return h(c)["default"]}});var b=a("./blur/BlurXFilter");Object.defineProperty(e,"BlurXFilter",{enumerable:!0,get:function(){return h(b)["default"]}});var k=a("./blur/BlurYFilter");Object.defineProperty(e,
"BlurYFilter",{enumerable:!0,get:function(){return h(k)["default"]}});var p=a("./colormatrix/ColorMatrixFilter");Object.defineProperty(e,"ColorMatrixFilter",{enumerable:!0,get:function(){return h(p)["default"]}});var r=a("./void/VoidFilter");Object.defineProperty(e,"VoidFilter",{enumerable:!0,get:function(){return h(r)["default"]}})},{"./blur/BlurFilter":138,"./blur/BlurXFilter":139,"./blur/BlurYFilter":140,"./colormatrix/ColorMatrixFilter":144,"./displacement/DisplacementFilter":145,"./fxaa/FXAAFilter":146,
"./noise/NoiseFilter":148,"./void/VoidFilter":149}],148:[function(a,f,e){function h(a,d){if("function"!==typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function, not "+typeof d);a.prototype=Object.create(d&&d.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});d&&(Object.setPrototypeOf?Object.setPrototypeOf(a,d):a.__proto__=d)}e.__esModule=!0;var n=function(){function a(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||
!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(d,c,b){c&&a(d.prototype,c);b&&a(d,b);return d}}();f=function(a){if(a&&a.__esModule)return a;var d={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);d["default"]=a;return d}(a("../../core"));a("path");a=function(a){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");var c;c=a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",
"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(gl_FragCoord.xy) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n");if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.noise=.5;return c}h(d,a);n(d,[{key:"noise",get:function(){return this.uniforms.noise},set:function(a){this.uniforms.noise=a}}]);return d}(f.Filter);e["default"]=a},{"../../core":63,path:22}],149:[function(a,f,e){function h(a,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});
e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}e.__esModule=!0;f=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(e[d]=a[d]);e["default"]=a;return e}(a("../../core"));a("path");a=function(a){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var d;d=a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",
"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n");if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");d=!d||"object"!==typeof d&&"function"!==typeof d?this:d;d.glShaderKey="void";return d}h(e,a);return e}(f.Filter);e["default"]=a},{"../../core":63,path:22}],150:[function(a,f,e){e.__esModule=!0;var h=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var d in a)Object.prototype.hasOwnProperty.call(a,
d)&&(e[d]=a[d]);e["default"]=a;return e}(a("../core"));a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.global=new h.Point;this.identifier=this.originalEvent=this.target=null}a.prototype.getLocalPosition=function(a,d,c){return a.worldTransform.applyInverse(c||this.global,d)};return a}();e["default"]=a},{"../core":63}],151:[function(a,f,e){e.__esModule=!0;a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.stopped=!1;this.data=this.type=this.currentTarget=this.target=null}a.prototype.stopPropagation=function(){this.stopped=!0};a.prototype._reset=function(){this.stopped=!1;this.target=this.currentTarget=null};return a}();e["default"]=a},{}],152:[function(a,f,e){function h(a){return a&&a.__esModule?a:{"default":a}}function n(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.__esModule=!0;var g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},d=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}(a("../core"));
f=a("./InteractionData");var c=h(f);f=a("./InteractionEvent");var b=h(f);f=a("./InteractionTrackingData");var k=h(f);f=a("eventemitter3");f=h(f);a=a("./interactiveTarget");a=h(a);d.utils.mixins.delayMixin(d.DisplayObject.prototype,a["default"]);a=function(a){function e(f,k){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var g;g=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");g=!g||"object"!==typeof g&&"function"!==
typeof g?this:g;k=k||{};g.renderer=f;g.autoPreventDefault=void 0!==k.autoPreventDefault?k.autoPreventDefault:!0;g.interactionFrequency=k.interactionFrequency||10;g.mouse=new c["default"];g.mouse.identifier="MOUSE";g.mouse.global.set(-999999);g.activeInteractionData={};g.activeInteractionData.MOUSE=g.mouse;g.interactionDataPool=[];g.eventData=new b["default"];g.interactionDOMElement=null;g.moveWhenInside=!1;g.eventsAdded=!1;g.mouseOverRenderer=!1;g.supportsTouchEvents="ontouchstart"in window;g.supportsPointerEvents=
!!window.PointerEvent;g.onPointerUp=g.onPointerUp.bind(g);g.processPointerUp=g.processPointerUp.bind(g);g.onPointerCancel=g.onPointerCancel.bind(g);g.processPointerCancel=g.processPointerCancel.bind(g);g.onPointerDown=g.onPointerDown.bind(g);g.processPointerDown=g.processPointerDown.bind(g);g.onPointerMove=g.onPointerMove.bind(g);g.processPointerMove=g.processPointerMove.bind(g);g.onPointerOut=g.onPointerOut.bind(g);g.processPointerOverOut=g.processPointerOverOut.bind(g);g.onPointerOver=g.onPointerOver.bind(g);
g.cursorStyles={"default":"inherit",pointer:"pointer"};g.currentCursorMode=null;g.cursor=null;g._tempPoint=new d.Point;g.resolution=1;g.setTargetElement(g.renderer.view,g.renderer.resolution);return g}n(e,a);e.prototype.setTargetElement=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents();this.interactionDOMElement=a;this.resolution=b;this.addEvents()};e.prototype.addEvents=function(){this.interactionDOMElement&&(d.ticker.shared.add(this.update,this),window.navigator.msPointerEnabled?
(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",
this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,
!0),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0))),this.eventsAdded=!0)};e.prototype.removeEvents=function(){this.interactionDOMElement&&(d.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?
(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",
this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",
this.onPointerUp,!0),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.interactionDOMElement=null,this.eventsAdded=!1)};e.prototype.update=function(a){this._deltaTime+=a;if(!(this._deltaTime<
this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement))if(this.didMove)this.didMove=!1;else{this.cursor=null;for(var b in this.activeInteractionData)this.activeInteractionData.hasOwnProperty(b)&&(a=this.activeInteractionData[b],a.originalEvent&&"touch"!==a.pointerType&&(a=this.configureInteractionEventForDOMEvent(this.eventData,a.originalEvent,a),this.processInteractive(a,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)));this.setCursorMode(this.cursor)}};e.prototype.setCursorMode=
function(a){a=a||"default";if(this.currentCursorMode!==a){this.currentCursorMode=a;var b=this.cursorStyles[a];if(b)switch("undefined"===typeof b?"undefined":g(b)){case "string":this.interactionDOMElement.style.cursor=b;break;case "function":b(a);break;case "object":Object.assign(this.interactionDOMElement.style,b)}}};e.prototype.dispatchEvent=function(a,b,c){if(!c.stopped&&(c.currentTarget=a,c.type=b,a.emit(b,c),a[b]))a[b](c)};e.prototype.mapPositionToPoint=function(a,b,c){var d;d=this.interactionDOMElement.parentElement?
this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var e=navigator.isCocoonJS?this.resolution:1/this.resolution;a.x=this.interactionDOMElement.width/d.width*(b-d.left)*e;a.y=this.interactionDOMElement.height/d.height*(c-d.top)*e};e.prototype.processInteractive=function(a,b,c,d,e){if(!b||!b.visible)return!1;var f=a.data.global;e=b.interactive||e;var g=!1,k=e;b.hitArea?k=!1:d&&b._mask&&(b._mask.containsPoint(f)||(d=!1));var h=d;if(b.interactiveChildren&&b.children)for(var n=
b.children,p=n.length-1;0<=p;p--){var q=n[p];this.processInteractive(a,q,c,d,k)&&q.parent&&(g=!0,h=k=!1,q.interactive&&(d=!1))}e&&(h&&!g&&(b.hitArea?(b.worldTransform.applyInverse(f,this._tempPoint),g=b.hitArea.contains(this._tempPoint.x,this._tempPoint.y)):b.containsPoint&&(g=b.containsPoint(f))),b.interactive&&(g&&!a.target&&(a.target=b),c(a,b,g)));return g};e.prototype.onPointerDown=function(a){var b=this.normalizeToPointerData(a);this.autoPreventDefault&&b[0].isNormalized&&a.preventDefault();
for(var c=b.length,d=0;d<c;d++){var e=b[d],f=this.getInteractionDataForPointerId(e),f=this.configureInteractionEventForDOMEvent(this.eventData,e,f);f.data.originalEvent=a;this.processInteractive(f,this.renderer._lastObjectRendered,this.processPointerDown,!0);this.emit("pointerdown",f);"touch"===e.pointerType?this.emit("touchstart",f):"mouse"===e.pointerType&&this.emit(2===e.button||3===e.which?"rightdown":"mousedown",this.eventData)}};e.prototype.processPointerDown=function(a,b,c){var d=a.data.originalEvent,
e=a.data.identifier;if(c)if(b.trackedPointers[e]||(b.trackedPointers[e]=new k["default"](e)),this.dispatchEvent(b,"pointerdown",a),"touchstart"===d.type||"touch"===d.pointerType)this.dispatchEvent(b,"touchstart",a);else if("mousedown"===d.type||"mouse"===d.pointerType)(c=2===d.button||3===d.which)?b.trackedPointers[e].rightDown=!0:b.trackedPointers[e].leftDown=!0,this.dispatchEvent(b,c?"rightdown":"mousedown",a)};e.prototype.onPointerComplete=function(a,b,c){for(var d=this.normalizeToPointerData(a),
e=d.length,f=0;f<e;f++){var g=d[f],k=this.getInteractionDataForPointerId(g),h=this.configureInteractionEventForDOMEvent(this.eventData,g,k);h.data.originalEvent=a;this.processInteractive(h,this.renderer._lastObjectRendered,c,!0);this.emit(b?"pointercancel":"pointerup",h);"mouse"===g.pointerType?this.emit(2===g.button||3===g.which?"rightup":"mouseup",h):"touch"===g.pointerType&&(this.emit(b?"touchcancel":"touchend",h),this.releaseInteractionDataForPointerId(g.pointerId,k))}};e.prototype.onPointerCancel=
function(a){this.onPointerComplete(a,!0,this.processPointerCancel)};e.prototype.processPointerCancel=function(a,b){var c=a.data.originalEvent,d=a.data.identifier;void 0!==b.trackedPointers[d]&&(delete b.trackedPointers[d],this.dispatchEvent(b,"pointercancel",a),"touchcancel"!==c.type&&"touch"!==c.pointerType||this.dispatchEvent(b,"touchcancel",a))};e.prototype.onPointerUp=function(a){this.onPointerComplete(a,!1,this.processPointerUp)};e.prototype.processPointerUp=function(a,b,c){var d=a.data.originalEvent,
e=a.data.identifier,f=b.trackedPointers[e],g="touchend"===d.type||"touch"===d.pointerType;if(0===d.type.indexOf("mouse")||"mouse"===d.pointerType){var d=2===d.button||3===d.which,h=k["default"].FLAGS,h=d?h.RIGHT_DOWN:h.LEFT_DOWN,h=void 0!==f&&f.flags&h;c?(this.dispatchEvent(b,d?"rightup":"mouseup",a),h&&this.dispatchEvent(b,d?"rightclick":"click",a)):h&&this.dispatchEvent(b,d?"rightupoutside":"mouseupoutside",a);f&&(d?f.rightDown=c:f.leftDown=c)}c?(this.dispatchEvent(b,"pointerup",a),g&&this.dispatchEvent(b,
"touchend",a),f&&(this.dispatchEvent(b,"pointertap",a),g&&(this.dispatchEvent(b,"tap",a),f.over=!1))):f&&(this.dispatchEvent(b,"pointerupoutside",a),g&&this.dispatchEvent(b,"touchendoutside",a));f&&f.none&&delete b.trackedPointers[e]};e.prototype.onPointerMove=function(a){var b=this.normalizeToPointerData(a);"mouse"===b[0].pointerType&&(this.didMove=!0,this.cursor=null);for(var c=b.length,d=0;d<c;d++){var e=b[d],f=this.getInteractionDataForPointerId(e),f=this.configureInteractionEventForDOMEvent(this.eventData,
e,f);f.data.originalEvent=a;this.processInteractive(f,this.renderer._lastObjectRendered,this.processPointerMove,"touch"===e.pointerType?this.moveWhenInside:!0);this.emit("pointermove",f);"touch"===e.pointerType&&this.emit("touchmove",f);"mouse"===e.pointerType&&this.emit("mousemove",f)}"mouse"===b[0].pointerType&&this.setCursorMode(this.cursor)};e.prototype.processPointerMove=function(a,b,c){var d=a.data.originalEvent,e="touchmove"===d.type||"touch"===d.pointerType;(d="mousemove"===d.type||"mouse"===
d.pointerType)&&this.processPointerOverOut(a,b,c);if(!this.moveWhenInside||c)this.dispatchEvent(b,"pointermove",a),e&&this.dispatchEvent(b,"touchmove",a),d&&this.dispatchEvent(b,"mousemove",a)};e.prototype.onPointerOut=function(a){a=this.normalizeToPointerData(a)[0];"mouse"===a.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var b=this.getInteractionDataForPointerId(a),b=this.configureInteractionEventForDOMEvent(this.eventData,a,b);b.data.originalEvent=a;this.processInteractive(b,
this.renderer._lastObjectRendered,this.processPointerOverOut,!1);this.emit("pointerout",b);"mouse"===a.pointerType&&this.emit("mouseout",b)};e.prototype.processPointerOverOut=function(a,b,c){var d=a.data.originalEvent,e=a.data.identifier,d="mouseover"===d.type||"mouseout"===d.type||"mouse"===d.pointerType,f=b.trackedPointers[e];c&&!f&&(f=b.trackedPointers[e]=new k["default"](e));void 0!==f&&(c&&this.mouseOverRenderer?(f.over||(f.over=!0,this.dispatchEvent(b,"pointerover",a),d&&this.dispatchEvent(b,
"mouseover",a)),d&&null===this.cursor&&(this.cursor=b.cursor)):f.over&&(f.over=!1,this.dispatchEvent(b,"pointerout",this.eventData),d&&this.dispatchEvent(b,"mouseout",a),f.none&&delete b.trackedPointers[e]))};e.prototype.onPointerOver=function(a){a=this.normalizeToPointerData(a)[0];var b=this.getInteractionDataForPointerId(a),b=this.configureInteractionEventForDOMEvent(this.eventData,a,b);b.data.originalEvent=a;"mouse"===a.pointerType&&(this.mouseOverRenderer=!0);this.emit("pointerover",b);"mouse"===
a.pointerType&&this.emit("mouseover",b)};e.prototype.getInteractionDataForPointerId=function(a){var b=a.pointerId;if("MOUSE"===b||"mouse"===a.pointerType)return this.mouse;if(this.activeInteractionData[b])return this.activeInteractionData[b];a=this.interactionDataPool.pop()||new c["default"];a.identifier=b;return this.activeInteractionData[b]=a};e.prototype.releaseInteractionDataForPointerId=function(a){var b=this.activeInteractionData[a];b&&(delete this.activeInteractionData[a],this.interactionDataPool.push(b))};
e.prototype.configureInteractionEventForDOMEvent=function(a,b,c){a.data=c;this.mapPositionToPoint(c.global,b.clientX,b.clientY);navigator.isCocoonJS&&"touch"===b.pointerType&&(c.global.x/=this.resolution,c.global.y/=this.resolution);"touch"===b.pointerType&&(b.globalX=c.global.x,b.globalY=c.global.y);c.originalEvent=b;a._reset();return a};e.prototype.normalizeToPointerData=function(a){var b=[];if(this.supportsTouchEvents&&a instanceof TouchEvent)for(var c=0,d=a.changedTouches.length;c<d;c++){var e=
a.changedTouches[c];"undefined"===typeof e.button&&(e.button=a.touches.length?1:0);"undefined"===typeof e.buttons&&(e.buttons=a.touches.length?1:0);"undefined"===typeof e.isPrimary&&(e.isPrimary=1===a.touches.length);"undefined"===typeof e.width&&(e.width=e.radiusX||1);"undefined"===typeof e.height&&(e.height=e.radiusY||1);"undefined"===typeof e.tiltX&&(e.tiltX=0);"undefined"===typeof e.tiltY&&(e.tiltY=0);"undefined"===typeof e.pointerType&&(e.pointerType="touch");"undefined"===typeof e.pointerId&&
(e.pointerId=e.identifier||0);"undefined"===typeof e.pressure&&(e.pressure=e.force||.5);"undefined"===typeof e.rotation&&(e.rotation=e.rotationAngle||0);"undefined"===typeof e.layerX&&(e.layerX=e.offsetX=e.clientX);"undefined"===typeof e.layerY&&(e.layerY=e.offsetY=e.clientY);e.isNormalized=!0;b.push(e)}else a instanceof MouseEvent&&!(this.supportsPointerEvents&&a instanceof window.PointerEvent)&&("undefined"===typeof a.isPrimary&&(a.isPrimary=!0),"undefined"===typeof a.width&&(a.width=1),"undefined"===
typeof a.height&&(a.height=1),"undefined"===typeof a.tiltX&&(a.tiltX=0),"undefined"===typeof a.tiltY&&(a.tiltY=0),"undefined"===typeof a.pointerType&&(a.pointerType="mouse"),"undefined"===typeof a.pointerId&&(a.pointerId="MOUSE"),"undefined"===typeof a.pressure&&(a.pressure=.5),"undefined"===typeof a.rotation&&(a.rotation=0),a.isNormalized=!0),b.push(a);return b};e.prototype.destroy=function(){this.removeEvents();this.removeAllListeners();this._tempPoint=this.onPointerOver=this.processPointerOverOut=
this.onPointerOut=this.processPointerMove=this.onPointerMove=this.processPointerCancel=this.onPointerCancel=this.processPointerUp=this.onPointerUp=this.processPointerDown=this.onPointerDown=this.interactionDOMElement=this.eventData=this.mouse=this.renderer=null};return e}(f["default"]);e["default"]=a;d.WebGLRenderer.registerPlugin("interaction",a);d.CanvasRenderer.registerPlugin("interaction",a)},{"../core":63,"./InteractionData":150,"./InteractionEvent":151,"./InteractionTrackingData":153,"./interactiveTarget":155,
eventemitter3:3}],153:[function(a,f,e){e.__esModule=!0;var h=function(){function a(a,d){for(var c=0;c<d.length;c++){var b=d[c];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(a,b.key,b)}}return function(e,d,c){d&&a(e.prototype,d);c&&a(e,c);return e}}();a=function(){function a(e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._pointerId=e;this._flags=a.FLAGS.NONE}a.prototype._doSet=function(a,d){this._flags=d?
this._flags|a:this._flags&~a};h(a,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(a){this._flags=a}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!==(this._flags&this.constructor.FLAGS.OVER)},set:function(a){this._doSet(this.constructor.FLAGS.OVER,a)}},{key:"rightDown",get:function(){return 0!==(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(a){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,
a)}},{key:"leftDown",get:function(){return 0!==(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(a){this._doSet(this.constructor.FLAGS.LEFT_DOWN,a)}}]);return a}();e["default"]=a;a.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},{}],154:[function(a,f,e){function h(a){return a&&a.__esModule?a:{"default":a}}e.__esModule=!0;var n=a("./InteractionData");Object.defineProperty(e,"InteractionData",{enumerable:!0,get:function(){return h(n)["default"]}});var g=a("./InteractionManager");
Object.defineProperty(e,"InteractionManager",{enumerable:!0,get:function(){return h(g)["default"]}});var d=a("./interactiveTarget");Object.defineProperty(e,"interactiveTarget",{enumerable:!0,get:function(){return h(d)["default"]}})},{"./InteractionData":150,"./InteractionManager":152,"./interactiveTarget":155}],155:[function(a,f,e){e.__esModule=!0;e["default"]={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(a){a?this.cursor="pointer":
"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){void 0===this._trackedPointers&&(this._trackedPointers={});return this._trackedPointers},_trackedPointers:void 0}},{}],156:[function(a,f,e){function h(a,d){a.bitmapFont=c.BitmapText.registerFont(a.data,d)}e.__esModule=!0;e.parse=h;e["default"]=function(){return function(a,c){if(a.data&&a.type===d.Resource.TYPE.XML)if(0===a.data.getElementsByTagName("page").length||0===a.data.getElementsByTagName("info").length||null===
a.data.getElementsByTagName("info")[0].getAttribute("face"))c();else{var b=a.isDataUrl?"":n.dirname(a.url);a.isDataUrl&&("."===b&&(b=""),this.baseUrl&&b&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(b+="/"),b=b.replace(this.baseUrl,"")));b&&"/"!==b.charAt(b.length-1)&&(b+="/");b+=a.data.getElementsByTagName("page")[0].getAttribute("file");g.utils.TextureCache[b]?(h(a,g.utils.TextureCache[b]),c()):this.add(a.name+"_image",b,{crossOrigin:a.crossOrigin,loadType:d.Resource.LOAD_TYPE.IMAGE,metadata:a.metadata.imageMetadata,
parentResource:a},function(b){h(a,b.texture);c()})}else c()}};var n=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}(a("path")),g=a("../core"),d=a("resource-loader"),c=a("../extras")},{"../core":63,"../extras":136,path:22,"resource-loader":34}],157:[function(a,f,e){function h(a){return a&&a.__esModule?a:{"default":a}}e.__esModule=!0;var n=a("./loader");Object.defineProperty(e,"Loader",{enumerable:!0,
get:function(){return h(n)["default"]}});var g=a("./bitmapFontParser");Object.defineProperty(e,"bitmapFontParser",{enumerable:!0,get:function(){return h(g)["default"]}});Object.defineProperty(e,"parseBitmapFontData",{enumerable:!0,get:function(){return g.parse}});var d=a("./spritesheetParser");Object.defineProperty(e,"spritesheetParser",{enumerable:!0,get:function(){return h(d)["default"]}});var c=a("./textureParser");Object.defineProperty(e,"textureParser",{enumerable:!0,get:function(){return h(c)["default"]}});
var b=a("resource-loader");Object.defineProperty(e,"Resource",{enumerable:!0,get:function(){return b.Resource}})},{"./bitmapFontParser":156,"./loader":158,"./spritesheetParser":159,"./textureParser":160,"resource-loader":34}],158:[function(a,f,e){function h(a){return a&&a.__esModule?a:{"default":a}}function n(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function g(a,b){if("function"!==typeof b&&
null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.__esModule=!0;f=a("resource-loader");f=h(f);var d=a("resource-loader/lib/middlewares/parsing/blob"),c=a("eventemitter3"),b=h(c),c=a("./textureParser"),c=h(c),k=a("./spritesheetParser"),k=h(k);a=a("./bitmapFontParser");a=h(a);
var p=function(a){function c(d,e){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var f=n(this,a.call(this,d,e));b["default"].call(f);for(var g=0;g<c._pixiMiddleware.length;++g)f.use(c._pixiMiddleware[g]());f.onStart.add(function(a){return f.emit("start",a)});f.onProgress.add(function(a,b){return f.emit("progress",a,b)});f.onError.add(function(a,b,c){return f.emit("error",a,b,c)});f.onLoad.add(function(a,b){return f.emit("load",a,b)});f.onComplete.add(function(a,b){return f.emit("complete",
a,b)});return f}g(c,a);c.addPixiMiddleware=function(a){c._pixiMiddleware.push(a)};return c}(f["default"]);e["default"]=p;for(var r in b["default"].prototype)p.prototype[r]=b["default"].prototype[r];p._pixiMiddleware=[d.blobMiddlewareFactory,c["default"],k["default"],a["default"]];e=f["default"].Resource;e.setExtensionXhrType("fnt",e.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":156,"./spritesheetParser":159,"./textureParser":160,eventemitter3:3,"resource-loader":34,"resource-loader/lib/middlewares/parsing/blob":35}],
159:[function(a,f,e){e.__esModule=!0;e["default"]=function(){return function(a,c){var b=void 0,d=a.name+"_image";if(a.data&&a.type===h.Resource.TYPE.JSON&&a.data.frames&&!this.resources[d]){var e={crossOrigin:a.crossOrigin,loadType:h.Resource.LOAD_TYPE.IMAGE,metadata:a.metadata.imageMetadata,parentResource:a},b=a.isDataUrl?a.data.meta.image:n["default"].dirname(a.url.replace(this.baseUrl,""))+"/"+a.data.meta.image;this.add(d,b,e,function(b){var d=new g.Spritesheet(b.texture.baseTexture,a.data,a.url);
d.parse(function(){a.spritesheet=d;a.textures=d.textures;c()})})}else c()}};var h=a("resource-loader"),n=(f=a("path"))&&f.__esModule?f:{"default":f},g=a("../core")},{"../core":63,path:22,"resource-loader":34}],160:[function(a,f,e){e.__esModule=!0;e["default"]=function(){return function(a,d){a.data&&a.type===h.Resource.TYPE.IMAGE&&(a.texture=n["default"].fromLoader(a.data,a.url,a.name));d()}};var h=a("resource-loader"),n=(a=a("../core/textures/Texture"))&&a.__esModule?a:{"default":a}},{"../core/textures/Texture":112,
"resource-loader":34}],161:[function(a,f,e){function h(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}e.__esModule=!0;var n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in
d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),g=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}(a("../core")),d=new g.Point,c=new g.Polygon;a=function(a){function b(c,d,e,f,k){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var h;h=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
h=!h||"object"!==typeof h&&"function"!==typeof h?this:h;h._texture=null;h.uvs=e||new Float32Array([0,0,1,0,1,1,0,1]);h.vertices=d||new Float32Array([0,0,100,0,100,100,0,100]);h.indices=f||new Uint16Array([0,1,3,2]);h.dirty=0;h.indexDirty=0;h.blendMode=g.BLEND_MODES.NORMAL;h.canvasPadding=0;h.drawMode=k||b.DRAW_MODES.TRIANGLE_MESH;h.texture=c;h.shader=null;h.tintRgb=new Float32Array([1,1,1]);h._glDatas={};h.pluginName="mesh";return h}h(b,a);b.prototype._renderWebGL=function(a){a.setObjectRenderer(a.plugins[this.pluginName]);
a.plugins[this.pluginName].render(this)};b.prototype._renderCanvas=function(a){a.plugins[this.pluginName].render(this)};b.prototype._onTextureUpdate=function(){};b.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)};b.prototype.containsPoint=function(a){if(!this.getBounds().contains(a.x,a.y))return!1;this.worldTransform.applyInverse(a,d);a=this.vertices;for(var e=c.points,f=this.indices,g=this.indices.length,k=this.drawMode===b.DRAW_MODES.TRIANGLES?
3:1,h=0;h+2<g;h+=k){var n=2*f[h],p=2*f[h+1],y=2*f[h+2];e[0]=a[n];e[1]=a[n+1];e[2]=a[p];e[3]=a[p+1];e[4]=a[y];e[5]=a[y+1];if(c.contains(d.x,d.y))return!0}return!1};n(b,[{key:"texture",get:function(){return this._texture},set:function(a){if(this._texture!==a&&(this._texture=a))if(a.baseTexture.hasLoaded)this._onTextureUpdate();else a.once("update",this._onTextureUpdate,this)}},{key:"tint",get:function(){return g.utils.rgb2hex(this.tintRgb)},set:function(a){this.tintRgb=g.utils.hex2rgb(a,this.tintRgb)}}]);
return b}(g.Container);e["default"]=a;a.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":63}],162:[function(a,f,e){function h(a,d){if("function"!==typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function, not "+typeof d);a.prototype=Object.create(d&&d.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});d&&(Object.setPrototypeOf?Object.setPrototypeOf(a,d):a.__proto__=d)}e.__esModule=!0;var n=function(){function a(a,c){for(var b=0;b<c.length;b++){var d=
c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(d,c,b){c&&a(d.prototype,c);b&&a(d,b);return d}}();a=a("./Plane");a=function(a){function d(c,b,e,f,g){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");var k;k=a.call(this,c,4,4);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");k=!k||"object"!==typeof k&&"function"!==typeof k?this:k;var h=k.uvs;
h[6]=h[14]=h[22]=h[30]=1;h[25]=h[27]=h[29]=h[31]=1;k._origWidth=c.width;k._origHeight=c.height;k._uvw=1/k._origWidth;k._uvh=1/k._origHeight;k.width=c.width;k.height=c.height;h[2]=h[10]=h[18]=h[26]=k._uvw*b;h[4]=h[12]=h[20]=h[28]=1-k._uvw*f;h[9]=h[11]=h[13]=h[15]=k._uvh*e;h[17]=h[19]=h[21]=h[23]=1-k._uvh*g;k.leftWidth="undefined"!==typeof b?b:10;k.rightWidth="undefined"!==typeof f?f:10;k.topHeight="undefined"!==typeof e?e:10;k.bottomHeight="undefined"!==typeof g?g:10;return k}h(d,a);d.prototype.updateHorizontalVertices=
function(){var a=this.vertices;a[9]=a[11]=a[13]=a[15]=this._topHeight;a[17]=a[19]=a[21]=a[23]=this._height-this._bottomHeight;a[25]=a[27]=a[29]=a[31]=this._height};d.prototype.updateVerticalVertices=function(){var a=this.vertices;a[2]=a[10]=a[18]=a[26]=this._leftWidth;a[4]=a[12]=a[20]=a[28]=this._width-this._rightWidth;a[6]=a[14]=a[22]=a[30]=this._width};d.prototype._renderCanvas=function(a){var b=a.context;b.globalAlpha=this.worldAlpha;var c=this.worldTransform,d=a.resolution;a.roundPixels?b.setTransform(c.a*
d,c.b*d,c.c*d,c.d*d,c.tx*d|0,c.ty*d|0):b.setTransform(c.a*d,c.b*d,c.c*d,c.d*d,c.tx*d,c.ty*d);d=this._texture.baseTexture;a=d.source;c=d.width;d=d.height;this.drawSegment(b,a,c,d,0,1,10,11);this.drawSegment(b,a,c,d,2,3,12,13);this.drawSegment(b,a,c,d,4,5,14,15);this.drawSegment(b,a,c,d,8,9,18,19);this.drawSegment(b,a,c,d,10,11,20,21);this.drawSegment(b,a,c,d,12,13,22,23);this.drawSegment(b,a,c,d,16,17,26,27);this.drawSegment(b,a,c,d,18,19,28,29);this.drawSegment(b,a,c,d,20,21,30,31)};d.prototype.drawSegment=
function(a,b,d,e,f,g,h,n){var c=this.uvs,k=this.vertices,p=(c[h]-c[f])*d,q=(c[n]-c[g])*e;h=k[h]-k[f];n=k[n]-k[g];1>p&&(p=1);1>q&&(q=1);1>h&&(h=1);1>n&&(n=1);a.drawImage(b,c[f]*d,c[g]*e,p,q,k[f],k[g],h,n)};n(d,[{key:"width",get:function(){return this._width},set:function(a){this._width=a;this.updateVerticalVertices()}},{key:"height",get:function(){return this._height},set:function(a){this._height=a;this.updateHorizontalVertices()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(a){this._leftWidth=
a;var b=this.uvs,c=this.vertices;b[2]=b[10]=b[18]=b[26]=this._uvw*a;c[2]=c[10]=c[18]=c[26]=a;this.dirty=!0}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(a){this._rightWidth=a;var b=this.uvs,c=this.vertices;b[4]=b[12]=b[20]=b[28]=1-this._uvw*a;c[4]=c[12]=c[20]=c[28]=this._width-a;this.dirty=!0}},{key:"topHeight",get:function(){return this._topHeight},set:function(a){this._topHeight=a;var b=this.uvs,c=this.vertices;b[9]=b[11]=b[13]=b[15]=this._uvh*a;c[9]=c[11]=c[13]=c[15]=
a;this.dirty=!0}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(a){this._bottomHeight=a;var b=this.uvs,c=this.vertices;b[17]=b[19]=b[21]=b[23]=1-this._uvh*a;c[17]=c[19]=c[21]=c[23]=this._height-a;this.dirty=!0}}]);return d}((a&&a.__esModule?a:{"default":a})["default"]);e["default"]=a},{"./Plane":163}],163:[function(a,f,e){function h(a,d){if("function"!==typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function, not "+typeof d);a.prototype=
Object.create(d&&d.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});d&&(Object.setPrototypeOf?Object.setPrototypeOf(a,d):a.__proto__=d)}e.__esModule=!0;var n=(a=a("./Mesh"))&&a.__esModule?a:{"default":a};a=function(a){function d(c,b,e){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");c=a.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?
this:c;c._ready=!0;c.verticesX=b||10;c.verticesY=e||10;c.drawMode=n["default"].DRAW_MODES.TRIANGLES;c.refresh();return c}h(d,a);d.prototype.refresh=function(){for(var a=this.verticesX*this.verticesY,b=[],d=[],e=[],f=this.texture,g=this.verticesX-1,h=this.verticesY-1,n=f.width/g,x=f.height/h,v=0;v<a;v++)if(f._uvs){var u=v%this.verticesX,y=v/this.verticesX|0;b.push(u*n,y*x);d.push(f._uvs.x0+u/(this.verticesX-1)*(f._uvs.x1-f._uvs.x0),f._uvs.y0+y/(this.verticesY-1)*(f._uvs.y3-f._uvs.y0))}else d.push(0);
a=g*h;for(f=0;f<a;f++)h=f%g,n=f/g|0,x=n*this.verticesX+h+1,v=(n+1)*this.verticesX+h,u=(n+1)*this.verticesX+h+1,e.push(n*this.verticesX+h,x,v),e.push(x,u,v);this.vertices=new Float32Array(b);this.uvs=new Float32Array(d);this.colors=new Float32Array([]);this.indices=new Uint16Array(e);this.indexDirty=!0};d.prototype._onTextureUpdate=function(){n["default"].prototype._onTextureUpdate.call(this);this._ready&&this.refresh()};return d}(n["default"]);e["default"]=a},{"./Mesh":161}],164:[function(a,f,e){function h(a,
d){if("function"!==typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function, not "+typeof d);a.prototype=Object.create(d&&d.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});d&&(Object.setPrototypeOf?Object.setPrototypeOf(a,d):a.__proto__=d)}e.__esModule=!0;f=(f=a("./Mesh"))&&f.__esModule?f:{"default":f};var n=function(a){if(a&&a.__esModule)return a;var d={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);
d["default"]=a;return d}(a("../core"));a=function(a){function d(c,b){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");var e;e=a.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");e=!e||"object"!==typeof e&&"function"!==typeof e?this:e;e.points=b;e.vertices=new Float32Array(4*b.length);e.uvs=new Float32Array(4*b.length);e.colors=new Float32Array(2*b.length);e.indices=new Uint16Array(2*b.length);e._ready=!0;e.refresh();
return e}h(d,a);d.prototype.refresh=function(){var a=this.points;if(!(1>a.length)&&this._texture._uvs){this.vertices.length/4!==a.length&&(this.vertices=new Float32Array(4*a.length),this.uvs=new Float32Array(4*a.length),this.colors=new Float32Array(2*a.length),this.indices=new Uint16Array(2*a.length));var b=this.uvs,d=this.indices,e=this.colors,f=this._texture._uvs,g=new n.Point(f.x0,f.y0),f=new n.Point(f.x2-f.x0,Number(f.y2-f.y0));b[0]=0+g.x;b[1]=0+g.y;b[2]=0+g.x;b[3]=f.y+g.y;e[0]=1;e[1]=1;d[0]=
0;d[1]=1;for(var a=a.length,h=1;h<a;h++){var w=4*h,x=h/(a-1);b[w]=x*f.x+g.x;b[w+1]=0+g.y;b[w+2]=x*f.x+g.x;b[w+3]=f.y+g.y;w=2*h;e[w]=1;e[w+1]=1;w=2*h;d[w]=w;d[w+1]=w+1}this.dirty++;this.indexDirty++}};d.prototype._onTextureUpdate=function(){a.prototype._onTextureUpdate.call(this);this._ready&&this.refresh()};d.prototype.updateTransform=function(){var a=this.points;if(!(1>a.length)){for(var b=a[0],d,e,f=this.vertices,g=a.length,h=0;h<g;h++){var n=a[h],x=4*h;d=h<a.length-1?a[h+1]:n;e=-(d.x-b.x);b=d.y-
b.y;d=Math.sqrt(b*b+e*e);var v=this._texture.height/2,b=b/d;e/=d;b*=v;e*=v;f[x]=n.x+b;f[x+1]=n.y+e;f[x+2]=n.x-b;f[x+3]=n.y-e;b=n}this.containerUpdateTransform()}};return d}(f["default"]);e["default"]=a},{"../core":63,"./Mesh":161}],165:[function(a,f,e){e.__esModule=!0;f=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(e[d]=a[d]);e["default"]=a;return e}(a("../../core"));var h=(a=a("../Mesh"))&&a.__esModule?a:{"default":a};a=function(){function a(e){if(!(this instanceof
a))throw new TypeError("Cannot call a class as a function");this.renderer=e}a.prototype.render=function(a){var d=this.renderer,c=d.context,b=a.worldTransform,e=d.resolution;d.roundPixels?c.setTransform(b.a*e,b.b*e,b.c*e,b.d*e,b.tx*e|0,b.ty*e|0):c.setTransform(b.a*e,b.b*e,b.c*e,b.d*e,b.tx*e,b.ty*e);d.setBlendMode(a.blendMode);a.drawMode===h["default"].DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(a):this._renderTriangles(a)};a.prototype._renderTriangleMesh=function(a){for(var d=a.vertices.length/
2,c=0;c<d-2;c++){var b=2*c;this._renderDrawTriangle(a,b,b+2,b+4)}};a.prototype._renderTriangles=function(a){for(var d=a.indices,c=d.length,b=0;b<c;b+=3)this._renderDrawTriangle(a,2*d[b],2*d[b+1],2*d[b+2])};a.prototype._renderDrawTriangle=function(a,d,c,b){var e=this.renderer.context,f=a.uvs,g=a.vertices,h=a._texture;if(h.valid){var h=h.baseTexture,n=h.source,w=h.width,x=h.height,v=f[d]*h.width,u=f[c]*h.width,y=f[b]*h.width,z=f[d+1]*h.height,A=f[c+1]*h.height,f=f[b+1]*h.height,B=g[d],E=g[c],F=g[b];
d=g[d+1];c=g[c+1];b=g[b+1];if(0<a.canvasPadding){g=a.canvasPadding/a.worldTransform.a;a=a.canvasPadding/a.worldTransform.d;var G=(B+E+F)/3,C=(d+c+b)/3,H=B-G,J=d-C,I=Math.sqrt(H*H+J*J),B=G+H/I*(I+g);d=C+J/I*(I+a);H=E-G;J=c-C;I=Math.sqrt(H*H+J*J);E=G+H/I*(I+g);c=C+J/I*(I+a);H=F-G;J=b-C;I=Math.sqrt(H*H+J*J);F=G+H/I*(I+g);b=C+J/I*(I+a)}e.save();e.beginPath();e.moveTo(B,d);e.lineTo(E,c);e.lineTo(F,b);e.closePath();e.clip();a=v*A+z*y+u*f-A*y-z*u-v*f;e.transform((B*A+z*F+E*f-A*F-z*E-B*f)/a,(d*A+z*b+c*f-
A*b-z*c-d*f)/a,(v*E+B*y+u*F-E*y-B*u-v*F)/a,(v*c+d*y+u*b-c*y-d*u-v*b)/a,(v*A*F+z*E*y+B*u*f-B*A*y-z*u*F-v*E*f)/a,(v*A*b+z*c*y+d*u*f-d*A*y-z*u*b-v*c*f)/a);e.drawImage(n,0,0,w*h.resolution,x*h.resolution,0,0,w,x);e.restore()}};a.prototype.renderMeshFlat=function(a){var d=this.renderer.context;a=a.vertices;var c=a.length/2;d.beginPath();for(var b=1;b<c-2;++b){var e=2*b,f=a[e+2],g=a[e+3],h=a[e+4],n=a[e+5];d.moveTo(a[e],a[e+1]);d.lineTo(f,g);d.lineTo(h,n)}d.fillStyle="#FF0000";d.fill();d.closePath()};a.prototype.destroy=
function(){this.renderer=null};return a}();e["default"]=a;f.CanvasRenderer.registerPlugin("mesh",a)},{"../../core":63,"../Mesh":161}],166:[function(a,f,e){function h(a){return a&&a.__esModule?a:{"default":a}}e.__esModule=!0;var n=a("./Mesh");Object.defineProperty(e,"Mesh",{enumerable:!0,get:function(){return h(n)["default"]}});var g=a("./webgl/MeshRenderer");Object.defineProperty(e,"MeshRenderer",{enumerable:!0,get:function(){return h(g)["default"]}});var d=a("./canvas/CanvasMeshRenderer");Object.defineProperty(e,
"CanvasMeshRenderer",{enumerable:!0,get:function(){return h(d)["default"]}});var c=a("./Plane");Object.defineProperty(e,"Plane",{enumerable:!0,get:function(){return h(c)["default"]}});var b=a("./NineSlicePlane");Object.defineProperty(e,"NineSlicePlane",{enumerable:!0,get:function(){return h(b)["default"]}});var k=a("./Rope");Object.defineProperty(e,"Rope",{enumerable:!0,get:function(){return h(k)["default"]}})},{"./Mesh":161,"./NineSlicePlane":162,"./Plane":163,"./Rope":164,"./canvas/CanvasMeshRenderer":165,
"./webgl/MeshRenderer":167}],167:[function(a,f,e){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.__esModule=!0;var n=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,
c)&&(b[c]=a[c]);b["default"]=a;return b}(a("../../core")),g=(f=a("pixi-gl-core"))&&f.__esModule?f:{"default":f},d=(f=a("../Mesh"))&&f.__esModule?f:{"default":f};a("path");a=function(a){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");c=a.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.shader=null;return c}h(b,a);b.prototype.onContextChange=
function(){this.shader=new n.Shader(this.renderer.gl,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n}\n","varying vec2 vTextureCoord;\nuniform float alpha;\nuniform vec3 tint;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * vec4(tint * alpha, alpha);\n}\n")};
b.prototype.render=function(a){var b=this.renderer,c=b.gl,e=a._texture;if(e.valid){var f=a._glDatas[b.CONTEXT_UID];f||(b.bindVao(null),f={shader:this.shader,vertexBuffer:g["default"].GLBuffer.createVertexBuffer(c,a.vertices,c.STREAM_DRAW),uvBuffer:g["default"].GLBuffer.createVertexBuffer(c,a.uvs,c.STREAM_DRAW),indexBuffer:g["default"].GLBuffer.createIndexBuffer(c,a.indices,c.STATIC_DRAW),vao:null,dirty:a.dirty,indexDirty:a.indexDirty},f.vao=(new g["default"].VertexArrayObject(c)).addIndex(f.indexBuffer).addAttribute(f.vertexBuffer,
f.shader.attributes.aVertexPosition,c.FLOAT,!1,8,0).addAttribute(f.uvBuffer,f.shader.attributes.aTextureCoord,c.FLOAT,!1,8,0),a._glDatas[b.CONTEXT_UID]=f);b.bindVao(f.vao);a.dirty!==f.dirty&&(f.dirty=a.dirty,f.uvBuffer.upload(a.uvs));a.indexDirty!==f.indexDirty&&(f.indexDirty=a.indexDirty,f.indexBuffer.upload(a.indices));f.vertexBuffer.upload(a.vertices);b.bindShader(f.shader);f.shader.uniforms.uSampler=b.bindTexture(e);b.state.setBlendMode(a.blendMode);f.shader.uniforms.translationMatrix=a.worldTransform.toArray(!0);
f.shader.uniforms.alpha=a.worldAlpha;f.shader.uniforms.tint=a.tintRgb;f.vao.draw(a.drawMode===d["default"].DRAW_MODES.TRIANGLE_MESH?c.TRIANGLE_STRIP:c.TRIANGLES,a.indices.length,0)}};return b}(n.ObjectRenderer);e["default"]=a;n.WebGLRenderer.registerPlugin("mesh",a)},{"../../core":63,"../Mesh":161,path:22,"pixi-gl-core":12}],168:[function(a,f,e){function h(a,d){if("function"!==typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function, not "+typeof d);a.prototype=Object.create(d&&
d.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});d&&(Object.setPrototypeOf?Object.setPrototypeOf(a,d):a.__proto__=d)}e.__esModule=!0;var n=function(a){if(a&&a.__esModule)return a;var d={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);d["default"]=a;return d}(a("../core"));a=function(a){function d(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1500,b=arguments[1],e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:
16384;if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");var f;f=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");f=!f||"object"!==typeof f&&"function"!==typeof f?this:f;16384<e&&(e=16384);e>c&&(e=c);f._properties=[!1,!0,!1,!1,!1];f._maxSize=c;f._batchSize=e;f._glBuffers={};f._bufferToUpdate=0;f.interactiveChildren=!1;f.blendMode=n.BLEND_MODES.NORMAL;f.roundPixels=!0;f.baseTexture=null;f.setProperties(b);return f}
h(d,a);d.prototype.setProperties=function(a){a&&(this._properties[0]="scale"in a?!!a.scale:this._properties[0],this._properties[1]="position"in a?!!a.position:this._properties[1],this._properties[2]="rotation"in a?!!a.rotation:this._properties[2],this._properties[3]="uvs"in a?!!a.uvs:this._properties[3],this._properties[4]="alpha"in a?!!a.alpha:this._properties[4])};d.prototype.updateTransform=function(){this.displayObjectUpdateTransform()};d.prototype.renderWebGL=function(a){var b=this;if(this.visible&&
!(0>=this.worldAlpha)&&this.children.length&&this.renderable){if(!this.baseTexture&&(this.baseTexture=this.children[0]._texture.baseTexture,!this.baseTexture.hasLoaded))this.baseTexture.once("update",function(){return b.onChildrenChange(0)});a.setObjectRenderer(a.plugins.particle);a.plugins.particle.render(this)}};d.prototype.onChildrenChange=function(a){a=Math.floor(a/this._batchSize);a<this._bufferToUpdate&&(this._bufferToUpdate=a)};d.prototype.renderCanvas=function(a){if(this.visible&&!(0>=this.worldAlpha)&&
this.children.length&&this.renderable){var b=a.context,c=this.worldTransform,d=!0,e,f,g,h,n=a.blendModes[this.blendMode];n!==b.globalCompositeOperation&&(b.globalCompositeOperation=n);b.globalAlpha=this.worldAlpha;this.displayObjectUpdateTransform();for(n=0;n<this.children.length;++n){var v=this.children[n];if(v.visible){var u=v._texture.frame;b.globalAlpha=this.worldAlpha*v.alpha;0===v.rotation%(2*Math.PI)?(d&&(b.setTransform(c.a,c.b,c.c,c.d,c.tx*a.resolution,c.ty*a.resolution),d=!1),e=v.anchor.x*
-u.width*v.scale.x+v.position.x+.5,f=v.anchor.y*-u.height*v.scale.y+v.position.y+.5,g=u.width*v.scale.x,h=u.height*v.scale.y):(d||(d=!0),v.displayObjectUpdateTransform(),e=v.worldTransform,a.roundPixels?b.setTransform(e.a,e.b,e.c,e.d,e.tx*a.resolution|0,e.ty*a.resolution|0):b.setTransform(e.a,e.b,e.c,e.d,e.tx*a.resolution,e.ty*a.resolution),e=v.anchor.x*-u.width+.5,f=v.anchor.y*-u.height+.5,g=u.width,h=u.height);var y=v._texture.baseTexture.resolution;b.drawImage(v._texture.baseTexture.source,u.x*
y,u.y*y,u.width*y,u.height*y,e*y,f*y,g*y,h*y)}}}};d.prototype.destroy=function(c){a.prototype.destroy.call(this,c);if(this._buffers)for(c=0;c<this._buffers.length;++c)this._buffers[c].destroy();this._buffers=this._properties=null};return d}(n.Container);e["default"]=a},{"../core":63}],169:[function(a,f,e){e.__esModule=!0;var h=a("./ParticleContainer");Object.defineProperty(e,"ParticleContainer",{enumerable:!0,get:function(){return(h&&h.__esModule?h:{"default":h})["default"]}});var n=a("./webgl/ParticleRenderer");
Object.defineProperty(e,"ParticleRenderer",{enumerable:!0,get:function(){return(n&&n.__esModule?n:{"default":n})["default"]}})},{"./ParticleContainer":168,"./webgl/ParticleRenderer":171}],170:[function(a,f,e){e.__esModule=!0;var h=(f=a("pixi-gl-core"))&&f.__esModule?f:{"default":f},n=(a=a("../../core/utils/createIndicesForQuads"))&&a.__esModule?a:{"default":a};a=function(){function a(d,c,b,e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.gl=d;this.vertSize=
2;this.vertByteSize=4*this.vertSize;this.size=e;this.dynamicProperties=[];this.staticProperties=[];for(d=0;d<c.length;++d)e=c[d],e={attribute:e.attribute,size:e.size,uploadFunction:e.uploadFunction,offset:e.offset},b[d]?this.dynamicProperties.push(e):this.staticProperties.push(e);this.staticStride=0;this.staticData=this.staticBuffer=null;this.dynamicStride=0;this.dynamicData=this.dynamicBuffer=null;this.initBuffers()}a.prototype.initBuffers=function(){var a=this.gl,c=0;this.indices=(0,n["default"])(this.size);
this.indexBuffer=h["default"].GLBuffer.createIndexBuffer(a,this.indices,a.STATIC_DRAW);for(var b=this.dynamicStride=0;b<this.dynamicProperties.length;++b){var e=this.dynamicProperties[b];e.offset=c;c+=e.size;this.dynamicStride+=e.size}this.dynamicData=new Float32Array(this.size*this.dynamicStride*4);this.dynamicBuffer=h["default"].GLBuffer.createVertexBuffer(a,this.dynamicData,a.STREAM_DRAW);for(b=this.staticStride=c=0;b<this.staticProperties.length;++b)e=this.staticProperties[b],e.offset=c,c+=e.size,
this.staticStride+=e.size;this.staticData=new Float32Array(this.size*this.staticStride*4);this.staticBuffer=h["default"].GLBuffer.createVertexBuffer(a,this.staticData,a.STATIC_DRAW);this.vao=(new h["default"].VertexArrayObject(a)).addIndex(this.indexBuffer);for(c=0;c<this.dynamicProperties.length;++c)b=this.dynamicProperties[c],this.vao.addAttribute(this.dynamicBuffer,b.attribute,a.FLOAT,!1,4*this.dynamicStride,4*b.offset);for(c=0;c<this.staticProperties.length;++c)b=this.staticProperties[c],this.vao.addAttribute(this.staticBuffer,
b.attribute,a.FLOAT,!1,4*this.staticStride,4*b.offset)};a.prototype.uploadDynamic=function(a,c,b){for(var d=0;d<this.dynamicProperties.length;d++){var e=this.dynamicProperties[d];e.uploadFunction(a,c,b,this.dynamicData,this.dynamicStride,e.offset)}this.dynamicBuffer.upload()};a.prototype.uploadStatic=function(a,c,b){for(var d=0;d<this.staticProperties.length;d++){var e=this.staticProperties[d];e.uploadFunction(a,c,b,this.staticData,this.staticStride,e.offset)}this.staticBuffer.upload()};a.prototype.destroy=
function(){this.dynamicData=this.dynamicProperties=null;this.dynamicBuffer.destroy();this.staticData=this.staticProperties=null;this.staticBuffer.destroy()};return a}();e["default"]=a},{"../../core/utils/createIndicesForQuads":118,"pixi-gl-core":12}],171:[function(a,f,e){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,
configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.__esModule=!0;var n=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}(a("../../core")),g=(f=a("./ParticleShader"))&&f.__esModule?f:{"default":f},d=(a=a("./ParticleBuffer"))&&a.__esModule?a:{"default":a};a=function(a){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
c=a.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.shader=null;c.indexBuffer=null;c.properties=null;c.tempMatrix=new n.Matrix;c.CONTEXT_UID=0;return c}h(b,a);b.prototype.onContextChange=function(){var a=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID;this.shader=new g["default"](a);this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,
offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]};b.prototype.start=function(){this.renderer.bindShader(this.shader)};b.prototype.render=function(a){var b=a.children,
c=a._maxSize,d=a._batchSize,e=this.renderer,f=b.length;if(0!==f){f>c&&(f=c);(c=a._glBuffers[e.CONTEXT_UID])||(c=a._glBuffers[e.CONTEXT_UID]=this.generateBuffers(a));this.renderer.setBlendMode(a.blendMode);var g=e.gl,k=a.worldTransform.copy(this.tempMatrix);k.prepend(e._activeRenderTarget.projectionMatrix);this.shader.uniforms.projectionMatrix=k.toArray(!0);this.shader.uniforms.uAlpha=a.worldAlpha;this.shader.uniforms.uSampler=e.bindTexture(b[0]._texture.baseTexture);for(var h=k=0;k<f;k+=d,h+=1){var n=
f-k;n>d&&(n=d);var z=c[h];z.uploadDynamic(b,k,n);a._bufferToUpdate===h&&(z.uploadStatic(b,k,n),a._bufferToUpdate=h+1);e.bindVao(z.vao);z.vao.draw(g.TRIANGLES,6*n)}}};b.prototype.generateBuffers=function(a){var b=this.renderer.gl,c=[],e=a._maxSize,f=a._batchSize;a=a._properties;for(var g=0;g<e;g+=f)c.push(new d["default"](b,this.properties,a,f));return c};b.prototype.uploadVertices=function(a,b,c,d,e,f){for(var g,k,h,n,p=0;p<c;++p){n=a[b+p];g=n._texture;var q=n.scale.x,t=n.scale.y;h=g.trim;var r=g.orig;
h?(k=h.x-n.anchor.x*r.width,g=k+h.width,n=h.y-n.anchor.y*r.height,h=n+h.height):(g=r.width*(1-n.anchor.x),k=r.width*-n.anchor.x,h=r.height*(1-n.anchor.y),n=r.height*-n.anchor.y);d[f]=k*q;d[f+1]=n*t;d[f+e]=g*q;d[f+e+1]=n*t;d[f+2*e]=g*q;d[f+2*e+1]=h*t;d[f+3*e]=k*q;d[f+3*e+1]=h*t;f+=4*e}};b.prototype.uploadPosition=function(a,b,c,d,e,f){for(var g=0;g<c;g++){var k=a[b+g].position;d[f]=k.x;d[f+1]=k.y;d[f+e]=k.x;d[f+e+1]=k.y;d[f+2*e]=k.x;d[f+2*e+1]=k.y;d[f+3*e]=k.x;d[f+3*e+1]=k.y;f+=4*e}};b.prototype.uploadRotation=
function(a,b,c,d,e,f){for(var g=0;g<c;g++){var k=a[b+g].rotation;d[f]=k;d[f+e]=k;d[f+2*e]=k;d[f+3*e]=k;f+=4*e}};b.prototype.uploadUvs=function(a,b,c,d,e,f){for(var g=0;g<c;++g){var k=a[b+g]._texture._uvs;k?(d[f]=k.x0,d[f+1]=k.y0,d[f+e]=k.x1,d[f+e+1]=k.y1,d[f+2*e]=k.x2,d[f+2*e+1]=k.y2,d[f+3*e]=k.x3,d[f+3*e+1]=k.y3):(d[f]=0,d[f+1]=0,d[f+e]=0,d[f+e+1]=0,d[f+2*e]=0,d[f+2*e+1]=0,d[f+3*e]=0,d[f+3*e+1]=0);f+=4*e}};b.prototype.uploadAlpha=function(a,b,c,d,e,f){for(var g=0;g<c;g++){var k=a[b+g].alpha;d[f]=
k;d[f+e]=k;d[f+2*e]=k;d[f+3*e]=k;f+=4*e}};b.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer);a.prototype.destroy.call(this);this.shader.destroy();this.tempMatrix=this.indices=null};return b}(n.ObjectRenderer);e["default"]=a;n.WebGLRenderer.registerPlugin("particle",a)},{"../../core":63,"./ParticleBuffer":170,"./ParticleShader":172}],172:[function(a,f,e){function h(a,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+
typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}e.__esModule=!0;a=a("../../core/Shader");a=function(a){function e(d){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");d=a.call(this,d,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute float aColor;\nattribute vec2 aPositionCoord;\nattribute vec2 aScale;\nattribute float aRotation;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvarying float vColor;\nvoid main(void){\n   vec2 v = aVertexPosition;\n   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n   v = v + aPositionCoord;\n   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = aColor;\n}",
"varying vec2 vTextureCoord;\nvarying float vColor;\nuniform sampler2D uSampler;\nuniform float uAlpha;\nvoid main(void){\n  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;\n  if (color.a == 0.0) discard;\n  gl_FragColor = color;\n}");if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!d||"object"!==typeof d&&"function"!==typeof d?this:d}h(e,a);return e}((a&&a.__esModule?a:{"default":a})["default"]);e["default"]=a},{"../../core/Shader":42}],
173:[function(a,f,e){Math.sign||(Math.sign=function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1})},{}],174:[function(a,f,e){a=(a=a("object-assign"))&&a.__esModule?a:{"default":a};Object.assign||(Object.assign=a["default"])},{"object-assign":5}],175:[function(a,f,e){a("./Object.assign");a("./requestAnimationFrame");a("./Math.sign");window.ArrayBuffer||(window.ArrayBuffer=Array);window.Float32Array||(window.Float32Array=Array);window.Uint32Array||(window.Uint32Array=Array);window.Uint16Array||
(window.Uint16Array=Array)},{"./Math.sign":173,"./Object.assign":174,"./requestAnimationFrame":176}],176:[function(a,f,e){(function(a){Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()});a.performance&&a.performance.now||function(){var b=Date.now();a.performance||(a.performance={});a.performance.now=function(){return Date.now()-b}}();for(var e=Date.now(),f=["ms","moz","webkit","o"],d=0;d<f.length&&!a.requestAnimationFrame;++d){var c=f[d];a.requestAnimationFrame=a[c+
"RequestAnimationFrame"];a.cancelAnimationFrame=a[c+"CancelAnimationFrame"]||a[c+"CancelRequestAnimationFrame"]}a.requestAnimationFrame||(a.requestAnimationFrame=function(a){if("function"!==typeof a)throw new TypeError(a+"is not a function");var b=Date.now(),c=16+e-b;0>c&&(c=0);e=b;return setTimeout(function(){e=Date.now();a(performance.now())},c)});a.cancelAnimationFrame||(a.cancelAnimationFrame=function(a){return clearTimeout(a)})}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?
self:"undefined"!==typeof window?window:{})},{}],177:[function(a,f,e){function h(a,b){return b instanceof c.Text?(b.updateText(!0),!0):!1}function n(a,b){if(b instanceof c.TextStyle){var d=c.Text.getFontStyle(b);c.Text.fontPropertiesCache[d]||c.Text.calculateFontProperties(d);return!0}return!1}function g(a,b){if(a instanceof c.Text){-1===b.indexOf(a.style)&&b.push(a.style);-1===b.indexOf(a)&&b.push(a);var d=a._texture.baseTexture;-1===b.indexOf(d)&&b.push(d);return!0}return!1}function d(a,b){return a instanceof
c.TextStyle?(-1===b.indexOf(a)&&b.push(a),!0):!1}e.__esModule=!0;var c=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}(a("../core")),b=(a=a("./limiters/CountLimiter"))&&a.__esModule?a:{"default":a},k=c.ticker.shared;c.settings.UPLOADS_PER_FRAME=4;a=function(){function a(e){var f=this;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.limiter=new b["default"](c.settings.UPLOADS_PER_FRAME);
this.renderer=e;this.uploadHookHelper=null;this.queue=[];this.addHooks=[];this.uploadHooks=[];this.completes=[];this.ticking=!1;this.delayedTick=function(){f.queue&&f.prepareItems()};this.register(g,h);this.register(d,n)}a.prototype.upload=function(a,b){"function"===typeof a&&(b=a,a=null);a&&this.add(a);this.queue.length?(b&&this.completes.push(b),this.ticking||(this.ticking=!0,k.addOnce(this.tick,this))):b&&b()};a.prototype.tick=function(){setTimeout(this.delayedTick,0)};a.prototype.prepareItems=
function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){for(var a=this.queue[0],b=!1,c=0,d=this.uploadHooks.length;c<d;c++)if(this.uploadHooks[c](this.uploadHookHelper,a)){this.queue.shift();b=!0;break}b||this.queue.shift()}if(this.queue.length)k.addOnce(this.tick,this);else for(this.ticking=!1,a=this.completes.slice(0),b=this.completes.length=0,c=a.length;b<c;b++)a[b]()};a.prototype.register=function(a,b){a&&this.addHooks.push(a);b&&this.uploadHooks.push(b);return this};
a.prototype.add=function(a){for(var b=0,d=this.addHooks.length;b<d&&!this.addHooks[b](a,this.queue);b++);if(a instanceof c.Container)for(b=a.children.length-1;0<=b;b--)this.add(a.children[b]);return this};a.prototype.destroy=function(){this.ticking&&k.remove(this.tick,this);this.ticking=!1;this.uploadHookHelper=this.limiter=this.queue=this.completes=this.renderer=this.uploadHooks=this.addHooks=null};return a}();e["default"]=a},{"../core":63,"./limiters/CountLimiter":180}],178:[function(a,f,e){function h(a,
b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function n(a,b){if(b instanceof d.BaseTexture){var c=b.source;a.ctx.drawImage(c,0,0,0===c.width?a.canvas.width:Math.min(a.canvas.width,c.width),0===c.height?a.canvas.height:Math.min(a.canvas.height,
c.height),0,0,a.canvas.width,a.canvas.height);return!0}return!1}function g(a,b){if(a instanceof d.BaseTexture)return-1===b.indexOf(a)&&b.push(a),!0;if(a._texture&&a._texture instanceof d.Texture){var c=a._texture.baseTexture;-1===b.indexOf(c)&&b.push(c);return!0}return!1}e.__esModule=!0;var d=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}(a("../../core"));a=a("../BasePrepare");a=function(a){function b(c){if(!(this instanceof
b))throw new TypeError("Cannot call a class as a function");c=a.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.uploadHookHelper=c;c.canvas=document.createElement("canvas");c.canvas.width=16;c.canvas.height=16;c.ctx=c.canvas.getContext("2d");c.register(g,n);return c}h(b,a);b.prototype.destroy=function(){a.prototype.destroy.call(this);this.canvas=this.ctx=null};return b}((a&&a.__esModule?
a:{"default":a})["default"]);e["default"]=a;d.CanvasRenderer.registerPlugin("prepare",a)},{"../../core":63,"../BasePrepare":177}],179:[function(a,f,e){function h(a){return a&&a.__esModule?a:{"default":a}}e.__esModule=!0;var n=a("./webgl/WebGLPrepare");Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return h(n)["default"]}});var g=a("./canvas/CanvasPrepare");Object.defineProperty(e,"canvas",{enumerable:!0,get:function(){return h(g)["default"]}});var d=a("./BasePrepare");Object.defineProperty(e,
"BasePrepare",{enumerable:!0,get:function(){return h(d)["default"]}});var c=a("./limiters/CountLimiter");Object.defineProperty(e,"CountLimiter",{enumerable:!0,get:function(){return h(c)["default"]}});var b=a("./limiters/TimeLimiter");Object.defineProperty(e,"TimeLimiter",{enumerable:!0,get:function(){return h(b)["default"]}})},{"./BasePrepare":177,"./canvas/CanvasPrepare":178,"./limiters/CountLimiter":180,"./limiters/TimeLimiter":181,"./webgl/WebGLPrepare":182}],180:[function(a,f,e){e.__esModule=
!0;a=function(){function a(e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.maxItemsPerFrame=e;this.itemsLeft=0}a.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame};a.prototype.allowedToUpload=function(){return 0<this.itemsLeft--};return a}();e["default"]=a},{}],181:[function(a,f,e){e.__esModule=!0;a=function(){function a(e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.maxMilliseconds=e;this.frameStart=
0}a.prototype.beginFrame=function(){this.frameStart=Date.now()};a.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds};return a}();e["default"]=a},{}],182:[function(a,f,e){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
b):a.__proto__=b)}function n(a,c){return c instanceof b.BaseTexture?(c._glTextures[a.CONTEXT_UID]||a.textureManager.updateTexture(c),!0):!1}function g(a,c){return c instanceof b.Graphics?((c.dirty||c.clearDirty||!c._webGL[a.plugins.graphics.CONTEXT_UID])&&a.plugins.graphics.updateGraphics(c),!0):!1}function d(a,c){if(a instanceof b.BaseTexture)return-1===c.indexOf(a)&&c.push(a),!0;if(a._texture&&a._texture instanceof b.Texture){var d=a._texture.baseTexture;-1===c.indexOf(d)&&c.push(d);return!0}return!1}
function c(a,c){return a instanceof b.Graphics?(c.push(a),!0):!1}e.__esModule=!0;var b=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}(a("../../core"));a=a("../BasePrepare");a=function(a){function b(e){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");e=a.call(this,e);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
e=!e||"object"!==typeof e&&"function"!==typeof e?this:e;e.uploadHookHelper=e.renderer;e.register(d,n).register(c,g);return e}h(b,a);return b}((a&&a.__esModule?a:{"default":a})["default"]);e["default"]=a;b.WebGLRenderer.registerPlugin("prepare",a)},{"../../core":63,"../BasePrepare":177}],183:[function(a,f,e){(function(f){function h(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}e.__esModule=!0;e.loader=
e.prepare=e.particles=e.mesh=e.loaders=e.interaction=e.filters=e.extras=e.extract=e.accessibility=void 0;var g=a("./polyfill");Object.keys(g).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(e,a,{enumerable:!0,get:function(){return g[a]}})});var d=a("./deprecation");Object.keys(d).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(e,a,{enumerable:!0,get:function(){return d[a]}})});var c=a("./core");Object.keys(c).forEach(function(a){"default"!==a&&
"__esModule"!==a&&Object.defineProperty(e,a,{enumerable:!0,get:function(){return c[a]}})});var b=a("./accessibility"),b=h(b),k=a("./extract"),k=h(k),p=a("./extras"),p=h(p),r=a("./filters"),r=h(r),q=a("./interaction"),q=h(q),t=a("./loaders"),t=h(t),w=a("./mesh"),w=h(w),x=a("./particles"),x=h(x),v=a("./prepare"),v=h(v);c.utils.mixins.performMixins();e.accessibility=b;e.extract=k;e.extras=p;e.filters=r;e.interaction=q;e.loaders=t;e.mesh=w;e.particles=x;e.prepare=v;b=t&&t.Loader?new t.Loader:null;e.loader=
b;f.PIXI=e}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./accessibility":40,"./core":63,"./deprecation":125,"./extract":127,"./extras":136,"./filters":147,"./interaction":154,"./loaders":157,"./mesh":166,"./particles":169,"./polyfill":175,"./prepare":179}]},{},[183])(183)});PIXI.TransparencyHitArea=function(m){this.sprite=m};PIXI.TransparencyHitArea.create=function(m,a){var f;f=a?new PIXI.WebGLTransparencyHitArea(m):new PIXI.CanvasTransparencyHitArea(m);f.init();return f};PIXI.TransparencyHitArea.prototype.init=function(){};
PIXI.TransparencyHitArea.prototype.contains=function(m,a){if(0===Math.abs(this.sprite.width)||0===Math.abs(this.sprite.height))return!1;var f=this.sprite.texture.frame.width,e=this.sprite.texture.frame.height;m+=this.sprite.anchor.x*f;a+=this.sprite.anchor.y*e;return 0<=m&&m<=f&&0<=a&&a<=e?!this.isTextureTransparentAt(Math.round(m+this.sprite.texture.frame.x),Math.round(a+this.sprite.texture.frame.y)):!1};PIXI.TransparencyHitArea.prototype.getTexture=function(){return this.sprite.texture};
PIXI.TransparencyHitArea.prototype.isTextureTransparentAt=function(m,a){void(m,a);throw Error("Has to be implemented in subclasses");};PIXI.CanvasTransparencyHitArea=function(m){PIXI.TransparencyHitArea.call(this,m);this.textureWidth=this.textureData=null};PIXI.CanvasTransparencyHitArea.prototype=Object.create(PIXI.TransparencyHitArea.prototype);PIXI.CanvasTransparencyHitArea.constructor=PIXI.CanvasTransparencyHitArea;PIXI.CanvasTransparencyHitArea.prototype.clone=function(){return new PIXI.CanvasTransparencyHitArea(this.sprite)};
PIXI.CanvasTransparencyHitArea.prototype.init=function(){PIXI.TransparencyHitArea.prototype.init.call(this);null===PIXI.CanvasTransparencyHitArea.cachedRenderer&&(PIXI.CanvasTransparencyHitArea.cachedRenderer=new PIXI.CanvasRenderer(1,1));this.initTextureData()};
PIXI.CanvasTransparencyHitArea.prototype.initTextureData=function(){if(!this.textureData){var m=this.getTexture(),a=m.baseTexture.source;this.textureWidth=a.width;a=a.src;void 0===PIXI.CanvasTransparencyHitArea.TextureData[a]&&(m=this.createTextureData(m),PIXI.CanvasTransparencyHitArea.TextureData[a]=m);this.textureData=PIXI.CanvasTransparencyHitArea.TextureData[a]}};
PIXI.CanvasTransparencyHitArea.prototype.createTextureData=function(m){m=m.baseTexture.source;var a=PIXI.CanvasTransparencyHitArea.cachedRenderer,f=a.view;f.width=m.width;f.height=m.height;a=a.view.getContext("2d");a.clearRect(0,0,m.width,m.height);a.drawImage(m,0,0);return a.getImageData(0,0,m.width,m.height).data};
PIXI.CanvasTransparencyHitArea.prototype.isTextureTransparentAt=function(m,a){if(!this.textureData)throw Error("CanvasTransparencyHitArea#init() not called.");return 1>this.textureData[4*(m+a*this.textureWidth)+3]};PIXI.CanvasTransparencyHitArea.TextureData=[];PIXI.CanvasTransparencyHitArea.cachedRenderer=null;PIXI.WebGLTransparencyHitArea=function(m){PIXI.TransparencyHitArea.call(this,m);this.textureWidth=this.textureData=null};PIXI.WebGLTransparencyHitArea.prototype=Object.create(PIXI.TransparencyHitArea.prototype);
PIXI.WebGLTransparencyHitArea.constructor=PIXI.WebGLTransparencyHitArea;PIXI.WebGLTransparencyHitArea.prototype.clone=function(){return new PIXI.WebGLTransparencyHitArea(this.sprite)};PIXI.WebGLTransparencyHitArea.prototype.init=function(){PIXI.TransparencyHitArea.prototype.init.call(this);null===PIXI.WebGLTransparencyHitArea.cachedRenderer&&(PIXI.WebGLTransparencyHitArea.cachedRenderer=new PIXI.WebGLRenderer(1,1));this.initTextureData()};
PIXI.WebGLTransparencyHitArea.prototype.initTextureData=function(){if(!this.textureData){var m=this.getTexture(),a=m.baseTexture.source;this.textureWidth=a.width;a=a.src;void 0===PIXI.WebGLTransparencyHitArea.TextureData[a]&&(m=this.createTextureData(m),PIXI.WebGLTransparencyHitArea.TextureData[a]=m);this.textureData=PIXI.WebGLTransparencyHitArea.TextureData[a]}};
PIXI.WebGLTransparencyHitArea.prototype.createTextureData=function(m){var a=m.baseTexture.source,f=PIXI.WebGLTransparencyHitArea.cachedRenderer.view;f.width=a.width;f.height=a.height;var f=PIXI.WebGLTransparencyHitArea.cachedRenderer.gl,e=f.createFramebuffer();f.bindFramebuffer(f.FRAMEBUFFER,e);void 0===m.baseTexture._glTextures[f.id]&&PIXI.WebGLTransparencyHitArea.cachedRenderer.updateTexture(m.baseTexture);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,m.baseTexture._glTextures[f.id],
0);m=new Uint8Array(a.width*a.height*4);try{f.readPixels(0,0,a.width,a.height,f.RGBA,f.UNSIGNED_BYTE,m)}catch(h){console.log(error)}f.bindFramebuffer(f.FRAMEBUFFER,null);return m};PIXI.WebGLTransparencyHitArea.prototype.isTextureTransparentAt=function(m,a){if(!this.textureData)throw Error("WebGLTransparencyHitArea#init() not called.");return 255>this.textureData[4*(m+a*this.textureWidth)+3]};PIXI.WebGLTransparencyHitArea.TextureData=[];PIXI.WebGLTransparencyHitArea.cachedRenderer=null;function getCurvePoints(m,a,f,e){function h(a,d,e,g){for(var k=2,h;k<e;k+=2){var m=a[k],n=a[k+1],p=a[k+2],q=a[k+3],t=(p-a[k-2])*g,r=(q-a[k-1])*g,w=(a[k+4]-m)*g,u=(a[k+5]-n)*g,x=0,v,y,z,K;for(h=0;h<f;h++)v=d[x++],y=d[x++],z=d[x++],K=d[x++],b[c++]=v*m+y*p+z*t+K*w,b[c++]=v*n+y*q+z*r+K*u}}a="number"===typeof a?a:.5;f="number"===typeof f?f:25;var n,g=1,d=m.length,c=0,b=new Float32Array((d-2)*f+2+(e?2*f:0)),k=new Float32Array(4*(f+2)),p=4;n=m.slice(0);e?(n.unshift(m[d-1]),n.unshift(m[d-2]),n.push(m[0],
m[1])):(n.unshift(m[1]),n.unshift(m[0]),n.push(m[d-2],m[d-1]));for(k[0]=1;g<f;g++){var r=g/f,q=r*r,t=q*r,w=2*t,x=3*q;k[p++]=w-x+1;k[p++]=x-w;k[p++]=t-2*q+r;k[p++]=t-q}k[++p]=1;h(n,k,d,a);e&&(n=[],n.push(m[d-4],m[d-3],m[d-2],m[d-1],m[0],m[1],m[2],m[3]),h(n,k,4,a));d=e?0:m.length-2;b[c++]=m[d++];b[c]=m[d];return b}"undefined"!==typeof exports&&(exports.getCurvePoints=getCurvePoints);var servers=$("#socket_io_servers").attr("data-socket_io_servers").split(","),game=$("meta[name=game]").attr("content"),is_video_replay=!1;-1!=location.pathname.indexOf(game+"3")&&(is_video_replay=!0);function is_safari(){return navigator.vendor&&-1<navigator.vendor.indexOf("Apple")}var static_host=$("#static_host").attr("data-static_host"),image_host=static_host+"/icons/",asset_host=static_host+"/",upload_path=$("#upload_path").attr("data-upload_path"),loader=PIXI.loader,assets=[];
"wows"==game?(assets.push(image_host+"rotate.png"),assets.push(image_host+"bb.png",image_host+"cv.png",image_host+"ca.png",image_host+"dd.png"),assets.push(image_host+"circle.png",image_host+"recticle.png",image_host+"dot.png",image_host+"note.png",image_host+"cursor.png",image_host+"grid.png")):"blitz"==game?(assets.push(image_host+"rotate.png"),assets.push(image_host+"light.png",image_host+"medium.png",image_host+"heavy.png",image_host+"td.png",image_host+"arty.png"),assets.push(image_host+"circle.png",
image_host+"recticle.png",image_host+"dot.png",image_host+"note.png",image_host+"cursor.png",image_host+"grid.png")):"aw"==game?(assets.push(image_host+"rotate.png"),loader.add("aw_assets.png",asset_host+"aw_assets.png",{crossOrigin:!0}),loader.add("aw_assets.json",asset_host+"aw_assets.json",{crossOrigin:!0})):"lol"==game?(assets.push(image_host+"rotate.png"),assets.push(image_host+"circle.png",image_host+"recticle.png",image_host+"dot.png",image_host+"note.png",image_host+"cursor.png",image_host+
"grid.png")):"hots"==game?(assets.push(image_host+"rotate.png"),loader.add("hots_assets.png",asset_host+"hots_assets.png",{crossOrigin:!0}),loader.add("hots_assets.json",asset_host+"hots_assets.json",{crossOrigin:!0})):(loader.add("wot_assets.png",asset_host+"wot_assets.png",{crossOrigin:!0}),loader.add("wot_assets.json",asset_host+"wot_assets.json",{crossOrigin:!0}));for(var i in assets)loader.add(assets[i],assets[i],{crossOrigin:!0});var textures_loaded=!1;
loader.on("complete",function(m){textures_loaded=!0});loader.load();function img_texture(m){return texture_atlas[m]?(m=texture_atlas[m],new PIXI.Texture(loader.resources[m.sprite].texture,new PIXI.Rectangle(m.x,m.y,m.width,m.height))):-1==m.indexOf("://")?PIXI.Texture.fromImage(image_host+m):PIXI.Texture.fromImage(m)}var texture_atlas;
function setup_assets(){texture_atlas={};for(var m in loader.resources)if("json"==m.slice(-4))for(var a in loader.resources[m].data.tiles)texture_atlas[a]=loader.resources[m].data.tiles[a]}var room=location.search.split("room=")[1].split("&")[0],nowebgl=-1!=location.search.indexOf("nowebgl"),wot_live=-1!=location.search.indexOf("wot_live"),adjust_all_zoom=-1!=location.search.indexOf("adjust_zoom");function hashstring(m){var a=0;for(i=0;i<m.length;i++)a+=m.charCodeAt(i);return a}
var server=servers[hashstring(room)%servers.length];console.log("connecting to server: ",server);function parse_domain(m){m=m.split(".");2<m.length&&(m=m.slice(1));return"."+m.join(".")}var sid=$("#sid").attr("data-sid"),socket;try{socket=io.connect(server,{reconnectionDelay:100,reconnectionDelayMax:500,"reconnection limit":1E3,"max reconnection attempts":Infinity,query:"connect_sid="+sid+"&host="+parse_domain(location.hostname)})}catch(m){console.log(m)}var valid_chars="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
function newUid(){for(var m="",a=0;14>a;a++)m+=valid_chars.charAt(Math.floor(Math.random()*valid_chars.length));return m}function is_chrome(){return-1<navigator.userAgent.toLowerCase().indexOf("chrome")}function is_firefox(){return-1<navigator.userAgent.toLowerCase().indexOf("firefox")}function is_ie(){return-1<navigator.userAgent.toLowerCase().indexOf("msie")||-1<navigator.userAgent.toLowerCase().indexOf("trident")}function is_edge(){return-1<navigator.userAgent.toLowerCase().indexOf("edge")}
var last=function(m){return m[m.length-1]};function random_darkish_color(){var m=Math.round(127*Math.random()).toString(16),a=Math.round(127*Math.random()).toString(16),f=Math.round(127*Math.random()).toString(16);return"#"+m+a+f}function random_color(){var m=Math.round(256*Math.random()).toString(16),a=Math.round(256*Math.random()).toString(16),f=Math.round(256*Math.random()).toString(16);return"#"+("00"+m.toString(16)).slice(-2)+("00"+a.toString(16)).slice(-2)+("00"+f.toString(16)).slice(-2)}
var ARROW_LOOKBACK=4,MOUSE_DRAW_SMOOTHING=.5,LEFT_BAR_MIN_WIDTH=340,RIGHT_BAR_MIN_WIDTH=340,SINGLE_SIDE_BAR_MIN_WIDTH;SINGLE_SIDE_BAR_MIN_WIDTH="blitz"==game?350:630;
var MIN_POLYGON_END_DISTANCE=.01,MIN_POLYGON_END_DISTANCE_TOUCH=.025,MIN_TRACK_MOVE_DISTANCE_SQ=1E-4,ICON_SCALE=.00125,NOTE_SCALE=.03,THICKNESS_SCALE=1,FONT_SCALE=.002,TEXT_QUALITY=1,DRAW_QUALITY=1,ARROW_SCALE=.008,ARROW_SCALE2=1.7,TEND_SCALE=.008,TEND_SCALE2=1.5,MAGIC_NUMBER=25,EPSILON=1E-9,ROTATE_ARROW_SCALE=.05,ROTATE_ARROW_MARGIN=.02,TEXT_BOX_QUALITY=4,VIDEO_EXTENSIONS=["mp4","webgl","avi"],VIDEO_SYNC_DELAY=1E4,MOUSE_IDLE_HIDE_TIME=5E3,MAX_CANVAS_SIZE=4096,ICON_LABEL_SCALE=1.5,TEXT_SCALE=.8,BACKGROUND_TEXT_SCALE=
.8,PING_TIME=500,dpi,chat_color=random_darkish_color(),room_data,active_slide=0,active_context="ping_context",active_menu="ping_context",userlist={},selected_icon,selected_icon_no_color=!1,selected_icon_circle_radius=0,label_position="pos_bottom",icon_extra_scale=1,icon_color=16711680,draw_color=16711680,ping_color=16711680,track_color=16711680,line_color=16711680,curve_color=16711680,text_color=16777215,background_text_color=0,rectangle_outline_color=16711680,rectangle_fill_color=16711680,circle_outline_color=
16711680,circle_fill_color=16711680,polygon_outline_color=16711680,polygon_fill_color=16711680,area_outline_color=16711680,area_fill_color=16711680,background,draw_thickness,curve_thickness,line_thickness,icon_size,ping_size,track_size,draw_end_size,line_end_size,curve_end_size,rectangle_outline_thickness,rectangle_outline_transparancy,rectangle_fill_transparancy,circle_outline_thickness,circle_outline_transparancy,circle_fill_transparancy,polygon_outline_thickness,polygon_outline_transparancy,polygon_fill_transparancy,
area_outline_thickness,area_outline_transparancy,area_fill_transparancy,my_user,undo_list=[],redo_list=[],is_room_locked,tactic_name="",graphics,new_drawing,left_click_origin,selected_entities=[],previously_selected_entities=[],label_font_size=30,last_ping_time,trackers={},my_tracker,last_track_position,tracker_width=.05,tracker_height=.05,my_user_id,clipboard=[],slide_name,assets_loaded=!1,select_alpha=.6,resources_loading=0,circle_draw_style="edge",drag_delay_running=!1,current_text_element,last_mouse_location,
ping_texture,just_activated,select_box,rotate_arrow0,rotate_arrow1,rotate_arrow2,rotate_arrow3,select_box_dirty=!1,select_center,objectContainer,fast_container,background_sprite,renderer,size,size_x,size_y,useWebGL,last_pan_loc,panning,last_move_func,last_end_func,draw_canvas,temp_draw_canvas,draw_context,temp_draw_context,grid_layer,zoom_level=1,control_camera=!1,dragging_enabled=!0,temp_canvas=document.createElement("canvas"),dragging_mode={},presentation_mode=!0,align_left=!1,left_sidebar_width=
0,right_sidebar_width=0,offset=0,sync_start_time,progress=0,progress_update=Date.now(),video_layer,manual_pause=!1,sync_seek=!1,sync_event,clock_sync_event,last_video_sync=null,timeline,timeline_entities={},video_ready=!1,video_paused=!0,initiated_play=!1,im_syncing=!1,idleMouseTimer,playback_rate=1,base_playback_rate=1,mouse_down_interrupted;document.body.onmouseup=function(){mouse_down_interrupted=!0};var shifted;
$(document).on("keyup keydown",function(m){can_edit()&&(shifted=m.shiftKey,"input"!=document.activeElement.localName&&("keydown"==m.type?m.ctrlKey?90==m.keyCode?undo():89==m.keyCode?redo():65==m.keyCode?(select_all(),m.preventDefault()):83==m.keyCode?my_user.logged_in&&tactic_name&&""!=tactic_name&&socket&&(socket.emit("store",room,tactic_name),alert('Tactic stored as: "'+tactic_name+'"'),m.preventDefault()):67==m.keyCode?copy():88==m.keyCode?cut():86==m.keyCode&&paste():32==m.keyCode&&"keydown"==
m.type&&video_layer&&can_edit()&&(toggle_play(),m.preventDefault()):"keyup"==m.type&&(46==m.keyCode?clear_selected():16==m.keyCode?"line_context"==active_context&&new_drawing&&on_line_end(m):34===m.keyCode?next_slide():33===m.keyCode&&prev_slide())))});function cut(){copy();clear_selected()}
function copy(){clipboard=[];for(var m in selected_entities){var a=selected_entities[m].container;selected_entities[m].container=null;clipboard.push(JSON.parse(JSON.stringify(selected_entities[m])));selected_entities[m].container=a}}
function paste(){if(0!=clipboard.length){deselect_all();var m=mouse_loc(),a=from_x_local(m.x),m=from_y_local(m.y);if(1<Math.abs(a)||1<Math.abs(m))a=m=0;var f=1,e=1,h;for(h in clipboard)f=Math.min(f,clipboard[h].y),e=Math.min(e,clipboard[h].x);var n=[];for(h in clipboard){var g=JSON.parse(JSON.stringify(clipboard[h]));g.uid=newUid();g.x=a+(g.x-e);g.y=m+(g.y-f);n.push(g);create_entity(g);snap_and_emit_entity(g);selected_entities.push(g);render_scene()}select_entities();undo_list.push(clone_action(["add",
n]))}}
function adjust_zoom(m){if(m.draw_zoom_level&&(adjust_all_zoom||"icon"==m.type||"text"==m.type||"background_text"==m.type)){var a=zoom_level/m.draw_zoom_level;switch(m.type){case "icon":case "note":m.container.scale.x=m.container.orig_scale[0]*a;m.container.scale.y=m.container.orig_scale[1]*a;redraw_circle(m);break;case "text":remove(m.uid);create_text2(m);break;case "background_text":remove(m.uid);create_background_text2(m);break;case "drawing":remove(m.uid);create_drawing2(m,1*DRAW_QUALITY/a,a);
break;case "curve":remove(m.uid);create_curve2(m,1*DRAW_QUALITY/a,a);break;case "line":remove(m.uid);create_line2(m,1*DRAW_QUALITY/a,a);break;case "rectangle":remove(m.uid);create_rectangle2(m,1*DRAW_QUALITY/a,a);break;case "circle":remove(m.uid);create_circle2(m,1*DRAW_QUALITY/a,a);break;case "polygon":remove(m.uid);create_polygon2(m,1*DRAW_QUALITY/a,a);break;case "area":remove(m.uid),create_area2(m,1*DRAW_QUALITY/a,a)}m.scale&&(m.container.scale.x=m.container.orig_scale[0]*m.scale[0],m.container.scale.y=
m.container.orig_scale[1]*m.scale[1])}}
function zoom(m,a,f,e){m=1+m*(a?1:-1);objectContainer.scale.x*=m;objectContainer.scale.y*=m;f[0]+=x_rel(background_sprite.x)/background_sprite.scale.x;f[1]+=y_rel(background_sprite.y)/background_sprite.scale.y;objectContainer.x-=x_abs(f[0]*(1-1/m)*objectContainer.scale.x*background_sprite.scale.x);objectContainer.y-=y_abs(f[1]*(1-1/m)*objectContainer.scale.y*background_sprite.scale.y);correct();zoom_level=1/objectContainer.scale.y;if(room_data)for(var h in room_data.slides[active_slide].entities)f=room_data.slides[active_slide].entities[h],
f.container&&f.draw_zoom_level&&adjust_zoom(f)}function focus_point(){if(align_left){var m=window.innerHeight/2;return[from_x_local((window.innerWidth-right_sidebar_width)/2),from_y_local(m)]}return[from_x_local(window.innerWidth/2),from_y_local(window.innerHeight/2)]}
function pan_zoom(m,a,f){m=zoom_level/m;objectContainer.scale.x*=m;objectContainer.scale.y*=m;m=focus_point();f-=m[1];objectContainer.x-=to_x_local_vect(a-m[0]);objectContainer.y-=to_y_local_vect(f);zoom_level=1/objectContainer.scale.y;$("#zoom_level").text((1/zoom_level).toFixed(2));correct();render_scene()}
function correct(){objectContainer.x=Math.min(0,objectContainer.x);objectContainer.y=Math.min(0,objectContainer.y);renderer.width*objectContainer.scale.x+objectContainer.x<renderer.view.width&&(objectContainer.x=Math.min(0,renderer.view.width-renderer.width*objectContainer.scale.x),0==objectContainer.x&&(objectContainer.scale.x=renderer.view.width/renderer.width));renderer.height*objectContainer.scale.y+objectContainer.y<renderer.view.height&&(objectContainer.y=Math.min(0,renderer.view.height-renderer.height*
objectContainer.scale.y),0==objectContainer.y&&(objectContainer.scale.y=renderer.view.height/renderer.height));objectContainer.scale.y!=objectContainer.scale.x&&(objectContainer.scale.x=Math.max(objectContainer.scale.x,objectContainer.scale.y),objectContainer.scale.y=Math.max(objectContainer.scale.x,objectContainer.scale.y));if(room_data)for(var m in room_data.slides[active_slide].entities)room_data.slides[active_slide].entities[m]&&"note"==room_data.slides[active_slide].entities[m].type&&align_note_text(room_data.slides[active_slide].entities[m]);
my_tracker&&on_track_move();render_scene()}var pan_state={};function on_pan(m){once_per_frame(pan_state,function(){var a=mouse_loc(),f=a.x-last_pan_loc[0],e=a.y-last_pan_loc[1];last_pan_loc=[a.x,a.y];objectContainer.x+=f;objectContainer.y+=e;correct()})}
function resize_renderer(m,a){video_layer&&(video_layer.width(m),video_layer.height(a));size_x=m;size_y=a;draw_canvas.width=m*DRAW_QUALITY;draw_canvas.height=a*DRAW_QUALITY;temp_draw_canvas.width=m*DRAW_QUALITY;temp_draw_canvas.height=a*DRAW_QUALITY;$(draw_canvas).css("width",""+m+"px");$(draw_canvas).css("height",""+a+"px");$(temp_draw_canvas).css("width",""+m+"px");$(temp_draw_canvas).css("height",""+a+"px");renderer.resize(m,a);$("#edit_window").css("width",""+m+"px");$("#edit_window").css("height",
""+a+"px");var f=background_sprite.texture.width/background_sprite.texture.height,e=Math.min(window.innerHeight*f,window.innerWidth-iface_width);background_sprite.x=align_left?0:(window.innerWidth-e)/2;background_sprite.y=0;change_background_dim(e,e/f);renderer.plugins.interaction.eventData.data&&(f=mouse_loc(),zoom(0,!0,[from_x_local(f.x),from_y_local(f.y)]));refresh_all_entities()}
function refresh_all_entities(){for(var m in room_data.slides[active_slide].entities){var a=room_data.slides[active_slide].entities[m];"background"!=a.type&&a.container&&(remove(a.uid,!0),create_entity(a))}}
window.onresize=function(){if(is_video_replay)iface_width=0,resize_renderer(window.innerWidth,window.innerHeight);else{var m=1;background_sprite.texture&&(m=background_sprite.texture.width/background_sprite.texture.height);var a=!1,f;$("#left_side_bar").length?(iface_width=LEFT_BAR_MIN_WIDTH+RIGHT_BAR_MIN_WIDTH,f=RIGHT_BAR_MIN_WIDTH):(f=iface_width=SINGLE_SIDE_BAR_MIN_WIDTH,a=!0);1<=(window.innerWidth-iface_width)/window.innerHeight&&!a?(align_left=!1,$("#left_side_bar").length&&($("#left_side_bar").css("position",
"relative"),$("#left_side_bar").css("top","")),$("#right_side_bar").css("position","relative"),$("#right_side_bar").css("top",""),$("#map_select_box").prependTo($("#map_select_section")),m=window.innerHeight,a=window.innerWidth,resize_renderer(a,m)):(align_left=!0,1.25*(window.innerWidth-f)>=window.innerHeight?(window.innerWidth-f>window.innerHeight?m=window.innerHeight:(a=window.innerWidth-f,m*=a),$("#left_side_bar").length&&($("#left_side_bar").css("position","absolute"),$("#left_side_bar").css("top",
""+m+"px")),$("#right_side_bar").css("position","relative"),$("#right_side_bar").css("top",""),$("#map_select_box").prependTo($(".left_column")),iface_width=f):(window.innerWidth>window.innerHeight?m=window.innerHeight:(a=window.innerWidth,m*=a),$("#left_side_bar").length&&($("#left_side_bar").css("position","absolute"),$("#left_side_bar").css("top",""+m+"px")),$("#right_side_bar").css("position","absolute"),$("#right_side_bar").css("top",""+m+"px"),iface_width=0),resize_renderer(window.innerWidth,
m));render_scene()}};function mouse_loc(){return JSON.parse(JSON.stringify(renderer.plugins.interaction.eventData.data.global))}function x_rel(m){return m*background_sprite.scale.x/background_sprite.height}function x_abs(m){return m*background_sprite.height/background_sprite.scale.x}function y_rel(m){return m*background_sprite.scale.y/background_sprite.height}function y_abs(m){return m*background_sprite.height/background_sprite.scale.y}
function to_x_local(m){return(m*background_sprite.height+background_sprite.x)*objectContainer.scale.x+objectContainer.x}function from_x_local(m){return((m-objectContainer.x)/objectContainer.scale.x-background_sprite.x)/background_sprite.height}function to_y_local(m){return(m*background_sprite.height+background_sprite.y)*objectContainer.scale.y+objectContainer.y}function from_y_local(m){return((m-objectContainer.y)/objectContainer.scale.y-background_sprite.y)/background_sprite.height}
function to_x_local_vect(m){return m*background_sprite.height*objectContainer.scale.x}function from_x_local_vect(m){return m/objectContainer.scale.x/background_sprite.height}function to_y_local_vect(m){return m*background_sprite.height*objectContainer.scale.y}function from_y_local_vect(m){return m/objectContainer.scale.y/background_sprite.height}function mouse_x_abs(m){return m}function mouse_y_abs(m){return m}function mouse_x_rel(m){return m/(background_sprite.height/background_sprite.scale.x)}
function mouse_y_rel(m){return m/(background_sprite.height/background_sprite.scale.y)}function is_video(m){return""!=get_video_type(m)}function get_video_type(m){for(var a=m.split(".").pop(),f=0;f<VIDEO_EXTENSIONS.length;f++)if(a.startsWith(VIDEO_EXTENSIONS[f]))return"video/"+VIDEO_EXTENSIONS[f];return-1!=m.toUpperCase().indexOf("YOUTUBE")?"video/youtube":-1!=m.toUpperCase().indexOf("VIMEO")?"video/vimeo":""}
function reset_background(){background_sprite.alpha=1;video_ready=!1;video_media&&video_media.setCurrentTime(0);video_player&&(video_player.pause(),video_player.remove());$("#video_player")&&$("#video_player").remove();video_layer=null;$("#left_detect").unbind("mouseenter");$("#right_detect").unbind("mouseenter");$("#left_side_bar").unbind("mouseleave");$("#right_side_bar").unbind("mouseleave");$("#left_side_bar").show();$("#right_side_bar").show();clearTimeout(idleMouseTimer)}var video_player,video_media;
function init_video_controls(){$("#left_detect").mouseenter(function(){$("#left_side_bar").show()});$("#right_detect").mouseenter(function(){$("#right_side_bar").show()});$("#left_side_bar").mouseleave(function(){$("#left_side_bar").hide()});$("#right_side_bar").mouseleave(function(){$("#right_side_bar").hide()});$("#left_side_bar").hide();$("#right_side_bar").hide()}
function start_syncing(){clearInterval(sync_event);im_syncing=!0;for(var m=0;5>m;m++)setTimeout(function(){var a=video_progress();socket.emit("sync_video",room,a,get_server_time())},2E3*m);sync_event=setInterval(function(){var a=video_progress();socket.emit("sync_video",room,a,get_server_time())},1E4)}
function play_video_controls(){$(".mejs-controls").mouseenter(function(){$(".mejs-controls").css("opacity",1)});$(".mejs-controls").mouseleave(function(){$(".mejs-controls").css("opacity",0)});$(".mejs-controls").css("opacity",0);can_edit()?$(".mejs-controls").show():$(".mejs-controls").hide()}function pause_video_controls(){$(".mejs-controls").unbind("mouseenter");$(".mejs-controls").unbind("mouseleave");$(".mejs-controls").css("opacity",1)}
function toggle_play(){if(background.is_video)if(video_paused){var m=video_progress();socket.emit("play_video",room,m,base_playback_rate);initiated_play=!0;play_video_controls();start_syncing()}else manual_pause=!0,video_player.pause(),pause_video_controls()}var ignore_jump=!1;
function init_video_triggers(){video_media.addEventListener("pause",function(m){manual_pause&&(clearInterval(sync_event),im_syncing=!1,video_paused=!0,socket.emit("pause_video",room,video_progress()),manual_pause=!1)});video_media.addEventListener("play",function(m){window.onresize();initiated_play?(start_syncing(),initiated_play=!1):stop_syncing();video_paused&&(video_player.pause(),video_media.currentTime=last_video_sync?last_video_sync[0]:0,video_player.pause())});video_media.addEventListener("ended",
function(m){im_syncing&&socket.emit("pause_video",room,0)});video_media.addEventListener("canplay",function(m){window.onresize()});video_media.addEventListener("timeupdate",function(m){progress=video_media.currentTime;progress_update=Date.now()});$(".mejs-playpause-button").unbind("click");$(".mejs-playpause-button").click(function(m){toggle_play();m.preventDefault();return!1});$(".mejs-time-rail").on("mousedown",function(){wait_for_seek(function(){socket.emit("seek_video",room,video_progress(),get_server_time());
video_paused||start_syncing();rebuild_timeline()})})}function wait_for_seek(m){var a=Date.now(),f=video_progress(),e=setInterval(function(){video_progress();.05<Math.abs(video_progress()-(f+(Date.now()-a)/1E3))&&(m(),clearInterval(e));1E4<Date.now()-a&&clearInterval(e)},5)}
function change_background_dim(m,a){var f=zoom_level,e;e=background_sprite.height;background_sprite.width=m;background_sprite.height=a;grid_layer.width=background_sprite.width/background_sprite.scale.x;grid_layer.height=background_sprite.height/background_sprite.scale.y;e=a/e;if(1!=e&&room_data)for(var h in room_data.slides[active_slide].entities){var n=room_data.slides[active_slide].entities[h];n.container&&(n.container.x*=e,n.container.y*=e,n.container.width*=e,n.container.height*=e)}room_data.slides[active_slide].pan_zoom?
(f=room_data.slides[active_slide].pan_zoom,pan_zoom(f[0],f[1],f[2])):(h=focus_point(),pan_zoom(f,h[0],h[1]));zoom_level=1/objectContainer.scale.y}function create_empty_background_texture(m,a,f){"undefined"==typeof f&&(f=1);var e=new PIXI.Graphics;e.beginFill(16777215,f);e.moveTo(0,0);e.lineTo(m,0);e.lineTo(m,a);e.lineTo(0,a);e.lineTo(0,0);e.endFill();return renderer.generateTexture(e)}
function set_background(m,a){if(""!=m.path)if(m.is_video){reset_background();background_sprite.texture=create_empty_background_texture(1920,1080,0);background=m;history[background.uid]=background;room_data.slides[active_slide].entities[m.uid]=m;add_custom_map(background.path);$("#wotbase_map_select_container").hide();$("#map_select_container").show();var f=get_video_type(m.path);video_layer=$("<video />",{id:"video_player",autoplay:!1,controls:!0});$("<source />",{type:f,src:m.path}).appendTo(video_layer);
video_layer.appendTo($("#video_div"));video_layer.mediaelementplayer({videoHeight:"100%",loop:!1,autoPlay:!1,enableAutosize:!0,alwaysShowControls:!0,speeds:"0.25 0.50 1.00 1.25 1.50 2.00".split(" "),defaultSpeed:"1.00",speedChar:"x",features:"playpause speed progress current duration tracks volume".split(" "),success:function(e,g,d){video_media=e;video_paused=!room_data.playing;video_player=d;"video/youtube"==f&&video_media.pluginApi.pauseVideo();init_video_controls();$(".mejs-controls").css("z-index",
9);$(".mejs-controls").css("position","fixed");$(".mejs-controls").css("left","0px");$(".mejs-controls").css("bottom","0px");$(".mejs-controls").css("height","26px");init_video_triggers();timeline=new FastPriorityQueue;video_ready=!0;room_data.playing?room_data.last_sync?handle_play(room_data.last_sync[0],Date.now()):handle_play(0,Date.now()):room_data.last_sync&&(video_media.setCurrentTime(room_data.last_sync[0]),video_player.pause());"youtube"==video_media.pluginType&&(e=video_media.pluginType,
video_player.options.speeds=video_media.pluginApi.getAvailablePlaybackRates().map(function(a){return a.toFixed(2)}),video_player.options.defaultSpeed="1.00",video_media.pluginType="native",video_player.buildspeed(d,d.controls,d.layers,d.media),$(".mejs-playpause-button").after($(".mejs-speed-button")),video_media.pluginType=e);playback_rate=base_playback_rate=1;$(".mejs-speed-button").find(".mejs-speed-selector").on("click",'input[type="radio"]',function(){var a=parseFloat($(this).attr("value"));
socket.emit("change_rate",room,a);set_playback_rate(a,a);start_syncing()});var c=!1;$(renderer.view).css("cursor","none");$(renderer.view).mousemove(function(a){c||($(renderer.view).css("cursor","default"),clearTimeout(idleMouseTimer),idleMouseTimer=setTimeout(function(){$(renderer.view).css("cursor","none");c=!0;setTimeout(function(){c=!1},200)},MOUSE_IDLE_HIDE_TIME))});socket.emit("request_sync",room);window.onresize();render_scene();a&&a(!0)}})}else{resources_loading++;var e;e=-1==m.path.indexOf("://")?
PIXI.Texture.fromImage(static_host+m.path):PIXI.Texture.fromImage(m.path);var h=function(){reset_background();background=m;history[background.uid]=background;background_sprite.texture=e;var f=$("#map_select").find('option[value="'+m.path+'"]').attr("data-grid");if(f){var g=new Image;g.crossOrigin="Anonymous";g.onload=function(){grid_layer.texture=new PIXI.Texture(new PIXI.BaseTexture(g))};g.src=image_host+f}room_data.slides[active_slide].entities[m.uid]=m;resources_loading--;0<$("#map_select option[value='"+
background.path+"']").length?($("#map_select").val(background.path).change(),$("#select_hd").prop("checked",!0),$("#map_select_container").show(),$("#wotbase_select_container").hide(),$("#new_minimap_select_container").hide()):0<$("#wotbase_select option[value='"+background.path+"']").length?($("#wotbase_select").val(background.path).change(),$("#select_wotbase").prop("checked",!0),$("#map_select_container").hide(),$("#wotbase_select_container").show(),$("#new_minimap_select_container").hide()):0<
$("#new_minimap_select option[value='"+background.path+"']").length?($("#new_minimap_select").val(background.path).change(),$("#select_new_minimap").prop("checked",!0),$("#map_select_container").hide(),$("#wotbase_select_container").hide(),$("#new_minimap_select_container").show()):(add_custom_map(background.path),$("#select_hd").prop("checked",!0),$("#map_select_container").show(),$("#wotbase_select_container").hide(),$("#new_minimap_select_container").hide());background.size_x&&background.size_y&&
0<background.size_x&&0<background.size_y?$("#map_size").text("("+background.size_x+" x "+background.size_y+")"):$("#map_size").text("");window.onresize();render_scene();a&&a(!0)};e.baseTexture.hasLoaded?h():(e.baseTexture.on("loaded",function(){h()}),e.baseTexture.on("error",function(e){alert("Image exists, but the host does not allow embedding. Try uploading your map to a service such as http://imgur.com.");resources_loading--;a&&a(!1)}))}else reset_background(),background=m,history[background.uid]=
background,$("#map_select").val(background.path).change(),$("#select_hd").prop("checked",!0),$("#map_select_container").show(),$("#wotbase_select_container").hide(),$("#new_minimap_select_container").hide(),background_sprite.texture=is_video_replay?create_empty_background_texture(1920,1080):create_empty_background_texture(1E3,1E3),window.onresize(),$("#map_size").text(""),render_scene(),a&&a(!0)}var context_before_drag,move_selected,drag_timeout,last_drag_position,last_drag_update,dragged_entity;
function on_drag_start(m){this==select_box&&(once_per_frame(select_box_move_state,function(){}),select_box.mousemove=void 0,select_box.touchmove=void 0,select_box.mouseover=void 0,select_box.mouseout=void 0,select_box.touchend=void 0);drag_delay_running=!0;drag_timeout&&clearTimeout(drag_timeout);_this=this;var a=m.data.getLocalPosition(background_sprite);last_mouse_location=[mouse_x_rel(a.x),mouse_y_rel(a.y)];mouse_down_interrupted=!1;a=0;if("ping_context"!=active_context||_this.entity&&"note"==
_this.entity.type){if("remove_context"==active_context||"eraser_context"==active_context){_this.entity&&(deselect_all(),remove(_this.entity.uid),undo_list.push(clone_action(["remove",[_this.entity]])),socket.emit("remove",room,_this.entity.uid,active_slide),"eraser_context"==active_context&&on_left_click(m));_this==select_box&&clear_selected();m.stopPropagation();return}"drag_context"!=active_context&&(context_before_drag=active_context);active_context="drag_context";m.stopPropagation()}else a=300;
drag_timeout=setTimeout(function(){if(mouse_down_interrupted)drag_delay_running=!1,deselect_all();else if(is_room_locked&&!my_user.role)_this.entity&&"note"==_this.entity.type&&(_this.mouseup=toggle_note,_this.touchend=toggle_note,_this.mouseupoutside=toggle_note,_this.touchendoutside=toggle_note);else{var a=mouse_loc();last_drag_update=Date.now();last_drag_position=[from_x_local(a.x),from_y_local(a.y)];dragged_entity=_this;objectContainer.buttonMode=!0;"drag_context"!=active_context&&(context_before_drag=
active_context);active_context="drag_context";_this.mouseup=on_drag_end;_this.touchend=on_drag_end;_this.mouseupoutside=on_drag_end;_this.touchendoutside=on_drag_end;_this.mousemove=on_drag_move;_this.touchmove=on_drag_move;$("html,body").css("cursor","pointer");move_selected=!1;if(_this.entity)for(var e in selected_entities){if(selected_entities[e].uid==_this.entity.uid){move_selected=!0;break}}else move_selected=!0;move_selected||deselect_all();for(e in selected_entities)selected_entities[e].origin_x=
selected_entities[e].x,selected_entities[e].origin_y=selected_entities[e].y,background_sprite.removeChild(selected_entities[e].container),background_sprite.addChild(selected_entities[e].container);_this.entity&&(_this.entity.origin_x=_this.entity.x,_this.entity.origin_y=_this.entity.y);drag_delay_running=!1;select_box&&(background_sprite.removeChild(select_box),background_sprite.addChild(select_box));render_scene()}},a)}
function toggle_note(m){this.entity.is_open=this.entity.is_open?!1:!0;align_note_text(this.entity)}function move_entity(m,a,f){m.container&&(a=m.container.x+x_abs(a),f=m.container.y+y_abs(f),drag_entity(m,m.x+x_rel(a-m.container.x),m.y+y_rel(f-m.container.y)))}function once_per_frame(m,a){m.cb=a;m.in_progress||(m.in_progress=!0,requestAnimationFrame(function(){m.in_progress=!1;m.cb()}))}
function limit_rate(m,a,f){clearTimeout(a.timeout);a.last_trigger||(a.last_trigger=Date.now());Date.now()-a.last_trigger>m?(f(),a.last_trigger=Date.now()):a.timeout=setTimeout(function(){f();a.last_trigger=Date.now()},m+5)}var drag_state={};
function on_drag_move(m){_this=this;once_per_frame(drag_state,function(){var a=m.data.getLocalPosition(background_sprite),a=[mouse_x_rel(a.x),mouse_y_rel(a.y)],f=a[0]-last_mouse_location[0],e=a[1]-last_mouse_location[1];if(move_selected)for(var h in selected_entities)move_entity(selected_entities[h],f,e);else move_entity(_this.entity,f,e);select_box&&(select_box.x+=x_abs(f),select_box.y+=y_abs(e));select_box&&(background_sprite.removeChild(select_box),background_sprite.addChild(select_box));last_mouse_location=
a;render_scene()})}
function on_drag_end(m){once_per_frame(drag_state,function(){});if(this.entity&&Math.abs(this.entity.origin_x-this.entity.x)<EPSILON&&Math.abs(this.entity.origin_y-this.entity.y)<EPSILON)"remove_context"==context_before_drag?(remove(this.entity.uid),undo_list.push(clone_action(["remove",[this.entity]])),socket.emit("remove",room,this.entity.uid,active_slide)):"note"==this.entity.type&&(toggle_note.call(this,m),deselect_all());else{m=["drag",[]];if(0<selected_entities.length)for(var a in selected_entities){var f=[selected_entities[a].origin_x,
selected_entities[a].origin_y];m[1].push([f,selected_entities[a].uid]);delete selected_entities[a].origin_x;delete selected_entities[a].origin_y;socket.emit("drag",room,selected_entities[a].uid,active_slide,selected_entities[a].x,selected_entities[a].y)}else f=[this.entity.origin_x,this.entity.origin_y],m[1].push([f,this.entity.uid]),delete this.entity.origin_x,delete this.entity.origin_y,socket.emit("drag",room,this.entity.uid,active_slide,this.entity.x,this.entity.y);undo_list.push(clone_action(m))}cancel_drag();
render_scene()}
function remove(m,a){var f=room_data.slides[active_slide].entities[m];if(f&&f.container&&(dragged_entity&&dragged_entity.entity&&dragged_entity.entity.uid==m&&cancel_drag(!0),"note"==f.type&&f.container.menu.remove(),background_sprite.removeChild(f.container),delete f.container,"icon"==f.type))try{var e=$('button[id*="'+room_data.slides[active_slide].entities[m].tank+'"]').find("span");e[0].innerHTML=parseInt(e[0].innerHTML)-1;e=$("#icon_context").find("span").first();e.text((parseInt(e.text())-1).toString())}catch(h){}for(f=
selected_entities.length;f--;)if(selected_entities[f].uid==m){selected_entities.splice(f,1);"drag_context"==active_context&&move_selected&&cancel_drag(!0);break}a||delete room_data.slides[active_slide].entities[m];select_box_dirty=!0;render_scene()}function move_tracker(m,a,f){var e=.1*a,h=.1*f,n=10,g=setInterval(function(){trackers[m]&&(trackers[m].x+=e,trackers[m].y+=h,trackers[m].container.x+=x_abs(e),trackers[m].container.y+=y_abs(h),render_scene());n--;0==n&&clearInterval(g)},15)}
var scene_dirty=!1;function render_scene(){scene_dirty=!0}function get_offset(){return offset}function get_server_time(){return Date.now()+offset}function get_local_time(m){return m-offset}var ping_container_atlas={},ping_texture_atlas={},active_pings=[];
function ping(m,a,f,e){var h;if(ping_container_atlas[f])h=ping_container_atlas[f];else{h=new PIXI.particles.ParticleContainer(500,{scale:!0,alpha:!0});ping_container_atlas[f]=h;var n=new PIXI.Sprite(ping_texture),n=PIXI.CanvasTinter.getTintedTexture(n,f);ping_texture_atlas[f]=new PIXI.Texture.fromCanvas(n);background_sprite.addChild(h)}f=new PIXI.Sprite(ping_texture_atlas[f]);f.anchor.set(.5);f.start_size=y_abs(.01)*(e/10)*zoom_level;f.height=f.start_size;f.width=f.start_size;f.x=x_abs(m);f.y=y_abs(a);
f.container=h;h.addChild(f);f.stop_time=Date.now()+PING_TIME;f.growth=5*f.height;render_scene();active_pings.push(f)}function update_pings(){var m=Date.now();active_pings=active_pings.filter(function(a){var f=a.stop_time-m,e=1-f/PING_TIME,h=a.start_size+e*a.growth;a.height=h;a.width=h;a.alpha=.5+.5*(1-e);if(0>=f)return a.container.removeChild(a),render_scene(),!1;render_scene();return!0})}
function setup_mouse_events(m,a){objectContainer.mouseup=a;objectContainer.touchend=a;objectContainer.mouseupoutside=a;objectContainer.touchendoutside=a;objectContainer.mousemove=m;objectContainer.touchmove=m}
function align_note_text(m){if(m.container)if(m.is_open){var a=$("#edit_window")[0].getBoundingClientRect(),f=a.left+to_x_local(m.x)+m.container.width*objectContainer.scale.x*background_sprite.scale.x,a=a.top+to_y_local(m.y);m.container.menu.attr("style","top:"+a+"px; left:"+f+"px; display:block; z-index:8")}else m.container.menu.css("visibility","hidden")}
var drawArrow=function(m,a,f,e,h,n,g,d,c,b){a*=b;f*=b;e*=b;h*=b;c*=1.2;n=[e-a,h-f];var k=Math.atan2(n[1],n[0]);g=Math.abs(c*b/Math.cos(d));var p=k+Math.PI+d;b=e+Math.cos(p)*g;p=h+Math.sin(p)*g;d=k+Math.PI-d;e+=Math.cos(d)*g;h+=Math.sin(d)*g;m.beginPath();m.moveTo(b,p);m.lineTo(a+c/3*n[0],f+c/3*n[1]);m.lineTo(e,h);m.quadraticCurveTo((b+a+e)/3,(p+f+h)/3,b,p);m.fill()};
function hexToRGBA(m,a){var f=parseInt(m.slice(1,3),16),e=parseInt(m.slice(3,5),16),h=parseInt(m.slice(5,7),16);return"rgba("+f+", "+e+", "+h+", "+a+")"}
function init_canvas_simple(m,a,f,e){f="#"+("00000"+(f|0).toString(16)).substr(-6);m.lineWidth=size_y/1E3*a*THICKNESS_SCALE;m.strokeStyle=f;m.fillStyle=f;m.shadowBlur=m.lineWidth/2;m.shadowColor="#000000";"setLineDash"in m&&("dashed"==e?(m.setLineDash([5*a,3*a]),m.lineJoin=m.lineCap="round"):"dotted"==e?(m.setLineDash([a,a]),m.lineJoin=m.lineCap="butt"):m.lineJoin=m.lineCap="round")}
function init_canvas(m,a,f,e,h,n,g){init_canvas_simple(m,a,f,e);f="#"+("00000"+(f|0).toString(16)).substr(-6);"undefined"!==typeof h&&(n="#"+("00000"+(n|0).toString(16)).substr(-6),a=hexToRGBA(n,h),m.fillStyle=a,("00000"+(n|0).toString(16)).substr(-6),f=hexToRGBA(f,g),m.strokeStyle=f)}function init_canvases(m,a,f,e,h,n){start_drawing();init_canvas(draw_context,m*DRAW_QUALITY,a,f,e,h,n);init_canvas(temp_draw_context,m*DRAW_QUALITY,a,f,e,h,n);draw_context.beginPath();temp_draw_context.beginPath()}
function can_edit(){return!is_room_locked||my_user.role}function t2o(m){return 1-m/100}var last_point;
function on_left_click(m){"drag_context"==active_context&&cancel_drag(!0);var a=mouse_loc();if(can_edit()){try{document.activeElement.blur()}catch(e){}if("drag_context"!=active_context)if("ping_context"!=active_context&&deselect_all(),"draw_context"==active_context){setup_mouse_events(on_draw_move,on_draw_end);m=from_x_local(a.x);var f=from_y_local(a.y);new_drawing={uid:newUid(),type:"drawing",x:m,y:f,scale:[1,1],color:draw_color,alpha:1,thickness:parseFloat(draw_thickness)*zoom_level,end:$("#draw_end_type").find(".active").attr("data-end"),
style:$("#draw_type").find(".active").attr("data-style"),path:[[0,0]],end_size:draw_end_size*zoom_level,draw_zoom_level:zoom_level};init_canvases(parseFloat(draw_thickness),new_drawing.color,new_drawing.style);point_buffer=[a.x,a.y];last_point=[a.x,a.y]}else"ruler_context"==active_context?(setup_mouse_events(on_ruler_move,on_ruler_end),init_canvases(.1,16777215,"full"),temp_draw_context.lineWidth=size_x/1E3*2*DRAW_QUALITY,temp_draw_context.strokeStyle="#FFFFFF",temp_draw_context.fillStyle="#FFFFFF",
m=22*DRAW_QUALITY,temp_draw_context.font=""+m+"px Arial",left_click_origin=[from_x_local(a.x),from_y_local(a.y)]):"line_context"==active_context?new_drawing||(setup_mouse_events(on_line_move,on_line_end),new_drawing={uid:newUid(),type:"line",x:from_x_local(a.x),y:from_y_local(a.y),scale:[1,1],color:line_color,alpha:1,thickness:parseFloat(line_thickness)*zoom_level,path:[[0,0]],end:$("#line_end_type").find(".active").attr("data-end"),style:$("#line_type").find(".active").attr("data-style"),end_size:line_end_size*
zoom_level,draw_zoom_level:zoom_level},init_canvases(parseFloat(line_thickness),new_drawing.color,new_drawing.style),draw_context.moveTo(a.x*DRAW_QUALITY,a.y*DRAW_QUALITY),just_activated=!0):"polygon_context"==active_context?new_drawing||(setup_mouse_events(on_line_move,on_polygon_end),new_drawing={uid:newUid(),type:"polygon",x:from_x_local(a.x),y:from_y_local(a.y),scale:[1,1],outline_thickness:polygon_outline_thickness*zoom_level,outline_color:polygon_outline_color,outline_opacity:t2o(polygon_outline_transparancy),
fill_color:polygon_fill_color,fill_opacity:t2o(polygon_fill_transparancy),alpha:1,path:[[0,0]],style:$("#polygon_type").find(".active").attr("data-style"),draw_zoom_level:zoom_level},init_canvases(polygon_outline_thickness,new_drawing.outline_color,new_drawing.style,new_drawing.fill_opacity,new_drawing.fill_color,new_drawing.outline_opacity),draw_context.moveTo(a.x*DRAW_QUALITY,a.y*DRAW_QUALITY),m="touchstart"==m.type?MIN_POLYGON_END_DISTANCE_TOUCH:MIN_POLYGON_END_DISTANCE,graphics=new PIXI.Graphics,
graphics.lineStyle(new_drawing.outline_thickness*THICKNESS_SCALE,new_drawing.outline_color,new_drawing.outline_opacity),graphics.moveTo(x_abs(from_x_local(a.x)),y_abs(from_y_local(a.y))),graphics.drawShape(new PIXI.Circle(x_abs(from_x_local(a.x)),y_abs(from_y_local(a.y)),size_y*m*zoom_level)),background_sprite.addChild(graphics),just_activated=!0,render_scene()):"curve_context"==active_context?new_drawing||(new_drawing={uid:newUid(),type:"curve",x:from_x_local(a.x),y:from_y_local(a.y),scale:[1,1],
color:curve_color,alpha:1,thickness:parseFloat(curve_thickness)*zoom_level,path:[[0,0]],end:$("#curve_end_type").find(".active").attr("data-end"),style:$("#curve_type").find(".active").attr("data-style"),end_size:curve_end_size*zoom_level,draw_zoom_level:zoom_level},point_buffer=[a.x,a.y],init_canvases(parseFloat(curve_thickness),new_drawing.color,new_drawing.style),draw_context.moveTo(a.x*DRAW_QUALITY,a.y*DRAW_QUALITY),setup_mouse_events(on_curve_move,on_curve_end),just_activated=!0):"area_context"==
active_context?new_drawing||(new_drawing={uid:newUid(),type:"area",x:from_x_local(a.x),y:from_y_local(a.y),scale:[1,1],outline_thickness:parseFloat(area_outline_thickness)*zoom_level,outline_color:area_outline_color,outline_opacity:t2o(area_outline_transparancy),fill_color:area_fill_color,fill_opacity:t2o(area_fill_transparancy),alpha:1,path:[[0,0]],style:$("#area_type").find(".active").attr("data-style"),draw_zoom_level:zoom_level},point_buffer=[a.x,a.y],init_canvases(parseFloat(area_outline_thickness),
new_drawing.outline_color,new_drawing.style,new_drawing.fill_opacity,new_drawing.fill_color,new_drawing.outline_opacity),draw_context.moveTo(a.x*DRAW_QUALITY,a.y*DRAW_QUALITY),m="touchstart"==m.type?MIN_POLYGON_END_DISTANCE_TOUCH:MIN_POLYGON_END_DISTANCE,graphics=new PIXI.Graphics,graphics.lineStyle(new_drawing.outline_thickness*THICKNESS_SCALE,new_drawing.outline_color,new_drawing.outline_opacity),graphics.moveTo(x_abs(from_x_local(a.x)),y_abs(from_y_local(a.y))),graphics.drawShape(new PIXI.Circle(x_abs(from_x_local(a.x)),
y_abs(from_y_local(a.y)),size_y*m*zoom_level)),background_sprite.addChild(graphics),setup_mouse_events(on_curve_move,on_area_end),just_activated=!0,render_scene()):"icon_context"==active_context?setup_mouse_events(void 0,on_icon_end):"eraser_context"==active_context?setup_mouse_events(on_eraser_move,on_eraser_end):"ping_context"==active_context?(drag_delay_running||deselect_all(),last_ping_time=new Date,setup_mouse_events(on_ping_move,on_ping_end)):"select_context"==active_context?(setup_mouse_events(on_select_move,
on_select_end),init_canvases(2,12303291,"dotted",.25,12303291,1),left_click_origin=[from_x_local(a.x),from_y_local(a.y)],deselect_all()):"text_context"==active_context?setup_mouse_events(void 0,on_text_end):"background_text_context"==active_context?setup_mouse_events(void 0,on_background_text_end):"rectangle_context"==active_context?new_drawing||(setup_mouse_events(on_rectangle_move,on_rectangle_end),left_click_origin=[from_x_local(a.x),from_y_local(a.y)],init_canvases(rectangle_outline_thickness,
rectangle_outline_color,$("#rectangle_type").find(".active").attr("data-style"),t2o(rectangle_fill_transparancy),rectangle_fill_color,t2o(rectangle_outline_transparancy)),just_activated=new_drawing=!0):"circle_context"==active_context?new_drawing||(setup_mouse_events(on_circle_move,on_circle_end),left_click_origin=[from_x_local(a.x),from_y_local(a.y)],init_canvases(circle_outline_thickness,circle_outline_color,$("#circle_type").find(".active").attr("data-style"),t2o(circle_fill_transparancy),circle_fill_color,
t2o(circle_outline_transparancy)),circle_draw_style=$("#circle_draw_style").find(".active").attr("data-draw_style"),temp_draw_context.save(),just_activated=new_drawing=!0):"track_context"==active_context?my_tracker?stop_tracking():(start_tracking(a),on_track_move(m)):"note_context"==active_context&&setup_mouse_events(void 0,on_note_end)}else setup_mouse_events(on_ruler_move,on_ruler_end),init_canvases(.1,16777215,"full"),temp_draw_context.lineWidth=size_x/1E3*2*DRAW_QUALITY,temp_draw_context.strokeStyle=
"#FFFFFF",temp_draw_context.fillStyle="#FFFFFF",m=22*DRAW_QUALITY,temp_draw_context.font=""+m+"px Arial",left_click_origin=[from_x_local(a.x),from_y_local(a.y)]}var eraser_state={};
function on_eraser_move(m){var a=mouse_loc();limit_rate(5,eraser_state,function(){renderer.plugins.interaction.processInteractive(a,objectContainer,function(a,e){if(e&&a.entity&&"background"!=a.entity.type){var f=a.entity;remove(f.uid);undo_list.push(clone_action(["remove",[f]]));socket.emit("remove",room,f.uid,active_slide)}},!0)})}function on_eraser_end(m){setup_mouse_events(void 0,void 0)}
function stop_tracking(){once_per_frame(track_state,function(){});setup_mouse_events(void 0,void 0);socket.emit("stop_track",room,my_tracker.uid);background_sprite.removeChild(my_tracker.container);my_tracker=void 0;render_scene()}
function start_tracking(m){setup_mouse_events(on_track_move);var a=$("#track_shape .active").attr("data-cursor"),f;f="dot"==a||"cursor"==a?.025:.05;my_tracker={uid:newUid(),shape:a,size:track_size/10*f,color:track_color,x:from_x_local(m.x),y:from_y_local(m.y),owner:my_user.id};last_track_position=[my_tracker.x,my_tracker.y];socket.emit("track",room,my_tracker);create_tracker(my_tracker)}
function on_note_end(m){setup_mouse_events(void 0,void 0);var a=m.data.getLocalPosition(background_sprite);m=mouse_x_rel(a.x);a=mouse_y_rel(a.y);m={uid:newUid(),type:"note",x:m,y:a,scale:[1,1],color:text_color,alpha:1,text:"",font_size:font_size,font:"Arial",height:zoom_level,draw_zoom_level:zoom_level};undo_list.push(clone_action(["add",[m]]));create_note(m);m.container.is_open=!0;align_note_text(m);snap_and_emit_entity(m)}
function create_note(m){var a=img_texture("note.png"),a=new PIXI.Sprite(a),f=a.width/a.height;a.height=x_abs(NOTE_SCALE)*m.height;a.width=a.height*f;a.x=x_abs(m.x);a.y=y_abs(m.y);m.container=a;m.container.entity=m;m.container.is_open=!1;m.container.menu=$('<div class="popover fade right in" role="tooltip"><h3 style="display: none;" class="popover-title"></h3><div class="popover-content"><textarea style="height:400px; width:300px;" id="note_box"></textarea><br /><span id="notification_area" style="float: left;" hidden>Saved</span><div style="float:right; padding:3px;"></div></div></div>');
$("#note_box",m.container.menu).val(m.text);is_room_locked&&!my_user.role&&($("textarea",m.container.menu).prop("readonly",!0),$("button",m.container.menu).hide());$("body").append(m.container.menu);$("#note_box",m.container.menu).on("blur",function(){can_edit()&&(m.text=$("#note_box",m.container.menu).val(),$("#notification_area",m.container.menu).show(),$("#notification_area",m.container.menu).fadeOut("slow"),snap_and_emit_entity(m))});align_note_text(m);init_dragging(m.container);background_sprite.addChild(m.container);
render_scene();a.texture.on("update",function(){render_scene()});room_data.slides[active_slide].entities[m.uid]=m}
function create_tracker(m){var a=img_texture(m.shape+".png");m.container=new PIXI.Sprite(a);m.container.tint=m.color;"cursor"!=m.shape&&m.container.anchor.set(.5);m.container.x=x_abs(m.x);m.container.y=y_abs(m.y);a=m.container.width/m.container.height;m.container.height=y_abs(m.size);m.container.width=m.container.height*a;trackers[m.uid]=m;background_sprite.addChild(trackers[m.uid].container);render_scene()}
function remove_tracker(m){background_sprite.removeChild(trackers[m].container);render_scene();delete trackers[m]}var last_track_update=Date.now(),count,track_timeout,track_state={};
function on_track_move(m){once_per_frame(track_state,function(){clearTimeout(track_timeout);var a=mouse_loc(),f=from_x_local(a.x),a=from_y_local(a.y);my_tracker.x=f;my_tracker.y=a;my_tracker.container.x=x_abs(f);my_tracker.container.y=y_abs(a);f=(last_track_position[0]-my_tracker.x)*(last_track_position[0]-my_tracker.x)+(last_track_position[1]-my_tracker.y)*(last_track_position[1]-my_tracker.y);render_scene();a=Date.now()-last_track_update;f>MIN_TRACK_MOVE_DISTANCE_SQ||50<a?(last_track_update=Date.now(),
0<Math.abs(my_tracker.x-last_track_position[0]+my_tracker.y-last_track_position[1])&&(socket.emit("track_move",room,my_tracker.uid,my_tracker.x-last_track_position[0],my_tracker.y-last_track_position[1]),last_track_position=[my_tracker.x,my_tracker.y])):track_timeout=setTimeout(function(){my_tracker&&(last_track_update=Date.now(),socket.emit("track_move",room,my_tracker.uid,my_tracker.x-last_track_position[0],my_tracker.y-last_track_position[1]),last_track_position=[my_tracker.x,my_tracker.y],render_scene())},
55)})}
function on_area_end(m){var a=mouse_loc(),f=a.x,e=a.y,h=Math.pow(new_drawing.x-from_x_local(f),2)+Math.pow(new_drawing.y-from_y_local(e),2),n="touchend"==m.type||"touchendoutside"==m.type?MIN_POLYGON_END_DISTANCE_TOUCH:MIN_POLYGON_END_DISTANCE;if(just_activated&&(just_activated=!1,h<EPSILON))return;h<n*n*zoom_level?(create_area2(new_drawing,DRAW_QUALITY),emit_entity(new_drawing),undo_list.push(clone_action(["add",[new_drawing]])),background_sprite.removeChild(graphics),render_scene(),stop_drawing(),setup_mouse_events(void 0,
void 0),new_drawing=null):(point_buffer.push(a.x,a.y),new_drawing.path.push([from_x_local(f)-new_drawing.x,from_y_local(e)-new_drawing.y]),on_curve_move(m))}var curve_state={},point_buffer=[];
function on_curve_move(m){once_per_frame(curve_state,function(){var a=mouse_loc(),f=a.x,e=a.y;temp_draw_context.clearRect(0,0,temp_draw_canvas.width*DRAW_QUALITY,temp_draw_canvas.height*DRAW_QUALITY);point_buffer.push(f,e);var h=smooth_draw(temp_draw_context,point_buffer,!1,DRAW_QUALITY);point_buffer.pop();point_buffer.pop();new_drawing.path.push([from_x_local(a.x)-new_drawing.x,from_y_local(a.y)-new_drawing.y]);draw_end(temp_draw_context,new_drawing,h[0],h[1],1/zoom_level,DRAW_QUALITY);new_drawing.path.pop();
last_point=[f,e]})}
function on_curve_end(m){var a=mouse_loc(),f=a.x,e=a.y,h=Math.pow(from_x_local(f)-new_drawing.x-new_drawing.path[new_drawing.path.length-1][0],2)+Math.pow(from_y_local(e)-new_drawing.y-new_drawing.path[new_drawing.path.length-1][1],2);if(just_activated&&(just_activated=!1,h<EPSILON))return;var n="touchend"==m.type||"touchendoutside"==m.type||"touchstart"==m.type||"touchstartoutside"==m.type?MIN_POLYGON_END_DISTANCE_TOUCH:MIN_POLYGON_END_DISTANCE;h<n*n*zoom_level?(create_curve2(new_drawing,DRAW_QUALITY),
emit_entity(new_drawing),undo_list.push(clone_action(["add",[new_drawing]])),background_sprite.removeChild(graphics),render_scene(),stop_drawing(),setup_mouse_events(void 0,void 0),new_drawing=null):(point_buffer.push(a.x,a.y),new_drawing.path.push([from_x_local(f)-new_drawing.x,from_y_local(e)-new_drawing.y]),background_sprite.removeChild(graphics),graphics=new PIXI.Graphics,graphics.lineStyle(new_drawing.thickness*THICKNESS_SCALE,new_drawing.color,1),graphics.moveTo(x_abs(from_x_local(a.x)),y_abs(from_y_local(a.y))),
graphics.drawShape(new PIXI.Circle(x_abs(from_x_local(a.x)),y_abs(from_y_local(a.y)),size_y*n*zoom_level)),background_sprite.addChild(graphics),render_scene(),on_curve_move(m))}
function on_polygon_end(m){try{var a=m.data.getLocalPosition(background_sprite),f=mouse_x_rel(a.x),e=mouse_y_rel(a.y),f=f-new_drawing.x,e=e-new_drawing.y}catch(g){}a=f*f+e*e;m="touchend"==m.type||"touchendoutside"==m.type?MIN_POLYGON_END_DISTANCE_TOUCH:MIN_POLYGON_END_DISTANCE;var h;h=1==new_drawing.path.length?[to_x_local(new_drawing.x),to_y_local(new_drawing.y)]:[to_x_local(new_drawing.path[new_drawing.path.length-2][0]+new_drawing.x),to_y_local(new_drawing.path[new_drawing.path.length-2][1]+new_drawing.y)];
var n=[to_x_local(f+new_drawing.x),to_y_local(e+new_drawing.y)];if(just_activated&&(h=Math.pow(h[0]-n[0],2)+Math.pow(h[1]-n[1],2),just_activated=!1,.01>h))return;a<m*m*zoom_level?(new_drawing.path.push([0,0]),create_polygon2(new_drawing,DRAW_QUALITY),emit_entity(new_drawing),undo_list.push(clone_action(["add",[new_drawing]])),background_sprite.removeChild(graphics),render_scene(),setup_mouse_events(void 0,void 0),stop_drawing(),new_drawing=null):(0!=new_drawing.path.length&&f==last(new_drawing.path)[0]&&
e==last(new_drawing.path)[1]||new_drawing.path.push([f,e]),draw_context.lineTo(n[0]*DRAW_QUALITY,n[1]*DRAW_QUALITY),draw_context.stroke())}function draw_shape(m,a,f,e,h,n){var g=new PIXI.Graphics;g.lineStyle(m*THICKNESS_SCALE,f,a);g.beginFill(h,e);g.drawShape(n);g.endFill();g.boundsPadding=1;return new PIXI.Sprite(renderer.generateTexture(g))}var ruler_state={};
function on_ruler_move(m){once_per_frame(ruler_state,function(){var a=m.data.getLocalPosition(background_sprite),f=background.size_x?background.size_x:0,e=background.size_y?background.size_y:0,h=to_x_local(left_click_origin[0]),n=to_y_local(left_click_origin[1]),g=to_x_local(mouse_x_rel(a.x)),d=to_y_local(mouse_y_rel(a.y)),c=Math.sqrt(Math.pow(h-g,2)+Math.pow(n-d,2));temp_draw_context.clearRect(0,0,temp_draw_canvas.width*DRAW_QUALITY,temp_draw_canvas.height*DRAW_QUALITY);temp_draw_context.beginPath();
temp_draw_context.moveTo(g*DRAW_QUALITY,d*DRAW_QUALITY);temp_draw_context.lineTo(h*DRAW_QUALITY,n*DRAW_QUALITY);temp_draw_context.moveTo((h+c)*DRAW_QUALITY,n*DRAW_QUALITY);temp_draw_context.arc(h*DRAW_QUALITY,n*DRAW_QUALITY,c*DRAW_QUALITY,0,2*Math.PI);temp_draw_context.stroke();h=(h+to_x_local(mouse_x_rel(a.x)))/2;n=(n+to_y_local(mouse_y_rel(a.y)))/2;a=Math.sqrt(Math.pow(f*(left_click_origin[0]-mouse_x_rel(a.x)),2)+Math.pow(e*(left_click_origin[1]-mouse_y_rel(a.y)),2));f="";f="lol"==game||"csgo"==
game?f+(Math.round(10*a)/10+"u"):"wows"==game?f+(Math.round(.01*a)/10+"km"):f+(Math.round(10*a)/10+"m");temp_draw_context.fillText(f,h*DRAW_QUALITY,n*DRAW_QUALITY)})}function on_ruler_end(m){setup_mouse_events(void 0,void 0);once_per_frame(ruler_state,function(){temp_draw_context.clearRect(0,0,temp_draw_canvas.width*DRAW_QUALITY,temp_draw_canvas.height*DRAW_QUALITY)})}var circle_state={};
function on_circle_move(m){once_per_frame(circle_state,function(){var a=mouse_loc(),f=from_x_local(a.x),e=from_y_local(a.y),h,m,g;"edge"==circle_draw_style?(h=(left_click_origin[0]+f)/2,m=(left_click_origin[1]+e)/2,g=Math.sqrt(Math.pow(to_x_local(left_click_origin[0])-to_x_local(f),2)+Math.pow(to_y_local(left_click_origin[1])-to_y_local(e),2)),g/=2):"radius"==circle_draw_style&&(h=left_click_origin[0],m=left_click_origin[1],g=Math.sqrt(Math.pow(to_x_local(left_click_origin[0])-to_x_local(f),2)+Math.pow(to_y_local(left_click_origin[1])-
to_y_local(e),2)));temp_draw_context.clearRect(0,0,temp_draw_canvas.width*DRAW_QUALITY,temp_draw_canvas.height*DRAW_QUALITY);temp_draw_context.beginPath();temp_draw_context.arc(to_x_local(h)*DRAW_QUALITY,to_y_local(m)*DRAW_QUALITY,g*DRAW_QUALITY,0,2*Math.PI);temp_draw_context.fill();temp_draw_context.stroke();"radius"==circle_draw_style&&background.size_x&&0<background.size_x&&background.size_y&&0<background.size_y&&(temp_draw_context.save(),temp_draw_context.strokeStyle="#FFFFFF",temp_draw_context.fillStyle=
"#FFFFFF",temp_draw_context.shadowBlur=0,temp_draw_context.beginPath(),temp_draw_context.moveTo(to_x_local(h)*DRAW_QUALITY,to_y_local(m)*DRAW_QUALITY),temp_draw_context.lineTo(to_x_local(f)*DRAW_QUALITY,to_y_local(e)*DRAW_QUALITY),temp_draw_context.stroke(),g=to_x_local((h+f)/2),a=to_y_local((m+e)/2),temp_draw_context.font=""+22*DRAW_QUALITY+"px Arial",f=Math.sqrt(Math.pow(background.size_x*(h-f),2)+Math.pow(background.size_y*(m-e),2)),temp_draw_context.strokeStyle="#000000",temp_draw_context.fillStyle=
"#FFFFFF",h="",h="lol"==game?h+(Math.round(10*f)/10+"u"):"wows"==game?h+(Math.round(.01*f)/10+"km"):h+(Math.round(10*f)/10+"m"),temp_draw_context.fillText(h,g*DRAW_QUALITY,a*DRAW_QUALITY),temp_draw_context.restore())})}
function on_circle_end(m){once_per_frame(circle_state,function(){});var a=mouse_loc();m=from_x_local(a.x);var a=from_y_local(a.y),f,e,h;"edge"==circle_draw_style?(f=(left_click_origin[0]+m)/2,e=(left_click_origin[1]+a)/2,h=Math.sqrt(Math.pow(to_x_local(left_click_origin[0])-to_x_local(m),2)+Math.pow(to_y_local(left_click_origin[1])-to_y_local(a),2)),h/=2):"radius"==circle_draw_style&&(f=left_click_origin[0],e=left_click_origin[1],h=Math.sqrt(Math.pow(to_x_local(left_click_origin[0])-to_x_local(m),
2)+Math.pow(to_y_local(left_click_origin[1])-to_y_local(a),2)));f={uid:newUid(),type:"circle",x:f,y:e,radius:from_y_local_vect(h),outline_thickness:circle_outline_thickness*zoom_level,outline_color:circle_outline_color,outline_opacity:t2o(circle_outline_transparancy),fill_opacity:t2o(circle_fill_transparancy),fill_color:circle_fill_color,alpha:1,style:$("#circle_type").find(".active").attr("data-style"),draw_zoom_level:zoom_level};"radius"==circle_draw_style&&background.size_x&&0<background.size_x&&
background.size_y&&0<background.size_y&&(f.draw_radius=[m-f.x,a-f.y]);new_drawing=void 0;create_circle2(f,DRAW_QUALITY);emit_entity(f);undo_list.push(clone_action(["add",[f]]));stop_drawing();setup_mouse_events(void 0,void 0)}var rectangle_state={};
function on_rectangle_move(m){once_per_frame(rectangle_state,function(){var a=m.data.getLocalPosition(background_sprite),f=Math.min(left_click_origin[0],mouse_x_rel(a.x)),e=Math.min(left_click_origin[1],mouse_y_rel(a.y)),h=Math.max(left_click_origin[0],mouse_x_rel(a.x)),a=Math.max(left_click_origin[1],mouse_y_rel(a.y));temp_draw_context.clearRect(0,0,temp_draw_canvas.width*DRAW_QUALITY,temp_draw_canvas.height*DRAW_QUALITY);temp_draw_context.fillRect(to_x_local(f)*DRAW_QUALITY,to_y_local(e)*DRAW_QUALITY,
(to_x_local(h)-to_x_local(f))*DRAW_QUALITY,(to_y_local(a)-to_y_local(e))*DRAW_QUALITY);temp_draw_context.strokeRect(to_x_local(f)*DRAW_QUALITY,to_y_local(e)*DRAW_QUALITY,(to_x_local(h)-to_x_local(f))*DRAW_QUALITY,(to_y_local(a)-to_y_local(e))*DRAW_QUALITY)})}
function on_rectangle_end(m){once_per_frame(rectangle_state,function(){});var a=m.data.getLocalPosition(background_sprite);m=Math.min(left_click_origin[0],mouse_x_rel(a.x));var f=Math.min(left_click_origin[1],mouse_y_rel(a.y)),e=Math.max(left_click_origin[0],mouse_x_rel(a.x)),a=Math.max(left_click_origin[1],mouse_y_rel(a.y));if(just_activated){var h=Math.pow(to_x_local(m-e),2)+Math.pow(to_y_local(f-a),2);just_activated=!1;if(.01>h)return}new_drawing=void 0;m={uid:newUid(),type:"rectangle",x:m,y:f,
width:e-m,height:a-f,outline_thickness:rectangle_outline_thickness*zoom_level,outline_color:rectangle_outline_color,outline_opacity:t2o(rectangle_outline_transparancy),fill_opacity:t2o(rectangle_fill_transparancy),fill_color:rectangle_fill_color,alpha:1,style:$("#rectangle_type").find(".active").attr("data-style"),draw_zoom_level:zoom_level};create_rectangle2(m,DRAW_QUALITY);emit_entity(m);undo_list.push(clone_action(["add",[m]]));stop_drawing();setup_mouse_events(void 0,void 0)}
function on_ping_move(m){limit_rate(60,drag_state,function(){var a=Date.now();if(!(10>a-last_ping_time)){var f=mouse_loc(),e=from_x_local(f.x),f=from_y_local(f.y);last_ping_time=a;ping(e,f,ping_color,ping_size);socket.emit("ping_marker",room,e,f,ping_color,ping_size)}})}
function on_ping_end(m){limit_rate(60,drag_state,function(){});var a=mouse_loc();m=from_x_local(a.x);a=from_y_local(a.y);ping(m,a,ping_color,ping_size);socket.emit("ping_marker",room,m,a,ping_color,ping_size);setup_mouse_events(void 0,void 0)}var select_state={};
function on_select_move(m){once_per_frame(select_state,function(){var a=m.data.getLocalPosition(background_sprite),f=Math.min(left_click_origin[0],mouse_x_rel(a.x)),e=Math.min(left_click_origin[1],mouse_y_rel(a.y)),h=Math.max(left_click_origin[0],mouse_x_rel(a.x)),a=Math.max(left_click_origin[1],mouse_y_rel(a.y));temp_draw_context.clearRect(0,0,temp_draw_canvas.width*DRAW_QUALITY,temp_draw_canvas.height*DRAW_QUALITY);temp_draw_context.fillRect(to_x_local(f)*DRAW_QUALITY,to_y_local(e)*DRAW_QUALITY,
(to_x_local(h)-to_x_local(f))*DRAW_QUALITY,(to_y_local(a)-to_y_local(e))*DRAW_QUALITY);temp_draw_context.strokeRect(to_x_local(f)*DRAW_QUALITY,to_y_local(e)*DRAW_QUALITY,(to_x_local(h)-to_x_local(f))*DRAW_QUALITY,(to_y_local(a)-to_y_local(e))*DRAW_QUALITY)})}
function on_select_end(m){once_per_frame(select_state,function(){temp_draw_context.clearRect(0,0,temp_draw_canvas.width*DRAW_QUALITY,temp_draw_canvas.height*DRAW_QUALITY)});setup_mouse_events(void 0,void 0);var a,f,e;e=mouse_loc();m=Math.min(from_x_local(e.x),left_click_origin[0]);a=Math.min(from_y_local(e.y),left_click_origin[1]);f=Math.max(from_x_local(e.x),left_click_origin[0])-m;e=Math.max(from_y_local(e.y),left_click_origin[1])-a;for(var h in room_data.slides[active_slide].entities)if(room_data.slides[active_slide].entities.hasOwnProperty(h)&&
room_data.slides[active_slide].entities[h].container){var n=room_data.slides[active_slide].entities[h].container,g,d,c;g=x_rel(n.width);d=y_rel(n.height);c=x_rel(n.x)-g*n.anchor.x;n=y_rel(n.y)-d*n.anchor.y;m<c&&a<n&&m+f>c+g&&a+e>n+d&&selected_entities.push(room_data.slides[active_slide].entities[h])}select_entities();undo_list.push(clone_action(["select",selected_entities,previously_selected_entities]));render_scene()}
function measure_text(m){return[x_rel(m.container.width),x_rel(m.container.height)]}
function select_box_mousemove(m,a,f,e,h,n,g){once_per_frame(select_box_move_state,function(){var d=mouse_loc();d.x=x_abs(from_x_local(d.x));d.y=y_abs(from_y_local(d.y));var c=Math.abs((d.x-a)/e),b=Math.abs((d.y-f)/h),k;for(k in selected_entities){var m=selected_entities[k];n||(m.container.scale.x=c*m.container.start_scale[0],m.container.x=(m.container.x_orig-a)*c+a);g||(m.container.scale.y=b*m.container.start_scale[1],m.container.y=(m.container.y_orig-f)*b+f)}n||(select_box.width=Math.abs(a-d.x),
select_box.left_x=Math.min(a,d.x),select_box.x=select_box.left_x+select_box.width/2);g||(select_box.height=Math.abs(f-d.y),select_box.upper_y=Math.min(f,d.y),select_box.y=select_box.upper_y+select_box.height/2);render_scene()});m.stopPropagation()}
function select_box_mouseup(m,a,f,e,h,n,g){once_per_frame(select_box_move_state,function(){});setup_mouse_events(void 0,void 0);var d=mouse_loc();d.x=x_abs(from_x_local(d.x));d.y=y_abs(from_y_local(d.y));e=Math.abs((d.x-a)/e);h=Math.abs((d.y-f)/h);var c=["drag",[]],b;for(b in selected_entities){var k=selected_entities[b],p=[1,1];k.scale&&(p=[k.scale[0],k.scale[1]]);c[1].push([[k.x,k.y,[p[0],p[1]]],k.uid]);var r=k.x,q=k.y;n||(r=x_rel((k.container.x_orig-a)*e+a-k.container.x_orig)+k.x,p[0]=e*k.container.start_scale[0]/
k.container.orig_scale[0]);g||(q=y_rel((k.container.y_orig-f)*h+f-k.container.y_orig)+k.y,p[1]=h*k.container.start_scale[1]/k.container.orig_scale[1]);k.container.x=k.container.x_orig;k.container.y=k.container.y_orig;drag_entity(k,r,q,p);socket.emit("drag",room,k.uid,active_slide,r,q,p)}undo_list.push(clone_action(c));select_box.mouseover=on_select_over;select_box.mousemove=on_selectbox_move;select_box.touchmove=on_selectbox_move;n||(select_box.width=Math.abs(a-d.x),select_box.left_x=Math.min(a,d.x),
select_box.x=select_box.left_x+select_box.width/2);g||(select_box.height=Math.abs(f-d.y),select_box.upper_y=Math.min(f,d.y),select_box.y=select_box.upper_y+select_box.height/2);render_scene();m.stopPropagation()}
function prepare_resize(m,a,f,e,h,n,g){for(var d in selected_entities){var c=selected_entities[d];c.container.x_orig=c.container.x;c.container.y_orig=c.container.y;c.container.start_scale=[c.container.scale.x,c.container.scale.y]}background_sprite.removeChild(rotate_arrow0);background_sprite.removeChild(rotate_arrow1);background_sprite.removeChild(rotate_arrow2);background_sprite.removeChild(rotate_arrow3);setup_mouse_events(function(b){select_box_mousemove(b,a,f,e,h,n,g)},function(b){select_box_mouseup(b,
a,f,e,h,n,g)});select_box.mouseover=void 0;select_box.mousemove=void 0;select_box.touchmove=void 0;m.stopPropagation()}var select_box_move_state={};
function on_selectbox_move(m){once_per_frame(select_box_move_state,function(){var a=mouse_loc();a.x=x_abs(from_x_local(a.x));a.y=y_abs(from_y_local(a.y));a.x-=select_box.left_x;a.y-=select_box.upper_y;a.x/=select_box.width;a.y/=select_box.height;var f=y_abs(ROTATE_ARROW_MARGIN)*zoom_level,e=f/select_box.width,f=f/select_box.height,h=select_box.left_x,n=select_box.upper_y,g=h+select_box.width,d=n+select_box.height;a.x<0-e||a.x>1+e||a.y<0-f||a.y>1+f?(on_select_out(m),m&&m.stopPropagation()):(e=Math.min(e,
.25),f=Math.min(f,.25),a.x<e?(a.y<f?($("html,body").css("cursor","nw-resize"),objectContainer.mousedown=function(a){prepare_resize(a,g,d,select_box.width,select_box.height,!1,!1)}):a.y>1-f?($("html,body").css("cursor","sw-resize"),objectContainer.mousedown=function(a){prepare_resize(a,g,n,select_box.width,select_box.height,!1,!1)}):($("html,body").css("cursor","w-resize"),objectContainer.mousedown=function(a){prepare_resize(a,g,0,select_box.width,select_box.height,!1,!0)}),select_box.mousedown=objectContainer.mousedown,
select_box.touchstart=objectContainer.touchstart):a.x>1-e?(a.y<f?($("html,body").css("cursor","ne-resize"),objectContainer.mousedown=function(a){prepare_resize(a,h,d,select_box.width,select_box.height,!1,!1)}):a.y>1-f?($("html,body").css("cursor","se-resize"),objectContainer.mousedown=function(a){prepare_resize(a,h,n,select_box.width,select_box.height,!1,!1)}):($("html,body").css("cursor","e-resize"),objectContainer.mousedown=function(a){prepare_resize(a,h,0,select_box.width,select_box.height,!1,
!0)}),select_box.mousedown=objectContainer.mousedown,select_box.touchstart=objectContainer.touchstart):a.y<f?($("html,body").css("cursor","n-resize"),objectContainer.mousedown=function(a){prepare_resize(a,0,d,select_box.width,select_box.height,!0,!1)},select_box.mousedown=objectContainer.mousedown,select_box.touchstart=objectContainer.touchstart):a.y>1-f?($("html,body").css("cursor","s-resize"),objectContainer.mousedown=function(a){prepare_resize(a,0,n,select_box.width,select_box.height,!0,!1)},select_box.mousedown=
objectContainer.mousedown,select_box.touchstart=objectContainer.touchstart):($("html,body").css("cursor","move"),select_box.mousedown=on_drag_start,select_box.touchstart=on_drag_start,objectContainer.mousedown=on_left_click))});m&&m.stopPropagation()}function on_select_over(m){select_box.mousemove=on_selectbox_move;select_box.touchmove=on_selectbox_move;select_box.mouseout=on_select_out;select_box.touchend=on_select_out}
function on_select_out(m){once_per_frame(select_box_move_state,function(){});$("html,body").css("cursor","default");select_box.mousemove=void 0;select_box.touchmove=void 0;select_box.mousedown=void 0;select_box.touchstart=void 0;objectContainer.mousedown=on_left_click;select_box.mouseout=void 0;select_box.touchend=void 0}function make_resizable(m){m.interactive=!0;m.draggable=!0;m.mouseover=on_select_over;m.mousedown=on_drag_start;m.touchstart=on_drag_start}
function redraw_select_box(){if(select_box)if(select_box.rotation=0,0<selected_entities.length){var m=99999,a=-99999,f=99999,e=-99999,h;for(h in selected_entities){var n=selected_entities[h].container,g,d,c;d=-n.rotation;g=Math.abs(n.width*Math.cos(d))+Math.abs(n.height*Math.sin(d));d=Math.abs(n.width*Math.sin(d))+Math.abs(n.height*Math.cos(d));c=n.x-n.anchor.x*g;n=n.y-n.anchor.y*d;m=Math.min(c,m);f=Math.min(n,f);a=Math.max(c+g,a);e=Math.max(n+d,e)}select_center=[x_rel(m+(a-m)/2),y_rel(f+(e-f)/2)];
select_box.left_x=m;select_box.upper_y=f;select_box.width=a-m;select_box.height=e-f;select_box.x=m+select_box.width/2;select_box.y=f+select_box.height/2;rotate_arrow0.x=m+select_box.width+rotate_arrow0.width/2+y_abs(ROTATE_ARROW_MARGIN)*zoom_level;rotate_arrow0.y=f+select_box.height/2;rotate_arrow1.x=m+select_box.width/2;rotate_arrow1.y=f-rotate_arrow1.width/2-y_abs(ROTATE_ARROW_MARGIN)*zoom_level;rotate_arrow2.x=m-rotate_arrow2.width/2-y_abs(ROTATE_ARROW_MARGIN)*zoom_level;rotate_arrow2.y=f+select_box.height/
2;rotate_arrow3.x=m+select_box.width/2;rotate_arrow3.y=f+rotate_arrow3.width/2+select_box.height+y_abs(ROTATE_ARROW_MARGIN)*zoom_level;background_sprite.removeChild(rotate_arrow0);background_sprite.removeChild(rotate_arrow1);background_sprite.removeChild(rotate_arrow2);background_sprite.removeChild(rotate_arrow3);background_sprite.addChild(rotate_arrow0);background_sprite.addChild(rotate_arrow1);background_sprite.addChild(rotate_arrow2);background_sprite.addChild(rotate_arrow3);background_sprite.removeChild(select_box);
background_sprite.addChild(select_box)}else remove_select_box();select_box_dirty=!1}
function start_rotate_selection(m,a){once_per_frame(drag_state,function(){});objectContainer.buttonMode=!0;setup_mouse_events(rotate_selection.bind(void 0,this,m),stop_rotate_selection.bind(void 0,this,m));var f=a.data.getLocalPosition(background_sprite);last_mouse_location=[mouse_x_rel(f.x),mouse_y_rel(f.y)];for(var e in selected_entities)f=room_data.slides[active_slide].entities[selected_entities[e].uid].container,f.x_orig=f.x,f.y_orig=f.y,f.rotation_orig=f.rotation;background_sprite.removeChild(rotate_arrow0);
background_sprite.removeChild(rotate_arrow1);background_sprite.removeChild(rotate_arrow2);background_sprite.removeChild(rotate_arrow3);background_sprite.addChild(this);a.stopPropagation()}
function rotate_selection(m,a,f){once_per_frame(drag_state,function(){var e=f.data.getLocalPosition(background_sprite),e=[mouse_x_rel(e.x),mouse_y_rel(e.y)],h=e[1]-last_mouse_location[1];m.x+=x_abs(e[0]-last_mouse_location[0]);m.y+=y_abs(h);a=Math.atan2(-(e[1]-select_center[1]),e[0]-select_center[0])-a;var h=Math.sin(-a),n=Math.cos(-a),g;for(g in selected_entities){var d=room_data.slides[active_slide].entities[selected_entities[g].uid].container;d.x=d.x_orig;d.y=d.y_orig;d.x-=x_abs(select_center[0]);
d.y-=y_abs(select_center[1]);var c=d.x;d.x=d.x*n-d.y*h;d.y=c*h+d.y*n;d.x+=x_abs(select_center[0]);d.y+=y_abs(select_center[1]);d.rotation=d.rotation_orig-a}select_box.rotation=-a;last_mouse_location=e;render_scene()})}
function stop_rotate_selection(m,a,f){once_per_frame(drag_state,function(){});objectContainer.buttonMode=!1;setup_mouse_events(void 0,void 0);f=f.data.getLocalPosition(background_sprite);f=[mouse_x_rel(f.x),mouse_y_rel(f.y)];var e=f[1]-last_mouse_location[1];m.x+=x_abs(f[0]-last_mouse_location[0]);m.y+=y_abs(e);a=Math.atan2(-(f[1]-select_center[1]),f[0]-select_center[0])-a;m=Math.sin(-a);f=Math.cos(-a);var e=["drag",[]],h;for(h in selected_entities){var n=room_data.slides[active_slide].entities[selected_entities[h].uid],
g=n.container,g=room_data.slides[active_slide].entities[selected_entities[h].uid].container;g.x=g.x_orig;g.y=g.y_orig;g.x-=x_abs(select_center[0]);g.y-=y_abs(select_center[1]);var d=g.x;g.x=g.x*f-g.y*m;g.y=d*m+g.y*f;g.x+=x_abs(select_center[0]);g.y+=y_abs(select_center[1]);d=[1,1];n.scale&&(d=[n.scale[0],n.scale[1]]);var c=0;n.rotation&&(c=n.rotation);e[1].push([[n.x,n.y,[d[0],d[1]],c],n.uid]);d=g.x-g.x_orig;c=g.y-g.y_orig;g.x=g.x_orig;g.y=g.y_orig;n.rotation||(n.rotation=0);g=(n.rotation+a)%(2*Math.PI);
socket.emit("drag",room,n.uid,active_slide,x_rel(x_abs(n.x)+d),y_rel(y_abs(n.y)+c),n.scale,g);drag_entity(n,x_rel(x_abs(n.x)+d),y_rel(y_abs(n.y)+c),n.scale,g)}undo_list.push(clone_action(e));select_box_dirty=!0;render_scene()}
function select_entities(){remove_select_box();var m=99999,a=-99999,f=99999,e=-99999,h;for(h in selected_entities){var n=room_data.slides[active_slide].entities[selected_entities[h].uid].container,g,d,c;d=-n.rotation;g=Math.abs(n.width*Math.cos(d))+Math.abs(n.height*Math.sin(d));d=Math.abs(n.width*Math.sin(d))+Math.abs(n.height*Math.cos(d));c=n.x-n.anchor.x*g;n=n.y-n.anchor.y*d;m=Math.min(x_rel(c),m);f=Math.min(y_rel(n),f);a=Math.max(x_rel(c)+x_rel(g),a);e=Math.max(y_rel(n)+y_rel(d),e);room_data.slides[active_slide].entities[selected_entities[h].uid].container.alpha=
select_alpha}if(0<selected_entities.length){select_center=[m+(a-m)/2,f+(e-f)/2];h=new PIXI.Rectangle(0,0,x_abs(a-m),y_abs(e-f),5);select_box=draw_select_box(h);select_box.anchor.x=.5;select_box.anchor.y=.5;h=x_abs(m);g=y_abs(f);select_box.left_x=h;select_box.upper_y=g;select_box.x=h+x_abs(a-m)/2;select_box.y=g+y_abs(e-f)/2;make_resizable(select_box);var b=img_texture("rotate.png"),m=b.width/b.height,k=y_abs(ROTATE_ARROW_SCALE)*zoom_level,p=k*m,m=function(a,c,d){var e=new PIXI.Sprite(b);e.anchor.x=
.5;e.anchor.y=.5;e.width=p;e.height=k;e.interactive=!0;e.buttonMode=!0;e.draggable=!0;e.mousedown=start_rotate_selection.bind(e,d);e.touchstart=start_rotate_selection.bind(e,d);e.rotation=-d;e.x=a;e.y=c;background_sprite.addChild(e);return e};rotate_arrow0=m(h+select_box.width+p/2+y_abs(ROTATE_ARROW_MARGIN)*zoom_level,g+select_box.height/2,0);rotate_arrow1=m(h+select_box.width/2,g-p/2-y_abs(ROTATE_ARROW_MARGIN)*zoom_level,Math.PI/2);rotate_arrow2=m(h-p/2-y_abs(ROTATE_ARROW_MARGIN)*zoom_level,g+select_box.height/
2,Math.PI);rotate_arrow3=m(h+select_box.width/2,g+p/2+select_box.height+y_abs(ROTATE_ARROW_MARGIN)*zoom_level,-Math.PI/2);background_sprite.addChild(select_box)}render_scene()}function draw_select_box(m){var a=new PIXI.Graphics;a.lineStyle(1*zoom_level,16777215,.2);a.beginFill(16777215,.2);a.drawShape(m);a.endFill();return new PIXI.Sprite(renderer.generateTexture(a))}
function select_all(){previously_selected_entities=selected_entities;selected_entities=[];for(var m in room_data.slides[active_slide].entities)room_data.slides[active_slide].entities.hasOwnProperty(m)&&room_data.slides[active_slide].entities[m].container&&selected_entities.push(room_data.slides[active_slide].entities[m]);select_entities();undo_list.push(clone_action(["select",selected_entities,previously_selected_entities]))}
function remove_select_box(){once_per_frame(select_box_move_state,function(){});select_box&&(select_box.mousedown=void 0,select_box.touchstart=void 0,select_box.mousemove=void 0,select_box.touchmove=void 0,select_box.mouseup=void 0,select_box.touchend=void 0,select_box.mouseout=void 0,select_box.mouseover=void 0,select_box.mouseupoutside=void 0,select_box.touchendoutside=void 0,objectContainer.mousedown=on_left_click,background_sprite.removeChild(select_box),background_sprite.removeChild(rotate_arrow0),
background_sprite.removeChild(rotate_arrow1),background_sprite.removeChild(rotate_arrow2),background_sprite.removeChild(rotate_arrow3),select_box=void 0,render_scene());$("html,body").css("cursor","default")}function deselect_all(){remove_select_box();previously_selected_entities=selected_entities;for(var m in selected_entities)selected_entities[m].container.filters=void 0,selected_entities[m].container.alpha=selected_entities[m].alpha;selected_entities=[]}
var INTERPOLATION_RESOLUTION=25,INTERPOLATION_TENSION=.5,INTERPOLATION_LOOKBACK=10;function smooth_draw(m,a,f,e){a=getCurvePoints(a,INTERPOLATION_TENSION,INTERPOLATION_RESOLUTION,f);m.beginPath();m.moveTo(a[0]*e,a[1]*e);for(f=2;f<a.length;f+=2)m.lineTo(a[f]*e,a[f+1]*e);m.stroke();m=a[a.length-2]-a[a.length-20];e=a[a.length-1]-a[a.length-19];f=Math.sqrt(Math.pow(m,2)+Math.pow(e,2));return[[a[a.length-2]-m/f,a[a.length-1]-e/f],[a[a.length-2],a[a.length-1]]]}var draw_state={},point_buffer=[];
function on_draw_move(m){once_per_frame(draw_state,function(){var a=mouse_loc(),f=last_point[0]*MOUSE_DRAW_SMOOTHING+(1-MOUSE_DRAW_SMOOTHING)*a.x,e=last_point[1]*MOUSE_DRAW_SMOOTHING+(1-MOUSE_DRAW_SMOOTHING)*a.y;new_drawing.path.push([from_x_local(f)-new_drawing.x,from_y_local(e)-new_drawing.y]);temp_draw_context.clearRect(0,0,temp_draw_canvas.width*DRAW_QUALITY,temp_draw_canvas.height*DRAW_QUALITY);point_buffer.push(f,e,a.x,a.y);smooth_draw(temp_draw_context,point_buffer,!1,DRAW_QUALITY);point_buffer.pop();
point_buffer.pop();new_drawing.path.push([from_x_local(a.x)-new_drawing.x,from_y_local(a.y)-new_drawing.y]);draw_end_path(temp_draw_context,new_drawing);new_drawing.path.pop();last_point=[f,e]})}
function on_draw_end(m){once_per_frame(draw_state,function(){});m=mouse_loc();new_drawing.path.push([from_x_local(m.x)-new_drawing.x,from_y_local(m.y)-new_drawing.y]);create_drawing2(new_drawing,DRAW_QUALITY);emit_entity(new_drawing);undo_list.push(clone_action(["add",[new_drawing]]));temp_draw_context.clearRect(0,0,temp_draw_canvas.width*DRAW_QUALITY,temp_draw_canvas.height*DRAW_QUALITY);temp_draw_context.beginPath();setup_mouse_events(void 0,void 0);new_drawing=null}
function drawRotatedImage(m,a,f){m.save();m.translate(a.width/2,a.height/2);m.rotate(f);m.translate(-(a.width/2),-(a.height/2));m.drawImage(a,0,0);m.restore()}function draw_end_path(m,a){if(a.path.length>=ARROW_LOOKBACK){var f=Math.max(0,a.path.length-ARROW_LOOKBACK),f=[to_x_local(a.x+a.path[f][0]),to_y_local(a.y+a.path[f][1])],e=[to_x_local(a.x+a.path[a.path.length-1][0]),to_y_local(a.y+a.path[a.path.length-1][1])];draw_end(m,a,f,e,1/zoom_level,DRAW_QUALITY)}}
function draw_end(m,a,f,e,h,n){var g=size_y/1E3*10*h;a.end_size&&(g=size_y/1E3*a.end_size*h);m.stroke();m.beginPath();"arrow"==a.end?draw_arrow(m,f,e,g,n):"T"==a.end&&draw_T(m,f,e,g,n)}function draw_arrow(m,a,f,e,h){var n=f[0]-a[0];a=f[1]-a[1];l=Math.sqrt(Math.pow(n,2)+Math.pow(a,2));n/=l;a/=l;drawArrow(m,f[0],f[1],f[0]+n,f[1]+a,3,1,Math.PI/8,e*ARROW_SCALE2,h)}
function draw_T(m,a,f,e,h){e*=TEND_SCALE2;var n=f[0]-a[0];a=f[1]-a[1];l=Math.sqrt(Math.pow(n,2)+Math.pow(a,2));n/=l;a/=l;a=-a;m.stroke();var g=m.getLineDash();m.setLineDash([]);m.beginPath();m.moveTo((f[0]-e*a)*h,(f[1]-e*n)*h);m.lineTo((f[0]+e*a)*h,(f[1]+e*n)*h);m.stroke();m.setLineDash(g)}function init_shape_canvas(m,a,f,e){void 0===f&&(f=1);init_canvas(m,a.outline_thickness*f,a.outline_color,a.style,a.fill_opacity,a.fill_color,a.outline_opacity)}
function canvas2container2(m,a,f,e,h){m=PIXI.Texture.fromCanvas(a);m=new PIXI.Sprite(m);h.container=m;m.texture.baseTexture.source.src=h.uid;m.hitArea=new PIXI.TransparencyHitArea.create(m,!1);init_dragging(m);m.entity=h;room_data.slides[active_slide].entities[h.uid]=h;return!0}
function draw_entity(m,a,f,e,h){("00000"+(m.color|0).toString(16)).substr(-6);var n=background_sprite.height/background_sprite.scale.y;m.draw_zoom_level&&(a/=m.draw_zoom_level);f=background_sprite.height/renderer.view.height*a*f/background_sprite.scale.y;e=20+e*f;var g=[];if(0<m.path.length){for(var d=9999,c=9999,b=-9999,k=-9999,p=0;p<m.path.length;p++){var r=m.path[p][0],q=m.path[p][1],d=Math.min(d,r),c=Math.min(c,q),b=Math.max(b,r),k=Math.max(k,q);g.push(n*r*a,n*q*a)}if("curve"==m.type||"area"==
m.type)e+=Math.max(b-d,k-c)*n*a*.3;b=Math.ceil(n*(b-d)*a+e);k=Math.ceil(n*(k-c)*a+e);r=document.createElement("canvas");r.width=b;r.height=k;for(var q=r.getContext("2d"),t=-d*n*a+e/2,n=-c*n*a+e/2,p=0;p<g.length;p+=2)g[p]+=t,g[p+1]+=n;h(q,g,a,f);canvas2container2(q,r,b,k,m);m.container.height/=a;m.container.width/=a;m.container.x=x_abs(m.x+d)-e/2/a;m.container.y=y_abs(m.y+c)-e/2/a;m.container.orig_scale=[m.container.scale.x,m.container.scale.y];background_sprite.addChild(m.container);render_scene()}}
function create_drawing2(m,a,f){a||(a=1);f||(f=1);var e=m.thickness;m.end_size&&(e=2*m.end_size);draw_entity(m,a,f,e,function(a,e,f,d){init_canvas_simple(a,m.thickness*d,m.color,m.style);f=smooth_draw(a,e,!1,1);if(m.end){if(m.path.length>=ARROW_LOOKBACK){var c=Math.max(0,m.path.length-ARROW_LOOKBACK);f[0]=[e[2*c],e[2*c+1]]}draw_end(a,m,f[0],f[1],d,1)}})}
function create_curve2(m,a,f){a||(a=1);f||(f=1);var e=m.thickness;m.end_size&&(e=2*m.end_size);draw_entity(m,a,f,e,function(a,e,f,d){init_canvas_simple(a,m.thickness*d,m.color,m.style);e=smooth_draw(a,e,!1,1);m.end&&draw_end(a,m,e[0],e[1],d,1)})}
function create_line2(m,a,f){a||(a=1);f||(f=1);var e=m.thickness;m.end_size&&(e=2*m.end_size);draw_entity(m,a,f,e,function(a,e,f,d){init_canvas_simple(a,m.thickness*d,m.color,m.style);a.moveTo(e[0],e[1]);for(f=2;f<e.length;f+=2)a.lineTo(e[f],e[f+1]);a.stroke();draw_end(a,m,[e[e.length-4],e[e.length-3]],[e[e.length-2],e[e.length-1]],d,1)})}
function create_area2(m,a,f){a||(a=1);f||(f=1);var e=m.outline_thickness;m.path[m.path.length-1]==[0,0]&&m.path.pop();draw_entity(m,a,f,e,function(a,e,f,d){init_shape_canvas(a,m,d,f);smooth_draw(a,e,!0,1);a.fill()})}function create_polygon2(m,a,f){a||(a=1);f||(f=1);draw_entity(m,a,f,m.outline_thickness,function(a,f,n,g){init_shape_canvas(a,m,g,n);a.moveTo(f[0],f[1]);for(n=2;n<f.length;n+=2)a.lineTo(f[n],f[n+1]);a.lineTo(f[0],f[1]);a.stroke();a.fill()})}
function create_rectangle2(m,a,f){a||(a=1);f||(f=1);var e=m.outline_thickness,h=background_sprite.height/background_sprite.scale.y;m.draw_zoom_level&&(a/=m.draw_zoom_level);f=background_sprite.height/renderer.view.height*a*f/background_sprite.scale.y;var e=20+e*f,n=Math.ceil(h*m.width*a+e),g=Math.ceil(h*m.height*a+e),d=document.createElement("canvas");d.width=n;d.height=g;var c=d.getContext("2d");init_shape_canvas(c,m,f,a);c.fillRect(e/2,e/2,h*m.width*a,h*m.height*a);c.strokeRect(e/2,e/2,h*m.width*
a,h*m.height*a);canvas2container2(c,d,n,g,m);m.container.x=x_abs(m.x)-e/2/a;m.container.y=y_abs(m.y)-e/2/a;m.container.width/=a;m.container.height/=a;m.container.orig_scale=[m.container.scale.x,m.container.scale.y];background_sprite.addChild(m.container);render_scene()}
function create_circle2(m,a,f){a||(a=1);f||(f=1);var e=m.outline_thickness,h=background_sprite.height/background_sprite.scale.y;m.draw_zoom_level&&(a/=m.draw_zoom_level);var n=background_sprite.height/renderer.view.height*a*f/background_sprite.scale.y,e=20+e*n;f=Math.ceil(2*h*m.radius*a+e);var g=Math.ceil(2*h*m.radius*a+e),d=document.createElement("canvas");d.width=f;d.height=g;var c=d.getContext("2d");init_shape_canvas(c,m,n,a);to_x_local_vect(m.radius);var b=h*m.radius*a+e/2;c.beginPath();c.arc(b,
b,h*m.radius*a,0,2*Math.PI);c.fill();c.stroke();if(m.draw_radius){c.strokeStyle="#FFFFFF";c.fillStyle="#FFFFFF";c.beginPath();c.moveTo(b,b);c.lineTo(b+h*a*m.draw_radius[0],b+h*a*m.draw_radius[1]);c.stroke();var k=b+h*a*m.draw_radius[0]/2,b=b+h*a*m.draw_radius[1]/2;c.font=""+22*n+"px Arial";n=Math.sqrt(Math.pow(background.size_x*m.draw_radius[0],2)+Math.pow(background.size_y*m.draw_radius[1],2));c.strokeStyle="#000000";c.fillStyle="#FFFFFF";var p="",p="lol"==game?p+(Math.round(10*n)/10+"u"):"wows"==
game?p+(Math.round(.01*n)/10+"km"):p+(Math.round(10*n)/10+"m");c.fillText(p,k,b)}canvas2container2(c,d,f,g,m);m.container.x=x_abs(m.x)-h*m.radius-e/2/a;m.container.y=y_abs(m.y)-h*m.radius-e/2/a;m.container.width/=a;m.container.height/=a;m.container.orig_scale=[m.container.scale.x,m.container.scale.y];background_sprite.addChild(m.container);render_scene()}
function start_drawing(){draw_context.clearRect(0,0,draw_canvas.width*DRAW_QUALITY,draw_canvas.height*DRAW_QUALITY);temp_draw_context.clearRect(0,0,temp_draw_canvas.width*DRAW_QUALITY,temp_draw_canvas.height*DRAW_QUALITY);"setLineDash"in temp_draw_context&&temp_draw_context.setLineDash([]);"setLineDash"in draw_context&&draw_context.setLineDash([]);$(temp_draw_canvas).show();$(draw_canvas).show()}function stop_drawing(){$(temp_draw_canvas).hide();$(draw_canvas).hide()}
function snap_and_emit_entity(m){move_entity(m,0,0);emit_entity(m);render_scene()}function update_timeline(m){if(m.start_time){for(var a=m.start_time;timeline_entities[a];)a+=EPSILON;timeline.add(a);timeline_entities[a]=m;for(a=m.end_time;timeline_entities[a];)a+=EPSILON;timeline.add(a);timeline_entities[a]=m}}
function rebuild_timeline(m){timeline=new FastPriorityQueue;timeline_entities={};for(var a in room_data.slides[active_slide].entities)room_data.slides[active_slide].entities.hasOwnProperty(a)&&room_data.slides[active_slide].entities[a].container&&(update_timeline(room_data.slides[active_slide].entities[a]),remove(a,!0))}
function progress_timeline(){if(!timeline.isEmpty())for(var m=video_progress(),a=timeline.peek();m>=a;){a=timeline_entities[a];video_progress()>=a.end_time?a.container&&remove(a.uid,!0):a.start_time<=m&&(a.container||create_entity(a));timeline.poll();if(timeline.isEmpty())break;a=timeline.peek()}}
function emit_entity(m){var a=m.container;background.is_video&&(m.start_time=video_progress(),m.end_time=video_progress()+delay,update_timeline(m));m.container=void 0;socket.emit("create_entity",room,m,active_slide);room_data.slides[active_slide].z_top++;m.z_index=room_data.slides[active_slide].z_top;m.container=a;set_anchor(m.container,.5,.5);render_scene()}
function on_icon_end(m){setup_mouse_events(void 0,void 0);var a=m.data.getLocalPosition(background_sprite);m=icon_color;selected_icon_no_color&&(m=16777215);var f=icon_size*icon_extra_scale*ICON_SCALE,f=f*zoom_level,e=mouse_x_rel(a.x)-f/2,a=mouse_y_rel(a.y)-f/2;m={uid:newUid(),type:"icon",tank:selected_icon,x:e,y:a,size:f,color:m,alpha:1,label:$("#icon_label").val(),label_font_size:label_font_size*zoom_level,label_color:"#ffffff",label_font:"Arial",label_pos:label_position,label_background:$("#label_background").get(0).checked,
draw_zoom_level:zoom_level};selected_icon_circle_radius&&(m.circle=selected_icon_circle_radius);m.label_background&&(m.label_color="#000000");undo_list.push(clone_action(["add",[m]]));create_icon(m,snap_and_emit_entity)}
function on_text_end(m){var a=$("#text_tool_text").val();setup_mouse_events(void 0,void 0);if(""!=a){var f=m.data.getLocalPosition(background_sprite);m=mouse_x_rel(f.x);f=mouse_y_rel(f.y);a={uid:newUid(),type:"text",x:m,y:f,scale:[1,1],color:text_color,alpha:1,text:a,font_size:font_size*zoom_level,font:"Arial",draw_zoom_level:zoom_level};undo_list.push(clone_action(["add",[a]]));current_text_element=a;create_text2(a);snap_and_emit_entity(a)}}
function on_background_text_end(m){setup_mouse_events(void 0,void 0);var a=m.data.getLocalPosition(background_sprite);m=mouse_x_rel(a.x);a=mouse_y_rel(a.y);m={uid:newUid(),type:"background_text",x:m,y:a,scale:[1,1],color:background_text_color,alpha:1,text:$("#text_tool_background_text").val(),font_size:background_font_size*zoom_level*1.2,font:"Arial",draw_zoom_level:zoom_level};undo_list.push(clone_action(["add",[m]]));create_background_text2(m);snap_and_emit_entity(m)}var line_state={};
function on_line_move(m){once_per_frame(line_state,function(){var a=m.data.getLocalPosition(background_sprite),f;f=0==new_drawing.path.length?[to_x_local(new_drawing.x),to_y_local(new_drawing.y)]:[to_x_local(new_drawing.path[new_drawing.path.length-1][0]+new_drawing.x),to_y_local(new_drawing.path[new_drawing.path.length-1][1]+new_drawing.y)];a=[to_x_local(mouse_x_rel(a.x)),to_y_local(mouse_y_rel(a.y))];temp_draw_context.clearRect(0,0,temp_draw_canvas.width*DRAW_QUALITY,temp_draw_canvas.height*DRAW_QUALITY);
temp_draw_context.beginPath();temp_draw_context.moveTo(f[0]*DRAW_QUALITY,f[1]*DRAW_QUALITY);temp_draw_context.lineTo(a[0]*DRAW_QUALITY,a[1]*DRAW_QUALITY);temp_draw_context.stroke();draw_end(temp_draw_context,new_drawing,f,a,1/zoom_level,DRAW_QUALITY)})}
function on_line_end(m){once_per_frame(line_state,function(){});try{var a=mouse_loc(),f=from_x_local(a.x)-new_drawing.x,e=from_y_local(a.y)-new_drawing.y;0!=new_drawing.path.length&&f==last(new_drawing.path)[0]&&e==last(new_drawing.path)[1]||new_drawing.path.push([f,e]);shifted?(temp_draw_context.clearRect(0,0,temp_draw_canvas.width*DRAW_QUALITY,temp_draw_canvas.height*DRAW_QUALITY),draw_context.clearRect(0,0,draw_canvas.width*DRAW_QUALITY,draw_canvas.height*DRAW_QUALITY),draw_context.lineTo(a.x*
DRAW_QUALITY,a.y*DRAW_QUALITY),draw_context.stroke()):(create_line2(new_drawing,DRAW_QUALITY),emit_entity(new_drawing),undo_list.push(clone_action(["add",[new_drawing]])),setup_mouse_events(void 0,void 0),stop_drawing(),new_drawing=null)}catch(h){}render_scene()}
CanvasRenderingContext2D.prototype.roundRect=function(m,a,f,e,h){f<2*h&&(h=f/2);e<2*h&&(h=e/2);this.beginPath();this.moveTo(m+h,a);this.arcTo(m+f,a,m+f,a+e,h);this.arcTo(m+f,a+e,m,a+e,h);this.arcTo(m,a+e,m,a,h);this.arcTo(m,a,m+f,a,h);this.closePath();return this};
function create_text_sprite(m,a,f,e,h,n,g){void 0===g&&(g="");var d=document.createElement("canvas"),c=objectContainer.scale.y,b=d.getContext("2d"),k=TEXT_QUALITY;b.font=g+" "+Math.round(2*f*c*k)+"px "+e;b.textBaseline="top";for(var p=b.measureText(m);p.width>MAX_CANVAS_SIZE;)k/=2,b.font=g+" "+Math.round(2*f*c*k)+"px "+e,p=b.measureText(m);var p=b.measureText(m),r=f*c*k*2.7,q=.1*r,t=.1*r,w=.2*r;d.height=r+2*t;h?(d.width=p.width+2*w+2*q,b.fillStyle="#ffffff",b.lineWidth=q,b.roundRect(q/2,q/2,p.width+
2*w,r,4*t),b.fill(),b.stroke()):d.width=p.width;b.fillStyle=a;b.font=g+" "+Math.round(2*f*c*k)+"px "+e;b.textBaseline="middle";n&&(b.shadowColor="black",b.shadowOffsetX=k,b.shadowOffsetY=k,b.shadowBlur=5);h?b.fillText(m,w,d.height/2):b.fillText(m,0,d.height/2);m=PIXI.Texture.fromCanvas(d);m=new PIXI.Sprite(m);a=m.width/m.height;m.height=Math.round(2*f*c)/objectContainer.scale.x;m.width=m.height*a;m.x=0;m.y=0;return m}
function create_text2(m){var a="#"+("00000"+(m.color|0).toString(16)).substr(-6),a=create_text_sprite(m.text,a,TEXT_SCALE*m.font_size,m.font,!1,!0),f=a.width/a.height;a.height=x_abs(m.font_size/390);a.width=a.height*f;a&&(m.container=a,a.x=x_abs(m.x),a.y=y_abs(m.y),background_sprite.addChild(a),a.texture.baseTexture.source.src=m.uid,init_dragging(a),a.entity=m,room_data.slides[active_slide].entities[m.uid]=m,render_scene())}
function create_background_text2(m){var a="#"+("00000"+(m.color|0).toString(16)).substr(-6),a=create_text_sprite(m.text,a,BACKGROUND_TEXT_SCALE*m.font_size,m.font,!0,!1),f=a.width/a.height;a.height=x_abs(m.font_size/420);a.width=a.height*f;a&&(m.container=a,a.x=x_abs(m.x),a.y=y_abs(m.y),background_sprite.addChild(a),a.texture.baseTexture.source.src=m.uid,init_dragging(a),a.entity=m,room_data.slides[active_slide].entities[m.uid]=m,render_scene())}
function nearestPow2(m){return Math.pow(2,Math.round(Math.log(m)/Math.log(2)))}
function draw_circle(m){var a=1/zoom_level,f=y_abs(m.circle/background.size_y),e=m.color,h=.3*f*a,n=2*f*a+h,g=2*f*a+h,d=document.createElement("canvas");d.width=n;d.height=g;n=d.getContext("2d");init_canvas(n,1*a,e,0,.2,e,1);n.arc(f*a+h/2,f*a+h/2,f*a,0,2*Math.PI);n.fill();n.stroke();f=PIXI.Texture.fromCanvas(d);f=new PIXI.Sprite(f);f.width/=m.container.scale.y*a;f.height/=m.container.scale.y*a;f.anchor.x=.5;f.anchor.y=.5;return f}
function redraw_circle(m){if(m.circle&&(m.container.circle_container&&(m.container.removeChild(m.container.circle_container),m.container.circle_container=null),0<(background.size_y?background.size_y:0))){var a=draw_circle(m);m.container.addChild(a);m.container.circle_container=a}}
function create_icon_cont(m,a){var f=new PIXI.Sprite(a);f.tint=m.color;var e=f.width/f.height;m.container=f;m.container.x=x_abs(m.x);m.container.y=y_abs(m.y);f.height=x_abs(m.size);f.width=f.height*e;set_anchor(f,.5,.5);if(m.label&&""!=m.label){var e=create_text_sprite(m.label,m.label_color,m.label_font_size*x_abs(.0013)/m.container.scale.y,m.label_font,m.label_background,!m.label_background,m.label_font_modifier),h=m.label_pos;h||(h="pos_bottom");m.container.addChild(e);var n=f.width/f.scale.x,f=
f.height/f.scale.y;"pos_bottom"==h?(e.x-=e.width/2,e.y+=f/2):"pos_top"==h?(e.x-=e.width/2,e.y-=e.height+f/2):"pos_left"==h?(e.x-=e.width+n/2,e.y-=e.height/2):"pos_right"==h?(e.x+=n/2,e.y-=e.height/2):"pos_top_left"==h?(e.x-=e.width+n/2,e.y-=f/2+e.height/2):"pos_top_right"==h?(e.x+=n/2,e.y-=f/2+e.height/2):"pos_bottom_left"==h?e.x-=e.width+n/2:"pos_bottom_right"==h&&(e.x+=n/2)}redraw_circle(m);m.container.entity=m;m.container.alpha=m.alpha;init_dragging(m.container);background_sprite.addChild(m.container);
render_scene();room_data.slides[active_slide].entities[m.uid]=m}
function create_icon(m,a){try{var f=$('button[id*="'+m.tank+'"]').find("span");f[0].innerHTML=parseInt(f[0].innerHTML)+1;f=$("#icon_counter");f.text((parseInt(f.text())+1).toString())}catch(g){}var f=m.tank,e=m.tank.slice(-3);"png"!=e&&"jpg"!=e&&(f+=".png");var h=img_texture(f);resources_loading++;var n=function(){create_icon_cont(m,h);a&&a(m);resources_loading--};if(h.baseTexture.hasLoaded)n();else h.baseTexture.on("loaded",function(){m.container||n()})}
function init_dragging(m){dragging_enabled?make_draggable(m):make_undraggable(m);m.orig_scale=[m.scale.x,m.scale.y]}function make_draggable(m){m.interactive=!0;m.buttonMode=!0;m.draggable=!0;m.mousedown=on_drag_start;m.touchstart=on_drag_start}function make_undraggable(m){m.interactive=!1;m.buttonMode=!1;m.draggable=!1;delete m.mousedown;delete m.touchstart}function set_anchor(m,a,f){var e=a-m.anchor.x,h=f-m.anchor.y;m.anchor.x=a;m.anchor.y=f;m.x+=e*m.width;m.y+=h*m.height}
function create_entity(m){room_data.slides[active_slide].entities[m.uid]&&remove(m.uid);"background"==m.type?set_background(m):"icon"==m.type?create_icon(m):"drawing"==m.type?create_drawing2(m,DRAW_QUALITY):"curve"==m.type?create_curve2(m,DRAW_QUALITY):"line"==m.type?create_line2(m,DRAW_QUALITY):"text"==m.type?create_text2(m):"background_text"==m.type?create_background_text2(m):"note"==m.type?create_note(m):"rectangle"==m.type?create_rectangle2(m,DRAW_QUALITY):"circle"==m.type?create_circle2(m,DRAW_QUALITY):
"polygon"==m.type?create_polygon2(m,DRAW_QUALITY):"area"==m.type&&create_area2(m,DRAW_QUALITY);m.container&&(m.scale&&(m.container.scale.x=m.container.orig_scale[0]*m.scale[0],m.container.scale.y=m.container.orig_scale[1]*m.scale[1]),m.container.anchor&&set_anchor(m.container,.5,.5),m.rotation&&(m.container.rotation=-m.rotation),adjust_zoom(m),background.is_video&&update_timeline(m))}
function update_username(m){""!=m&&m!=my_user.name&&(my_user.name=m,socket.emit("update_user",room,my_user));m=$("#"+my_user.id).find("input");m.attr("placeholder",my_user.name);m.val("")}
function add_user(m){my_user_id==m.id&&(my_user=m);if(m.id in userlist){var a=$("#"+m.id);m.id==my_user_id?a.find("input").attr("placeholder",m.name):a.text(m.name)}else m.id==my_user_id?(a="<div class='btn' style='text-align:left;' id='"+m.id+"'><input maxlength='30' type='text' placeholder='"+escapeHtml(m.name)+"'></div>",$("#userlist").prepend(a),a=$("#userlist").find("input"),a.on("blur",function(){update_username(this.value)}),a.onkeypress=function(a){a||(a=window.event);keyCode=a.keyCode||a.which;
"13"==keyCode&&update_username(this.value)}):(a="<button class='btn' style='text-align:left;' data-toggle='tooltip' title='Click to toggle this user&#39;s permission.' id='"+m.id+"'>"+escapeHtml(m.name)+"</button>",$("#userlist").append(a));userlist[m.id]=m;m.role?"owner"==m.role?$("#"+m.id).css("background-color","lime"):"driver"==m.role&&$("#"+m.id).css("background-color","yellow"):$("#"+m.id).css("background-color","#EEEEEE");m.id==my_user_id&&update_my_user();$("#user_count").text(Object.keys(userlist).length.toString())}
function update_my_user(){my_user.logged_in?($("#store_tactic_popover").show(),tactic_name&&""!=tactic_name&&$("#save").show(),$("#sign_in_text").text(my_user.name.substring(0,9)),$("#login_dropdown").removeClass("btn-warning"),$("#login_dropdown").addClass("btn-success")):($("#store_tactic_popover").hide(),$("#save").hide());update_lock()}
function update_lock(){var m=$("#lock div");is_room_locked?m.removeClass("icon-unlock").addClass("icon-lock"):m.removeClass("icon-lock").addClass("icon-unlock");if(is_room_locked&&!my_user.role){$(".mejs-controls").hide();$(".left_column").hide();$("#can_not_edit").show();$("#disable_dragging").hide();make_slides_unsortable();$("#map_select_box").hide();for(var a in room_data.slides[active_slide].entities)room_data.slides[active_slide].entities[a]&&"note"==room_data.slides[active_slide].entities[a].type&&
room_data.slides[active_slide].entities[a].container&&($("textarea",room_data.slides[active_slide].entities[a].container.menu).prop("readonly",!0),$("button",room_data.slides[active_slide].entities[a].container.menu).hide());my_tracker&&stop_tracking();"ping_context"==active_context&&(objectContainer.mousemove=void 0)}else for(a in $(".mejs-controls").show(),$(".left_column").show(),make_slides_sortable(),$("#can_not_edit").hide(),$("#disable_dragging").show(),$("#map_select_box").show(),room_data.slides[active_slide].entities)room_data.slides[active_slide].entities[a]&&
"note"==room_data.slides[active_slide].entities[a].type&&room_data.slides[active_slide].entities[a].container&&($("textarea",room_data.slides[active_slide].entities[a].container.menu).prop("readonly",!1),$("button",room_data.slides[active_slide].entities[a].container.menu).show());"owner"!=my_user.role&&is_room_locked?($("#store_tactic_popover").hide(),$("#save").hide(),$("#export_tab_button").hide()):(my_user.logged_in?($("#store_tactic_popover").show(),tactic_name&&""!=tactic_name&&$("#save").show()):
($("#store_tactic_popover").hide(),$("#save").hide()),$("#export_tab_button").show());"owner"==my_user.role?($("#lock").show(),$("#nuke_room").show(),$("#stop_present").prop("disabled",!1),$("#lock_camera").show()):($("#lock").hide(),$("#nuke_room").hide(),$("#lock_camera").hide(),$("#stop_present").prop("disabled",!0));update_slide_buttons()}function remove_user(m){$("#"+m).remove();delete userlist[m];$("#user_count").text(Object.keys(userlist).length.toString())}
function escapeHtml(m){return m&&"string"==typeof m?m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):""}function chat(m,a){$("#chat_tab_button").effect("pulsate",{times:1},1E3);m=escapeHtml(m);m=m.split(":");$("#chat_box").append('<div class="chatmsg"><b style="color:'+a+';">'+m[0]+"</b>: "+m.slice(1).join(":")+"<br/></div>");$("#chat_box").scrollTop($("#chat_box")[0].scrollHeight)}
function supports_color_input(){var m=document.createElement("input"),a,f=document.documentElement;m.setAttribute("type","color");if(a="text"!==m.type)m.value=":)",m.style.cssText="position:absolute;visibility:hidden;",f.appendChild(m),f.offsetWidth,a=":)"!=m.value,f.removeChild(m);return a}
function initialize_color_picker(m,a){var f=$('select[id="'+m+'"]').val();window[a]=parseInt("0x"+f.substring(1));$("#"+m+" ~ input").attr("value",f);$("#"+m+" ~ input").val(f);$("#"+m+" ~ input").on("change",function(){var e=$(this).val();window[a]=parseInt("0x"+e.substring(1));$("#"+m+'~ span span[data-selected=""]').removeAttr("data-selected")});$('select[id="'+m+'"]').simplecolorpicker().on("change",function(){var e=$('select[id="'+m+'"]').val();window[a]=parseInt("0x"+e.substring(1));$("#"+m+
" ~ input").first().val(e);"track_color"==a&&(my_tracker&&stop_tracking(),start_tracking({x:2E3,y:2E3}))})}
function initialize_slider(m,a,f){var e=$("#"+m);$("#"+a).val(e.attr("value"));window[f]=parseFloat(e.attr("value"));e.on("change",function(e){$("#"+a).val(this.value);window[f]=parseFloat(this.value)});e.on("input",function(e){$("#"+a).val(this.value);window[f]=parseFloat(this.value)});$("#"+a).change(function(){var a=parseFloat(this.value);isNaN(a)?this.value=window[f]:(window[f]=a,e.slider("setValue",window[f]))})}
function clear(m){var a=[],f;for(f in room_data.slides[active_slide].entities)if(room_data.slides[active_slide].entities.hasOwnProperty(f)&&(room_data.slides[active_slide].entities[f].type==m||!m)&&"background"!=room_data.slides[active_slide].entities[f].type){var e=room_data.slides[active_slide].entities[f];remove(f);a.push(e);socket.emit("remove",room,f,active_slide)}undo_list.push(clone_action(["remove",a]))}
function clone_action(m){if(m[1].length){temp_containers=[];for(var a=0;a<m[1].length;a++)temp_containers.push(m[1][a].container),m[1][a].container=null}var f=JSON.stringify(m);if(m[1].length)for(a=0;a<m[1].length;a++)m[1][a].container=temp_containers[a];return JSON.parse(f)}
function undo(){var m=undo_list.pop();if(m)if("add"==m[0]){for(var a in m[1])m[1][a].uid&&(remove(m[1][a].uid),delete m[1][a].container,socket.emit("remove",room,m[1][a].uid,active_slide));redo_list.push(clone_action(m))}else if("drag"==m[0]){for(a in m[1]){var f=m[1][a][0][0],e=m[1][a][0][1],h=m[1][a][0][2],n=m[1][a][0][3],g=m[1][a][1];room_data.slides[active_slide].entities[g]&&(m[1][a][0][0]=room_data.slides[active_slide].entities[g].x,m[1][a][0][1]=room_data.slides[active_slide].entities[g].y,
m[1][a][0][2]=room_data.slides[active_slide].entities[g].scale?[room_data.slides[active_slide].entities[g].scale[0],room_data.slides[active_slide].entities[g].scale[1]]:[1,1],"undefined"!==typeof room_data.slides[active_slide].entities[g].rotation&&(m[1][a][0][3]=room_data.slides[active_slide].entities[g].rotation),drag_entity(room_data.slides[active_slide].entities[g],f,e,h,n),socket.emit("drag",room,g,active_slide,f,e,h,n))}redo_list.push(clone_action(m))}else if("remove"==m[0]){for(a in m[1])f=
m[1][a],delete f.container,socket.emit("create_entity",room,f,active_slide),create_entity(f);redo_list.push(clone_action(m))}else if("select"==m[0]){e=[];for(a in m[2])f=m[2][a],room_data.slides[active_slide].entities.hasOwnProperty(f.uid)&&e.push(f);deselect_all();selected_entities=e;select_entities();redo_list.push(clone_action(m))}render_scene()}
function redo(){var m=redo_list.pop();if(m){if("add"==m[0]){for(var a in m[1])m[1][a].uid&&(socket.emit("create_entity",room,m[1][a],active_slide),create_entity(m[1][a]));undo_list.push(clone_action(m))}else if("drag"==m[0]){for(a in m[1]){var f=m[1][a][0][0],e=m[1][a][0][1],h=m[1][a][0][2],n=m[1][a][0][3],g=m[1][a][1];room_data.slides[active_slide].entities[g]&&(m[1][a][0][0]=room_data.slides[active_slide].entities[g].x,m[1][a][0][1]=room_data.slides[active_slide].entities[g].y,m[1][a][0][2]=room_data.slides[active_slide].entities[g].scale?
[room_data.slides[active_slide].entities[g].scale[0],room_data.slides[active_slide].entities[g].scale[1]]:[1,1],"undefined"!==typeof room_data.slides[active_slide].entities[g].rotation&&(m[1][a][0][3]=room_data.slides[active_slide].entities[g].rotation),drag_entity(room_data.slides[active_slide].entities[g],f,e,h,n),socket.emit("drag",room,g,active_slide,f,e,h,n))}undo_list.push(clone_action(m))}else if("remove"==m[0]){for(a in m[1])f=m[1][a],room_data.slides[active_slide].entities.hasOwnProperty(f.uid)&&
(remove(f.uid),delete f.container,socket.emit("remove",room,f.uid,active_slide));undo_list.push(clone_action(m))}else if("select"==m[0]){e=[];for(a in m[1])f=m[1][a],room_data.slides[active_slide].entities.hasOwnProperty(f.uid)&&e.push(f);deselect_all();selected_entities=e;select_entities();undo_list.push(clone_action(m))}render_scene()}}
function clear_selected(){remove_select_box();var m=selected_entities.slice(0),a=[],f;for(f in m){var e=m[f];remove(m[f].uid);a.push(e);socket.emit("remove",room,e.uid,active_slide)}deselect_all();selected_entities=[];undo_list.push(clone_action(["remove",a]));"drag_context"==active_context&&cancel_drag(!0)}
function drag_entity(m,a,f,e,h){var n=m.x,g=m.y;m.x=a;m.y=f;e&&(m.scale=e);"undefined"!==typeof h&&null!=h&&(m.rotation=h);if(m.container){m.container.x+=x_abs(a-n);m.container.y+=y_abs(f-g);"undefined"!==typeof h&&null!=h&&(m.container.rotation=-h);"note"==m.type&&align_note_text(m);m.container&&(background_sprite.removeChild(m.container),background_sprite.addChild(m.container),e&&(m.container.scale.x=m.container.orig_scale[0]*e[0],m.container.scale.y=m.container.orig_scale[1]*e[1]));select_box_dirty=
!1;for(var d in selected_entities)selected_entities[d].uid==m.uid&&(select_box_dirty=!0);render_scene()}}function find_first_slide(){var m=Math.pow(2,52),a=0,f;for(f in room_data.slides){var e=room_data.slides[f].order;e<m&&(m=e,a=f)}return a}function find_previous_slide(m){var a=-9007199254740990,f=0,e;for(e in room_data.slides){var h=room_data.slides[e].order;h<m&&h>a&&(a=h,f=e)}return f}
function find_next_slide(m){var a=9007199254740991,f=0,e;for(e in room_data.slides){var h=room_data.slides[e].order;h>m&&h<a&&(a=h,f=e)}return f}function hash(m){for(var a=0,f=0;f<m.length;f++)a+=m.charCodeAt(f);return a}
function resolve_order_conflicts(m){for(var a in room_data.slides)if(room_data.slides[a].order==m.order){if(hash(m.uid)<hash(a)){a=find_previous_slide(m.order);var f=0;0!=a&&(f=room_data.slides[a].order);m.order=Math.floor((m.order-f)/2)}else a=find_next_slide(m.order),f=m.order+4294967296,0!=a&&(f=room_data.slides[a].order),m.order=Math.floor((f-m.order)/2);resolve_order_conflicts(m);break}}
function update_slide_buttons(){var m=find_previous_slide(room_data.slides[active_slide].order),a=find_next_slide(room_data.slides[active_slide].order);0==m||presentation_mode&&!can_edit()?document.getElementById("prev_slide").disabled=!0:document.getElementById("prev_slide").disabled=!1;0==a||presentation_mode&&!can_edit()?document.getElementById("next_slide").disabled=!0:document.getElementById("next_slide").disabled=!1;1!=Object.keys(room_data.slides).length&&can_edit()?document.getElementById("remove_slide").disabled=
!1:document.getElementById("remove_slide").disabled=!0;can_edit()?document.getElementById("new_slide").disabled=!1:document.getElementById("new_slide").disabled=!0;grid_layer.visible=room_data.slides[active_slide].show_grid?!0:!1;m=escapeHtml(room_data.slides[active_slide].name);$("#slide_name_field").val(m);can_edit()?$("#slide_name_field").prop("readonly",!1):$("#slide_name_field").prop("readonly",!0);var a=find_first_slide(),f=$("#slide_table");f.empty();do m=escapeHtml(room_data.slides[a].name),
a==active_slide?f.append("<tr id='"+a+"' style='background-color:#ADD8E6'><td><a id='"+a+"'>"+m+"</a></td></tr>"):f.append("<tr id='"+a+"'><td><a id='"+a+"'>"+m+"</a></td></tr>"),a=find_next_slide(room_data.slides[a].order);while(0!=a);var e=$("#slide_container").scrollTop();setTimeout(function(){$("#slide_container").scrollTop(e)},0)}
function transition(m){var a=[],f=[],e=[],h;for(h in room_data.slides[active_slide].entities)room_data.slides[m].entities[h]?e.push(h):a.push(h);for(h in room_data.slides[m].entities)room_data.slides[active_slide].entities.hasOwnProperty(h)||f.push(h);for(var n in a)h=a[n],remove(h,!0);var g;for(n in e)h=e[n],"background"==room_data.slides[m].entities[h].type?g=h:(remove(h,!0),f.push(h));active_slide=m;update_slide_buttons();var d=function(){try{f.sort(function(a,c){return room_data.slides[m].entities[a].z_index-
room_data.slides[m].entities[c].z_index})}catch(b){}for(var a in f)create_entity(room_data.slides[m].entities[f[a]])};g?set_background(room_data.slides[m].entities[g],function(){d();render_scene()}):(d(),render_scene())}
function cancel_drag(m){clearTimeout(drag_timeout);objectContainer.buttonMode=!1;context_before_drag&&(active_context=context_before_drag);context_before_drag=null;if(dragged_entity){dragged_entity.mouseup=void 0;dragged_entity.touchend=void 0;dragged_entity.mouseupoutside=void 0;dragged_entity.touchendoutside=void 0;dragged_entity.mousemove=void 0;dragged_entity.touchmove=void 0;if(m)if(move_selected&&0<selected_entities.length)for(var a in selected_entities)drag_entity(selected_entities[a],selected_entities[a].origin_x,
selected_entities[a].origin_y);else drag_entity(dragged_entity.entity,dragged_entity.entity.origin_x,dragged_entity.entity.origin_y);dragged_entity==select_box&&(make_resizable(select_box),on_select_over.bind(select_box)(),on_selectbox_move.bind(select_box)())}dragged_entity=null;move_selected=!1}
function change_slide(m){if(active_slide!=m){"drag_context"==active_context&&cancel_drag(!0);undo_list=[];redo_list=[];deselect_all();transition(m);m=$("#contexts").find(".active");var a=m.attr("id")+"_context";$(this).attr("data-context")&&(a=m.attr("data-context")+"_context");active_context=a}}
function create_new_slide(m){var a={};a.show_grid=room_data.slides[m].show_grid;a.z_top=room_data.slides[m].z_top;a.uid=newUid();var f=room_data.slides[m].name,e=f.split(" ");isNaN(parseFloat(e[e.length-1]))?f+=" 1":(e[e.length-1]=""+(parseFloat(e[e.length-1])+1),f=e.join(" "));a.name=f;a.entities={};for(var h in room_data.slides[m].entities)e=room_data.slides[m].entities[h].container,delete room_data.slides[m].entities[h].container,a.entities[h]=JSON.parse(JSON.stringify(room_data.slides[m].entities[h])),
room_data.slides[m].entities[h].container=e;e=find_next_slide(room_data.slides[m].order);0==e?h=room_data.slides[m].order+4294967296:(h=room_data.slides[m].order+Math.floor((room_data.slides[e].order-room_data.slides[m].order)/2),f==room_data.slides[e].name&&(a.name=room_data.slides[m].name+" - 1"));a.order=h;return a}
function remove_slide(m){if(1<Object.keys(room_data.slides).length){if(m==active_slide){var a=room_data.slides[m].order,f=find_previous_slide(a);0==f&&(f=find_next_slide(a));change_slide(f);active_slide=f}delete room_data.slides[m]}update_slide_buttons()}function rename_slide(m,a){room_data.slides[m].name=a;update_slide_buttons()}function add_slide(m){resolve_order_conflicts(m);room_data.slides[m.uid]=m;update_slide_buttons()}
function initialize_map_select(m){var a=m.find("option").sort(function(a,e){return a.innerHTML<e.innerHTML?-1:a.innerHTML>e.innerHTML?1:0});m.empty().append(a);m.val("");m.selectpicker&&m.selectpicker("refresh");m.change(function(){var a=m.val().trim();background&&background.path==a||try_select_map(m,a)})}function activity_animation(m){var a=$("#userlist #"+m);a.hasClass("sheen")||(a.addClass("sheen"),setTimeout(function(){a.removeClass("sheen")},1E3))}
function try_select_map(m,a,f){m=background?background.uid:newUid();var e=0,h=0,n=$('option[value="'+a+'"]').attr("data-size");n&&(h=n.split("x"),e=parseFloat(h[0]),h=parseFloat(h[1]));f=f?!0:!1;a.split(".").pop().startsWith();var g={uid:m,type:"background",path:a,size_x:e,size_y:h,custom:f};is_video(a)&&(g.is_video=!0);set_background(g,function(a){a&&(socket.emit("create_entity",room,g,active_slide),background.is_video&&(handle_pause(0),socket.emit("pause_video",room,0)))})}
function add_custom_map(m){var a=$("#map_select"),f=$('#map_select option[value="'+m+'"]');0==f.length&&(f=last(m.split("/")),f=$('<option value="'+m+'">'+f+"</option>"),a.append(f));a.val(m)}function cleanup(){deselect_all();undo_list=[];redo_list=[];if(active_slide)for(var m in room_data.slides[active_slide].entities)room_data.slides[active_slide].entities.hasOwnProperty(m)&&remove(m);room_data={}}
function stop_syncing(){im_syncing=!1;clearInterval(sync_event);sync_event=setInterval(function(){im_syncing=!1;video_paused?clearInterval(sync_event):2E4<Date.now()-get_local_time(last_video_sync[1])&&start_syncing()},1E4+5E3*Math.random())}function handle_play(m,a){video_paused=!1;last_video_sync=[m,a];var f=Date.now()-get_local_time(a);video_media.setCurrentTime(m);0>=f?video_player.play():setTimeout(function(){video_player.play()},f);video_player.play();stop_syncing();play_video_controls()}
function handle_pause(m,a){video_paused=!0;clearInterval(sync_event);im_syncing=!1;video_media.setCurrentTime(m);video_player.pause();pause_video_controls()}function sync_video(m,a){var f=Date.now()-get_local_time(a),f=m+f*base_playback_rate/1E3,f=video_progress()-f;console.log("lag: ",f);.1<Math.abs(f)/base_playback_rate?hard_sync_video(m,a):"youtube"!=video_media.pluginType&&set_playback_rate(base_playback_rate,base_playback_rate+f/VIDEO_SYNC_DELAY)}
function video_progress(){return video_paused?video_media.currentTime:progress+(Date.now()-progress_update)*playback_rate/1E3}
function enable_dragging(){if(!dragging_enabled){var m=$("#disable_dragging > div");m.removeClass("icon-disable_dragging");m.addClass("icon-enable_dragging");$("#disable_dragging").attr("title",$("#disable_dragging").attr("data-disable"));dragging_enabled=!0;for(var a in room_data.slides[active_slide].entities)m=room_data.slides[active_slide].entities[a],m.container&&"background"!=m.type&&(m.container.interactive=!0,m.container.buttonMode=!0,m.container.draggable=!0,m.container.mousedown=on_drag_start,
m.container.touchstart=on_drag_start)}}
function disable_dragging(){if(dragging_enabled){var m=$("#disable_dragging > div");m.removeClass("icon-enable_dragging");m.addClass("icon-disable_dragging");$("#disable_dragging").attr("title",$("#disable_dragging").attr("data-enable"));dragging_enabled=!1;for(var a in room_data.slides[active_slide].entities)m=room_data.slides[active_slide].entities[a],m.container&&"background"!=m.type&&(m.container.interactive=!1,m.container.buttonMode=!1,m.container.draggable=!1,delete m.container.mousedown,delete m.container.touchstart)}}
var sync_in_progress=!1,press_play_delay=0;
function hard_sync_video(m,a){if(!sync_in_progress){sync_in_progress=!0;var f=Date.now()-get_local_time(a),f=m+f*base_playback_rate/1E3,e=video_progress()-f;0>e||3<e?(video_media.setCurrentTime(f+1),sync_in_progress=!1):(video_progress(),video_player.pause(),setTimeout(function(){if(!video_paused){video_player.play();var a=Date.now(),e=function(f){press_play_delay=Date.now()-a;video_media.removeEventListener("play",e)};video_media.addEventListener("play",e)}sync_in_progress=!1},Math.max(0,1E3*e/base_playback_rate-
press_play_delay)))}}function handle_sync(m,a,f){video_paused?im_syncing=!1:(f!=my_user.id&&stop_syncing(),last_video_sync=[m,a],sync_video(m,a))}
function set_playback_rate(m,a){base_playback_rate=m;playback_rate=a;var f=m.toFixed(2);$(".mejs-speed-button").find("button").html(f+"x");$(".mejs-speed-button").find(".mejs-speed-selected").removeClass("mejs-speed-selected");$(".mejs-speed-button").find('input[value="'+f+'"]').next().addClass("mejs-speed-selected");"youtube"==video_media.pluginType?video_media.pluginApi.setPlaybackRate(a):video_media.playbackRate=a}
function create_hp_bar(m){void 0===m&&(m=1);var a=to_x_local_vect(.125*m);m=to_y_local_vect(.015*m);var f=document.createElement("canvas"),e=f.getContext("2d");f.width=a;f.height=m;e.fillStyle="#FFFFFF";e.fillRect(0,0,f.width,f.height);f=PIXI.Texture.fromCanvas(f);f=new PIXI.Sprite(f);f.tint=65280;var e=document.createElement("canvas"),h=e.getContext("2d");e.width=a;e.height=m;h.strokeStyle="#000000";h.lineWidth=1;h.strokeRect(0,0,e.width,e.height);var e=PIXI.Texture.fromCanvas(e),e=new PIXI.Sprite(e),
h=document.createElement("canvas"),n=h.getContext("2d");h.width=a;h.height=m;n.fillStyle="#FF0000";n.fillRect(0,0,h.width,h.height);a=PIXI.Texture.fromCanvas(h);a=new PIXI.Sprite(a);m=new PIXI.Container;m.addChild(a);m.addChild(f);m.addChild(e);return m}function prev_slide(){var m=find_previous_slide(room_data.slides[active_slide].order);0!=m&&(presentation_mode&&can_edit()&&socket.emit("change_slide",room,m),change_slide(m))}
function next_slide(){var m=find_next_slide(room_data.slides[active_slide].order);0!=m&&(presentation_mode&&can_edit()&&socket.emit("change_slide",room,m),change_slide(m))}var icons={};
function wot_connect(){function m(){for(var a in icons)icons[a]&&icons[a].container&&background_sprite.removeChild(icons[a].container);icons={};render_scene()}function a(a){create_icon(a);a.container.x-=x_abs(.012);a.container.y-=y_abs(.012);var b=create_hp_bar();b.scale.x*=zoom_level;b.scale.y*=zoom_level;b.x-=b.width/2;b.y-=a.container.height+b.height;a.container.addChild(b);var c=create_text_sprite(a.player.substring(0,9),a.label_color,8,"Arial",!1,!0,"bold"),d=c.width/c.height;c.height=x_abs(8/
530);c.width=c.height*d;c.x-=c.width/2;c.y-=a.container.height+b.height+c.height;a.container.addChild(c);a.container.scale.x*=zoom_level;a.container.scale.y*=zoom_level}function f(k){k.onclose=function(a){setTimeout(function(){k=new WebSocket("ws://localhost:6412/");f(k)},1E4)};k.onerror=function(a){k.close()};k.onopen=function(a){m()};k.onmessage=function(f){function k(a){return[(parseFloat(a[0])-h)/d,1-(parseFloat(a[2])-e)/c]}var p=new window.FileReader;p.readAsText(f.data);p.onloadend=function(){if("BATTLE_ENDED"==
p.result)m();else{var f=JSON.parse(p.result);if("tank"in f){var q,r;f.team==b?(q=65280,r="#AAFFAA"):(q=16711680,r="#FFAAAA");q={uid:f.id.toString(),type:"icon",tank:f.type,x:-1,y:-1,size:.02,color:q,alpha:1,label:f.tank.substring(0,10),label_font_size:8,label_color:r,label_font:"Arial",label_font_modifier:"bold",label_pos:"pos_bottom",label_background:!1,label_shadow:!1,maxHealth:f.maxHealth,player:f.name};if(f.position){var v=k(f.position);q.x=v[0];q.y=v[1];a(q)}icons[q.uid]=q}else if("map_dimesions"in
f)h=parseFloat(f.map_dimesions[0][0]),g=parseFloat(f.map_dimesions[1][0]),e=parseFloat(f.map_dimesions[0][1]),n=parseFloat(f.map_dimesions[1][1]),d=g-h,c=n-e;else if("player_team"in f)b=f.player_team;else if("map_id"in f)console.log("map id: ",f.map_id),f=f.map_id,(f=$("#map_select").find("[data-mapid='"+f+"']"))&&try_select_map($("#map_select"),f.val(),!1,function(){render_scene()});else if("remove"in f)q=f.remove.toString(),background_sprite.removeChild(icons[q].container),icons[q]=void 0;else{var u=
new Set;for(r in f)q=r.toString(),icons[q]&&(u.add(q),1<=f[r].length?(v=k(f[r][0]),icons[q].container?(drag_entity(icons[q],v[0],v[1]),icons[q].container.alpha=1):(icons[q].x=v[0],icons[q].y=v[1],a(icons[q])),2==f[r].length&&(v=f[r][1],icons[q].hp!=v&&(icons[q].hp=v,v=icons[q].container.children[1],v.children[1].width=f[r][1]/icons[q].maxHealth*v.children[0].width))):icons[q]&&icons[q].container&&(icons[q].container.alpha=.5),2==f[r].length?icons[q].container&&16776960==icons[q].container.children[1].children[1].tint&&
(icons[q].container.children[1].children[1].tint=65280):icons[q].container&&65280==icons[q].container.children[1].children[1].tint&&(icons[q].container.children[1].children[1].tint=16776960));difference=Object.keys(icons).filter(function(a){return!u.has(a)});for(r in difference)icons[r]&&icons[r].container&&(icons[r].container.alpha=.5);render_scene()}}}}}var e,h,n,g,d,c,b=1;websocket=new WebSocket("ws://localhost:6412/");f(websocket)}
function make_slides_sortable(){$("#slide_table1 tbody").sortable({helper:function(m,a){a.children().each(function(){$(this).width($(this).width())});return a},update:function(m,a){if(can_edit()){var f;a.item[0].previousElementSibling?(f=room_data.slides[a.item[0].previousElementSibling.id].order,a.item[0].nextElementSibling?(f+=room_data.slides[a.item[0].nextElementSibling.id].order,f/=2):f+=4294967296):f=room_data.slides[find_first_slide()].order-4294967296;room_data.slides[a.item[0].id].order=
f;socket.emit("change_slide_order",room,a.item[0].id,f);update_slide_buttons()}}}).disableSelection()}function make_slides_unsortable(){$("#slide_table1 tbody").data("ui-sortable")&&$("#slide_table1 tbody").sortable("disable")}
function set_presentation_mode(m){presentation_mode=m;m=$("#stop_present").find("div");1==presentation_mode?(m.removeClass("icon-stop_present"),m.addClass("icon-present"),$("#stop_present").attr("title",$("#stop_present").attr("data-disable"))):(m.removeClass("icon-present"),m.addClass("icon-stop_present"),$("#stop_present").attr("title",$("#stop_present").attr("data-enable")))}
function handle_pan_zoom(){var m=focus_point();room_data.slides[active_slide].pan_zoom=[zoom_level,m[0],m[1]];control_camera&&socket.emit("pan_zoom",room,active_slide,zoom_level,m[0],m[1])}
function select_icon(m){$(".tank_select.selected").removeClass("selected");m.addClass("selected");selected_icon=m.attr("id");selected_icon_no_color="true"==m.attr("data-no_color")?!0:!1;selected_icon_circle_radius=m.attr("data-circle")?parseFloat(m.attr("data-circle")):0;icon_extra_scale=m.attr("data-scale")?parseFloat(m.attr("data-scale")):1}
$(document).ready(function(){function m(){video_ready&&progress_timeline();update_pings();scene_dirty&&(select_box_dirty&&redraw_select_box(),renderer.render(objectContainer),scene_dirty=!1);requestAnimationFrame(m)}function a(){function a(){var a=$("#icon_list");a.empty();my_user&&my_user.identity&&$.ajax({url:upload_path+"/list_icons.php?user_id="+my_user.identity,type:"GET",cache:!1,success:function(b){try{var c=JSON.parse(b);0<c.length?$("#no_uploaded_icons").hide():$("#no_uploaded_icons").show();
for(var d in c)a.append('<div class="inline" style="padding:20px"><input id="'+c[d]+'" type="checkbox"> <img src="'+upload_path+"/icons/"+my_user.identity+"/thumbs/"+c[d]+'"></div>')}catch(v){alert(b)}}})}function b(){var a=$("#custom_icons_list");a.empty();my_user&&my_user.identity&&$.ajax({url:upload_path+"/list_icons.php?user_id="+my_user.identity,type:"GET",cache:!1,success:function(b){try{var c=JSON.parse(b),d;for(d in c){var e='data-no_color="true"';"bw-"==c[d].substring(0,3)&&(e="");a.append('<button id="'+
upload_path+"/icons/"+my_user.identity+"/"+c[d]+'" data-scale=2 '+e+' class="tank_select" data-toggle="tooltip" title="'+c[d]+'"><img src="'+upload_path+"/icons/"+my_user.identity+"/thumbs/"+c[d]+'"></button>')}}catch(u){alert(b)}}})}setup_assets();var c=document.querySelectorAll("input[type=range][list]");Array.prototype.slice.call(c).forEach(function(a){if("list"in a&&"min"in a&&"max"in a&&"step"in a){var b=document.createElement("datalist"),c=parseFloat(a.getAttribute("min")),d=parseFloat(a.getAttribute("step")),
e=parseFloat(a.getAttribute("max"));b.id=a.getAttribute("list");if(20>Math.abs(e-c)/d){for(;c<e+d;c+=d)b.innerHTML+="<option value="+c.toFixed(2)+"></option>";a.parentNode.insertBefore(b,a.nextSibling)}}});ping_texture=img_texture("circle.png");$("#modal_cancel").click(function(a){$("#myModal").modal("hide")});$("#link_send").click(function(a){a=$("#send_link").val();var b=a.indexOf("room=");-1==b?alert("No room id found in link."):(tactic_uid=a.slice(b+5).split("&")[0],a=servers[hashstring(tactic_uid)%
servers.length],b=active_slide,$("#this_slide_only").get(0).checked||(b=void 0),$.post("http://"+a+"/add_to_room",{target:tactic_uid,source:room,session_id:$("#sid").attr("data-sid"),host:parse_domain(location.hostname),stored:"false",slide:b}).done(function(a){"Success"!=a&&alert(a)}));$("#myModal").modal("hide")});$('input[name="map_type_select"]').on("change",function(){"select_hd"==this.id?($("#map_select_container").show(),$("#wotbase_select_container").hide(),$("#new_minimap_select_container").hide(),
$("#map_select").val("").selectpicker("render")):"select_wotbase"==this.id?($("#map_select_container").hide(),$("#wotbase_select_container").show(),$("#new_minimap_select_container").hide(),$("#wotbase_select").val("").selectpicker("render")):"select_new_minimap"==this.id&&($("#map_select_container").hide(),$("#wotbase_select_container").hide(),$("#new_minimap_select_container").show(),$("#new_minimap_select").val("").selectpicker("render"))});$("#send_to_link").click(function(a){socket.emit("save_room",
room);$("#myModal").modal("show");$("#myModal").on("shown.bs.modal",function(){$("#send_link").focus()})});$("#custom_map").click(function(a){$("#map_modal").modal("show");$("#map_modal").on("shown.bs.modal",function(){$("#send_link").focus()})});$("#upload_icon").click(function(b){$("#upload_icon_modal").modal("show");a()});$("#upload_icon_browse").change(function(c){c=$("#upload_icon_form");var d=new FormData(c[0]);$.ajax({url:c.attr("action"),data:d,type:"POST",contentType:!1,processData:!1,success:function(c){try{"OK"==
JSON.parse(c).status?(a(),b()):alert(c)}catch(x){alert(c)}}})});$("#icon_modal_select_all").click(function(){$("#icon_list :checkbox").each(function(){$(this).prop("checked",!0)})});$("#icon_modal_deselect_all").click(function(){$("#icon_list :checkbox").each(function(){$(this).prop("checked",!1)})});$("a[href='#custom_tab']").on("show.bs.tab",function(a){b()});$("#icon_modal_remove_selected").click(function(){var c=[];$("#icon_list :checkbox").each(function(){$(this).prop("checked")&&c.push($(this).attr("id"))});
0<c.length&&$.ajax({url:upload_path+"/remove_icons.php?user_id="+my_user.identity,data:{to_remove:c},type:"POST",success:function(c){try{"OK"==JSON.parse(c).status?(a(),b()):alert(c)}catch(w){alert(c)}}})});$("#select_icon_files").click(function(a){$("#upload_icon_browse").click()});$("#upload_background_browse").change(function(a){a=$("#upload_map_form");var b=new FormData(a[0]);$.ajax({url:a.attr("action"),data:b,type:"POST",contentType:!1,processData:!1,success:function(a){try{a=JSON.parse(a),
try_select_map($("#map_select"),a.path,!0)}catch(x){alert(a)}}})});$("#upload_map").click(function(a){$("#upload_background_browse").click()});$("#map_modal_cancel").click(function(a){$("#map_modal").modal("hide")});$("#set_map").click(function(a){(a=$("#map_url").val().trim())&&""!=a&&try_select_map($("#map_select"),a,!0);$("#map_modal").modal("hide")});$("#contexts ~ div").each(function(){$(this).hide()});$("#ping_context").show();$("#store_tactic_popover").hide();$("#save").hide();$("#ping").addClass("active");
$("#"+label_position).addClass("active");c=$("#icon_context").find("button:first");select_icon(c);slide_name=$("#slide_interactive").attr("slide_name");$(".nav-pills > li > a").click(function(){$(".nav-pills > li.active").removeClass("active");$(this).parent().addClass("active")});initialize_color_picker("curve_colorpicker","curve_color");initialize_color_picker("icon_colorpicker","icon_color");initialize_color_picker("draw_colorpicker","draw_color");initialize_color_picker("ping_colorpicker","ping_color");
initialize_color_picker("track_colorpicker","track_color");initialize_color_picker("line_colorpicker","line_color");initialize_color_picker("text_colorpicker","text_color");initialize_color_picker("background_text_colorpicker","background_text_color");initialize_color_picker("rectangle_outline_colorpicker","rectangle_outline_color");initialize_color_picker("rectangle_fill_colorpicker","rectangle_fill_color");initialize_color_picker("circle_outline_colorpicker","circle_outline_color");initialize_color_picker("circle_fill_colorpicker",
"circle_fill_color");initialize_color_picker("polygon_outline_colorpicker","polygon_outline_color");initialize_color_picker("polygon_fill_colorpicker","polygon_fill_color");initialize_color_picker("area_outline_colorpicker","area_outline_color");initialize_color_picker("area_fill_colorpicker","area_fill_color");initialize_slider("rectangle_outline_thickness","rectangle_outline_thickness_text","rectangle_outline_thickness");rectangle_outline_thickness=parseFloat($("#rectangle_outline_thickness").val());
initialize_slider("rectangle_outline_transparancy","rectangle_outline_transparancy_text","rectangle_outline_transparancy");initialize_slider("rectangle_fill_transparancy","rectangle_fill_transparancy_text","rectangle_fill_transparancy");initialize_slider("circle_outline_thickness","circle_outline_thickness_text","circle_outline_thickness");initialize_slider("circle_outline_transparancy","circle_outline_transparancy_text","circle_outline_transparancy");initialize_slider("circle_fill_transparancy",
"circle_fill_transparancy_text","circle_fill_transparancy");initialize_slider("polygon_outline_thickness","polygon_outline_thickness_text","polygon_outline_thickness");initialize_slider("polygon_outline_transparancy","polygon_outline_transparancy_text","polygon_outline_transparancy");initialize_slider("polygon_fill_transparancy","polygon_fill_transparancy_text","polygon_fill_transparancy");initialize_slider("area_outline_thickness","area_outline_thickness_text","area_outline_thickness");initialize_slider("area_outline_transparancy",
"area_outline_transparancy_text","area_outline_transparancy");initialize_slider("area_fill_transparancy","area_fill_transparancy_text","area_fill_transparancy");initialize_slider("line_thickness","line_thickness_text","line_thickness");initialize_slider("draw_thickness","draw_thickness_text","draw_thickness");initialize_slider("curve_thickness","curve_thickness_text","curve_thickness");initialize_slider("font_size","font_size_text","font_size");initialize_slider("background_font_size","background_font_size_text",
"background_font_size");initialize_slider("label_font_size","label_font_size_text","label_font_size");initialize_slider("icon_size","icon_size_text","icon_size");initialize_slider("ping_size","ping_size_text","ping_size");initialize_slider("track_size","track_size_text","track_size");initialize_slider("draw_end_size","draw_end_size_text","draw_end_size");initialize_slider("line_end_size","line_end_size_text","line_end_size");initialize_slider("curve_end_size","curve_end_size_text","curve_end_size");
$("#delay")&&initialize_slider("delay","delay_text","delay");$('[data-toggle="popover"]').popover({container:"body",trigger:"manual",html:"true",template:'<div class="popover popover-medium" style="width: 300px;"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"></div></div></div>',content:function(){return $("#popover-content")}}).click(function(a){$(this).popover("toggle");var b=$(this);document.getElementById("tactic_name").setAttribute("value",
tactic_name);$(this);$(document).on("click","#store_tactic",function(a){var c=$(document).find("#tactic_name")[0].value,c=escapeHtml(c);""==c?alert("Empty name, tactic not stored"):(tactic_name=c,document.title="Tactic - "+tactic_name,socket.emit("store",room,tactic_name),$("#save").show(),alert('Tactic stored as: "'+tactic_name+'"'),a.stopPropagation());b.popover("toggle")});a.stopPropagation()});$("#slide_table").on("click","tr",function(){if(can_edit()||!presentation_mode){var a=$(this).attr("id");
active_slide!=a&&(presentation_mode&&can_edit()&&socket.emit("change_slide",room,a),change_slide(a))}});$("#prev_slide").click(function(){prev_slide()});$("#next_slide").click(function(){next_slide()});$("#new_slide").click(function(){var a=create_new_slide(active_slide);socket.emit("new_slide",room,a);add_slide(a);change_slide(a.uid)});$("#remove_slide").click(function(){can_edit()&&1<Object.keys(room_data.slides).length&&(socket.emit("remove_slide",room,active_slide),remove_slide(active_slide))});
$("#save").click(function(){tactic_name&&""!=tactic_name&&(socket.emit("store",room,tactic_name),alert('Tactic stored as: "'+tactic_name+'"'))});$("#slide_name_field").focusout(function(){rename_slide(active_slide,$(this).val());socket.emit("rename_slide",room,active_slide,$(this).val())});$("#slide_name_field").keyup(function(a){13==a.keyCode&&(rename_slide(active_slide,$(this).val()),socket.emit("rename_slide",room,active_slide,$(this).val()))});$("#link").click(function(){document.queryCommandSupported("copy");
var a=document.createElement("textarea"),b="http://"+location.host+location.pathname+"?room="+room;a.value=b;document.body.appendChild(a);window.prompt("Copy to clipboard and share with friends:",b);document.body.removeChild(a)});$("#chat_input").keyup(function(a){13==a.keyCode&&(a=my_user.name+": "+$("#chat_input").val()+"\n",socket.emit("chat",room,a,chat_color),chat(a,chat_color),$("#chat_input").val(""))});$("#export").click(function(){var a=new PIXI.CanvasRenderer(background_sprite.width,background_sprite.height,
{backgroundColor:12303291}),b=background_sprite.x,c=background_sprite.y;background_sprite.x=0;background_sprite.y=0;a.render(background_sprite);background_sprite.x=b;background_sprite.y=c;$.getScript("http://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2014-11-29/FileSaver.min.js",function(){$.getScript("http://cdnjs.cloudflare.com/ajax/libs/javascript-canvas-to-blob/3.3.0/js/canvas-to-blob.min.js",function(){a.view.toBlob(function(a){tactic_name&&""!=tactic_name?saveAs(a,tactic_name+".jpg"):saveAs(a,
"map.jpg")})})})});$("#backup").click(function(){$.getScript("https://cdnjs.cloudflare.com/ajax/libs/jszip/2.5.0/jszip.min.js",function(){var a=active_slide,b=new JSZip,c=new PIXI.CanvasRenderer(background_sprite.width,background_sprite.height,{backgroundColor:12303291}),d=find_first_slide(),e=1,f=function(d){change_slide(d);var g=setInterval(function(){if(0==resources_loading){var k=background_sprite.x,h=background_sprite.y;background_sprite.x=0;background_sprite.y=0;c.render(background_sprite);
background_sprite.x=k;background_sprite.y=h;k=c.view.toDataURL("image/jpeg",.9);k=k.replace("data:image/jpeg;base64,","");b.file(e.toString()+"-"+room_data.slides[d].name+".jpg",k,{base64:!0});e++;next_slide_uid=find_next_slide(room_data.slides[d].order);if(0!=next_slide_uid)clearInterval(g),f(next_slide_uid);else{clearInterval(g);c.destroy();var k={},m;for(m in room_data.slides[active_slide].entities)room_data.slides[active_slide].entities.hasOwnProperty(m)&&room_data.slides[active_slide].entities[m].container&&
(k[m]=room_data.slides[active_slide].entities[m].container,delete room_data.slides[active_slide].entities[m].container);b.file("tactic.json",JSON.stringify(room_data,null,2));for(m in room_data.slides[active_slide].entities)room_data.slides[active_slide].entities.hasOwnProperty(m)&&k[m]&&(room_data.slides[active_slide].entities[m].container=k[m]);$.getScript("http://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2014-11-29/FileSaver.min.js",function(){var a=b.generate({type:"blob"});tactic_name&&""!=
tactic_name?saveAs(a,tactic_name+".zip"):saveAs(a,"backup.zip")});change_slide(a);render_scene()}}},50)};f(d)})});$(".icon_group").each(function(){var a=this.id;$("#"+a).click(function(){var b=$("#"+a+"_list").text().split("\n"),b=b.map(function(a){return encodeURIComponent(a.trim())}),b=b.filter(function(a){return""==a?!1:!0}),c=$("#"+a+"_list").attr("data-path"),d=parseFloat($("#"+a+"_list").attr("data-scale")),e=parseFloat($("#"+a+"_list").attr("data-height")),f=$("#"+a+"_list").attr("data-no_color"),
g=$("#"+a+"_list").attr("data-style");if(!$.trim($("#"+a+"_menu").html()))if(g)for(var k in b)$("#"+a+"_menu").append('<button data-toggle="tooltip" title="'+b[k]+'" class="tank_select" data-scale="'+d+'" data-no_color="'+f+'" id="'+c+"/"+b[k]+'"><div class="'+c+" "+c+"-"+b[k].slice(0,-4)+' inline"></div></button>');else for(k in b)$("#"+a+"_menu").append("<img height="+e+' class="tank_select" data-scale="'+d+'" data-no_color="'+f+'" id="'+c+"/"+b[k]+'" data-toggle="tooltip" title="'+b[k]+'" src='+
image_host+c+"/"+b[k]+"></img>")})});$("[id^=icon][id$=context]").each(function(){$(this).find("a:first").trigger("click")});$("#lock").click(function(){is_room_locked=$(this).find("div").hasClass("icon-lock")?!1:!0;update_lock();socket.emit("lock_room",room,is_room_locked)});$("#stop_present").click(function(){set_presentation_mode(!presentation_mode);socket.emit("presentation_mode",room,presentation_mode,active_slide);handle_pan_zoom()});$("#lock_camera").click(function(){var a=$(this).find("div");
a.hasClass("icon-unlock_camera")?(a.removeClass("icon-unlock_camera").addClass("icon-lock_camera"),$("#lock_camera").attr("title",$("#lock_camera").attr("data-enable")),control_camera=!0,handle_pan_zoom()):(a.removeClass("icon-lock_camera").addClass("icon-unlock_camera"),$("#lock_camera").attr("title",$("#lock_camera").attr("data-disable")),control_camera=!1)});$("#disable_dragging").click(function(){$("#disable_dragging > div").hasClass("icon-enable_dragging")?(dragging_mode[active_context]="disabled",
disable_dragging()):(dragging_mode[active_context]="enabled",enable_dragging())});$("#grid").click(function(){grid_layer.visible=!grid_layer.visible;room_data.slides[active_slide].show_grid=grid_layer.visible;can_edit()&&socket.emit("show_grid",room,active_slide,grid_layer.visible);render_scene()});$("#zoom_in").click(function(){zoom(.1,!0,[.5,.5]);$("#zoom_level").text((1/zoom_level).toFixed(2));handle_pan_zoom()});$("#zoom_out").click(function(){zoom(1-1/1.1,!1,[.5,.5]);$("#zoom_level").text((1/
zoom_level).toFixed(2));handle_pan_zoom()});$("#contexts").on("click","button",function(a){stop_drawing();setup_mouse_events(void 0,void 0);new_drawing=null;graphics&&background_sprite.removeChild(graphics);new_drawing&&(new_drawing=void 0);current_text_element=void 0;if("undo"==$(this).attr("id"))undo();else if("redo"==$(this).attr("id"))redo();else if("cut"==$(this).attr("id"))cut();else if("copy"==$(this).attr("id"))copy();else if("paste"==$(this).attr("id"))paste();else if("clear_all_main"==$(this).attr("id"))clear();
else{shifted&&objectContainer.mouseup&&(shifted=!1,objectContainer.mouseup(renderer.plugins.interaction.eventData),shifted=!0);$("#contexts").find("button").removeClass("active");$(this).addClass("active");a=$(this).attr("id")+"_context";var b=$(this).attr("id")+"_context";"sc2"!=game&&"R6"!=game||"icon"!=b.substring(0,4)||$("#icon_options").detach().appendTo($("#"+b));$(this).attr("data-context")&&(a=$(this).attr("data-context")+"_context");my_tracker&&stop_tracking();"track_context"==a&&start_tracking({x:2E3,
y:2E3});if(active_menu!=b)if("remove_context"!=a&&(deselect_all(),render_scene()),$("#"+active_menu).hide(),$("#"+b).show(),active_menu=b,active_context=a,dragging_mode[active_context])"enabled"==dragging_mode[active_context]?enable_dragging():disable_dragging();else switch(active_context){case "ping_context":case "track_context":case "icon_context":case "note_context":case "text_context":case "remove_context":case "eraser_context":case "background_text_context":case "select_context":enable_dragging();
break;case "draw_context":case "ruler_context":case "rectangle_context":case "circle_context":case "line_context":case "curve_context":case "polygon_context":disable_dragging()}}});$("#label_pos").on("click","button",function(a){$("#label_pos").find("button").removeClass("active");$(this).addClass("active");label_position=this.id});$('#rectangle_type button[data-style="full"]').addClass("active");$("#rectangle_type").on("click","button",function(a){$(this).addClass("active");$(this).siblings().removeClass("active")});
$('#circle_type button[data-style="full"]').addClass("active");$("#circle_type").on("click","button",function(a){$(this).addClass("active");$(this).siblings().removeClass("active")});$('#circle_draw_style button[data-draw_style="edge"]').addClass("active");$("#circle_draw_style").on("click","button",function(a){$(this).addClass("active");$(this).siblings().removeClass("active")});$('#polygon_type button[data-style="full"]').addClass("active");$("#polygon_type").on("click","button",function(a){$(this).addClass("active");
$(this).siblings().removeClass("active")});$('#area_type button[data-style="full"]').addClass("active");$("#area_type").on("click","button",function(a){$(this).addClass("active");$(this).siblings().removeClass("active")});$('#line_type button[data-style="full"]').addClass("active");$("#line_type").on("click","button",function(a){$(this).addClass("active");$(this).siblings().removeClass("active")});$('#line_end_type button[data-end="arrow"]').addClass("active");$("#line_end_type").on("click","button",
function(a){$(this).addClass("active");$(this).siblings().removeClass("active")});$('#curve_type button[data-style="full"]').addClass("active");$("#curve_type").on("click","button",function(a){$(this).addClass("active");$(this).siblings().removeClass("active")});$('#curve_end_type button[data-end="arrow"]').addClass("active");$("#curve_end_type").on("click","button",function(a){$(this).addClass("active");$(this).siblings().removeClass("active")});$('#track_shape button[data-cursor="cursor"]').addClass("active");
$("#track_shape").on("click","button",function(a){$(this).addClass("active");$(this).siblings().removeClass("active");my_tracker&&stop_tracking();start_tracking({x:2E3,y:2E3})});$('#draw_type button[data-style="full"]').addClass("active");$("#draw_type").on("click","button",function(a){$(this).addClass("active");$(this).siblings().removeClass("active")});$('#draw_end_type button[data-end="arrow"]').addClass("active");$("#draw_end_type").on("click","button",function(a){$(this).addClass("active");$(this).siblings().removeClass("active")});
$("#userlist").on("click","button",function(){var a=$(this).attr("id");if(a!=my_user.id&&"owner"==my_user.role)return userlist[a].role?"driver"==userlist[a].role?(userlist[a].role="owner",$(this).css("background-color","lime")):"owner"==userlist[a].role&&(delete userlist[a].role,$(this).css("background-color","")):(userlist[a].role="driver",$(this).css("background-color","yellow")),socket.emit("update_user",room,userlist[a]),!1});$("#clear_all").click(function(){clear()});$("#clear_draw").click(function(){clear("drawing")});
$("#clear_icons").click(function(){clear("icon")});$("#clear_lines").click(function(){clear("line")});$("#clear_text").click(function(){clear("text")});$("#clear_curve").click(function(){clear("curve")});$("#clear_rectangle").click(function(){clear("rectangle")});$("#clear_circle").click(function(){clear("circle")});$("#clear_polygon").click(function(){clear("polygon")});$("#clear_area").click(function(){clear("area")});$("#clear_selected").click(function(){clear_selected()});$("#clear_note").click(function(){clear("note")});
$("#nuke_room").click(function(){1==confirm("Warning: all unsaved data will be lost")&&socket.emit("nuke_room",room,game)});$("body").on("click",".tank_select",function(){select_icon($(this))});assets_loaded=!0;socket.on("connect",function(){console.log("Connecting/Reconnecting");socket.emit("join_room",room,game)});socket.connected&&socket.emit("join_room",room,game);console.assert(5==y_abs(y_rel(5)));console.assert(5==x_abs(x_rel(5)));console.assert(5==y_rel(y_abs(5)));console.assert(5==x_rel(x_abs(5)));
console.assert(5==to_x_local(from_x_local(5)));console.assert(5==to_y_local(from_y_local(5)))}supports_color_input()||($("head").append('<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/spectrum/1.8.0/spectrum.min.css">'),$("head").append('<script defer src="http://cdnjs.cloudflare.com/ajax/libs/spectrum/1.8.0/spectrum.min.js">\x3c/script>'));dpi=document.getElementById("dpitest").offsetHeight;initialize_map_select($("#map_select"));initialize_map_select($("#wotbase_select"));initialize_map_select($("#new_minimap_select"));
size_x=window.innerWidth;size_y=window.innerHeight;renderer=PIXI.autoDetectRenderer(size_x,size_y,{transparent:!0});renderer.autoResize=!0;useWebGL=renderer instanceof PIXI.WebGLRenderer;$(renderer.view).attr("style","position:absolute; z-index: 2; padding:0; margin:0; border:0;");$(".edit_window").append(renderer.view);renderer.view.addEventListener("wheel",function(a){var b=mouse_loc(),c=0>a.deltaY;zoom(c?.1:1-1/1.1,c,[from_x_local(b.x),from_y_local(b.y)],a);setTimeout(function(){$("#zoom_level").text((1/
zoom_level).toFixed(2))},100);handle_pan_zoom();a.preventDefault()});background_container=new PIXI.Container;background_sprite=new PIXI.Sprite;objectContainer=new PIXI.Container;grid_layer="aw"==game?new PIXI.Sprite.fromImage(image_host+"aw_grid.png"):"squad"==game?new PIXI.Sprite.fromImage(image_host+"squad_grid.png"):"MWO"==game?new PIXI.Sprite.fromImage(image_host+"grid_MWO10.png"):new PIXI.Sprite.fromImage(image_host+"grid.png");grid_layer.height=renderer.height;grid_layer.width=renderer.width;
objectContainer.addChild(background_sprite);background_sprite.addChild(grid_layer);objectContainer.interactive=!0;objectContainer.mousedown=on_left_click;objectContainer.touchstart=on_left_click;$(renderer.view).mousedown(function(a){if(3===a.which||2===a.which)last_pan_loc=[mouse_loc().x,mouse_loc().y],setup_mouse_events(on_pan),a.preventDefault()});renderer.view.addEventListener("contextmenu",function(a){setup_mouse_events(void 0);$("#zoom_level").text((1/zoom_level).toFixed(2));handle_pan_zoom();
a.preventDefault()});$(renderer.view).mouseup(function(a){if(3===a.which||2===a.which)$("#zoom_level").text((1/zoom_level).toFixed(2)),setup_mouse_events(void 0),handle_pan_zoom(),a.preventDefault()});var f=[],e=0,h=!1,n,g=!1,d,c=function(a){$("#zoom_level").text((1/zoom_level).toFixed(2));h&&(handle_pan_zoom(),h=!1);for(var b=a.changedTouches,c=0;c<b.length;c++){var k=b[c],k=f.map(function(a){return a.id}).indexOf(k.identifier);f.splice(k,1)}2==f.length?(a.preventDefault(),objectContainer.interactive=
!1,e=Math.sqrt(Math.pow(f[0].pos[0]-f[1].pos[0],2)+Math.pow(f[0].pos[1]-f[1].pos[1],2)),n=[f[0].pos[0]+(f[1].pos[0]-f[0].pos[0])/2,f[0].pos[1]+(f[1].pos[1]-f[0].pos[1])/2],g=!1,d=null):objectContainer.interactive=!0},b={};renderer.view.addEventListener("touchstart",function(a){for(var b=a.changedTouches,c=0;c<b.length;c++){var k=b[c],h=[from_x_local(k.pageX),from_y_local(k.pageY)];f.push({id:k.identifier,pos:h})}2==f.length?(a.preventDefault(),objectContainer.interactive=!1,e=Math.sqrt(Math.pow(f[0].pos[0]-
f[1].pos[0],2)+Math.pow(f[0].pos[1]-f[1].pos[1],2)),n=[f[0].pos[0]+(f[1].pos[0]-f[0].pos[0])/2,f[0].pos[1]+(f[1].pos[1]-f[0].pos[1])/2],g=!1,d=null):objectContainer.interactive=!0});renderer.view.addEventListener("touchend",c);renderer.view.addEventListener("touchendoutside",c);renderer.view.addEventListener("touchcancel",c);renderer.view.addEventListener("touchmove",function(a){once_per_frame(b,function(){for(var b=a.changedTouches,c=0;c<b.length;c++){var k=b[c],m=[from_x_local(k.pageX),from_y_local(k.pageY)],
w;for(w in f)f[w].id==k.identifier&&(f[w].pos=m)}2==f.length?(a.preventDefault(),objectContainer.interactive=!1,b=Math.sqrt(Math.pow(f[1].pos[0]-f[0].pos[0],2)+Math.pow(f[1].pos[1]-f[0].pos[1],2)),c=to_y_local_vect(b)/dpi,k=[f[0].pos[0]+(f[1].pos[0]-f[0].pos[0])/2,f[0].pos[1]+(f[1].pos[1]-f[0].pos[1])/2],g||1.5<c?(c=.9*(b/e-1),d=c=d?.8*d+.2*c:c,zoom(Math.abs(c),0<c,n),g=h=!0):(h=!0,c=[to_x_local(k[0])-to_x_local(n[0]),to_y_local(k[1])-to_y_local(n[1])],objectContainer.x+=c[0],objectContainer.y+=c[1],
correct()),e=b):objectContainer.interactive=!0})});draw_canvas=document.createElement("canvas");$(draw_canvas).attr("style","padding:0px; margin:0px; border:0; position:absolute; z-index:3; pointer-events:none;");draw_canvas.width=renderer.view.width;draw_canvas.height=renderer.view.height;draw_context=draw_canvas.getContext("2d");$(draw_canvas).css("width",""+renderer.view.width+"px");$(draw_canvas).css("height",""+renderer.view.width+"px");temp_draw_canvas=document.createElement("canvas");$(temp_draw_canvas).attr("style",
"padding:0px; margin:0px; border:0; position:absolute; z-index:4; pointer-events:none");temp_draw_canvas.width=renderer.view.width;temp_draw_canvas.height=renderer.view.height;temp_draw_context=temp_draw_canvas.getContext("2d");$(temp_draw_canvas).css("width",""+renderer.view.width+"px");$(temp_draw_canvas).css("height",""+renderer.view.width+"px");$(renderer.view).parent().append(temp_draw_canvas);$(renderer.view).parent().append(draw_canvas);$(temp_draw_canvas).hide();$(draw_canvas).hide();m();
if(textures_loaded)a();else loader.on("complete",a);socket.on("room_data",function(a,b,c,d){cleanup();room_data=a;video_paused=a.video_paused;active_slide=room_data.active_slide;room_data.slides[active_slide]||(active_slide=Object.keys(room_data.slides)[0]);is_room_locked=room_data.locked;room_data.hasOwnProperty("presentation_mode")&&set_presentation_mode(room_data.presentation_mode);my_user_id=b;(tactic_name=c)&&""!=tactic_name&&(document.title="Tactic - "+tactic_name);for(var e in room_data.userlist)add_user(room_data.userlist[e]);
var f=[],g,k;for(k in room_data.slides[active_slide].entities)"background"==room_data.slides[active_slide].entities[k].type?g=room_data.slides[active_slide].entities[k]:f.push(room_data.slides[active_slide].entities[k]);try{f.sort(function(a,b){return a.z_index-b.z_index})}catch(y){}var h=function(){if(room_data.slides[active_slide].pan_zoom){var a=room_data.slides[active_slide].pan_zoom;pan_zoom(a[0],a[1],a[2])}else pan_zoom(1,.5,.5);wot_live&&wot_connect()};g?set_background(g,function(){if(background.is_video)rebuild_timeline(),
room_data.playback_rate&&set_playback_rate(room_data.playback_rate,room_data.playback_rate);else for(var a in f)create_entity(f[a]);h()}):h();for(k in room_data.trackers)create_tracker(room_data.trackers[k]);delete room_data.trackers;update_slide_buttons();update_my_user();my_tracker&&(stop_tracking(),start_tracking({x:2E3,y:2E3}));is_video_replay&&(sync_start_time=Date.now(),socket.emit("sync_clock"),clearInterval(clock_sync_event),clock_sync_event=setInterval(function(){sync_start_time=Date.now();
socket.emit("sync_clock")},2E4));render_scene()});socket.on("create_entity",function(a,b,c){b!=active_slide?room_data.slides[b].entities[a.uid]=a:create_entity(a);activity_animation(c)});socket.on("drag",function(a,b,c,d,e,f,g){b!=active_slide?room_data.slides[b].entities[a]&&(room_data.slides[b].entities[a].x=c,room_data.slides[b].entities[a].y=d,e&&(room_data.slides[b].entities[a].scale=e),f&&(room_data.slides[b].entities[a].rotation=f)):room_data.slides[b].entities[a]&&drag_entity(room_data.slides[active_slide].entities[a],
c,d,e,f);activity_animation(g)});socket.on("ping_marker",function(a,b,c,d,e){ping(a,b,c,d);activity_animation(e)});socket.on("chat",function(a,b){chat(a,b)});socket.on("identify",function(a){my_user?(my_user.logged_in=a.logged_in,my_user.name=a.name):my_user=a;update_my_user()});socket.on("remove",function(a,b,c){b!=active_slide?delete room_data.slides[b].entities[a]:remove(a);activity_animation(c)});socket.on("add_user",function(a){add_user(a)});socket.on("remove_user",function(a){remove_user(a)});
socket.on("lock_room",function(a,b){is_room_locked=a;update_lock();activity_animation(b)});socket.on("presentation_mode",function(a,b,c){set_presentation_mode(a);1==a&&change_slide(b);update_slide_buttons();activity_animation(c)});socket.on("change_slide",function(a){a!=active_slide&&change_slide(a)});socket.on("new_slide",function(a,b){add_slide(a);activity_animation(b)});socket.on("remove_slide",function(a,b){1>=Object.keys(room_data.slides)?socket.emit("join_room",room,game):(remove_slide(a),activity_animation(b))});
socket.on("rename_slide",function(a,b,c){rename_slide(a,b);activity_animation(c)});socket.on("change_slide_order",function(a,b,c){room_data.slides[a].order=b;update_slide_buttons();activity_animation(c)});socket.on("track",function(a,b){trackers[a.uid]&&remove_tracker(uid);create_tracker(a);activity_animation(b)});socket.on("track_move",function(a,b,c){move_tracker(a,b,c)});socket.on("stop_track",function(a){remove_tracker(a)});socket.on("show_grid",function(a,b,c){room_data.slides[a].show_grid=b;
a==active_slide&&(grid_layer.visible=b,render_scene());activity_animation(c)});socket.on("pan_zoom",function(a,b,c,d,e){activity_animation(e);room_data.slides[a]=[b,c,d];a==active_slide&&pan_zoom(b,c,d)});socket.on("force_reconnect",function(){location.reload()});socket.on("play_video",function(a,b,c,d){activity_animation(d);set_playback_rate(c,c);handle_play(a,b)});socket.on("pause_video",function(a,b){handle_pause(a);activity_animation(b)});socket.on("sync_video",function(a,b,c){handle_sync(a,b,
c)});socket.on("request_sync",function(){if(im_syncing)for(var a=0;5>=a;a++)setTimeout(function(){var a=video_progress();socket.emit("sync_video",room,a,get_server_time())},2E3*a)});socket.on("sync_clock",function(a){var b=Date.now();offset=a+(b-sync_start_time)/2-b});socket.on("seek_video",function(a,b,c){video_media.setCurrentTime(a);video_paused?video_player.pause():(handle_sync(a,b,c),wait_for_seek(function(){rebuild_timeline()}))});socket.on("change_rate",function(a){set_playback_rate(a,a)})});

//# sourceMappingURL=combined.js.map