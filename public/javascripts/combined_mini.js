(function(C){var e=function(e,l){this.init("simplecolorpicker",e,l)};e.prototype={constructor:e,init:function(e,l,a){var g=this;g.type=e;g.$select=C(l);g.$select.hide();g.options=C.extend({},C.fn.simplecolorpicker.defaults,a);g.$colorList=null;!0===g.options.picker?(e=g.$select.find("> option:selected").text(),g.$icon=C('<span class="simplecolorpicker icon" title="'+e+'" style="background-color: '+g.$select.val()+';" role="button" tabindex="0"></span>').insertAfter(g.$select),g.$icon.on("click."+
g.type,C.proxy(g.showPicker,g)),g.$picker=C('<span class="simplecolorpicker picker '+g.options.theme+'"></span>').appendTo(document.body),g.$colorList=g.$picker,C(document).on("mousedown."+g.type,C.proxy(g.hidePicker,g)),g.$picker.on("mousedown."+g.type,C.proxy(g.mousedown,g))):(g.$inline=C('<span class="simplecolorpicker inline '+g.options.theme+'"></span>').insertAfter(g.$select),g.$colorList=g.$inline);g.$select.find("> option").each(function(){var c=C(this),a=c.val(),b=c.is(":selected"),d=c.is(":disabled"),
k="";!0===b&&(k=" data-selected");b="";!0===d&&(b=" data-disabled");var m="";!1===d&&(m=' title="'+c.text()+'"');var r="";!1===d&&(r=' role="button" tabindex="0"');a=C('<span class="color"'+m+' style="background-color: '+a+';" data-color="'+a+'"'+k+b+r+"></span>");g.$colorList.append(a);a.on("click."+g.type,C.proxy(g.colorSpanClicked,g));!0===c.next().is("optgroup")&&g.$colorList.append('<span class="vr"></span>')})},selectColor:function(e){var l=this.$colorList.find("> span.color").filter(function(){return C(this).data("color").toLowerCase()===
e.toLowerCase()});0<l.length?this.selectColorSpan(l):console.error("The given color '"+e+"' could not be found")},showPicker:function(){var e=this.$icon.offset();this.$picker.css({left:e.left-6,top:e.top+this.$icon.outerHeight()});this.$picker.show(this.options.pickerDelay)},hidePicker:function(){this.$picker.hide(this.options.pickerDelay)},selectColorSpan:function(e){var l=e.data("color"),a=e.prop("title");e.siblings().removeAttr("data-selected");e.attr("data-selected","");!0===this.options.picker&&
(this.$icon.css("background-color",l),this.$icon.prop("title",a),this.hidePicker());this.$select.val(l)},colorSpanClicked:function(e){!1===C(e.target).is("[data-disabled]")&&(this.selectColorSpan(C(e.target)),this.$select.trigger("change"))},mousedown:function(e){e.stopPropagation();e.preventDefault()},destroy:function(){!0===this.options.picker&&(this.$icon.off("."+this.type),this.$icon.remove(),C(document).off("."+this.type));this.$colorList.off("."+this.type);this.$colorList.remove();this.$select.removeData(this.type);
this.$select.show()}};C.fn.simplecolorpicker=function(h){var l=C.makeArray(arguments);l.shift();return this.each(function(){var a=C(this),g=a.data("simplecolorpicker"),c="object"===typeof h&&h;void 0===g&&a.data("simplecolorpicker",g=new e(this,c));"string"===typeof h&&g[h].apply(g,l)})};C.fn.simplecolorpicker.defaults={theme:"",picker:!1,pickerDelay:0}})(jQuery);/*

 pixi.js - v3.0.9
 Compiled 2015-12-22T18:28:46.266Z

 pixi.js is licensed under the MIT License.
 http://www.opensource.org/licenses/mit-license.php


 The MIT License

 Copyright (c) 2013-2015 Mathew Groves

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.


   2013-2015 GoodBoyDigital
 @license     {@link https://github.com/pixijs/pixi.js/blob/master/LICENSE|MIT License}
   2013-2015 GoodBoyDigital
 @license     {@link https://github.com/pixijs/pixi.js/blob/master/LICENSE|MIT License}
   2013-2015 GoodBoyDigital
 @license     {@link https://github.com/pixijs/pixi.js/blob/master/LICENSE|MIT License}
   2013-2015 GoodBoyDigital
 @license     {@link https://github.com/pixijs/pixi.js/blob/master/LICENSE|MIT License}
   2013-2015 GoodBoyDigital
 @license     {@link https://github.com/pixijs/pixi.js/blob/master/LICENSE|MIT License}
   2013-2015 GoodBoyDigital
 @license     {@link https://github.com/pixijs/pixi.js/blob/master/LICENSE|MIT License}
   2013-2015 GoodBoyDigital
 @license     {@link https://github.com/pixijs/pixi.js/blob/master/LICENSE|MIT License}
*/
(function(C){"object"===typeof exports&&"undefined"!==typeof module?module.exports=C():"function"===typeof define&&define.amd?define([],C):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).PIXI=C()})(function(){return function e(h,l,a){function g(b,d){if(!l[b]){if(!h[b]){var f="function"==typeof require&&require;if(!d&&f)return f(b,!0);if(c)return c(b,!0);f=Error("Cannot find module '"+b+"'");throw f.code="MODULE_NOT_FOUND",f;}f=l[b]={exports:{}};
h[b][0].call(f.exports,function(c){var d=h[b][1][c];return g(d?d:c)},f,f.exports,e,h,l,a)}return l[b].exports}for(var c="function"==typeof require&&require,f=0;f<a.length;f++)g(a[f]);return g}({1:[function(e,h,l){(function(a,g){(function(){function c(){}function f(b){return b}function b(b){return!!b}function d(b){return!b}function k(b){return function(){if(null===b)throw Error("Callback was already called.");b.apply(this,arguments);b=null}}function m(b){return function(){null!==b&&(b.apply(this,arguments),
b=null)}}function r(b){return R(b)||"number"===typeof b.length&&0<=b.length&&0===b.length%1}function p(b,c){for(var d=-1,a=b.length;++d<a;)c(b[d],d,b)}function B(b,d){for(var c=-1,a=b.length,f=Array(a);++c<a;)f[c]=d(b[c],c,b);return f}function e(b){return B(Array(b),function(b,c){return c})}function n(b,c,d){p(b,function(b,a,f){d=c(d,b,a,f)});return d}function t(b,c){p(T(b),function(d){c(b[d],d)})}function E(b,c){for(var d=0;d<b.length;d++)if(b[d]===c)return d;return-1}function z(b){var d=-1,c,a;
if(r(b))return c=b.length,function(){d++;return d<c?d:null};a=T(b);c=a.length;return function(){d++;return d<c?a[d]:null}}function y(b,d){d=null==d?b.length-1:+d;return function(){for(var c=Math.max(arguments.length-d,0),a=Array(c),f=0;f<c;f++)a[f]=arguments[f+d];switch(d){case 0:return b.call(this,a);case 1:return b.call(this,arguments[0],a)}}}function w(b){return function(d,c,a){return b(d,a)}}function D(b){return function(d,a,f){f=m(f||c);d=d||[];var p=z(d);if(0>=b)return f(null);var r=!1,g=0,
B=!1;(function X(){if(r&&0>=g)return f(null);for(;g<b&&!B;){var c=p();if(null===c){r=!0;0>=g&&f(null);break}g+=1;a(d[c],c,k(function(b){--g;b?(f(b),B=!0):X()}))}})()}}function I(b){return function(d,c,a){return b(x.eachOf,d,c,a)}}function L(b){return function(d,c,a,f){return b(D(c),d,a,f)}}function F(b){return function(d,c,a){return b(x.eachOfSeries,d,c,a)}}function v(b,d,a,f){f=m(f||c);d=d||[];var k=r(d)?[]:{};b(d,function(b,d,c){a(b,function(b,a){k[d]=a;c(b)})},function(b){f(b,k)})}function M(b,
d,c,a){var f=[];b(d,function(b,d,a){c(b,function(c){c&&f.push({index:d,value:b});a()})},function(){a(B(f.sort(function(b,d){return b.index-d.index}),function(b){return b.value}))})}function A(b,d,c,a){M(b,d,function(b,d){c(b,function(b){d(!b)})},a)}function u(b,d,c){return function(a,f,k,m){function p(){m&&m(c(!1,void 0))}function r(b,a,f){if(!m)return f();k(b,function(a){m&&d(a)&&(m(c(!0,b)),m=k=!1);f()})}3<arguments.length?b(a,f,r,p):(m=k,k=f,b(a,r,p))}}function l(b,d){return d}function K(b,d,a){a=
a||c;var f=r(d)?[]:{};b(d,function(b,d,c){b(y(function(b,a){1>=a.length&&(a=a[0]);f[d]=a;c(b)}))},function(b){a(b,f)})}function N(b,d,c,a){var f=[];b(d,function(b,d,a){c(b,function(b,d){f=f.concat(d||[]);a(b)})},function(b){a(b,f)})}function H(b,d,a){function f(b,d,a,k){if(null!=k&&"function"!==typeof k)throw Error("task callback must be a function");b.started=!0;R(d)||(d=[d]);if(0===d.length&&b.idle())return x.setImmediate(function(){b.drain()});p(d,function(d){d={data:d,callback:k||c};a?b.tasks.unshift(d):
b.tasks.push(d);b.tasks.length===b.concurrency&&b.saturated()});x.setImmediate(b.process)}function m(b,d){return function(){--r;var c=!1,a=arguments;p(d,function(b){p(g,function(d,a){d!==b||c||(g.splice(a,1),c=!0)});b.callback.apply(b,a)});0===b.tasks.length+r&&b.drain();b.process()}}if(null==d)d=1;else if(0===d)throw Error("Concurrency must not be zero");var r=0,g=[],e={tasks:[],concurrency:d,payload:a,saturated:c,empty:c,drain:c,started:!1,paused:!1,push:function(b,d){f(e,b,!1,d)},kill:function(){e.drain=
c;e.tasks=[]},unshift:function(b,d){f(e,b,!0,d)},process:function(){if(!e.paused&&r<e.concurrency&&e.tasks.length)for(;r<e.concurrency&&e.tasks.length;){var d=e.payload?e.tasks.splice(0,e.payload):e.tasks.splice(0,e.tasks.length),c=B(d,function(b){return b.data});0===e.tasks.length&&e.empty();r+=1;g.push(d[0]);d=k(m(e,d));b(c,d)}},length:function(){return e.tasks.length},running:function(){return r},workersList:function(){return g},idle:function(){return 0===e.tasks.length+r},pause:function(){e.paused=
!0},resume:function(){if(!1!==e.paused){e.paused=!1;for(var b=Math.min(e.concurrency,e.tasks.length),d=1;d<=b;d++)x.setImmediate(e.process)}}};return e}function G(b){return y(function(d,c){d.apply(null,c.concat([y(function(d,c){"object"===typeof console&&(d?console.error&&console.error(d):console[b]&&p(c,function(d){console[b](d)}))})]))})}function O(b){return function(d,c,a){b(e(d),c,a)}}function P(b){return y(function(d,c){var a=y(function(c){var a=this,f=c.pop();return b(d,function(b,d,f){b.apply(a,
c.concat([f]))},f)});return c.length?a.apply(this,c):a})}function Q(b){return y(function(d){var c=d.pop();d.push(function(){var b=arguments;a?x.setImmediate(function(){c.apply(null,b)}):c.apply(null,b)});var a=!0;b.apply(this,d);a=!1})}var x={},V,S="object"===typeof self&&self.self===self&&self||"object"===typeof g&&g.global===g&&g||this;null!=S&&(V=S.async);x.noConflict=function(){S.async=V;return x};var Y=Object.prototype.toString,R=Array.isArray||function(b){return"[object Array]"===Y.call(b)},
Z=function(b){var d=typeof b;return"function"===d||"object"===d&&!!b},T=Object.keys||function(b){var d=[],c;for(c in b)b.hasOwnProperty(c)&&d.push(c);return d},U="function"===typeof setImmediate&&setImmediate,W=U?function(b){U(b)}:function(b){setTimeout(b,0)};x.nextTick="object"===typeof a&&"function"===typeof a.nextTick?a.nextTick:W;x.setImmediate=U?W:x.nextTick;x.forEach=x.each=function(b,d,c){return x.eachOf(b,w(d),c)};x.forEachSeries=x.eachSeries=function(b,d,c){return x.eachOfSeries(b,w(d),c)};
x.forEachLimit=x.eachLimit=function(b,d,c,a){return D(d)(b,w(c),a)};x.forEachOf=x.eachOf=function(b,d,a){function f(b){g--;b?a(b):null===r&&0>=g&&a(null)}a=m(a||c);b=b||[];for(var p=z(b),r,g=0;null!=(r=p());)g+=1,d(b[r],r,k(f));0===g&&a(null)};x.forEachOfSeries=x.eachOfSeries=function(b,d,a){function f(){var c=!0;if(null===r)return a(null);d(b[r],r,k(function(b){if(b)a(b);else{r=p();if(null===r)return a(null);c?x.setImmediate(f):f()}}));c=!1}a=m(a||c);b=b||[];var p=z(b),r=p();f()};x.forEachOfLimit=
x.eachOfLimit=function(b,d,c,a){D(d)(b,c,a)};x.map=I(v);x.mapSeries=F(v);x.mapLimit=L(v);x.inject=x.foldl=x.reduce=function(b,d,c,a){x.eachOfSeries(b,function(b,a,f){c(d,b,function(b,c){d=c;f(b)})},function(b){a(b,d)})};x.foldr=x.reduceRight=function(b,d,c,a){b=B(b,f).reverse();x.reduce(b,d,c,a)};x.transform=function(b,d,c,a){3===arguments.length&&(a=c,c=d,d=R(b)?[]:{});x.eachOf(b,function(b,a,f){c(d,b,a,f)},function(b){a(b,d)})};x.select=x.filter=I(M);x.selectLimit=x.filterLimit=L(M);x.selectSeries=
x.filterSeries=F(M);x.reject=I(A);x.rejectLimit=L(A);x.rejectSeries=F(A);x.any=x.some=u(x.eachOf,b,f);x.someLimit=u(x.eachOfLimit,b,f);x.all=x.every=u(x.eachOf,d,d);x.everyLimit=u(x.eachOfLimit,d,d);x.detect=u(x.eachOf,f,l);x.detectSeries=u(x.eachOfSeries,f,l);x.detectLimit=u(x.eachOfLimit,f,l);x.sortBy=function(b,d,c){function a(b,d){var c=b.criteria,f=d.criteria;return c<f?-1:c>f?1:0}x.map(b,function(b,c){d(b,function(d,a){d?c(d):c(null,{value:b,criteria:a})})},function(b,d){if(b)return c(b);c(null,
B(d.sort(a),function(b){return b.value}))})};x.auto=function(b,d,a){function f(){r--;p(e.slice(0),function(b){b()})}a||(a=d,d=null);a=m(a||c);var k=T(b),r=k.length;if(!r)return a(null);d||(d=r);var g={},B=0,e=[];e.unshift(function(){r||a(null,g)});p(k,function(c){function k(){return B<d&&n(q,function(b,d){return b&&g.hasOwnProperty(d)},!0)&&!g.hasOwnProperty(c)}function m(){if(k()){B++;var b=E(e,m);0<=b&&e.splice(b,1);p[p.length-1](r,g)}}for(var p=R(b[c])?b[c]:[b[c]],r=y(function(b,d){B--;1>=d.length&&
(d=d[0]);if(b){var k={};t(g,function(b,d){k[d]=b});k[c]=d;a(b,k)}else g[c]=d,x.setImmediate(f)}),q=p.slice(0,p.length-1),z=q.length,w;z--;){if(!(w=b[q[z]]))throw Error("Has inexistant dependency");if(R(w)&&0<=E(w,c))throw Error("Has cyclic dependencies");}k()?(B++,p[p.length-1](r,g)):e.unshift(m)})};x.retry=function(b,d,c){function a(b,d){if("number"===typeof d)b.times=parseInt(d,10)||5;else if("object"===typeof d)b.times=parseInt(d.times,10)||5,b.interval=parseInt(d.interval,10)||0;else throw Error("Unsupported argument type for 'times': "+
typeof d);}function f(b,d){function c(b,a){return function(c){b(function(b,d){c(!b||a,{err:b,result:d})},d)}}function a(b){return function(d){setTimeout(function(){d(null)},b)}}for(;m.times;){var p=!--m.times;k.push(c(m.task,p));!p&&0<m.interval&&k.push(a(m.interval))}x.series(k,function(d,c){c=c[c.length-1];(b||m.callback)(c.err,c.result)})}var k=[],m={times:5,interval:0},p=arguments.length;if(1>p||3<p)throw Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");
2>=p&&"function"===typeof b&&(c=d,d=b);"function"!==typeof b&&a(m,b);m.callback=c;m.task=d;return m.callback?f():f};x.waterfall=function(b,d){function a(b){return y(function(c,f){if(c)d.apply(null,[c].concat(f));else{var k=b.next();k?f.push(a(k)):f.push(d);Q(b).apply(null,f)}})}d=m(d||c);if(!R(b))return d(Error("First argument to waterfall must be an array of functions"));if(!b.length)return d();a(x.iterator(b))()};x.parallel=function(b,d){K(x.eachOf,b,d)};x.parallelLimit=function(b,d,c){K(D(d),b,
c)};x.series=function(b,d){K(x.eachOfSeries,b,d)};x.iterator=function(b){function d(c){function a(){b.length&&b[c].apply(null,arguments);return a.next()}a.next=function(){return c<b.length-1?d(c+1):null};return a}return d(0)};x.apply=y(function(b,d){return y(function(c){return b.apply(null,d.concat(c))})});x.concat=I(N);x.concatSeries=F(N);x.whilst=function(b,d,a){a=a||c;if(b()){var f=y(function(c,k){c?a(c):b.apply(this,k)?d(f):a(null)});d(f)}else a(null)};x.doWhilst=function(b,d,c){var a=0;return x.whilst(function(){return 1>=
++a||d.apply(this,arguments)},b,c)};x.until=function(b,d,c){return x.whilst(function(){return!b.apply(this,arguments)},d,c)};x.doUntil=function(b,d,c){return x.doWhilst(b,function(){return!d.apply(this,arguments)},c)};x.during=function(b,d,a){a=a||c;var f=y(function(d,c){d?a(d):(c.push(k),b.apply(this,c))}),k=function(b,c){b?a(b):c?d(f):a(null)};b(k)};x.doDuring=function(b,d,c){var a=0;x.during(function(b){1>a++?b(null,!0):d.apply(this,arguments)},b,c)};x.queue=function(b,d){return H(function(d,c){b(d[0],
c)},d,1)};x.priorityQueue=function(b,d){function a(b,d){return b.priority-d.priority}function f(b,d,c){for(var a=-1,k=b.length-1;a<k;){var m=a+(k-a+1>>>1);0<=c(d,b[m])?a=m:k=m-1}return a}function k(b,d,m,r){if(null!=r&&"function"!==typeof r)throw Error("task callback must be a function");b.started=!0;R(d)||(d=[d]);if(0===d.length)return x.setImmediate(function(){b.drain()});p(d,function(d){d={data:d,priority:m,callback:"function"===typeof r?r:c};b.tasks.splice(f(b.tasks,d,a)+1,0,d);b.tasks.length===
b.concurrency&&b.saturated();x.setImmediate(b.process)})}var m=x.queue(b,d);m.push=function(b,d,c){k(m,b,d,c)};delete m.unshift;return m};x.cargo=function(b,d){return H(b,1,d)};x.log=G("log");x.dir=G("dir");x.memoize=function(b,d){var c={},a={};d=d||f;var k=y(function(f){var k=f.pop(),m=d.apply(null,f);m in c?x.setImmediate(function(){k.apply(null,c[m])}):m in a?a[m].push(k):(a[m]=[k],b.apply(null,f.concat([y(function(b){c[m]=b;var d=a[m];delete a[m];for(var f=0,k=d.length;f<k;f++)d[f].apply(null,
b)})])))});k.memo=c;k.unmemoized=b;return k};x.unmemoize=function(b){return function(){return(b.unmemoized||b).apply(null,arguments)}};x.times=O(x.map);x.timesSeries=O(x.mapSeries);x.timesLimit=function(b,d,c,a){return x.mapLimit(e(b),d,c,a)};x.seq=function(){var b=arguments;return y(function(d){var a=this,f=d[d.length-1];"function"==typeof f?d.pop():f=c;x.reduce(b,d,function(b,d,c){d.apply(a,b.concat([y(function(b,d){c(b,d)})]))},function(b,d){f.apply(a,[b].concat(d))})})};x.compose=function(){return x.seq.apply(null,
Array.prototype.reverse.call(arguments))};x.applyEach=P(x.eachOf);x.applyEachSeries=P(x.eachOfSeries);x.forever=function(b,d){function a(b){if(b)return f(b);m(a)}var f=k(d||c),m=Q(b);a()};x.ensureAsync=Q;x.constant=y(function(b){var d=[null].concat(b);return function(b){return b.apply(this,d)}});x.wrapSync=x.asyncify=function(b){return y(function(d){var c=d.pop(),a;try{a=b.apply(this,d)}catch(f){return c(f)}if(Z(a)&&"function"===typeof a.then)a.then(function(b){c(null,b)})["catch"](function(b){c(b.message?
b:Error(b))});else c(null,a)})};"object"===typeof h&&h.exports?h.exports=x:S.async=x})()}).call(this,e("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{_process:3}],2:[function(e,h,l){(function(a){function g(b,c){for(var a=0,f=b.length-1;0<=f;f--){var p=b[f];"."===p?b.splice(f,1):".."===p?(b.splice(f,1),a++):a&&(b.splice(f,1),a--)}if(c)for(;a--;a)b.unshift("..");return b}function c(b,c){if(b.filter)return b.filter(c);for(var a=
[],f=0;f<b.length;f++)c(b[f],f,b)&&a.push(b[f]);return a}var f=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;l.resolve=function(){for(var b="",f=!1,m=arguments.length-1;-1<=m&&!f;m--){var r=0<=m?arguments[m]:a.cwd();if("string"!==typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(b=r+"/"+b,f="/"===r.charAt(0))}b=g(c(b.split("/"),function(b){return!!b}),!f).join("/");return(f?"/":"")+b||"."};l.normalize=function(d){var a=l.isAbsolute(d),f="/"===b(d,-1);
(d=g(c(d.split("/"),function(b){return!!b}),!a).join("/"))||a||(d=".");d&&f&&(d+="/");return(a?"/":"")+d};l.isAbsolute=function(b){return"/"===b.charAt(0)};l.join=function(){var b=Array.prototype.slice.call(arguments,0);return l.normalize(c(b,function(b,d){if("string"!==typeof b)throw new TypeError("Arguments to path.join must be strings");return b}).join("/"))};l.relative=function(b,c){function a(b){for(var d=0;d<b.length&&""===b[d];d++);for(var c=b.length-1;0<=c&&""===b[c];c--);return d>c?[]:b.slice(d,
c-d+1)}b=l.resolve(b).substr(1);c=l.resolve(c).substr(1);for(var f=a(b.split("/")),p=a(c.split("/")),g=Math.min(f.length,p.length),e=g,n=0;n<g;n++)if(f[n]!==p[n]){e=n;break}g=[];for(n=e;n<f.length;n++)g.push("..");g=g.concat(p.slice(e));return g.join("/")};l.sep="/";l.delimiter=":";l.dirname=function(b){var c=f.exec(b).slice(1);b=c[0];c=c[1];if(!b&&!c)return".";c&&(c=c.substr(0,c.length-1));return b+c};l.basename=function(b,c){var a=f.exec(b).slice(1)[2];c&&a.substr(-1*c.length)===c&&(a=a.substr(0,
a.length-c.length));return a};l.extname=function(b){return f.exec(b).slice(1)[3]};var b="b"==="ab".substr(-1)?function(b,c,a){return b.substr(c,a)}:function(b,c,a){0>c&&(c=b.length+c);return b.substr(c,a)}}).call(this,e("_process"))},{_process:3}],3:[function(e,h,l){function a(){d=!1;k.length?b=k.concat(b):m=-1;b.length&&g()}function g(){if(!d){var c=setTimeout(a);d=!0;for(var f=b.length;f;){k=b;for(b=[];++m<f;)k&&k[m].run();m=-1;f=b.length}k=null;d=!1;clearTimeout(c)}}function c(b,d){this.fun=b;
this.array=d}function f(){}e=h.exports={};var b=[],d=!1,k,m=-1;e.nextTick=function(a){var f=Array(arguments.length-1);if(1<arguments.length)for(var k=1;k<arguments.length;k++)f[k-1]=arguments[k];b.push(new c(a,f));1!==b.length||d||setTimeout(g,0)};c.prototype.run=function(){this.fun.apply(null,this.array)};e.title="browser";e.browser=!0;e.env={};e.argv=[];e.version="";e.versions={};e.on=f;e.addListener=f;e.once=f;e.off=f;e.removeListener=f;e.removeAllListeners=f;e.emit=f;e.binding=function(b){throw Error("process.binding is not supported");
};e.cwd=function(){return"/"};e.chdir=function(b){throw Error("process.chdir is not supported");};e.umask=function(){return 0}},{}],4:[function(e,h,l){(function(a){(function(g){function c(b){throw RangeError(w[b]);}function f(b,d){for(var c=b.length,a=[];c--;)a[c]=d(b[c]);return a}function b(b,d){var c=b.split("@"),a="";1<c.length&&(a=c[0]+"@",b=c[1]);b=b.replace(y,".");c=b.split(".");c=f(c,d).join(".");return a+c}function d(b){for(var d=[],c=0,a=b.length,f,k;c<a;)f=b.charCodeAt(c++),55296<=f&&56319>=
f&&c<a?(k=b.charCodeAt(c++),56320==(k&64512)?d.push(((f&1023)<<10)+(k&1023)+65536):(d.push(f),c--)):d.push(f);return d}function k(b){return f(b,function(b){var d="";65535<b&&(b-=65536,d+=I(b>>>10&1023|55296),b=56320|b&1023);return d+=I(b)}).join("")}function m(b,d){return b+22+75*(26>b)-((0!=d)<<5)}function r(b,d,c){var a=0;b=c?D(b/700):b>>1;for(b+=D(b/d);455<b;a+=36)b=D(b/35);return D(a+36*b/(b+38))}function p(b){var d=[],a=b.length,f,m=0,p=128,g=72,B,e,q,n,z;B=b.lastIndexOf("-");0>B&&(B=0);for(e=
0;e<B;++e)128<=b.charCodeAt(e)&&c("not-basic"),d.push(b.charCodeAt(e));for(B=0<B?B+1:0;B<a;){e=m;f=1;for(q=36;;q+=36){B>=a&&c("invalid-input");n=b.charCodeAt(B++);n=10>n-48?n-22:26>n-65?n-65:26>n-97?n-97:36;(36<=n||n>D((2147483647-m)/f))&&c("overflow");m+=n*f;z=q<=g?1:q>=g+26?26:q-g;if(n<z)break;n=36-z;f>D(2147483647/n)&&c("overflow");f*=n}f=d.length+1;g=r(m-e,f,0==e);D(m/f)>2147483647-p&&c("overflow");p+=D(m/f);m%=f;d.splice(m++,0,p)}return k(d)}function B(b){var a,f,k,p,g,B,e,q,n,z=[],t,w,E;b=d(b);
t=b.length;a=128;f=0;g=72;for(B=0;B<t;++B)n=b[B],128>n&&z.push(I(n));for((k=p=z.length)&&z.push("-");k<t;){e=2147483647;for(B=0;B<t;++B)n=b[B],n>=a&&n<e&&(e=n);w=k+1;e-a>D((2147483647-f)/w)&&c("overflow");f+=(e-a)*w;a=e;for(B=0;B<t;++B)if(n=b[B],n<a&&2147483647<++f&&c("overflow"),n==a){q=f;for(e=36;;e+=36){n=e<=g?1:e>=g+26?26:e-g;if(q<n)break;E=q-n;q=36-n;z.push(I(m(n+E%q,0)));q=D(E/q)}z.push(I(m(q,0)));g=r(f,w,k==p);f=0;++k}++f;++a}return z.join("")}var e="object"==typeof l&&l&&!l.nodeType&&l,n=
"object"==typeof h&&h&&!h.nodeType&&h,t="object"==typeof a&&a;if(t.global===t||t.window===t||t.self===t)g=t;var E=/^xn--/,z=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=Math.floor,I=String.fromCharCode,L,t={version:"1.3.2",ucs2:{decode:d,encode:k},decode:p,encode:B,toASCII:function(d){return b(d,function(b){return z.test(b)?"xn--"+B(b):b})},
toUnicode:function(d){return b(d,function(b){return E.test(b)?p(b.slice(4).toLowerCase()):b})}};if(e&&n)if(h.exports==e)n.exports=t;else for(L in t)t.hasOwnProperty(L)&&(e[L]=t[L]);else g.punycode=t})(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],5:[function(e,h,l){h.exports=function(g,c,f,b){f=f||"=";var d={};if("string"!==typeof g||0===g.length)return d;var k=/\+/g;g=g.split(c||"&");c=1E3;b&&"number"===typeof b.maxKeys&&
(c=b.maxKeys);b=g.length;0<c&&b>c&&(b=c);for(c=0;c<b;++c){var m=g[c].replace(k,"%20"),r=m.indexOf(f),p;0<=r?(p=m.substr(0,r),m=m.substr(r+1)):(p=m,m="");p=decodeURIComponent(p);m=decodeURIComponent(m);Object.prototype.hasOwnProperty.call(d,p)?a(d[p])?d[p].push(m):d[p]=[d[p],m]:d[p]=m}return d};var a=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],6:[function(e,h,l){function a(b,d){if(b.map)return b.map(d);for(var c=[],a=0;a<b.length;a++)c.push(d(b[a],a));
return c}var g=function(b){switch(typeof b){case "string":return b;case "boolean":return b?"true":"false";case "number":return isFinite(b)?b:"";default:return""}};h.exports=function(b,d,k,m){d=d||"&";k=k||"=";null===b&&(b=void 0);return"object"===typeof b?a(f(b),function(f){var m=encodeURIComponent(g(f))+k;return c(b[f])?a(b[f],function(b){return m+encodeURIComponent(g(b))}).join(d):m+encodeURIComponent(g(b[f]))}).join(d):m?encodeURIComponent(g(m))+k+encodeURIComponent(g(b)):""};var c=Array.isArray||
function(b){return"[object Array]"===Object.prototype.toString.call(b)},f=Object.keys||function(b){var d=[],c;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&d.push(c);return d}},{}],7:[function(e,h,l){l.decode=l.parse=e("./decode");l.encode=l.stringify=e("./encode")},{"./decode":5,"./encode":6}],8:[function(e,h,l){function a(){this.href=this.path=this.pathname=this.query=this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}function g(b,d,f){if(b&&
c(b)&&b instanceof a)return b;var k=new a;k.parse(b,d,f);return k}function c(b){return"object"===typeof b&&null!==b}var f=e("punycode");l.parse=g;l.resolve=function(b,d){return g(b,!1,!0).resolve(d)};l.resolveObject=function(b,d){return b?g(b,!1,!0).resolveObject(d):d};l.format=function(b){"string"===typeof b&&(b=g(b));return b instanceof a?b.format():a.prototype.format.call(b)};l.Url=a;var b=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/;h="{}|\\^`".split("").concat('<>"` \r\n\t'.split(""));var k=["'"].concat(h),
m=["%","/","?",";","#"].concat(k),r=["/","?","#"],p=/^[a-z0-9A-Z_-]{0,63}$/,B=/^([a-z0-9A-Z_-]{0,63})(.*)$/,q={javascript:!0,"javascript:":!0},n={javascript:!0,"javascript:":!0},t={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},E=e("querystring");a.prototype.parse=function(d,c,a){if("string"!==typeof d)throw new TypeError("Parameter 'url' must be a string, not "+typeof d);d=d.trim();var g=b.exec(d);if(g){var g=g[0],e=g.toLowerCase();this.protocol=
e;d=d.substr(g.length)}if(a||g||d.match(/^\/\/[^@\/]+@[^@\/]+/)){var h="//"===d.substr(0,2);!h||g&&n[g]||(d=d.substr(2),this.slashes=!0)}if(!n[g]&&(h||g&&!t[g])){h=-1;for(a=0;a<r.length;a++)g=d.indexOf(r[a]),-1!==g&&(-1===h||g<h)&&(h=g);h=-1===h?d.lastIndexOf("@"):d.lastIndexOf("@",h);-1!==h&&(a=d.slice(0,h),d=d.slice(h+1),this.auth=decodeURIComponent(a));h=-1;for(a=0;a<m.length;a++)g=d.indexOf(m[a]),-1!==g&&(-1===h||g<h)&&(h=g);-1===h&&(h=d.length);this.host=d.slice(0,h);d=d.slice(h);this.parseHost();
this.hostname=this.hostname||"";h="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!h){var F=this.hostname.split(/\./);a=0;for(g=F.length;a<g;a++){var v=F[a];if(v&&!v.match(p)){for(var l="",A=0,u=v.length;A<u;A++)l=127<v.charCodeAt(A)?l+"x":l+v[A];if(!l.match(p)){g=F.slice(0,a);a=F.slice(a+1);if(v=v.match(B))g.push(v[1]),a.unshift(v[2]);a.length&&(d="/"+a.join(".")+d);this.hostname=g.join(".");break}}}}this.hostname=255<this.hostname.length?"":this.hostname.toLowerCase();if(!h){v=
this.hostname.split(".");F=[];for(a=0;a<v.length;++a)g=v[a],F.push(g.match(/[^A-Za-z0-9_-]/)?"xn--"+f.encode(g):g);this.hostname=F.join(".")}a=this.port?":"+this.port:"";this.host=(this.hostname||"")+a;this.href+=this.host;h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==d[0]&&(d="/"+d))}if(!q[e])for(a=0,g=k.length;a<g;a++)h=k[a],v=encodeURIComponent(h),v===h&&(v=escape(h)),d=d.split(h).join(v);a=d.indexOf("#");-1!==a&&(this.hash=d.substr(a),d=d.slice(0,a));a=d.indexOf("?");
-1!==a?(this.search=d.substr(a),this.query=d.substr(a+1),c&&(this.query=E.parse(this.query)),d=d.slice(0,a)):c&&(this.search="",this.query={});d&&(this.pathname=d);t[e]&&this.hostname&&!this.pathname&&(this.pathname="/");if(this.pathname||this.search)a=this.pathname||"",g=this.search||"",this.path=a+g;this.href=this.format();return this};a.prototype.format=function(){var b=this.auth||"";b&&(b=encodeURIComponent(b),b=b.replace(/%3A/i,":"),b+="@");var d=this.protocol||"",a=this.pathname||"",f=this.hash||
"",k=!1,m="";this.host?k=b+this.host:this.hostname&&(k=b+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(k+=":"+this.port));this.query&&c(this.query)&&Object.keys(this.query).length&&(m=E.stringify(this.query));b=this.search||m&&"?"+m||"";d&&":"!==d.substr(-1)&&(d+=":");this.slashes||(!d||t[d])&&!1!==k?(k="//"+(k||""),a&&"/"!==a.charAt(0)&&(a="/"+a)):k||(k="");f&&"#"!==f.charAt(0)&&(f="#"+f);b&&"?"!==b.charAt(0)&&(b="?"+b);a=a.replace(/[?#]/g,function(b){return encodeURIComponent(b)});
b=b.replace("#","%23");return d+k+a+b+f};a.prototype.resolve=function(b){return this.resolveObject(g(b,!1,!0)).format()};a.prototype.resolveObject=function(b){if("string"===typeof b){var d=new a;d.parse(b,!1,!0);b=d}var c=new a;Object.keys(this).forEach(function(b){c[b]=this[b]},this);c.hash=b.hash;if(""===b.href)return c.href=c.format(),c;if(b.slashes&&!b.protocol)return Object.keys(b).forEach(function(d){"protocol"!==d&&(c[d]=b[d])}),t[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),
c.href=c.format(),c;if(b.protocol&&b.protocol!==c.protocol){if(!t[b.protocol])return Object.keys(b).forEach(function(d){c[d]=b[d]}),c.href=c.format(),c;c.protocol=b.protocol;if(b.host||n[b.protocol])c.pathname=b.pathname;else{for(var f=(b.pathname||"").split("/");f.length&&!(b.host=f.shift()););b.host||(b.host="");b.hostname||(b.hostname="");""!==f[0]&&f.unshift("");2>f.length&&f.unshift("");c.pathname=f.join("/")}c.search=b.search;c.query=b.query;c.host=b.host||"";c.auth=b.auth;c.hostname=b.hostname||
b.host;c.port=b.port;if(c.pathname||c.search)c.path=(c.pathname||"")+(c.search||"");c.slashes=c.slashes||b.slashes;c.href=c.format();return c}var d=c.pathname&&"/"===c.pathname.charAt(0),k=b.host||b.pathname&&"/"===b.pathname.charAt(0),m=d=k||d||c.host&&b.pathname,p=c.pathname&&c.pathname.split("/")||[],f=b.pathname&&b.pathname.split("/")||[],r=c.protocol&&!t[c.protocol];r&&(c.hostname="",c.port=null,c.host&&(""===p[0]?p[0]=c.host:p.unshift(c.host)),c.host="",b.protocol&&(b.hostname=null,b.port=null,
b.host&&(""===f[0]?f[0]=b.host:f.unshift(b.host)),b.host=null),d=d&&(""===f[0]||""===p[0]));if(k)c.host=b.host||""===b.host?b.host:c.host,c.hostname=b.hostname||""===b.hostname?b.hostname:c.hostname,c.search=b.search,c.query=b.query,p=f;else if(f.length)p||(p=[]),p.pop(),p=p.concat(f),c.search=b.search,c.query=b.query;else if(null!=b.search){r&&(c.hostname=c.host=p.shift(),r=c.host&&0<c.host.indexOf("@")?c.host.split("@"):!1)&&(c.auth=r.shift(),c.host=c.hostname=r.shift());c.search=b.search;c.query=
b.query;if(null!==c.pathname||null!==c.search)c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"");c.href=c.format();return c}if(!p.length)return c.pathname=null,c.path=c.search?"/"+c.search:null,c.href=c.format(),c;for(var k=p.slice(-1)[0],f=(c.host||b.host)&&("."===k||".."===k)||""===k,g=0,B=p.length;0<=B;B--)k=p[B],"."==k?p.splice(B,1):".."===k?(p.splice(B,1),g++):g&&(p.splice(B,1),g--);if(!d&&!m)for(;g--;g)p.unshift("..");!d||""===p[0]||p[0]&&"/"===p[0].charAt(0)||p.unshift("");f&&"/"!==p.join("/").substr(-1)&&
p.push("");m=""===p[0]||p[0]&&"/"===p[0].charAt(0);r&&(c.hostname=c.host=m?"":p.length?p.shift():"",r=c.host&&0<c.host.indexOf("@")?c.host.split("@"):!1)&&(c.auth=r.shift(),c.host=c.hostname=r.shift());(d=d||c.host&&p.length)&&!m&&p.unshift("");p.length?c.pathname=p.join("/"):(c.pathname=null,c.path=null);if(null!==c.pathname||null!==c.search)c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"");c.auth=b.auth||c.auth;c.slashes=c.slashes||b.slashes;c.href=c.format();return c};a.prototype.parseHost=
function(){var b=this.host,c=d.exec(b);c&&(c=c[0],":"!==c&&(this.port=c.substr(1)),b=b.substr(0,b.length-c.length));b&&(this.hostname=b)}},{punycode:4,querystring:7}],9:[function(e,h,l){function a(b,c,d,a,f){var k=0,m,p,r;m=c;for(p=d-a;m<d;m+=a)k+=(b[p]-b[m])*(b[m+1]+b[p+1]),p=m;if(f===0<k)for(m=c;m<d;m+=a)r=q(m,b[m],b[m+1],r);else for(m=d-a;m>=c;m-=a)r=q(m,b[m],b[m+1],r);return r}function g(b,c){if(!b)return b;c||(c=b);var d=b,a;do{a=!1;var f;if(f=!d.steiner)f=d.next,f=d.x===f.x&&d.y===f.y||0===
m(d.prev,d,d.next);if(f){n(d);d=c=d.prev;if(d===d.next)return null;a=!0}else d=d.next}while(a||d!==c);return c}function c(d,a,f,e,q,t,h){if(d){if(!h&&t){var F=d,v=F;do null===v.z&&(v.z=b(v.x,v.y,e,q,t)),v.prevZ=v.prev,v=v.nextZ=v.next;while(v!==F);v.prevZ.nextZ=null;v.prevZ=null;var F=v,l,A,u,J,K,N,H=1;do{v=F;u=F=null;for(J=0;v;){J++;A=v;for(l=K=0;l<H&&(K++,A=A.nextZ,A);l++);for(N=H;0<K||0<N&&A;)0===K?(l=A,A=A.nextZ,N--):0!==N&&A?v.z<=A.z?(l=v,v=v.nextZ,K--):(l=A,A=A.nextZ,N--):(l=v,v=v.nextZ,K--),
u?u.nextZ=l:F=l,l.prevZ=u,u=l;v=A}u.nextZ=null;H*=2}while(1<J)}for(F=d;d.prev!==d.next;){v=d.prev;A=d.next;if(t)a:{u=d;N=e;var G=q,O=t;J=u.prev;K=u;H=u.next;if(0<=m(J,K,H))u=!1;else{var P=J.x>K.x?J.x>H.x?J.x:H.x:K.x>H.x?K.x:H.x,Q=J.y>K.y?J.y>H.y?J.y:H.y:K.y>H.y?K.y:H.y;l=b(J.x<K.x?J.x<H.x?J.x:H.x:K.x<H.x?K.x:H.x,J.y<K.y?J.y<H.y?J.y:H.y:K.y<H.y?K.y:H.y,N,G,O);N=b(P,Q,N,G,O);for(G=u.nextZ;G&&G.z<=N;){if(G!==u.prev&&G!==u.next&&k(J.x,J.y,K.x,K.y,H.x,H.y,G.x,G.y)&&0<=m(G.prev,G,G.next)){u=!1;break a}G=
G.nextZ}for(G=u.prevZ;G&&G.z>=l;){if(G!==u.prev&&G!==u.next&&k(J.x,J.y,K.x,K.y,H.x,H.y,G.x,G.y)&&0<=m(G.prev,G,G.next)){u=!1;break a}G=G.prevZ}u=!0}}else a:if(u=d,J=u.prev,K=u,H=u.next,0<=m(J,K,H))u=!1;else{for(l=u.next.next;l!==u.prev;){if(k(J.x,J.y,K.x,K.y,H.x,H.y,l.x,l.y)&&0<=m(l.prev,l,l.next)){u=!1;break a}l=l.next}u=!0}if(u)a.push(v.i/f),a.push(d.i/f),a.push(A.i/f),n(d),F=d=A.next;else if(d=A,d===F){if(!h)c(g(d),a,f,e,q,t,1);else if(1===h){h=a;F=f;v=d;do A=v.prev,u=v.next.next,r(A,v,v.next,
u)&&p(A,u)&&p(u,A)&&(h.push(A.i/F),h.push(v.i/F),h.push(u.i/F),n(v),n(v.next),v=d=u),v=v.next;while(v!==d);d=v;c(d,a,f,e,q,t,2)}else if(2===h)a:{h=d;do{for(F=h.next.next;F!==h.prev;){if(v=h.i!==F.i){v=h;A=F;if(!(u=v.x===A.x&&v.y===A.y)){if(u=v.next.i!==A.i&&v.prev.i!==A.i){b:{u=v;do{if(u.i!==v.i&&u.next.i!==v.i&&u.i!==A.i&&u.next.i!==A.i&&r(u,u.next,v,A)){u=!0;break b}u=u.next}while(u!==v);u=!1}u=!u}if(u=u&&p(v,A)&&p(A,v)){u=v;J=!1;K=(v.x+A.x)/2;A=(v.y+A.y)/2;do u.y>A!==u.next.y>A&&K<(u.next.x-u.x)*
(A-u.y)/(u.next.y-u.y)+u.x&&(J=!J),u=u.next;while(u!==v);u=J}}v=u}if(v){d=B(h,F);h=g(h,h.next);d=g(d,d.next);c(h,a,f,e,q,t);c(d,a,f,e,q,t);break a}F=F.next}h=h.next}while(h!==d)}break}}}}function f(b,d){return b.x-d.x}function b(b,d,c,a,f){b=32767*(b-c)/f;d=32767*(d-a)/f;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;d=(d|d<<8)&16711935;d=(d|d<<4)&252645135;d=(d|d<<2)&858993459;return(b|b<<1)&1431655765|((d|d<<1)&1431655765)<<1}function d(b){var d=b,c=b;do d.x<c.x&&(c=d),d=d.next;while(d!==
b);return c}function k(b,d,c,a,f,k,m,p){return 0<=(f-m)*(d-p)-(b-m)*(k-p)&&0<=(b-m)*(a-p)-(c-m)*(d-p)&&0<=(c-m)*(k-p)-(f-m)*(a-p)}function m(b,d,c){return(d.y-b.y)*(c.x-d.x)-(d.x-b.x)*(c.y-d.y)}function r(b,d,c,a){return 0<m(b,d,c)!==0<m(b,d,a)&&0<m(c,a,b)!==0<m(c,a,d)}function p(b,d){return 0>m(b.prev,b,b.next)?0<=m(b,d,b.next)&&0<=m(b,b.prev,d):0>m(b,d,b.prev)||0>m(b,b.next,d)}function B(b,d){var c=new t(b.i,b.x,b.y),a=new t(d.i,d.x,d.y),f=b.next,k=d.prev;b.next=d;d.prev=b;c.next=f;f.prev=c;a.next=
c;c.prev=a;k.next=a;a.prev=k;return a}function q(b,d,c,a){b=new t(b,d,c);a?(b.next=a.next,b.prev=a,a.next.prev=b,a.next=b):(b.prev=b,b.next=b);return b}function n(b){b.next.prev=b.prev;b.prev.next=b.next;b.prevZ&&(b.prevZ.nextZ=b.nextZ);b.nextZ&&(b.nextZ.prevZ=b.prevZ)}function t(b,d,c){this.i=b;this.x=d;this.y=c;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}h.exports=function(b,m,r){r=r||2;var e=m&&m.length,q=e?m[0]*r:b.length,n=a(b,0,q,r,!0),t=[];if(!n)return t;var h,v,l,
A;if(e){var u=r,e=[],J,K,N;A=0;for(J=m.length;A<J;A++)K=m[A]*u,N=A<J-1?m[A+1]*u:b.length,K=a(b,K,N,u,!1),K===K.next&&(K.steiner=!0),e.push(d(K));e.sort(f);for(A=0;A<e.length;A++){m=e[A];var H=n;u=H;J=m.x;K=m.y;N=-Infinity;var G=void 0;do{if(K<=u.y&&K>=u.next.y){var O=u.x+(K-u.y)*(u.next.x-u.x)/(u.next.y-u.y);O<=J&&O>N&&(N=O,G=u.x<u.next.x?u:u.next)}u=u.next}while(u!==H);if(G){for(var H=G,O=Infinity,P,u=G.next;u!==H;)J>=u.x&&u.x>=G.x&&k(K<G.y?J:N,K,G.x,G.y,K<G.y?N:J,K,u.x,u.y)&&(P=Math.abs(K-u.y)/
(J-u.x),(P<O||P===O&&u.x>G.x)&&p(u,m)&&(G=u,O=P)),u=u.next;H=G}else H=null;H&&(m=B(H,m),g(m,m.next));n=g(n,n.next)}}if(b.length>80*r){h=l=b[0];v=e=b[1];for(u=r;u<q;u+=r)A=b[u],m=b[u+1],A<h&&(h=A),m<v&&(v=m),A>l&&(l=A),m>e&&(e=m);l=Math.max(l-h,e-v)}c(n,t,r,h,v,l);return t}},{}],10:[function(e,h,l){function a(c,b,d){this.fn=c;this.context=b;this.once=d||!1}function g(){}var c="function"!==typeof Object.create?"~":!1;g.prototype._events=void 0;g.prototype.listeners=function(a,b){var d=c?c+a:a,d=this._events&&
this._events[d];if(b)return!!d;if(!d)return[];if(d.fn)return[d.fn];for(var k=0,m=d.length,r=Array(m);k<m;k++)r[k]=d[k].fn;return r};g.prototype.emit=function(a,b,d,k,m,r){var p=c?c+a:a;if(!this._events||!this._events[p])return!1;var p=this._events[p],g=arguments.length,e,n;if("function"===typeof p.fn){p.once&&this.removeListener(a,p.fn,void 0,!0);switch(g){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,b),!0;case 3:return p.fn.call(p.context,b,d),!0;case 4:return p.fn.call(p.context,
b,d,k),!0;case 5:return p.fn.call(p.context,b,d,k,m),!0;case 6:return p.fn.call(p.context,b,d,k,m,r),!0}n=1;for(e=Array(g-1);n<g;n++)e[n-1]=arguments[n];p.fn.apply(p.context,e)}else{var t=p.length,h;for(n=0;n<t;n++)switch(p[n].once&&this.removeListener(a,p[n].fn,void 0,!0),g){case 1:p[n].fn.call(p[n].context);break;case 2:p[n].fn.call(p[n].context,b);break;case 3:p[n].fn.call(p[n].context,b,d);break;default:if(!e)for(h=1,e=Array(g-1);h<g;h++)e[h-1]=arguments[h];p[n].fn.apply(p[n].context,e)}}return!0};
g.prototype.on=function(f,b,d){b=new a(b,d||this);f=c?c+f:f;this._events||(this._events=c?{}:Object.create(null));this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],b]:this._events[f].push(b):this._events[f]=b;return this};g.prototype.once=function(f,b,d){b=new a(b,d||this,!0);f=c?c+f:f;this._events||(this._events=c?{}:Object.create(null));this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],b]:this._events[f].push(b):this._events[f]=b;return this};g.prototype.removeListener=
function(a,b,d,k){a=c?c+a:a;if(!this._events||!this._events[a])return this;var m=this._events[a],r=[];if(b)if(m.fn)(m.fn!==b||k&&!m.once||d&&m.context!==d)&&r.push(m);else for(var p=0,g=m.length;p<g;p++)(m[p].fn!==b||k&&!m[p].once||d&&m[p].context!==d)&&r.push(m[p]);r.length?this._events[a]=1===r.length?r[0]:r:delete this._events[a];return this};g.prototype.removeAllListeners=function(a){if(!this._events)return this;a?delete this._events[c?c+a:a]:this._events=c?{}:Object.create(null);return this};
g.prototype.off=g.prototype.removeListener;g.prototype.addListener=g.prototype.on;g.prototype.setMaxListeners=function(){return this};g.prefixed=c;"undefined"!==typeof h&&(h.exports=g)},{}],11:[function(e,h,l){var a=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;h.exports=Object.assign||function(c,f){var b,d;if(null===c||void 0===c)throw new TypeError("Object.assign cannot be called with null or undefined");d=Object(c);for(var k,m=1;m<arguments.length;m++){b=Object(arguments[m]);
for(var r in b)a.call(b,r)&&(d[r]=b[r]);if(Object.getOwnPropertySymbols){k=Object.getOwnPropertySymbols(b);for(var p=0;p<k.length;p++)g.call(b,k[p])&&(d[k[p]]=b[k[p]])}}return d}},{}],12:[function(e,h,l){h.exports={name:"pixi.js",version:"3.0.9",description:"Pixi.js is a fast lightweight 2D library that works across all devices.",author:"Mat Groves",contributors:["Chad Engler <chad@pantherdev.com>","Richard Davey <rdavey@gmail.com>"],main:"./src/index.js",homepage:"http://goodboydigital.com/",bugs:"https://github.com/pixijs/pixi.js/issues",
license:"MIT",repository:{type:"git",url:"https://github.com/pixijs/pixi.js.git"},scripts:{start:"gulp && gulp watch",test:"gulp && testem ci",build:"gulp",docs:"jsdoc -c ./gulp/util/jsdoc.conf.json -R README.md"},files:"bin/ src/ CONTRIBUTING.md LICENSE package.json README.md".split(" "),dependencies:{async:"^1.5.0",brfs:"^1.4.1",earcut:"^2.0.7",eventemitter3:"^1.1.1","object-assign":"^4.0.1","resource-loader":"^1.6.4"},devDependencies:{browserify:"^11.1.0",chai:"^3.2.0",del:"^2.0.2",gulp:"^3.9.0",
"gulp-cached":"^1.1.0","gulp-concat":"^2.6.0","gulp-debug":"^2.1.0","gulp-header":"^1.7.1","gulp-jshint":"^1.11.2","gulp-mirror":"^0.4.0","gulp-plumber":"^1.0.1","gulp-rename":"^1.2.2","gulp-sourcemaps":"^1.5.2","gulp-uglify":"^1.4.1","gulp-util":"^3.0.6","jaguarjs-jsdoc":"git+https://github.com/davidshimjs/jaguarjs-jsdoc.git",jsdoc:"^3.3.2","jshint-summary":"^0.4.0",minimist:"^1.2.0",mocha:"^2.3.2","require-dir":"^0.3.0","run-sequence":"^1.1.2",testem:"^0.9.4","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0",
watchify:"^3.4.0"},browserify:{transform:["brfs"]}}},{}],13:[function(e,h,l){function a(c){var a=document.createElement("div");a.style.width="100px";a.style.height="100px";a.style.position="absolute";a.style.top=0;a.style.left=0;a.style.zIndex=2;this.div=a;this.pool=[];this.renderId=0;this.debug=!1;this.renderer=c;this.children=[];this._onKeyDown=this._onKeyDown.bind(this);this._onMouseMove=this._onMouseMove.bind(this);this.isActive=!1;window.addEventListener("keydown",this._onKeyDown,!1)}var g=e("../core");
Object.assign(g.DisplayObject.prototype,e("./accessibleTarget"));a.prototype.constructor=a;h.exports=a;a.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode.appendChild(this.div))};a.prototype.deactivate=function(){this.isActive&&(this.isActive=!1,window.document.removeEventListener("mousemove",
this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode.removeChild(this.div))};a.prototype.updateAccessibleObjects=function(c){if(c.visible){c.accessible&&c.interactive&&(c._accessibleActive||this.addChild(c),c.renderId=this.renderId);c=c.children;for(var a=c.length-1;0<=a;a--)this.updateAccessibleObjects(c[a])}};a.prototype.update=function(){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var c=this.renderer.view.getBoundingClientRect(),
a=c.width/this.renderer.width,b=c.height/this.renderer.height,d=this.div;d.style.left=c.left+"px";d.style.top=c.top+"px";d.style.width=this.renderer.width+"px";d.style.height=this.renderer.height+"px";for(c=0;c<this.children.length;c++){var k=this.children[c];if(k.renderId!==this.renderId)k._accessibleActive=!1,g.utils.removeItems(this.children,c,1),this.div.removeChild(k._accessibleDiv),this.pool.push(k._accessibleDiv),k._accessibleDiv=null,c--,0===this.children.length&&this.deactivate();else{var d=
k._accessibleDiv,m=k.hitArea,r=k.worldTransform;k.hitArea?(d.style.left=(r.tx+m.x*r.a)*a+"px",d.style.top=(r.ty+m.y*r.d)*b+"px",d.style.width=m.width*r.a*a+"px",d.style.height=m.height*r.d*b+"px"):(m=k.getBounds(),this.capHitArea(m),d.style.left=m.x*a+"px",d.style.top=m.y*b+"px",d.style.width=m.width*a+"px",d.style.height=m.height*b+"px")}}this.renderId++};a.prototype.capHitArea=function(c){0>c.x&&(c.width+=c.x,c.x=0);0>c.y&&(c.height+=c.y,c.y=0);c.x+c.width>this.renderer.width&&(c.width=this.renderer.width-
c.x);c.y+c.height>this.renderer.height&&(c.height=this.renderer.height-c.y)};a.prototype.addChild=function(c){var a=this.pool.pop();a||(a=document.createElement("button"),a.style.width="100px",a.style.height="100px",a.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",a.style.position="absolute",a.style.zIndex=2,a.style.borderStyle="none",a.addEventListener("click",this._onClick.bind(this)),a.addEventListener("focus",this._onFocus.bind(this)),a.addEventListener("focusout",this._onFocusOut.bind(this)));
a.title=c.accessibleTitle||"displayObject "+this.tabIndex;c._accessibleActive=!0;c._accessibleDiv=a;a.displayObject=c;this.children.push(c);this.div.appendChild(c._accessibleDiv);c._accessibleDiv.tabIndex=c.tabIndex};a.prototype._onClick=function(c){var a=this.renderer.plugins.interaction;a.dispatchEvent(c.target.displayObject,"click",a.eventData)};a.prototype._onFocus=function(c){var a=this.renderer.plugins.interaction;a.dispatchEvent(c.target.displayObject,"mouseover",a.eventData)};a.prototype._onFocusOut=
function(c){var a=this.renderer.plugins.interaction;a.dispatchEvent(c.target.displayObject,"mouseout",a.eventData)};a.prototype._onKeyDown=function(c){9===c.keyCode&&this.activate()};a.prototype._onMouseMove=function(){this.deactivate()};a.prototype.destroy=function(){this.div=null;for(var c=0;c<this.children.length;c++)this.children[c].div=null;window.document.removeEventListener("mousemove",this._onMouseMove);window.removeEventListener("keydown",this._onKeyDown);this.renderer=this.children=this.pool=
null};g.WebGLRenderer.registerPlugin("accessibility",a);g.CanvasRenderer.registerPlugin("accessibility",a)},{"../core":23,"./accessibleTarget":14}],14:[function(e,h,l){h.exports={accessible:!1,accessibleTitle:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],15:[function(e,h,l){h.exports={accessibleTarget:e("./accessibleTarget"),AccessibilityManager:e("./AccessibilityManager")}},{"./AccessibilityManager":13,"./accessibleTarget":14}],16:[function(e,h,l){e={VERSION:e("../../package.json").version,
PI_2:2*Math.PI,RAD_TO_DEG:180/Math.PI,DEG_TO_RAD:Math.PI/180,TARGET_FPMS:.06,RENDERER_TYPE:{UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},DRAW_MODES:{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},SCALE_MODES:{DEFAULT:0,LINEAR:0,NEAREST:1},RETINA_PREFIX:/@(.+)x/,RESOLUTION:1,
FILTER_RESOLUTION:1,DEFAULT_RENDER_OPTIONS:{view:null,resolution:1,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1},SHAPES:{POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},SPRITE_BATCH_SIZE:2E3};h.exports=e},{"../../package.json":12}],17:[function(e,h,l){function a(){f.call(this);this.children=[]}var g=e("../math"),c=e("../utils"),f=e("./DisplayObject"),b=e("../textures/RenderTexture"),d=new g.Matrix;a.prototype=Object.create(f.prototype);
a.prototype.constructor=a;h.exports=a;Object.defineProperties(a.prototype,{width:{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(b){var d=this.getLocalBounds().width;this.scale.x=0!==d?b/d:1;this._width=b}},height:{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(b){var d=this.getLocalBounds().height;this.scale.y=0!==d?b/d:1;this._height=b}}});a.prototype.onChildrenChange=function(){};a.prototype.addChild=function(b){var d=arguments.length;
if(1<d)for(var c=0;c<d;c++)this.addChild(arguments[c]);else b.parent&&b.parent.removeChild(b),b.parent=this,this.children.push(b),this.onChildrenChange(this.children.length-1),b.emit("added",this);return b};a.prototype.addChildAt=function(b,d){if(0<=d&&d<=this.children.length)return b.parent&&b.parent.removeChild(b),b.parent=this,this.children.splice(d,0,b),this.onChildrenChange(d),b.emit("added",this),b;throw Error(b+"addChildAt: The index "+d+" supplied is out of bounds "+this.children.length);
};a.prototype.swapChildren=function(b,d){if(b!==d){var c=this.getChildIndex(b),a=this.getChildIndex(d);if(0>c||0>a)throw Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.");this.children[c]=d;this.children[a]=b;this.onChildrenChange(c<a?c:a)}};a.prototype.getChildIndex=function(b){b=this.children.indexOf(b);if(-1===b)throw Error("The supplied DisplayObject must be a child of the caller");return b};a.prototype.setChildIndex=function(b,d){if(0>d||d>=this.children.length)throw Error("The supplied index is out of bounds");
var a=this.getChildIndex(b);c.removeItems(this.children,a,1);this.children.splice(d,0,b);this.onChildrenChange(d)};a.prototype.getChildAt=function(b){if(0>b||b>=this.children.length)throw Error("getChildAt: Supplied index "+b+" does not exist in the child list, or the supplied DisplayObject is not a child of the caller");return this.children[b]};a.prototype.removeChild=function(b){var d=arguments.length;if(1<d)for(var a=0;a<d;a++)this.removeChild(arguments[a]);else{d=this.children.indexOf(b);if(-1===
d)return;b.parent=null;c.removeItems(this.children,d,1);this.onChildrenChange(d);b.emit("removed",this)}return b};a.prototype.removeChildAt=function(b){var d=this.getChildAt(b);d.parent=null;c.removeItems(this.children,b,1);this.onChildrenChange(b);d.emit("removed",this);return d};a.prototype.removeChildren=function(b,d){var c=b||0,a="number"===typeof d?d:this.children.length,f=a-c;if(0<f&&f<=a){c=this.children.splice(c,f);for(a=0;a<c.length;++a)c[a].parent=null;this.onChildrenChange(b);for(a=0;a<
c.length;++a)c[a].emit("removed",this);return c}if(0===f&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.");};a.prototype.generateTexture=function(c,a,f){var p=this.getLocalBounds();c=new b(c,p.width|0,p.height|0,f,a);d.tx=-p.x;d.ty=-p.y;c.render(this,d);return c};a.prototype.updateTransform=function(){if(this.visible){this.displayObjectUpdateTransform();for(var b=0,d=this.children.length;b<d;++b)this.children[b].updateTransform()}};
a.prototype.containerUpdateTransform=a.prototype.updateTransform;a.prototype.getBounds=function(){if(!this._currentBounds){if(0===this.children.length)return g.Rectangle.EMPTY;for(var b=Infinity,d=Infinity,c=-Infinity,a=-Infinity,f,e,n=!1,t=0,h=this.children.length;t<h;++t)this.children[t].visible&&(n=!0,f=this.children[t].getBounds(),b=b<f.x?b:f.x,d=d<f.y?d:f.y,e=f.width+f.x,f=f.height+f.y,c=c>e?c:e,a=a>f?a:f);if(!n)return g.Rectangle.EMPTY;e=this._bounds;e.x=b;e.y=d;e.width=c-b;e.height=a-d;this._currentBounds=
e}return this._currentBounds};a.prototype.containerGetBounds=a.prototype.getBounds;a.prototype.getLocalBounds=function(){var b=this.worldTransform;this.worldTransform=g.Matrix.IDENTITY;for(var d=0,c=this.children.length;d<c;++d)this.children[d].updateTransform();this.worldTransform=b;this._currentBounds=null;return this.getBounds(g.Matrix.IDENTITY)};a.prototype.renderWebGL=function(b){if(this.visible&&!(0>=this.worldAlpha)&&this.renderable){var d,c;if(this._mask||this._filters){b.currentRenderer.flush();
this._filters&&this._filters.length&&b.filterManager.pushFilter(this,this._filters);this._mask&&b.maskManager.pushMask(this,this._mask);b.currentRenderer.start();this._renderWebGL(b);d=0;for(c=this.children.length;d<c;d++)this.children[d].renderWebGL(b);b.currentRenderer.flush();this._mask&&b.maskManager.popMask(this,this._mask);this._filters&&b.filterManager.popFilter();b.currentRenderer.start()}else for(this._renderWebGL(b),d=0,c=this.children.length;d<c;++d)this.children[d].renderWebGL(b)}};a.prototype._renderWebGL=
function(b){};a.prototype._renderCanvas=function(b){};a.prototype.renderCanvas=function(b){if(this.visible&&!(0>=this.alpha)&&this.renderable){this._mask&&b.maskManager.pushMask(this._mask,b);this._renderCanvas(b);for(var d=0,c=this.children.length;d<c;++d)this.children[d].renderCanvas(b);this._mask&&b.maskManager.popMask(b)}};a.prototype.destroy=function(b){f.prototype.destroy.call(this);if(b)for(var d=0,c=this.children.length;d<c;++d)this.children[d].destroy(b);this.removeChildren();this.children=
null}},{"../math":26,"../textures/RenderTexture":64,"../utils":70,"./DisplayObject":18}],18:[function(e,h,l){function a(){f.call(this);this.position=new g.Point;this.scale=new g.Point(1,1);this.pivot=new g.Point(0,0);this.skew=new g.Point(0,0);this.rotation=0;this.alpha=1;this.renderable=this.visible=!0;this.parent=null;this.worldAlpha=1;this.worldTransform=new g.Matrix;this.filterArea=null;this._sr=0;this._cr=1;this._bounds=new g.Rectangle(0,0,1,1);this._mask=this._currentBounds=null}var g=e("../math"),
c=e("../textures/RenderTexture"),f=e("eventemitter3"),b=e("../const"),d=new g.Matrix,k={worldTransform:new g.Matrix,worldAlpha:1,children:[]};a.prototype=Object.create(f.prototype);a.prototype.constructor=a;h.exports=a;Object.defineProperties(a.prototype,{x:{get:function(){return this.position.x},set:function(b){this.position.x=b}},y:{get:function(){return this.position.y},set:function(b){this.position.y=b}},worldVisible:{get:function(){var b=this;do{if(!b.visible)return!1;b=b.parent}while(b);return!0}},
mask:{get:function(){return this._mask},set:function(b){this._mask&&(this._mask.renderable=!0);if(this._mask=b)this._mask.renderable=!1}},filters:{get:function(){return this._filters&&this._filters.slice()},set:function(b){this._filters=b&&b.slice()}}});a.prototype.updateTransform=function(){var c=this.parent.worldTransform,a=this.worldTransform,f,k,g,e,t,h;if(this.skew.x||this.skew.y)d.setTransform(this.position.x,this.position.y,this.pivot.x,this.pivot.y,this.scale.x,this.scale.y,this.rotation,
this.skew.x,this.skew.y),a.a=d.a*c.a+d.b*c.c,a.b=d.a*c.b+d.b*c.d,a.c=d.c*c.a+d.d*c.c,a.d=d.c*c.b+d.d*c.d,a.tx=d.tx*c.a+d.ty*c.c+c.tx,a.ty=d.tx*c.b+d.ty*c.d+c.ty;else{if(this.rotation%b.PI_2){this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation));f=this._cr*this.scale.x;k=this._sr*this.scale.x;g=-this._sr*this.scale.y;e=this._cr*this.scale.y;t=this.position.x;h=this.position.y;if(this.pivot.x||this.pivot.y)t-=this.pivot.x*
f+this.pivot.y*g,h-=this.pivot.x*k+this.pivot.y*e;a.a=f*c.a+k*c.c;a.b=f*c.b+k*c.d;a.c=g*c.a+e*c.c;a.d=g*c.b+e*c.d}else f=this.scale.x,e=this.scale.y,t=this.position.x-this.pivot.x*f,h=this.position.y-this.pivot.y*e,a.a=f*c.a,a.b=f*c.b,a.c=e*c.c,a.d=e*c.d;a.tx=t*c.a+h*c.c+c.tx;a.ty=t*c.b+h*c.d+c.ty}this.worldAlpha=this.alpha*this.parent.worldAlpha;this._currentBounds=null};a.prototype.displayObjectUpdateTransform=a.prototype.updateTransform;a.prototype.getBounds=function(b){return g.Rectangle.EMPTY};
a.prototype.getLocalBounds=function(){return this.getBounds(g.Matrix.IDENTITY)};a.prototype.toGlobal=function(b){this.parent?this.displayObjectUpdateTransform():(this.parent=k,this.displayObjectUpdateTransform(),this.parent=null);return this.worldTransform.apply(b)};a.prototype.toLocal=function(b,d,c){d&&(b=d.toGlobal(b));this.parent?this.displayObjectUpdateTransform():(this.parent=k,this.displayObjectUpdateTransform(),this.parent=null);return this.worldTransform.applyInverse(b,c)};a.prototype.renderWebGL=
function(b){};a.prototype.renderCanvas=function(b){};a.prototype.generateTexture=function(b,a,f){var k=this.getLocalBounds();b=new c(b,k.width|0,k.height|0,a,f);d.tx=-k.x;d.ty=-k.y;b.render(this,d);return b};a.prototype.setParent=function(b){if(!b||!b.addChild)throw Error("setParent: Argument must be a Container");b.addChild(this);return b};a.prototype.setTransform=function(b,d,c,a,f,k,g,e,h){this.position.x=b||0;this.position.y=d||0;this.scale.x=c?c:1;this.scale.y=a?a:1;this.rotation=f||0;this.skew.x=
k||0;this.skew.y=g||0;this.pivot.x=e||0;this.pivot.y=h||0;return this};a.prototype.destroy=function(){this.filterArea=this.worldTransform=this._mask=this._currentBounds=this._bounds=this.parent=this.skew=this.pivot=this.scale=this.position=null}},{"../const":16,"../math":26,"../textures/RenderTexture":64,eventemitter3:10}],19:[function(e,h,l){function a(){g.call(this);this.fillAlpha=1;this.lineColor=this.lineWidth=0;this.graphicsData=[];this._prevTint=this.tint=16777215;this.blendMode=m.BLEND_MODES.NORMAL;
this.currentPath=null;this._webGL={};this.isMask=!1;this.boundsPadding=0;this._localBounds=new k.Rectangle(0,0,1,1);this.dirty=!0;this.glDirty=!1;this.boundsDirty=!0;this.cachedSpriteDirty=!1}var g=e("../display/Container"),c=e("../textures/Texture"),f=e("../renderers/canvas/utils/CanvasBuffer"),b=e("../renderers/canvas/utils/CanvasGraphics"),d=e("./GraphicsData"),k=e("../math"),m=e("../const"),r=new k.Point;a.prototype=Object.create(g.prototype);a.prototype.constructor=a;h.exports=a;a.prototype.clone=
function(){var b=new a;b.renderable=this.renderable;b.fillAlpha=this.fillAlpha;b.lineWidth=this.lineWidth;b.lineColor=this.lineColor;b.tint=this.tint;b.blendMode=this.blendMode;b.isMask=this.isMask;b.boundsPadding=this.boundsPadding;b.dirty=!0;b.glDirty=!0;b.cachedSpriteDirty=this.cachedSpriteDirty;for(var d=0;d<this.graphicsData.length;++d)b.graphicsData.push(this.graphicsData[d].clone());b.currentPath=b.graphicsData[b.graphicsData.length-1];b.updateLocalBounds();return b};a.prototype.lineStyle=
function(b,d,c){this.lineWidth=b||0;this.lineColor=d||0;this.lineAlpha=void 0===c?1:c;this.currentPath&&(this.currentPath.shape.points.length?(b=new k.Polygon(this.currentPath.shape.points.slice(-2)),b.closed=!1,this.drawShape(b)):(this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha));return this};a.prototype.moveTo=function(b,d){var c=new k.Polygon([b,d]);c.closed=!1;this.drawShape(c);return this};a.prototype.lineTo=function(b,
d){this.currentPath.shape.points.push(b,d);this.dirty=!0;return this};a.prototype.quadraticCurveTo=function(b,d,c,a){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var f,k,m=this.currentPath.shape.points;0===m.length&&this.moveTo(0,0);for(var g=m[m.length-2],r=m[m.length-1],e,h=1;20>=h;++h)e=h/20,f=g+(b-g)*e,k=r+(d-r)*e,m.push(f+(b+(c-b)*e-f)*e,k+(d+(a-d)*e-k)*e);this.dirty=this.boundsDirty=!0;return this};a.prototype.bezierCurveTo=
function(b,d,c,a,f,k){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var m,g,r,e,h,l=this.currentPath.shape.points,F=l[l.length-2],v=l[l.length-1],M,A=1;20>=A;++A)M=A/20,m=1-M,g=m*m,r=g*m,e=M*M,h=e*M,l.push(r*F+3*g*M*b+3*m*e*c+h*f,r*v+3*g*M*d+3*m*e*a+h*k);this.dirty=this.boundsDirty=!0;return this};a.prototype.arcTo=function(b,d,c,a,f){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(b,
d):this.moveTo(b,d);var k=this.currentPath.shape.points,m=k[k.length-1]-d,g=k[k.length-2]-b;a-=d;c-=b;var r=Math.abs(m*c-g*a);if(1E-8>r||0===f)k[k.length-2]===b&&k[k.length-1]===d||k.push(b,d);else{var e=m*m+g*g,h=a*a+c*c,l=m*a+g*c,k=f*Math.sqrt(e)/r,r=f*Math.sqrt(h)/r,e=k*l/e,h=r*l/h,l=k*c+r*g,F=k*a+r*m;this.arc(l+b,F+d,f,Math.atan2(m*(r+e)-F,g*(r+e)-l),Math.atan2(a*(k+h)-F,c*(k+h)-l),g*a>c*m)}this.dirty=this.boundsDirty=!0;return this};a.prototype.arc=function(b,d,c,a,f,k){k=k||!1;if(a===f)return this;
!k&&f<=a?f+=2*Math.PI:k&&a<=f&&(a+=2*Math.PI);k=k?-1*(a-f):f-a;var m=40*Math.ceil(Math.abs(k)/(2*Math.PI));if(0===k)return this;f=b+Math.cos(a)*c;var g=d+Math.sin(a)*c;this.currentPath?this.currentPath.shape.points.push(f,g):this.moveTo(f,g);f=this.currentPath.shape.points;k/=2*m;for(var g=2*k,r=Math.cos(k),e=Math.sin(k),m=m-1,h=m%1/m,l=0;l<=m;l++){var F=k+a+g*(l+h*l),v=Math.cos(F),F=-Math.sin(F);f.push((r*v+e*F)*c+b,(r*-F+e*v)*c+d)}this.dirty=this.boundsDirty=!0;return this};a.prototype.beginFill=
function(b,d){this.filling=!0;this.fillColor=b||0;this.fillAlpha=void 0===d?1:d;this.currentPath&&2>=this.currentPath.shape.points.length&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha);return this};a.prototype.endFill=function(){this.filling=!1;this.fillColor=null;this.fillAlpha=1;return this};a.prototype.drawRect=function(b,d,c,a){this.drawShape(new k.Rectangle(b,d,c,a));return this};a.prototype.drawRoundedRect=function(b,
d,c,a,f){this.drawShape(new k.RoundedRectangle(b,d,c,a,f));return this};a.prototype.drawCircle=function(b,d,c){this.drawShape(new k.Circle(b,d,c));return this};a.prototype.drawEllipse=function(b,d,c,a){this.drawShape(new k.Ellipse(b,d,c,a));return this};a.prototype.drawPolygon=function(b){var d=b,c=!0;d instanceof k.Polygon&&(c=d.closed,d=d.points);if(!Array.isArray(d))for(var d=Array(arguments.length),a=0;a<d.length;++a)d[a]=arguments[a];d=new k.Polygon(d);d.closed=c;this.drawShape(d);return this};
a.prototype.clear=function(){this.lineWidth=0;this.filling=!1;this.clearDirty=this.dirty=!0;this.graphicsData=[];return this};a.prototype.generateTexture=function(d,a,k){a=a||1;d=this.getLocalBounds();var m=new f(d.width*a,d.height*a);k=c.fromCanvas(m.canvas,k);k.baseTexture.resolution=a;m.context.scale(a,a);m.context.translate(-d.x,-d.y);b.renderGraphics(this,m.context);return k};a.prototype._renderWebGL=function(b){this.glDirty&&(this.dirty=!0,this.glDirty=!1);b.setObjectRenderer(b.plugins.graphics);
b.plugins.graphics.render(this)};a.prototype._renderCanvas=function(d){if(!0!==this.isMask){this._prevTint!==this.tint&&(this.dirty=!0);var c=d.context,a=this.worldTransform,f=d.blendModes[this.blendMode];f!==c.globalCompositeOperation&&(c.globalCompositeOperation=f);d=d.resolution;c.setTransform(a.a*d,a.b*d,a.c*d,a.d*d,a.tx*d,a.ty*d);b.renderGraphics(this,c)}};a.prototype.getBounds=function(b){if(!this._currentBounds){if(!this.renderable)return k.Rectangle.EMPTY;this.boundsDirty&&(this.updateLocalBounds(),
this.cachedSpriteDirty=this.glDirty=!0,this.boundsDirty=!1);var d=this._localBounds,c=d.x,a=d.width+d.x,f=d.y,m=d.height+d.y;b=b||this.worldTransform;var g=b.a,r=b.b,e=b.c,h=b.d,l=b.tx,L=b.ty,F=g*a+e*m+l,d=h*m+r*a+L;b=g*c+e*m+l;var m=h*m+r*c+L,v=g*c+e*f+l,c=h*f+r*c+L,g=g*a+e*f+l,a=h*f+r*a+L,f=F,r=d,F=b<F?b:F,F=v<F?v:F,F=g<F?g:F,d=m<d?m:d,d=c<d?c:d,d=a<d?a:d,f=b>f?b:f,f=v>f?v:f,r=m>r?m:r,r=c>r?c:r;this._bounds.x=F;this._bounds.width=(g>f?g:f)-F;this._bounds.y=d;this._bounds.height=(a>r?a:r)-d;this._currentBounds=
this._bounds}return this._currentBounds};a.prototype.containsPoint=function(b){this.worldTransform.applyInverse(b,r);b=this.graphicsData;for(var d=0;d<b.length;d++){var c=b[d];if(c.fill&&c.shape&&c.shape.contains(r.x,r.y))return!0}return!1};a.prototype.updateLocalBounds=function(){var b=Infinity,d=-Infinity,c=Infinity,a=-Infinity;if(this.graphicsData.length)for(var f,k,g,r,e,h=0;h<this.graphicsData.length;h++)if(g=this.graphicsData[h],k=g.type,e=g.lineWidth,f=g.shape,k===m.SHAPES.RECT||k===m.SHAPES.RREC)k=
f.x-e/2,g=f.y-e/2,r=f.width+e,e=f.height+e,b=k<b?k:b,d=k+r>d?k+r:d,c=g<c?g:c,a=g+e>a?g+e:a;else if(k===m.SHAPES.CIRC)k=f.x,g=f.y,r=f.radius+e/2,e=f.radius+e/2,b=k-r<b?k-r:b,d=k+r>d?k+r:d,c=g-e<c?g-e:c,a=g+e>a?g+e:a;else if(k===m.SHAPES.ELIP)k=f.x,g=f.y,r=f.width+e/2,e=f.height+e/2,b=k-r<b?k-r:b,d=k+r>d?k+r:d,c=g-e<c?g-e:c,a=g+e>a?g+e:a;else for(f=f.points,r=0;r<f.length;r+=2)k=f[r],g=f[r+1],b=k-e<b?k-e:b,d=k+e>d?k+e:d,c=g-e<c?g-e:c,a=g+e>a?g+e:a;else a=c=d=b=0;h=this.boundsPadding;this._localBounds.x=
b-h;this._localBounds.width=d-b+2*h;this._localBounds.y=c-h;this._localBounds.height=a-c+2*h};a.prototype.drawShape=function(b){this.currentPath&&2>=this.currentPath.shape.points.length&&this.graphicsData.pop();this.currentPath=null;b=new d(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,b);this.graphicsData.push(b);b.type===m.SHAPES.POLY&&(b.shape.closed=b.shape.closed||this.filling,this.currentPath=b);this.dirty=this.boundsDirty=!0;return b};a.prototype.destroy=
function(){g.prototype.destroy.apply(this,arguments);for(var b=0;b<this.graphicsData.length;++b)this.graphicsData[b].destroy();for(var d in this._webgl)for(b=0;b<this._webgl[d].data.length;++b)this._webgl[d].data[b].destroy();this._localBounds=this._webgl=this.currentPath=this.graphicsData=null}},{"../const":16,"../display/Container":17,"../math":26,"../renderers/canvas/utils/CanvasBuffer":38,"../renderers/canvas/utils/CanvasGraphics":39,"../textures/Texture":65,"./GraphicsData":20}],20:[function(e,
h,l){function a(a,c,f,b,d,k,m){this.lineWidth=a;this.lineColor=c;this.lineAlpha=f;this._lineTint=c;this.fillColor=b;this.fillAlpha=d;this._fillTint=b;this.fill=k;this.shape=m;this.type=m.type}a.prototype.constructor=a;h.exports=a;a.prototype.clone=function(){return new a(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)};a.prototype.destroy=function(){this.shape=null}},{}],21:[function(e,h,l){function a(d){b.call(this,d);this.graphicsDataPool=[];this.complexPrimitiveShader=
this.primitiveShader=null;this.maximumSimplePolySize=200}var g=e("../../utils"),c=e("../../math"),f=e("../../const"),b=e("../../renderers/webgl/utils/ObjectRenderer");l=e("../../renderers/webgl/WebGLRenderer");var d=e("./WebGLGraphicsData"),k=e("earcut");a.prototype=Object.create(b.prototype);a.prototype.constructor=a;h.exports=a;l.registerPlugin("graphics",a);a.prototype.onContextChange=function(){};a.prototype.destroy=function(){b.prototype.destroy.call(this);for(var d=0;d<this.graphicsDataPool.length;++d)this.graphicsDataPool[d].destroy();
this.graphicsDataPool=null};a.prototype.render=function(b){var d=this.renderer,c=d.gl,a,f;!b.dirty&&b._webGL[c.id]||this.updateGraphics(b);var k=b._webGL[c.id];d.blendModeManager.setBlendMode(b.blendMode);for(var e=0,h=k.data.length;e<h;e++)f=k.data[e],1===k.data[e].mode?(d.stencilManager.pushStencil(b,f),c.uniform1f(d.shaderManager.complexPrimitiveShader.uniforms.alpha._location,b.worldAlpha*f.alpha),c.drawElements(c.TRIANGLE_FAN,4,c.UNSIGNED_SHORT,2*(f.indices.length-4)),d.stencilManager.popStencil(b,
f)):(a=d.shaderManager.primitiveShader,d.shaderManager.setShader(a),c.uniformMatrix3fv(a.uniforms.translationMatrix._location,!1,b.worldTransform.toArray(!0)),c.uniformMatrix3fv(a.uniforms.projectionMatrix._location,!1,d.currentRenderTarget.projectionMatrix.toArray(!0)),c.uniform3fv(a.uniforms.tint._location,g.hex2rgb(b.tint)),c.uniform1f(a.uniforms.alpha._location,b.worldAlpha),c.bindBuffer(c.ARRAY_BUFFER,f.buffer),c.vertexAttribPointer(a.attributes.aVertexPosition,2,c.FLOAT,!1,24,0),c.vertexAttribPointer(a.attributes.aColor,
4,c.FLOAT,!1,24,8),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,f.indexBuffer),c.drawElements(c.TRIANGLE_STRIP,f.indices.length,c.UNSIGNED_SHORT,0)),d.drawCount++};a.prototype.updateGraphics=function(b){var d=this.renderer.gl,c=b._webGL[d.id];c||(c=b._webGL[d.id]={lastIndex:0,data:[],gl:d});b.dirty=!1;if(b.clearDirty){b.clearDirty=!1;for(d=0;d<c.data.length;d++){var a=c.data[d];a.reset();this.graphicsDataPool.push(a)}c.data=[];c.lastIndex=0}for(d=c.lastIndex;d<b.graphicsData.length;d++){var k=b.graphicsData[d];
k.type===f.SHAPES.POLY?(k.points=k.shape.points.slice(),k.shape.closed&&(k.points[0]===k.points[k.points.length-2]&&k.points[1]===k.points[k.points.length-1]||k.points.push(k.points[0],k.points[1])),k.fill&&6<=k.points.length&&(k.points.length<2*this.maximumSimplePolySize?(a=this.switchMode(c,0),this.buildPoly(k,a)||(a=this.switchMode(c,1),this.buildComplexPoly(k,a))):(a=this.switchMode(c,1),this.buildComplexPoly(k,a))),0<k.lineWidth&&(a=this.switchMode(c,0),this.buildLine(k,a))):(a=this.switchMode(c,
0),k.type===f.SHAPES.RECT?this.buildRectangle(k,a):k.type===f.SHAPES.CIRC||k.type===f.SHAPES.ELIP?this.buildCircle(k,a):k.type===f.SHAPES.RREC&&this.buildRoundedRectangle(k,a));c.lastIndex++}for(d=0;d<c.data.length;d++)a=c.data[d],a.dirty&&a.upload()};a.prototype.switchMode=function(b,c){var a;if(b.data.length){if(a=b.data[b.data.length-1],32E4<a.points.length||a.mode!==c||1===c)a=this.graphicsDataPool.pop()||new d(b.gl),a.mode=c,b.data.push(a)}else a=this.graphicsDataPool.pop()||new d(b.gl),a.mode=
c,b.data.push(a);a.dirty=!0;return a};a.prototype.buildRectangle=function(b,d){var c=b.shape,a=c.x,f=c.y,k=c.width,c=c.height;if(b.fill){var e=g.hex2rgb(b.fillColor),h=b.fillAlpha,l=e[0]*h,y=e[1]*h,e=e[2]*h,w=d.points,D=d.indices,I=w.length/6;w.push(a,f);w.push(l,y,e,h);w.push(a+k,f);w.push(l,y,e,h);w.push(a,f+c);w.push(l,y,e,h);w.push(a+k,f+c);w.push(l,y,e,h);D.push(I,I,I+1,I+2,I+3,I+3)}b.lineWidth&&(h=b.points,b.points=[a,f,a+k,f,a+k,f+c,a,f+c,a,f],this.buildLine(b,d),b.points=h)};a.prototype.buildRoundedRectangle=
function(b,d){var c=b.shape,a=c.x,f=c.y,e=c.width,h=c.height,l=c.radius,c=[];c.push(a,f+l);this.quadraticBezierCurve(a,f+h-l,a,f+h,a+l,f+h,c);this.quadraticBezierCurve(a+e-l,f+h,a+e,f+h,a+e,f+h-l,c);this.quadraticBezierCurve(a+e,f+l,a+e,f,a+e-l,f,c);this.quadraticBezierCurve(a+l,f,a,f,a,f+l+1E-10,c);if(b.fill){var h=g.hex2rgb(b.fillColor),a=b.fillAlpha,f=h[0]*a,e=h[1]*a,h=h[2]*a,l=d.points,z=d.indices,y=l.length/6,w=k(c,null,2),D;for(D=0;D<w.length;D+=3)z.push(w[D]+y),z.push(w[D]+y),z.push(w[D+1]+
y),z.push(w[D+2]+y),z.push(w[D+2]+y);for(D=0;D<c.length;D++)l.push(c[D],c[++D],f,e,h,a)}b.lineWidth&&(a=b.points,b.points=c,this.buildLine(b,d),b.points=a)};a.prototype.quadraticBezierCurve=function(b,d,c,a,f,k,g){var e,h,l,w;g=g||[];for(var D,I=0;20>=I;I++)D=I/20,e=b+(c-b)*D,h=d+(a-d)*D,l=c+(f-c)*D,w=a+(k-a)*D,e+=(l-e)*D,h+=(w-h)*D,g.push(e,h);return g};a.prototype.buildCircle=function(b,d){var c=b.shape,a=c.x,k=c.y,e,h;b.type===f.SHAPES.CIRC?h=e=c.radius:(e=c.width,h=c.height);var c=Math.floor(30*
Math.sqrt(c.radius))||Math.floor(15*Math.sqrt(c.width+c.height)),l=2*Math.PI/c,z;if(b.fill){z=g.hex2rgb(b.fillColor);var y=b.fillAlpha,w=z[0]*y,D=z[1]*y,I=z[2]*y,L=d.points,F=d.indices,v=L.length/6;F.push(v);for(z=0;z<c+1;z++)L.push(a,k,w,D,I,y),L.push(a+Math.sin(l*z)*e,k+Math.cos(l*z)*h,w,D,I,y),F.push(v++,v++);F.push(v-1)}if(b.lineWidth){y=b.points;b.points=[];for(z=0;z<c+1;z++)b.points.push(a+Math.sin(l*z)*e,k+Math.cos(l*z)*h);this.buildLine(b,d);b.points=y}};a.prototype.buildLine=function(b,d){var a,
f=b.points;if(0!==f.length){var k=new c.Point(f[0],f[1]),e=new c.Point(f[f.length-2],f[f.length-1]);if(k.x===e.x&&k.y===e.y){f=f.slice();f.pop();f.pop();var e=new c.Point(f[f.length-2],f[f.length-1]),h=e.x+.5*(k.x-e.x),k=e.y+.5*(k.y-e.y);f.unshift(h,k);f.push(h,k)}var h=d.points,k=d.indices,e=f.length/2,l=f.length,z=h.length/6,y=b.lineWidth/2;a=g.hex2rgb(b.lineColor);var w=b.lineAlpha,D=a[0]*w,I=a[1]*w,L=a[2]*w,F,v,M,A,u,J,K,N,H,G,O,P,Q;M=f[0];A=f[1];u=f[2];J=f[3];H=-(A-J);G=M-u;v=Math.sqrt(H*H+G*
G);H=H/v*y;G=G/v*y;h.push(M-H,A-G,D,I,L,w);h.push(M+H,A+G,D,I,L,w);for(a=1;a<e-1;a++)M=f[2*(a-1)],A=f[2*(a-1)+1],u=f[2*a],J=f[2*a+1],K=f[2*(a+1)],N=f[2*(a+1)+1],H=-(A-J),G=M-u,v=Math.sqrt(H*H+G*G),H/=v,G/=v,H*=y,G*=y,O=-(J-N),P=u-K,v=Math.sqrt(O*O+P*P),O/=v,P/=v,O*=y,P*=y,v=-G+A-(-G+J),F=-H+u-(-H+M),M=(-H+M)*(-G+J)-(-H+u)*(-G+A),A=-P+N-(-P+J),Q=-O+u-(-O+K),K=(-O+K)*(-P+J)-(-O+u)*(-P+N),N=v*Q-A*F,.1>Math.abs(N)?(h.push(u-H,J-G,D,I,L,w),h.push(u+H,J+G,D,I,L,w)):(F=(F*K-Q*M)/N,v=(A*M-v*K)/N,K=(F-u)*
(F-u)+(v-J)*(v-J),19600<K?(H-=O,G-=P,v=Math.sqrt(H*H+G*G),H/=v,G/=v,H*=y,G*=y,h.push(u-H,J-G),h.push(D,I,L,w),h.push(u+H,J+G),h.push(D,I,L,w),h.push(u-H,J-G),h.push(D,I,L,w),l++):(h.push(F,v),h.push(D,I,L,w),h.push(u-(F-u),J-(v-J)),h.push(D,I,L,w)));M=f[2*(e-2)];A=f[2*(e-2)+1];u=f[2*(e-1)];J=f[2*(e-1)+1];H=-(A-J);G=M-u;v=Math.sqrt(H*H+G*G);H=H/v*y;G=G/v*y;h.push(u-H,J-G);h.push(D,I,L,w);h.push(u+H,J+G);h.push(D,I,L,w);k.push(z);for(a=0;a<l;a++)k.push(z++);k.push(z-1)}};a.prototype.buildComplexPoly=
function(b,d){var c=b.points.slice();if(!(6>c.length)){var a=d.indices;d.points=c;d.alpha=b.fillAlpha;d.color=g.hex2rgb(b.fillColor);for(var f=Infinity,k=-Infinity,e=Infinity,h=-Infinity,l,y,w=0;w<c.length;w+=2)l=c[w],y=c[w+1],f=l<f?l:f,k=l>k?l:k,e=y<e?y:e,h=y>h?y:h;c.push(f,e,k,e,k,h,f,h);c=c.length/2;for(w=0;w<c;w++)a.push(w)}};a.prototype.buildPoly=function(b,d){var c=b.points;if(!(6>c.length)){var a=d.points,f=d.indices,e=c.length/2,h=g.hex2rgb(b.fillColor),l=b.fillAlpha,z=h[0]*l,y=h[1]*l,h=h[2]*
l,w=k(c,null,2);if(!w)return!1;var D=a.length/6,I;for(I=0;I<w.length;I+=3)f.push(w[I]+D),f.push(w[I]+D),f.push(w[I+1]+D),f.push(w[I+2]+D),f.push(w[I+2]+D);for(I=0;I<e;I++)a.push(c[2*I],c[2*I+1],z,y,h,l);return!0}}},{"../../const":16,"../../math":26,"../../renderers/webgl/WebGLRenderer":42,"../../renderers/webgl/utils/ObjectRenderer":56,"../../utils":70,"./WebGLGraphicsData":22,earcut:9}],22:[function(e,h,l){function a(a){this.gl=a;this.color=[0,0,0];this.points=[];this.indices=[];this.buffer=a.createBuffer();
this.indexBuffer=a.createBuffer();this.alpha=this.mode=1;this.dirty=!0;this.glIndices=this.glPoints=null}a.prototype.constructor=a;h.exports=a;a.prototype.reset=function(){this.points.length=0;this.indices.length=0};a.prototype.upload=function(){var a=this.gl;this.glPoints=new Float32Array(this.points);a.bindBuffer(a.ARRAY_BUFFER,this.buffer);a.bufferData(a.ARRAY_BUFFER,this.glPoints,a.STATIC_DRAW);this.glIndices=new Uint16Array(this.indices);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);
a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.glIndices,a.STATIC_DRAW);this.dirty=!1};a.prototype.destroy=function(){this.indices=this.points=this.color=null;this.gl.deleteBuffer(this.buffer);this.gl.deleteBuffer(this.indexBuffer);this.glIndices=this.glPoints=this.indexBuffer=this.buffer=this.gl=null}},{}],23:[function(e,h,l){var a=h.exports=Object.assign(e("./const"),e("./math"),{utils:e("./utils"),ticker:e("./ticker"),DisplayObject:e("./display/DisplayObject"),Container:e("./display/Container"),Sprite:e("./sprites/Sprite"),
ParticleContainer:e("./particles/ParticleContainer"),SpriteRenderer:e("./sprites/webgl/SpriteRenderer"),ParticleRenderer:e("./particles/webgl/ParticleRenderer"),Text:e("./text/Text"),Graphics:e("./graphics/Graphics"),GraphicsData:e("./graphics/GraphicsData"),GraphicsRenderer:e("./graphics/webgl/GraphicsRenderer"),Texture:e("./textures/Texture"),BaseTexture:e("./textures/BaseTexture"),RenderTexture:e("./textures/RenderTexture"),VideoBaseTexture:e("./textures/VideoBaseTexture"),TextureUvs:e("./textures/TextureUvs"),
CanvasRenderer:e("./renderers/canvas/CanvasRenderer"),CanvasGraphics:e("./renderers/canvas/utils/CanvasGraphics"),CanvasBuffer:e("./renderers/canvas/utils/CanvasBuffer"),WebGLRenderer:e("./renderers/webgl/WebGLRenderer"),WebGLManager:e("./renderers/webgl/managers/WebGLManager"),ShaderManager:e("./renderers/webgl/managers/ShaderManager"),Shader:e("./renderers/webgl/shaders/Shader"),ObjectRenderer:e("./renderers/webgl/utils/ObjectRenderer"),RenderTarget:e("./renderers/webgl/utils/RenderTarget"),AbstractFilter:e("./renderers/webgl/filters/AbstractFilter"),
FXAAFilter:e("./renderers/webgl/filters/FXAAFilter"),SpriteMaskFilter:e("./renderers/webgl/filters/SpriteMaskFilter"),autoDetectRenderer:function(g,c,f,b){g=g||800;c=c||600;return!b&&a.utils.isWebGLSupported()?new a.WebGLRenderer(g,c,f):new a.CanvasRenderer(g,c,f)}})},{"./const":16,"./display/Container":17,"./display/DisplayObject":18,"./graphics/Graphics":19,"./graphics/GraphicsData":20,"./graphics/webgl/GraphicsRenderer":21,"./math":26,"./particles/ParticleContainer":32,"./particles/webgl/ParticleRenderer":34,
"./renderers/canvas/CanvasRenderer":37,"./renderers/canvas/utils/CanvasBuffer":38,"./renderers/canvas/utils/CanvasGraphics":39,"./renderers/webgl/WebGLRenderer":42,"./renderers/webgl/filters/AbstractFilter":43,"./renderers/webgl/filters/FXAAFilter":44,"./renderers/webgl/filters/SpriteMaskFilter":45,"./renderers/webgl/managers/ShaderManager":49,"./renderers/webgl/managers/WebGLManager":51,"./renderers/webgl/shaders/Shader":54,"./renderers/webgl/utils/ObjectRenderer":56,"./renderers/webgl/utils/RenderTarget":58,
"./sprites/Sprite":60,"./sprites/webgl/SpriteRenderer":61,"./text/Text":62,"./textures/BaseTexture":63,"./textures/RenderTexture":64,"./textures/Texture":65,"./textures/TextureUvs":66,"./textures/VideoBaseTexture":67,"./ticker":69,"./utils":70}],24:[function(e,h,l){function a(){this.a=1;this.c=this.b=0;this.d=1;this.ty=this.tx=0}var g=e("./Point");a.prototype.constructor=a;h.exports=a;a.prototype.fromArray=function(c){this.a=c[0];this.b=c[1];this.c=c[3];this.d=c[4];this.tx=c[2];this.ty=c[5]};a.prototype.set=
function(c,a,b,d,k,m){this.a=c;this.b=a;this.c=b;this.d=d;this.tx=k;this.ty=m;return this};a.prototype.toArray=function(c,a){this.array||(this.array=new Float32Array(9));var b=a||this.array;c?(b[0]=this.a,b[1]=this.b,b[2]=0,b[3]=this.c,b[4]=this.d,b[5]=0,b[6]=this.tx,b[7]=this.ty):(b[0]=this.a,b[1]=this.c,b[2]=this.tx,b[3]=this.b,b[4]=this.d,b[5]=this.ty,b[6]=0,b[7]=0);b[8]=1;return b};a.prototype.apply=function(c,a){a=a||new g;var b=c.x,d=c.y;a.x=this.a*b+this.c*d+this.tx;a.y=this.b*b+this.d*d+this.ty;
return a};a.prototype.applyInverse=function(c,a){a=a||new g;var b=1/(this.a*this.d+this.c*-this.b),d=c.x,k=c.y;a.x=this.d*b*d+-this.c*b*k+(this.ty*this.c-this.tx*this.d)*b;a.y=this.a*b*k+-this.b*b*d+(-this.ty*this.a+this.tx*this.b)*b;return a};a.prototype.translate=function(c,a){this.tx+=c;this.ty+=a;return this};a.prototype.scale=function(c,a){this.a*=c;this.d*=a;this.c*=c;this.b*=a;this.tx*=c;this.ty*=a;return this};a.prototype.rotate=function(c){var a=Math.cos(c);c=Math.sin(c);var b=this.a,d=this.c,
k=this.tx;this.a=b*a-this.b*c;this.b=b*c+this.b*a;this.c=d*a-this.d*c;this.d=d*c+this.d*a;this.tx=k*a-this.ty*c;this.ty=k*c+this.ty*a;return this};a.prototype.append=function(c){var a=this.a,b=this.b,d=this.c,k=this.d;this.a=c.a*a+c.b*d;this.b=c.a*b+c.b*k;this.c=c.c*a+c.d*d;this.d=c.c*b+c.d*k;this.tx=c.tx*a+c.ty*d+this.tx;this.ty=c.tx*b+c.ty*k+this.ty;return this};a.prototype.setTransform=function(c,a,b,d,k,m,g,e,h){var q,n,t,l;q=Math.sin(g);n=Math.cos(g);g=Math.cos(h);h=Math.sin(h);t=-Math.sin(e);
l=Math.cos(e);e=n*k;k*=q;q=-q*m;m*=n;this.a=g*e+h*q;this.b=g*k+h*m;this.c=t*e+l*q;this.d=t*k+l*m;this.tx=c+(b*e+d*q);this.ty=a+(b*k+d*m);return this};a.prototype.prepend=function(c){var a=this.tx;if(1!==c.a||0!==c.b||0!==c.c||1!==c.d){var b=this.a,d=this.c;this.a=b*c.a+this.b*c.c;this.b=b*c.b+this.b*c.d;this.c=d*c.a+this.d*c.c;this.d=d*c.b+this.d*c.d}this.tx=a*c.a+this.ty*c.c+c.tx;this.ty=a*c.b+this.ty*c.d+c.ty;return this};a.prototype.invert=function(){var c=this.a,a=this.b,b=this.c,d=this.d,k=this.tx,
m=c*d-a*b;this.a=d/m;this.b=-a/m;this.c=-b/m;this.d=c/m;this.tx=(b*this.ty-d*k)/m;this.ty=-(c*this.ty-a*k)/m;return this};a.prototype.identity=function(){this.a=1;this.c=this.b=0;this.d=1;this.ty=this.tx=0;return this};a.prototype.clone=function(){var c=new a;c.a=this.a;c.b=this.b;c.c=this.c;c.d=this.d;c.tx=this.tx;c.ty=this.ty;return c};a.prototype.copy=function(c){c.a=this.a;c.b=this.b;c.c=this.c;c.d=this.d;c.tx=this.tx;c.ty=this.ty;return c};a.IDENTITY=new a;a.TEMP_MATRIX=new a},{"./Point":25}],
25:[function(e,h,l){function a(a,c){this.x=a||0;this.y=c||0}a.prototype.constructor=a;h.exports=a;a.prototype.clone=function(){return new a(this.x,this.y)};a.prototype.copy=function(a){this.set(a.x,a.y)};a.prototype.equals=function(a){return a.x===this.x&&a.y===this.y};a.prototype.set=function(a,c){this.x=a||0;this.y=c||(0!==c?this.x:0)}},{}],26:[function(e,h,l){h.exports={Point:e("./Point"),Matrix:e("./Matrix"),Circle:e("./shapes/Circle"),Ellipse:e("./shapes/Ellipse"),Polygon:e("./shapes/Polygon"),
Rectangle:e("./shapes/Rectangle"),RoundedRectangle:e("./shapes/RoundedRectangle")}},{"./Matrix":24,"./Point":25,"./shapes/Circle":27,"./shapes/Ellipse":28,"./shapes/Polygon":29,"./shapes/Rectangle":30,"./shapes/RoundedRectangle":31}],27:[function(e,h,l){function a(a,b,d){this.x=a||0;this.y=b||0;this.radius=d||0;this.type=c.SHAPES.CIRC}var g=e("./Rectangle"),c=e("../../const");a.prototype.constructor=a;h.exports=a;a.prototype.clone=function(){return new a(this.x,this.y,this.radius)};a.prototype.contains=
function(c,b){if(0>=this.radius)return!1;var d=this.x-c,a=this.y-b;return d*d+a*a<=this.radius*this.radius};a.prototype.getBounds=function(){return new g(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},{"../../const":16,"./Rectangle":30}],28:[function(e,h,l){function a(a,b,d,k){this.x=a||0;this.y=b||0;this.width=d||0;this.height=k||0;this.type=c.SHAPES.ELIP}var g=e("./Rectangle"),c=e("../../const");a.prototype.constructor=a;h.exports=a;a.prototype.clone=function(){return new a(this.x,
this.y,this.width,this.height)};a.prototype.contains=function(c,b){if(0>=this.width||0>=this.height)return!1;var d=(c-this.x)/this.width,a=(b-this.y)/this.height;return 1>=d*d+a*a};a.prototype.getBounds=function(){return new g(this.x-this.width,this.y-this.height,this.width,this.height)}},{"../../const":16,"./Rectangle":30}],29:[function(e,h,l){function a(a){var b=a;if(!Array.isArray(b))for(var b=Array(arguments.length),d=0;d<b.length;++d)b[d]=arguments[d];if(b[0]instanceof g){for(var d=[],k=0,m=
b.length;k<m;k++)d.push(b[k].x,b[k].y);b=d}this.closed=!0;this.points=b;this.type=c.SHAPES.POLY}var g=e("../Point"),c=e("../../const");a.prototype.constructor=a;h.exports=a;a.prototype.clone=function(){return new a(this.points.slice())};a.prototype.contains=function(c,b){for(var d=!1,a=this.points.length/2,m=0,g=a-1;m<a;g=m++){var e=this.points[2*m],h=this.points[2*m+1],q=this.points[2*g],g=this.points[2*g+1];h>b!==g>b&&c<(q-e)*(b-h)/(g-h)+e&&(d=!d)}return d}},{"../../const":16,"../Point":25}],30:[function(e,
h,l){function a(c,a,b,d){this.x=c||0;this.y=a||0;this.width=b||0;this.height=d||0;this.type=g.SHAPES.RECT}var g=e("../../const");a.prototype.constructor=a;h.exports=a;a.EMPTY=new a(0,0,0,0);a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)};a.prototype.contains=function(c,a){return 0>=this.width||0>=this.height?!1:c>=this.x&&c<this.x+this.width&&a>=this.y&&a<this.y+this.height?!0:!1}},{"../../const":16}],31:[function(e,h,l){function a(c,a,b,d,k){this.x=c||0;this.y=a||
0;this.width=b||0;this.height=d||0;this.radius=k||20;this.type=g.SHAPES.RREC}var g=e("../../const");a.prototype.constructor=a;h.exports=a;a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.radius)};a.prototype.contains=function(c,a){return 0>=this.width||0>=this.height?!1:c>=this.x&&c<=this.x+this.width&&a>=this.y&&a<=this.y+this.height?!0:!1}},{"../../const":16}],32:[function(e,h,l){function a(a,b,d){g.call(this);d=d||15E3;a=a||15E3;16384<d&&(d=16384);d>a&&(d=a);
this._properties=[!1,!0,!1,!1,!1];this._maxSize=a;this._batchSize=d;this._buffers=null;this._bufferToUpdate=0;this.interactiveChildren=!1;this.blendMode=c.BLEND_MODES.NORMAL;this.roundPixels=!0;this.setProperties(b)}var g=e("../display/Container"),c=e("../const");a.prototype=Object.create(g.prototype);a.prototype.constructor=a;h.exports=a;a.prototype.setProperties=function(a){a&&(this._properties[0]="scale"in a?!!a.scale:this._properties[0],this._properties[1]="position"in a?!!a.position:this._properties[1],
this._properties[2]="rotation"in a?!!a.rotation:this._properties[2],this._properties[3]="uvs"in a?!!a.uvs:this._properties[3],this._properties[4]="alpha"in a?!!a.alpha:this._properties[4])};a.prototype.updateTransform=function(){this.displayObjectUpdateTransform()};a.prototype.renderWebGL=function(a){this.visible&&!(0>=this.worldAlpha)&&this.children.length&&this.renderable&&(a.setObjectRenderer(a.plugins.particle),a.plugins.particle.render(this))};a.prototype.onChildrenChange=function(a){a=Math.floor(a/
this._batchSize);a<this._bufferToUpdate&&(this._bufferToUpdate=a)};a.prototype.renderCanvas=function(a){if(this.visible&&!(0>=this.worldAlpha)&&this.children.length&&this.renderable){var b=a.context,d=this.worldTransform,c=!0,m,g,e,h,q=a.blendModes[this.blendMode];q!==b.globalCompositeOperation&&(b.globalCompositeOperation=q);b.globalAlpha=this.worldAlpha;this.displayObjectUpdateTransform();for(q=0;q<this.children.length;++q){var n=this.children[q];if(n.visible){var t=n.texture.frame;b.globalAlpha=
this.worldAlpha*n.alpha;0===n.rotation%(2*Math.PI)?(c&&(b.setTransform(d.a,d.b,d.c,d.d,d.tx,d.ty),c=!1),m=n.anchor.x*-t.width*n.scale.x+n.position.x+.5,g=n.anchor.y*-t.height*n.scale.y+n.position.y+.5,e=t.width*n.scale.x,h=t.height*n.scale.y):(c||(c=!0),n.displayObjectUpdateTransform(),m=n.worldTransform,a.roundPixels?b.setTransform(m.a,m.b,m.c,m.d,m.tx|0,m.ty|0):b.setTransform(m.a,m.b,m.c,m.d,m.tx,m.ty),m=n.anchor.x*-t.width+.5,g=n.anchor.y*-t.height+.5,e=t.width,h=t.height);b.drawImage(n.texture.baseTexture.source,
t.x,t.y,t.width,t.height,m,g,e,h)}}}};a.prototype.destroy=function(){g.prototype.destroy.apply(this,arguments);if(this._buffers)for(var a=0;a<this._buffers.length;++a)this._buffers[a].destroy();this._buffers=this._properties=null}},{"../const":16,"../display/Container":17}],33:[function(e,h,l){function a(a,c,f,b){this.gl=a;this.vertSize=2;this.vertByteSize=4*this.vertSize;this.size=b;this.dynamicProperties=[];this.staticProperties=[];for(a=0;a<c.length;a++)b=c[a],f[a]?this.dynamicProperties.push(b):
this.staticProperties.push(b);this.staticStride=0;this.staticData=this.staticBuffer=null;this.dynamicStride=0;this.dynamicData=this.dynamicBuffer=null;this.initBuffers()}a.prototype.constructor=a;h.exports=a;a.prototype.initBuffers=function(){var a=this.gl,c,f,b=0;for(c=this.dynamicStride=0;c<this.dynamicProperties.length;c++)f=this.dynamicProperties[c],f.offset=b,b+=f.size,this.dynamicStride+=f.size;this.dynamicData=new Float32Array(this.size*this.dynamicStride*4);this.dynamicBuffer=a.createBuffer();
a.bindBuffer(a.ARRAY_BUFFER,this.dynamicBuffer);a.bufferData(a.ARRAY_BUFFER,this.dynamicData,a.DYNAMIC_DRAW);for(c=this.staticStride=b=0;c<this.staticProperties.length;c++)f=this.staticProperties[c],f.offset=b,b+=f.size,this.staticStride+=f.size;this.staticData=new Float32Array(this.size*this.staticStride*4);this.staticBuffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.staticBuffer);a.bufferData(a.ARRAY_BUFFER,this.staticData,a.DYNAMIC_DRAW)};a.prototype.uploadDynamic=function(a,c,f){for(var b=
this.gl,d=0;d<this.dynamicProperties.length;d++){var k=this.dynamicProperties[d];k.uploadFunction(a,c,f,this.dynamicData,this.dynamicStride,k.offset)}b.bindBuffer(b.ARRAY_BUFFER,this.dynamicBuffer);b.bufferSubData(b.ARRAY_BUFFER,0,this.dynamicData)};a.prototype.uploadStatic=function(a,c,f){for(var b=this.gl,d=0;d<this.staticProperties.length;d++){var k=this.staticProperties[d];k.uploadFunction(a,c,f,this.staticData,this.staticStride,k.offset)}b.bindBuffer(b.ARRAY_BUFFER,this.staticBuffer);b.bufferSubData(b.ARRAY_BUFFER,
0,this.staticData)};a.prototype.bind=function(){var a=this.gl,c,f;a.bindBuffer(a.ARRAY_BUFFER,this.dynamicBuffer);for(c=0;c<this.dynamicProperties.length;c++)f=this.dynamicProperties[c],a.vertexAttribPointer(f.attribute,f.size,a.FLOAT,!1,4*this.dynamicStride,4*f.offset);a.bindBuffer(a.ARRAY_BUFFER,this.staticBuffer);for(c=0;c<this.staticProperties.length;c++)f=this.staticProperties[c],a.vertexAttribPointer(f.attribute,f.size,a.FLOAT,!1,4*this.staticStride,4*f.offset)};a.prototype.destroy=function(){this.dynamicData=
this.dynamicProperties=null;this.gl.deleteBuffer(this.dynamicBuffer);this.staticData=this.staticProperties=null;this.gl.deleteBuffer(this.staticBuffer)}},{}],34:[function(e,h,l){function a(a){g.call(this,a);this.indices=new Uint16Array(98304);for(var c=a=0;98304>a;a+=6,c+=4)this.indices[a+0]=c+0,this.indices[a+1]=c+1,this.indices[a+2]=c+2,this.indices[a+3]=c+0,this.indices[a+4]=c+2,this.indices[a+5]=c+3;this.properties=this.indexBuffer=this.shader=null;this.tempMatrix=new b.Matrix}var g=e("../../renderers/webgl/utils/ObjectRenderer");
l=e("../../renderers/webgl/WebGLRenderer");var c=e("./ParticleShader"),f=e("./ParticleBuffer"),b=e("../../math");a.prototype=Object.create(g.prototype);a.prototype.constructor=a;h.exports=a;l.registerPlugin("particle",a);a.prototype.onContextChange=function(){var b=this.renderer.gl;this.shader=new c(this.renderer.shaderManager);this.indexBuffer=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.indexBuffer);b.bufferData(b.ELEMENT_ARRAY_BUFFER,this.indices,b.STATIC_DRAW);this.properties=[{attribute:this.shader.attributes.aVertexPosition,
size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]};a.prototype.start=function(){var b=this.renderer.gl;b.activeTexture(b.TEXTURE0);
b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.indexBuffer);this.renderer.shaderManager.setShader(this.shader)};a.prototype.render=function(b){var a=b.children,c=a.length,f=b._maxSize,e=b._batchSize;if(0!==c){c>f&&(c=f);b._buffers||(b._buffers=this.generateBuffers(b));this.renderer.blendModeManager.setBlendMode(b.blendMode);var f=this.renderer.gl,g=b.worldTransform.copy(this.tempMatrix);g.prepend(this.renderer.currentRenderTarget.projectionMatrix);f.uniformMatrix3fv(this.shader.uniforms.projectionMatrix._location,
!1,g.toArray(!0));f.uniform1f(this.shader.uniforms.uAlpha._location,b.worldAlpha);g=a[0]._texture.baseTexture;if(g._glTextures[f.id])f.bindTexture(f.TEXTURE_2D,g._glTextures[f.id]);else{if(!this.renderer.updateTexture(g))return;b._properties[0]&&b._properties[3]||(b._bufferToUpdate=0)}for(var h=g=0;g<c;g+=e,h+=1){var n=c-g;n>e&&(n=e);var t=b._buffers[h];t.uploadDynamic(a,g,n);b._bufferToUpdate===h&&(t.uploadStatic(a,g,n),b._bufferToUpdate=h+1);t.bind(this.shader);f.drawElements(f.TRIANGLES,6*n,f.UNSIGNED_SHORT,
0);this.renderer.drawCount++}}};a.prototype.generateBuffers=function(b){var a=this.renderer.gl,c=[],e=b._maxSize,g=b._batchSize;b=b._properties;var h;for(h=0;h<e;h+=g)c.push(new f(a,this.properties,b,g));return c};a.prototype.uploadVertices=function(b,a,c,f,e,g){for(var h,n,t,l,z,y,w,D=0;D<c;D++)h=b[a+D],n=h._texture,l=h.scale.x,z=h.scale.y,n.trim?(t=n.trim,w=t.x-h.anchor.x*t.width,y=w+n.crop.width,h=t.y-h.anchor.y*t.height,t=h+n.crop.height):(y=n._frame.width*(1-h.anchor.x),w=n._frame.width*-h.anchor.x,
t=n._frame.height*(1-h.anchor.y),h=n._frame.height*-h.anchor.y),f[g]=w*l,f[g+1]=h*z,f[g+e]=y*l,f[g+e+1]=h*z,f[g+2*e]=y*l,f[g+2*e+1]=t*z,f[g+3*e]=w*l,f[g+3*e+1]=t*z,g+=4*e};a.prototype.uploadPosition=function(b,a,c,f,e,g){for(var h=0;h<c;h++){var n=b[a+h].position;f[g]=n.x;f[g+1]=n.y;f[g+e]=n.x;f[g+e+1]=n.y;f[g+2*e]=n.x;f[g+2*e+1]=n.y;f[g+3*e]=n.x;f[g+3*e+1]=n.y;g+=4*e}};a.prototype.uploadRotation=function(b,a,c,f,e,g){for(var h=0;h<c;h++){var n=b[a+h].rotation;f[g]=n;f[g+e]=n;f[g+2*e]=n;f[g+3*e]=
n;g+=4*e}};a.prototype.uploadUvs=function(b,a,c,f,e,g){for(var h=0;h<c;h++){var n=b[a+h]._texture._uvs;n?(f[g]=n.x0,f[g+1]=n.y0,f[g+e]=n.x1,f[g+e+1]=n.y1,f[g+2*e]=n.x2,f[g+2*e+1]=n.y2,f[g+3*e]=n.x3,f[g+3*e+1]=n.y3):(f[g]=0,f[g+1]=0,f[g+e]=0,f[g+e+1]=0,f[g+2*e]=0,f[g+2*e+1]=0,f[g+3*e]=0,f[g+3*e+1]=0);g+=4*e}};a.prototype.uploadAlpha=function(b,a,c,f,e,g){for(var h=0;h<c;h++){var n=b[a+h].alpha;f[g]=n;f[g+e]=n;f[g+2*e]=n;f[g+3*e]=n;g+=4*e}};a.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer);
g.prototype.destroy.apply(this,arguments);this.shader.destroy();this.tempMatrix=this.indices=null}},{"../../math":26,"../../renderers/webgl/WebGLRenderer":42,"../../renderers/webgl/utils/ObjectRenderer":56,"./ParticleBuffer":33,"./ParticleShader":35}],35:[function(e,h,l){function a(a){g.call(this,a,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute float aColor;\nattribute vec2 aPositionCoord;\nattribute vec2 aScale;\nattribute float aRotation;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvarying float vColor;\nvoid main(void){\n   vec2 v = aVertexPosition;\n   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n   v = v + aPositionCoord;\n   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = aColor;\n}",
"precision lowp float;\nvarying vec2 vTextureCoord;\nvarying float vColor;\nuniform sampler2D uSampler;\nuniform float uAlpha;\nvoid main(void){\n  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;\n  if (color.a == 0.0) discard;\n  gl_FragColor = color;\n}",{uAlpha:{type:"1f",value:1}},{aPositionCoord:0,aRotation:0})}var g=e("../../renderers/webgl/shaders/TextureShader");a.prototype=Object.create(g.prototype);a.prototype.constructor=a;h.exports=a},{"../../renderers/webgl/shaders/TextureShader":55}],
36:[function(e,h,l){function a(a,k,m,e){b.call(this);g.sayHello(a);if(e)for(var p in f.DEFAULT_RENDER_OPTIONS)"undefined"===typeof e[p]&&(e[p]=f.DEFAULT_RENDER_OPTIONS[p]);else e=f.DEFAULT_RENDER_OPTIONS;this.type=f.RENDERER_TYPE.UNKNOWN;this.width=k||800;this.height=m||600;this.view=e.view||document.createElement("canvas");this.resolution=e.resolution;this.transparent=e.transparent;this.autoResize=e.autoResize||!1;this.blendModes=null;this.preserveDrawingBuffer=e.preserveDrawingBuffer;this.clearBeforeRender=
e.clearBeforeRender;this.roundPixels=e.roundPixels;this._backgroundColor=0;this._backgroundColorRgb=[0,0,0];this._backgroundColorString="#000000";this.backgroundColor=e.backgroundColor||this._backgroundColor;this._lastObjectRendered=this._tempDisplayObjectParent={worldTransform:new c.Matrix,worldAlpha:1,children:[]}}var g=e("../utils"),c=e("../math"),f=e("../const"),b=e("eventemitter3");a.prototype=Object.create(b.prototype);a.prototype.constructor=a;h.exports=a;Object.defineProperties(a.prototype,
{backgroundColor:{get:function(){return this._backgroundColor},set:function(b){this._backgroundColor=b;this._backgroundColorString=g.hex2string(b);g.hex2rgb(b,this._backgroundColorRgb)}}});a.prototype.resize=function(b,a){this.width=b*this.resolution;this.height=a*this.resolution;this.view.width=this.width;this.view.height=this.height;this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")};a.prototype.destroy=function(b){b&&
this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.type=f.RENDERER_TYPE.UNKNOWN;this.height=this.width=0;this.view=null;this.resolution=0;this.autoResize=this.transparent=!1;this.blendModes=null;this.roundPixels=this.clearBeforeRender=this.preserveDrawingBuffer=!1;this._backgroundColor=0;this._backgroundColorString=this._backgroundColorRgb=null}},{"../const":16,"../math":26,"../utils":70,eventemitter3:10}],37:[function(e,h,l){function a(a,f,e){e=e||{};g.call(this,"Canvas",a,f,
e);this.type=d.RENDERER_TYPE.CANVAS;this.context=this.view.getContext("2d",{alpha:this.transparent});this.refresh=!0;this.maskManager=new c;this.smoothProperty="imageSmoothingEnabled";this.context.imageSmoothingEnabled||(this.context.webkitImageSmoothingEnabled?this.smoothProperty="webkitImageSmoothingEnabled":this.context.mozImageSmoothingEnabled?this.smoothProperty="mozImageSmoothingEnabled":this.context.oImageSmoothingEnabled?this.smoothProperty="oImageSmoothingEnabled":this.context.msImageSmoothingEnabled&&
(this.smoothProperty="msImageSmoothingEnabled"));this.initPlugins();this._mapBlendModes();this._tempDisplayObjectParent={worldTransform:new b.Matrix,worldAlpha:1};this.resize(a,f)}var g=e("../SystemRenderer"),c=e("./utils/CanvasMaskManager"),f=e("../../utils"),b=e("../../math"),d=e("../../const");a.prototype=Object.create(g.prototype);a.prototype.constructor=a;h.exports=a;f.pluginTarget.mixin(a);a.prototype.render=function(b){this.emit("prerender");var a=b.parent;this._lastObjectRendered=b;b.parent=
this._tempDisplayObjectParent;b.updateTransform();b.parent=a;this.context.setTransform(1,0,0,1,0,0);this.context.globalAlpha=1;this.context.globalCompositeOperation=this.blendModes[d.BLEND_MODES.NORMAL];navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear());this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=this._backgroundColorString,this.context.fillRect(0,0,this.width,this.height)));this.renderDisplayObject(b,
this.context);this.emit("postrender")};a.prototype.destroy=function(b){this.destroyPlugins();g.prototype.destroy.call(this,b);this.context=null;this.refresh=!0;this.maskManager.destroy();this.smoothProperty=this.maskManager=null};a.prototype.renderDisplayObject=function(b,a){var c=this.context;this.context=a;b.renderCanvas(this);this.context=c};a.prototype.resize=function(b,a){g.prototype.resize.call(this,b,a);this.smoothProperty&&(this.context[this.smoothProperty]=d.SCALE_MODES.DEFAULT===d.SCALE_MODES.LINEAR)};
a.prototype._mapBlendModes=function(){this.blendModes||(this.blendModes={},f.canUseNewCanvasBlendModes()?(this.blendModes[d.BLEND_MODES.NORMAL]="source-over",this.blendModes[d.BLEND_MODES.ADD]="lighter",this.blendModes[d.BLEND_MODES.MULTIPLY]="multiply",this.blendModes[d.BLEND_MODES.SCREEN]="screen",this.blendModes[d.BLEND_MODES.OVERLAY]="overlay",this.blendModes[d.BLEND_MODES.DARKEN]="darken",this.blendModes[d.BLEND_MODES.LIGHTEN]="lighten",this.blendModes[d.BLEND_MODES.COLOR_DODGE]="color-dodge",
this.blendModes[d.BLEND_MODES.COLOR_BURN]="color-burn",this.blendModes[d.BLEND_MODES.HARD_LIGHT]="hard-light",this.blendModes[d.BLEND_MODES.SOFT_LIGHT]="soft-light",this.blendModes[d.BLEND_MODES.DIFFERENCE]="difference",this.blendModes[d.BLEND_MODES.EXCLUSION]="exclusion",this.blendModes[d.BLEND_MODES.HUE]="hue",this.blendModes[d.BLEND_MODES.SATURATION]="saturate",this.blendModes[d.BLEND_MODES.COLOR]="color",this.blendModes[d.BLEND_MODES.LUMINOSITY]="luminosity"):(this.blendModes[d.BLEND_MODES.NORMAL]=
"source-over",this.blendModes[d.BLEND_MODES.ADD]="lighter",this.blendModes[d.BLEND_MODES.MULTIPLY]="source-over",this.blendModes[d.BLEND_MODES.SCREEN]="source-over",this.blendModes[d.BLEND_MODES.OVERLAY]="source-over",this.blendModes[d.BLEND_MODES.DARKEN]="source-over",this.blendModes[d.BLEND_MODES.LIGHTEN]="source-over",this.blendModes[d.BLEND_MODES.COLOR_DODGE]="source-over",this.blendModes[d.BLEND_MODES.COLOR_BURN]="source-over",this.blendModes[d.BLEND_MODES.HARD_LIGHT]="source-over",this.blendModes[d.BLEND_MODES.SOFT_LIGHT]=
"source-over",this.blendModes[d.BLEND_MODES.DIFFERENCE]="source-over",this.blendModes[d.BLEND_MODES.EXCLUSION]="source-over",this.blendModes[d.BLEND_MODES.HUE]="source-over",this.blendModes[d.BLEND_MODES.SATURATION]="source-over",this.blendModes[d.BLEND_MODES.COLOR]="source-over",this.blendModes[d.BLEND_MODES.LUMINOSITY]="source-over"))}},{"../../const":16,"../../math":26,"../../utils":70,"../SystemRenderer":36,"./utils/CanvasMaskManager":40}],38:[function(e,h,l){function a(a,c){this.canvas=document.createElement("canvas");
this.context=this.canvas.getContext("2d");this.canvas.width=a;this.canvas.height=c}a.prototype.constructor=a;h.exports=a;Object.defineProperties(a.prototype,{width:{get:function(){return this.canvas.width},set:function(a){this.canvas.width=a}},height:{get:function(){return this.canvas.height},set:function(a){this.canvas.height=a}}});a.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0);this.context.clearRect(0,0,this.canvas.width,this.canvas.height)};a.prototype.resize=function(a,c){this.canvas.width=
a;this.canvas.height=c};a.prototype.destroy=function(){this.canvas=this.context=null}},{}],39:[function(e,h,l){var a=e("../../../const");e={};h.exports=e;e.renderGraphics=function(e,c){var f=e.worldAlpha;e.dirty&&(this.updateGraphicsTint(e),e.dirty=!1);for(var b=0;b<e.graphicsData.length;b++){var d=e.graphicsData[b],k=d.shape,m=d._fillTint,r=d._lineTint;c.lineWidth=d.lineWidth;if(d.type===a.SHAPES.POLY){c.beginPath();var p=k.points;c.moveTo(p[0],p[1]);for(var h=1;h<p.length/2;h++)c.lineTo(p[2*h],
p[2*h+1]);k.closed&&c.lineTo(p[0],p[1]);p[0]===p[p.length-2]&&p[1]===p[p.length-1]&&c.closePath();d.fill&&(c.globalAlpha=d.fillAlpha*f,c.fillStyle="#"+("00000"+(m|0).toString(16)).substr(-6),c.fill());d.lineWidth&&(c.globalAlpha=d.lineAlpha*f,c.strokeStyle="#"+("00000"+(r|0).toString(16)).substr(-6),c.stroke())}else if(d.type===a.SHAPES.RECT){if(d.fillColor||0===d.fillColor)c.globalAlpha=d.fillAlpha*f,c.fillStyle="#"+("00000"+(m|0).toString(16)).substr(-6),c.fillRect(k.x,k.y,k.width,k.height);d.lineWidth&&
(c.globalAlpha=d.lineAlpha*f,c.strokeStyle="#"+("00000"+(r|0).toString(16)).substr(-6),c.strokeRect(k.x,k.y,k.width,k.height))}else if(d.type===a.SHAPES.CIRC)c.beginPath(),c.arc(k.x,k.y,k.radius,0,2*Math.PI),c.closePath(),d.fill&&(c.globalAlpha=d.fillAlpha*f,c.fillStyle="#"+("00000"+(m|0).toString(16)).substr(-6),c.fill()),d.lineWidth&&(c.globalAlpha=d.lineAlpha*f,c.strokeStyle="#"+("00000"+(r|0).toString(16)).substr(-6),c.stroke());else if(d.type===a.SHAPES.ELIP){var q=2*k.width,h=2*k.height,p=k.x-
q/2,k=k.y-h/2;c.beginPath();var n=q/2*.5522848,l=h/2*.5522848,E=p+q,z=k+h,q=p+q/2,h=k+h/2;c.moveTo(p,h);c.bezierCurveTo(p,h-l,q-n,k,q,k);c.bezierCurveTo(q+n,k,E,h-l,E,h);c.bezierCurveTo(E,h+l,q+n,z,q,z);c.bezierCurveTo(q-n,z,p,h+l,p,h);c.closePath();d.fill&&(c.globalAlpha=d.fillAlpha*f,c.fillStyle="#"+("00000"+(m|0).toString(16)).substr(-6),c.fill());d.lineWidth&&(c.globalAlpha=d.lineAlpha*f,c.strokeStyle="#"+("00000"+(r|0).toString(16)).substr(-6),c.stroke())}else if(d.type===a.SHAPES.RREC){p=k.x;
h=k.y;n=k.width;l=k.height;k=k.radius;E=Math.min(n,l)/2|0;k=k>E?E:k;c.beginPath();c.moveTo(p,h+k);c.lineTo(p,h+l-k);c.quadraticCurveTo(p,h+l,p+k,h+l);c.lineTo(p+n-k,h+l);c.quadraticCurveTo(p+n,h+l,p+n,h+l-k);c.lineTo(p+n,h+k);c.quadraticCurveTo(p+n,h,p+n-k,h);c.lineTo(p+k,h);c.quadraticCurveTo(p,h,p,h+k);c.closePath();if(d.fillColor||0===d.fillColor)c.globalAlpha=d.fillAlpha*f,c.fillStyle="#"+("00000"+(m|0).toString(16)).substr(-6),c.fill();d.lineWidth&&(c.globalAlpha=d.lineAlpha*f,c.strokeStyle=
"#"+("00000"+(r|0).toString(16)).substr(-6),c.stroke())}}};e.renderGraphicsMask=function(e,c){var f=e.graphicsData.length;if(0!==f){c.beginPath();for(var b=0;b<f;b++){var d=e.graphicsData[b],k=d.shape;if(d.type===a.SHAPES.POLY){d=k.points;c.moveTo(d[0],d[1]);for(var m=1;m<d.length/2;m++)c.lineTo(d[2*m],d[2*m+1]);d[0]===d[d.length-2]&&d[1]===d[d.length-1]&&c.closePath()}else if(d.type===a.SHAPES.RECT)c.rect(k.x,k.y,k.width,k.height),c.closePath();else if(d.type===a.SHAPES.CIRC)c.arc(k.x,k.y,k.radius,
0,2*Math.PI),c.closePath();else if(d.type===a.SHAPES.ELIP){var r=2*k.width,m=2*k.height,d=k.x-r/2,k=k.y-m/2,p=r/2*.5522848,h=m/2*.5522848,q=d+r,n=k+m,r=d+r/2,m=k+m/2;c.moveTo(d,m);c.bezierCurveTo(d,m-h,r-p,k,r,k);c.bezierCurveTo(r+p,k,q,m-h,q,m);c.bezierCurveTo(q,m+h,r+p,n,r,n);c.bezierCurveTo(r-p,n,d,m+h,d,m);c.closePath()}else d.type===a.SHAPES.RREC&&(d=k.x,m=k.y,p=k.width,h=k.height,k=k.radius,q=Math.min(p,h)/2|0,k=k>q?q:k,c.moveTo(d,m+k),c.lineTo(d,m+h-k),c.quadraticCurveTo(d,m+h,d+k,m+h),c.lineTo(d+
p-k,m+h),c.quadraticCurveTo(d+p,m+h,d+p,m+h-k),c.lineTo(d+p,m+k),c.quadraticCurveTo(d+p,m,d+p-k,m),c.lineTo(d+k,m),c.quadraticCurveTo(d,m,d,m+k),c.closePath())}}};e.updateGraphicsTint=function(a){if(16777215!==a.tint||a._prevTint!==a.tint){a._prevTint=a.tint;for(var c=(a.tint>>16&255)/255,f=(a.tint>>8&255)/255,b=(a.tint&255)/255,d=0;d<a.graphicsData.length;d++){var k=a.graphicsData[d],m=k.fillColor|0,e=k.lineColor|0;k._fillTint=((m>>16&255)/255*c*255<<16)+((m>>8&255)/255*f*255<<8)+(m&255)/255*b*255;
k._lineTint=((e>>16&255)/255*c*255<<16)+((e>>8&255)/255*f*255<<8)+(e&255)/255*b*255}}}},{"../../../const":16}],40:[function(e,h,l){function a(){}var g=e("./CanvasGraphics");a.prototype.constructor=a;h.exports=a;a.prototype.pushMask=function(a,f){f.context.save();var b=a.alpha,d=a.worldTransform,k=f.resolution;f.context.setTransform(d.a*k,d.b*k,d.c*k,d.d*k,d.tx*k,d.ty*k);a.texture||(g.renderGraphicsMask(a,f.context),f.context.clip());a.worldAlpha=b};a.prototype.popMask=function(a){a.context.restore()};
a.prototype.destroy=function(){}},{"./CanvasGraphics":39}],41:[function(e,h,l){var a=e("../../../utils"),g={};h.exports=g;g.getTintedTexture=function(a,f){var b=a.texture;f=g.roundColor(f);var d="#"+("00000"+(f|0).toString(16)).substr(-6);b.tintCache=b.tintCache||{};if(b.tintCache[d])return b.tintCache[d];var k=g.canvas||document.createElement("canvas");g.tintMethod(b,f,k);if(g.convertTintToImage){var m=new Image;m.src=k.toDataURL();b.tintCache[d]=m}else b.tintCache[d]=k,g.canvas=null;return k};g.tintWithMultiply=
function(a,f,b){var d=b.getContext("2d"),k=a.baseTexture.resolution,m=a.crop.clone();m.x*=k;m.y*=k;m.width*=k;m.height*=k;b.width=m.width;b.height=m.height;d.fillStyle="#"+("00000"+(f|0).toString(16)).substr(-6);d.fillRect(0,0,m.width,m.height);d.globalCompositeOperation="multiply";d.drawImage(a.baseTexture.source,m.x,m.y,m.width,m.height,0,0,m.width,m.height);d.globalCompositeOperation="destination-atop";d.drawImage(a.baseTexture.source,m.x,m.y,m.width,m.height,0,0,m.width,m.height)};g.tintWithOverlay=
function(a,f,b){var d=b.getContext("2d"),k=a.baseTexture.resolution,m=a.crop.clone();m.x*=k;m.y*=k;m.width*=k;m.height*=k;b.width=m.width;b.height=m.height;d.globalCompositeOperation="copy";d.fillStyle="#"+("00000"+(f|0).toString(16)).substr(-6);d.fillRect(0,0,m.width,m.height);d.globalCompositeOperation="destination-atop";d.drawImage(a.baseTexture.source,m.x,m.y,m.width,m.height,0,0,m.width,m.height)};g.tintWithPerPixel=function(c,f,b){var d=b.getContext("2d"),k=c.baseTexture.resolution,m=c.crop.clone();
m.x*=k;m.y*=k;m.width*=k;m.height*=k;b.width=m.width;b.height=m.height;d.globalCompositeOperation="copy";d.drawImage(c.baseTexture.source,m.x,m.y,m.width,m.height,0,0,m.width,m.height);b=a.hex2rgb(f);c=b[0];f=b[1];b=b[2];for(var m=d.getImageData(0,0,m.width,m.height),k=m.data,e=0;e<k.length;e+=4)k[e+0]*=c,k[e+1]*=f,k[e+2]*=b;d.putImageData(m,0,0)};g.roundColor=function(c){var f=g.cacheStepsPerColorChannel;c=a.hex2rgb(c);c[0]=Math.min(255,c[0]/f*f);c[1]=Math.min(255,c[1]/f*f);c[2]=Math.min(255,c[2]/
f*f);return a.rgb2hex(c)};g.cacheStepsPerColorChannel=8;g.convertTintToImage=!1;g.canUseMultiply=a.canUseNewCanvasBlendModes();g.tintMethod=g.canUseMultiply?g.tintWithMultiply:g.tintWithPerPixel},{"../../../utils":70}],42:[function(e,h,l){function a(a,m,e){e=e||{};g.call(this,"WebGL",a,m,e);this.type=q.RENDERER_TYPE.WEBGL;this.handleContextLost=this.handleContextLost.bind(this);this.handleContextRestored=this.handleContextRestored.bind(this);this.view.addEventListener("webglcontextlost",this.handleContextLost,
!1);this.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1);this._useFXAA=!!e.forceFXAA&&e.antialias;this._FXAAFilter=null;this._contextOptions={alpha:this.transparent,antialias:e.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer};this.drawCount=0;this.shaderManager=new c(this);this.maskManager=new f(this);this.stencilManager=new b(this);this.filterManager=new d(this);this.blendModeManager=
new k(this);this.currentRenderTarget=null;this.currentRenderer=new r(this);this.initPlugins();this._createContext();this._initContext();this._mapGlModes();this._managedTextures=[];this._renderTargetStack=[]}var g=e("../SystemRenderer"),c=e("./managers/ShaderManager"),f=e("./managers/MaskManager"),b=e("./managers/StencilManager"),d=e("./managers/FilterManager"),k=e("./managers/BlendModeManager"),m=e("./utils/RenderTarget"),r=e("./utils/ObjectRenderer"),p=e("./filters/FXAAFilter"),B=e("../../utils"),
q=e("../../const");a.prototype=Object.create(g.prototype);a.prototype.constructor=a;h.exports=a;B.pluginTarget.mixin(a);a.glContextId=0;a.prototype._createContext=function(){var b=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);this.gl=b;if(!b)throw Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=a.glContextId++;b.id=this.glContextId;b.renderer=this};a.prototype._initContext=function(){var b=
this.gl;b.disable(b.DEPTH_TEST);b.disable(b.CULL_FACE);b.enable(b.BLEND);this.renderTarget=new m(b,this.width,this.height,null,this.resolution,!0);this.setRenderTarget(this.renderTarget);this.emit("context",b);this.resize(this.width,this.height);this._useFXAA||(this._useFXAA=this._contextOptions.antialias&&!b.getContextAttributes().antialias);this._useFXAA&&(window.console.warn("FXAA antialiasing being used instead of native antialiasing"),this._FXAAFilter=[new p])};a.prototype.render=function(b){this.emit("prerender");
if(!this.gl.isContextLost()){this.drawCount=0;this._lastObjectRendered=b;this._useFXAA&&(this._FXAAFilter[0].uniforms.resolution.value.x=this.width,this._FXAAFilter[0].uniforms.resolution.value.y=this.height,b.filterArea=this.renderTarget.size,b.filters=this._FXAAFilter);var a=b.parent;b.parent=this._tempDisplayObjectParent;b.updateTransform();b.parent=a;a=this.gl;this.setRenderTarget(this.renderTarget);this.clearBeforeRender&&(this.transparent?a.clearColor(0,0,0,0):a.clearColor(this._backgroundColorRgb[0],
this._backgroundColorRgb[1],this._backgroundColorRgb[2],1),a.clear(a.COLOR_BUFFER_BIT));this.renderDisplayObject(b,this.renderTarget);this.emit("postrender")}};a.prototype.renderDisplayObject=function(b,a,c){this.setRenderTarget(a);c&&a.clear();this.filterManager.setFilterStack(a.filterStack);b.renderWebGL(this);this.currentRenderer.flush()};a.prototype.setObjectRenderer=function(b){this.currentRenderer!==b&&(this.currentRenderer.stop(),this.currentRenderer=b,this.currentRenderer.start())};a.prototype.setRenderTarget=
function(b){this.currentRenderTarget!==b&&(this.currentRenderTarget=b,this.currentRenderTarget.activate(),this.stencilManager.setMaskStack(b.stencilMaskStack))};a.prototype.resize=function(b,a){g.prototype.resize.call(this,b,a);this.filterManager.resize(b,a);this.renderTarget.resize(b,a);this.currentRenderTarget===this.renderTarget&&(this.renderTarget.activate(),this.gl.viewport(0,0,this.width,this.height))};a.prototype.updateTexture=function(b){b=b.baseTexture||b;if(b.hasLoaded){var a=this.gl;b._glTextures[a.id]||
(b._glTextures[a.id]=a.createTexture(),b.on("update",this.updateTexture,this),b.on("dispose",this.destroyTexture,this),this._managedTextures.push(b));a.bindTexture(a.TEXTURE_2D,b._glTextures[a.id]);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b.premultipliedAlpha);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b.source);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,b.scaleMode===q.SCALE_MODES.LINEAR?a.LINEAR:a.NEAREST);b.mipmap&&b.isPowerOfTwo?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,
b.scaleMode===q.SCALE_MODES.LINEAR?a.LINEAR_MIPMAP_LINEAR:a.NEAREST_MIPMAP_NEAREST),a.generateMipmap(a.TEXTURE_2D)):a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,b.scaleMode===q.SCALE_MODES.LINEAR?a.LINEAR:a.NEAREST);b.isPowerOfTwo?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));return b._glTextures[a.id]}};
a.prototype.destroyTexture=function(b,a){b=b.baseTexture||b;if(b.hasLoaded&&b._glTextures[this.gl.id]&&(this.gl.deleteTexture(b._glTextures[this.gl.id]),delete b._glTextures[this.gl.id],!a)){var c=this._managedTextures.indexOf(b);-1!==c&&B.removeItems(this._managedTextures,c,1)}};a.prototype.handleContextLost=function(b){b.preventDefault()};a.prototype.handleContextRestored=function(){this._initContext();for(var b=0;b<this._managedTextures.length;++b){var a=this._managedTextures[b];a._glTextures[this.gl.id]&&
delete a._glTextures[this.gl.id]}};a.prototype.destroy=function(b){this.destroyPlugins();this.view.removeEventListener("webglcontextlost",this.handleContextLost);this.view.removeEventListener("webglcontextrestored",this.handleContextRestored);for(var a=0;a<this._managedTextures.length;++a){var c=this._managedTextures[a];this.destroyTexture(c,!0);c.off("update",this.updateTexture,this);c.off("dispose",this.destroyTexture,this)}g.prototype.destroy.call(this,b);this.uid=0;this.shaderManager.destroy();
this.maskManager.destroy();this.stencilManager.destroy();this.filterManager.destroy();this.blendModeManager.destroy();this._managedTextures=this._contextOptions=this.handleContextRestored=this.handleContextLost=this.currentRenderer=this.blendModeManager=this.filterManager=this.maskManager=this.shaderManager=null;this.drawCount=0;this.gl.useProgram(null);this.gl=null};a.prototype._mapGlModes=function(){var b=this.gl;this.blendModes||(this.blendModes={},this.blendModes[q.BLEND_MODES.NORMAL]=[b.ONE,
b.ONE_MINUS_SRC_ALPHA],this.blendModes[q.BLEND_MODES.ADD]=[b.SRC_ALPHA,b.DST_ALPHA],this.blendModes[q.BLEND_MODES.MULTIPLY]=[b.DST_COLOR,b.ONE_MINUS_SRC_ALPHA],this.blendModes[q.BLEND_MODES.SCREEN]=[b.SRC_ALPHA,b.ONE],this.blendModes[q.BLEND_MODES.OVERLAY]=[b.ONE,b.ONE_MINUS_SRC_ALPHA],this.blendModes[q.BLEND_MODES.DARKEN]=[b.ONE,b.ONE_MINUS_SRC_ALPHA],this.blendModes[q.BLEND_MODES.LIGHTEN]=[b.ONE,b.ONE_MINUS_SRC_ALPHA],this.blendModes[q.BLEND_MODES.COLOR_DODGE]=[b.ONE,b.ONE_MINUS_SRC_ALPHA],this.blendModes[q.BLEND_MODES.COLOR_BURN]=
[b.ONE,b.ONE_MINUS_SRC_ALPHA],this.blendModes[q.BLEND_MODES.HARD_LIGHT]=[b.ONE,b.ONE_MINUS_SRC_ALPHA],this.blendModes[q.BLEND_MODES.SOFT_LIGHT]=[b.ONE,b.ONE_MINUS_SRC_ALPHA],this.blendModes[q.BLEND_MODES.DIFFERENCE]=[b.ONE,b.ONE_MINUS_SRC_ALPHA],this.blendModes[q.BLEND_MODES.EXCLUSION]=[b.ONE,b.ONE_MINUS_SRC_ALPHA],this.blendModes[q.BLEND_MODES.HUE]=[b.ONE,b.ONE_MINUS_SRC_ALPHA],this.blendModes[q.BLEND_MODES.SATURATION]=[b.ONE,b.ONE_MINUS_SRC_ALPHA],this.blendModes[q.BLEND_MODES.COLOR]=[b.ONE,b.ONE_MINUS_SRC_ALPHA],
this.blendModes[q.BLEND_MODES.LUMINOSITY]=[b.ONE,b.ONE_MINUS_SRC_ALPHA]);this.drawModes||(this.drawModes={},this.drawModes[q.DRAW_MODES.POINTS]=b.POINTS,this.drawModes[q.DRAW_MODES.LINES]=b.LINES,this.drawModes[q.DRAW_MODES.LINE_LOOP]=b.LINE_LOOP,this.drawModes[q.DRAW_MODES.LINE_STRIP]=b.LINE_STRIP,this.drawModes[q.DRAW_MODES.TRIANGLES]=b.TRIANGLES,this.drawModes[q.DRAW_MODES.TRIANGLE_STRIP]=b.TRIANGLE_STRIP,this.drawModes[q.DRAW_MODES.TRIANGLE_FAN]=b.TRIANGLE_FAN)}},{"../../const":16,"../../utils":70,
"../SystemRenderer":36,"./filters/FXAAFilter":44,"./managers/BlendModeManager":46,"./managers/FilterManager":47,"./managers/MaskManager":48,"./managers/ShaderManager":49,"./managers/StencilManager":50,"./utils/ObjectRenderer":56,"./utils/RenderTarget":58}],43:[function(e,h,l){function a(a,f,b){this.shaders=[];this.padding=0;this.uniforms=b||{};this.vertexSrc=a||g.defaultVertexSrc;this.fragmentSrc=f||g.defaultFragmentSrc}var g=e("../shaders/TextureShader");a.prototype.constructor=a;h.exports=a;a.prototype.getShader=
function(a){var f=a.gl,b=this.shaders[f.id];b||(b=new g(a.shaderManager,this.vertexSrc,this.fragmentSrc,this.uniforms,this.attributes),this.shaders[f.id]=b);return b};a.prototype.applyFilter=function(a,f,b,d){var k=this.getShader(a);a.filterManager.applyFilter(k,f,b,d)};a.prototype.syncUniform=function(a){for(var f=0,b=this.shaders.length;f<b;++f)this.shaders[f].syncUniform(a)}},{"../shaders/TextureShader":55}],44:[function(e,h,l){function a(){g.call(this,"\nprecision mediump float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform vec2 resolution;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n            out vec2 v_rgbNW, out vec2 v_rgbNE,\n            out vec2 v_rgbSW, out vec2 v_rgbSE,\n            out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n   vResolution = resolution;\n\n   //compute the texture coords and send them to varyings\n   texcoords(aTextureCoord * resolution, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",
'precision lowp float;\n\n\n/**\nBasic FXAA implementation based on the code on geeks3d.com with the\nmodification that the texture2DLod stuff was removed since it\'s\nunsupported by WebGL.\n\n--\n\nFrom:\nhttps://github.com/mitsuhiko/webgl-meincraft\n\nCopyright (c) 2011 by Armin Ronacher.\n\nSome rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are\nmet:\n\n    * Redistributions of source code must retain the above copyright\n      notice, this list of conditions and the following disclaimer.\n\n    * Redistributions in binary form must reproduce the above\n      copyright notice, this list of conditions and the following\n      disclaimer in the documentation and/or other materials provided\n      with the distribution.\n\n    * The names of the contributors may not be used to endorse or\n      promote products derived from this software without specific\n      prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\nOWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n#ifndef FXAA_REDUCE_MIN\n    #define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n    #define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n    #define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n            vec2 v_rgbNW, vec2 v_rgbNE,\n            vec2 v_rgbSW, vec2 v_rgbSE,\n            vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n              dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n        texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform sampler2D uSampler;\n\n\nvoid main(void){\n\n    gl_FragColor = fxaa(uSampler, vTextureCoord * vResolution, vResolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n}\n',
{resolution:{type:"v2",value:{x:1,y:1}}})}var g=e("./AbstractFilter");a.prototype=Object.create(g.prototype);a.prototype.constructor=a;h.exports=a;a.prototype.applyFilter=function(a,f,b){var d=a.filterManager;a=this.getShader(a);d.applyFilter(a,f,b)}},{"./AbstractFilter":43}],45:[function(e,h,l){function a(a){var b=new c.Matrix;g.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",
"precision lowp float;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    original *= (masky.r * masky.a * alpha * clip);\n    gl_FragColor = original;\n}\n",
{mask:{type:"sampler2D",value:a._texture},alpha:{type:"f",value:1},otherMatrix:{type:"mat3",value:b.toArray(!0)}});this.maskSprite=a;this.maskMatrix=b}var g=e("./AbstractFilter"),c=e("../../../math");a.prototype=Object.create(g.prototype);a.prototype.constructor=a;h.exports=a;a.prototype.applyFilter=function(a,b,c){var k=a.filterManager;this.uniforms.mask.value=this.maskSprite._texture;k.calculateMappedMatrix(b.frame,this.maskSprite,this.maskMatrix);this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0);
this.uniforms.alpha.value=this.maskSprite.worldAlpha;a=this.getShader(a);k.applyFilter(a,b,c)};Object.defineProperties(a.prototype,{map:{get:function(){return this.uniforms.mask.value},set:function(a){this.uniforms.mask.value=a}},offset:{get:function(){return this.uniforms.offset.value},set:function(a){this.uniforms.offset.value=a}}})},{"../../../math":26,"./AbstractFilter":43}],46:[function(e,h,l){function a(a){g.call(this,a);this.currentBlendMode=99999}var g=e("./WebGLManager");a.prototype=Object.create(g.prototype);
a.prototype.constructor=a;h.exports=a;a.prototype.setBlendMode=function(a){if(this.currentBlendMode===a)return!1;this.currentBlendMode=a;a=this.renderer.blendModes[this.currentBlendMode];this.renderer.gl.blendFunc(a[0],a[1]);return!0}},{"./WebGLManager":51}],47:[function(e,h,l){function a(b){g.call(this,b);this.filterStack=[];this.filterStack.push({renderTarget:b.currentRenderTarget,filter:[],bounds:null});this.texturePool=[];this.textureSize=new d.Rectangle(0,0,b.width,b.height);this.currentFrame=
null}var g=e("./WebGLManager"),c=e("../utils/RenderTarget"),f=e("../../../const"),b=e("../utils/Quad"),d=e("../../../math");a.prototype=Object.create(g.prototype);a.prototype.constructor=a;h.exports=a;a.prototype.onContextChange=function(){this.texturePool.length=0;this.quad=new b(this.renderer.gl)};a.prototype.setFilterStack=function(b){this.filterStack=b};a.prototype.pushFilter=function(b,a){var c=b.filterArea?b.filterArea.clone():b.getBounds();c.x|=0;c.y|=0;c.width|=0;c.height|=0;var d=a[0].padding|
0;c.x-=d;c.y-=d;c.width+=2*d;c.height+=2*d;this.renderer.currentRenderTarget.transform?(d=this.renderer.currentRenderTarget.transform,c.x+=d.tx,c.y+=d.ty,this.capFilterArea(c),c.x-=d.tx,c.y-=d.ty):this.capFilterArea(c);0<c.width&&0<c.height?(this.currentFrame=c,c=this.getRenderTarget(),this.renderer.setRenderTarget(c),c.clear(),this.filterStack.push({renderTarget:c,filter:a})):this.filterStack.push({renderTarget:null,filter:a})};a.prototype.popFilter=function(){var b=this.filterStack.pop(),a=this.filterStack[this.filterStack.length-
1],c=b.renderTarget;if(b.renderTarget){var a=a.renderTarget,d=this.renderer.gl;this.currentFrame=c.frame;this.quad.map(this.textureSize,c.frame);d.bindBuffer(d.ARRAY_BUFFER,this.quad.vertexBuffer);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.quad.indexBuffer);var e=b.filter;d.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aVertexPosition,2,d.FLOAT,!1,0,0);d.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aTextureCoord,2,d.FLOAT,!1,0,32);d.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aColor,
4,d.FLOAT,!1,0,64);this.renderer.blendModeManager.setBlendMode(f.BLEND_MODES.NORMAL);if(1===e.length)e[0].uniforms.dimensions&&(e[0].uniforms.dimensions.value[0]=this.renderer.width,e[0].uniforms.dimensions.value[1]=this.renderer.height,e[0].uniforms.dimensions.value[2]=this.quad.vertices[0],e[0].uniforms.dimensions.value[3]=this.quad.vertices[5]),e[0].applyFilter(this.renderer,c,a),this.returnRenderTarget(c);else{for(var d=this.getRenderTarget(!0),g=0;g<e.length-1;g++){var h=e[g];h.uniforms.dimensions&&
(h.uniforms.dimensions.value[0]=this.renderer.width,h.uniforms.dimensions.value[1]=this.renderer.height,h.uniforms.dimensions.value[2]=this.quad.vertices[0],h.uniforms.dimensions.value[3]=this.quad.vertices[5]);h.applyFilter(this.renderer,c,d);h=c;c=d;d=h}e[e.length-1].applyFilter(this.renderer,c,a);this.returnRenderTarget(c);this.returnRenderTarget(d)}return b.filter}};a.prototype.getRenderTarget=function(b){var a=this.texturePool.pop()||new c(this.renderer.gl,this.textureSize.width,this.textureSize.height,
f.SCALE_MODES.LINEAR,this.renderer.resolution*f.FILTER_RESOLUTION);a.frame=this.currentFrame;b&&a.clear(!0);return a};a.prototype.returnRenderTarget=function(b){this.texturePool.push(b)};a.prototype.applyFilter=function(b,a,c,d){var f=this.renderer.gl;this.renderer.setRenderTarget(c);d&&c.clear();this.renderer.shaderManager.setShader(b);b.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0);b.syncUniforms();f.activeTexture(f.TEXTURE0);f.bindTexture(f.TEXTURE_2D,
a.texture);f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0);this.renderer.drawCount++};a.prototype.calculateMappedMatrix=function(b,a,c){var f=a.worldTransform.copy(d.Matrix.TEMP_MATRIX),e=a._texture.baseTexture;c=c.identity();var g=this.textureSize.height/this.textureSize.width;c.translate(b.x/this.textureSize.width,b.y/this.textureSize.height);c.scale(1,g);b=this.textureSize.width/e.width;var h=this.textureSize.height/e.height;f.tx/=e.width*b;f.ty/=e.width*b;f.invert();c.prepend(f);c.scale(1,1/
g);c.scale(b,h);c.translate(a.anchor.x,a.anchor.y);return c};a.prototype.capFilterArea=function(b){0>b.x&&(b.width+=b.x,b.x=0);0>b.y&&(b.height+=b.y,b.y=0);b.x+b.width>this.textureSize.width&&(b.width=this.textureSize.width-b.x);b.y+b.height>this.textureSize.height&&(b.height=this.textureSize.height-b.y)};a.prototype.resize=function(b,a){this.textureSize.width=b;this.textureSize.height=a;for(var c=0;c<this.texturePool.length;c++)this.texturePool[c].resize(b,a)};a.prototype.destroy=function(){this.quad.destroy();
g.prototype.destroy.call(this);this.filterStack=null;for(var b=this.offsetY=0;b<this.texturePool.length;b++)this.texturePool[b].destroy();this.texturePool=null}},{"../../../const":16,"../../../math":26,"../utils/Quad":57,"../utils/RenderTarget":58,"./WebGLManager":51}],48:[function(e,h,l){function a(a){g.call(this,a);this.stencilStack=[];this.reverse=!0;this.count=0;this.alphaMaskPool=[]}var g=e("./WebGLManager"),c=e("../filters/SpriteMaskFilter");a.prototype=Object.create(g.prototype);a.prototype.constructor=
a;h.exports=a;a.prototype.pushMask=function(a,b){b.texture?this.pushSpriteMask(a,b):this.pushStencilMask(a,b)};a.prototype.popMask=function(a,b){b.texture?this.popSpriteMask(a,b):this.popStencilMask(a,b)};a.prototype.pushSpriteMask=function(a,b){var d=this.alphaMaskPool.pop();d||(d=[new c(b)]);d[0].maskSprite=b;this.renderer.filterManager.pushFilter(a,d)};a.prototype.popSpriteMask=function(){var a=this.renderer.filterManager.popFilter();this.alphaMaskPool.push(a)};a.prototype.pushStencilMask=function(a,
b){this.renderer.stencilManager.pushMask(b)};a.prototype.popStencilMask=function(a,b){this.renderer.stencilManager.popMask(b)}},{"../filters/SpriteMaskFilter":45,"./WebGLManager":51}],49:[function(e,h,l){function a(b){g.call(this,b);this.maxAttibs=10;this.attribState=[];this.tempAttribState=[];for(b=0;b<this.maxAttibs;b++)this.attribState[b]=!1;this.stack=[];this._currentId=-1;this.currentShader=null}var g=e("./WebGLManager"),c=e("../shaders/TextureShader"),f=e("../shaders/ComplexPrimitiveShader"),
b=e("../shaders/PrimitiveShader");e=e("../../../utils");a.prototype=Object.create(g.prototype);a.prototype.constructor=a;e.pluginTarget.mixin(a);h.exports=a;a.prototype.onContextChange=function(){this.initPlugins();var a=this.renderer.gl;this.maxAttibs=a.getParameter(a.MAX_VERTEX_ATTRIBS);this.attribState=[];for(a=0;a<this.maxAttibs;a++)this.attribState[a]=!1;this.defaultShader=new c(this);this.primitiveShader=new b(this);this.complexPrimitiveShader=new f(this)};a.prototype.setAttribs=function(b){var a;
for(a=0;a<this.tempAttribState.length;a++)this.tempAttribState[a]=!1;for(var c in b)this.tempAttribState[b[c]]=!0;b=this.renderer.gl;for(a=0;a<this.attribState.length;a++)this.attribState[a]!==this.tempAttribState[a]&&(this.attribState[a]=this.tempAttribState[a],this.attribState[a]?b.enableVertexAttribArray(a):b.disableVertexAttribArray(a))};a.prototype.setShader=function(b){if(this._currentId===b.uid)return!1;this._currentId=b.uid;this.currentShader=b;this.renderer.gl.useProgram(b.program);this.setAttribs(b.attributes);
return!0};a.prototype.destroy=function(){this.primitiveShader.destroy();this.complexPrimitiveShader.destroy();g.prototype.destroy.call(this);this.destroyPlugins();this.tempAttribState=this.attribState=null}},{"../../../utils":70,"../shaders/ComplexPrimitiveShader":52,"../shaders/PrimitiveShader":53,"../shaders/TextureShader":55,"./WebGLManager":51}],50:[function(e,h,l){function a(a){g.call(this,a);this.stencilMaskStack=null}var g=e("./WebGLManager"),c=e("../../../utils");a.prototype=Object.create(g.prototype);
a.prototype.constructor=a;h.exports=a;a.prototype.setMaskStack=function(a){this.stencilMaskStack=a;var b=this.renderer.gl;0===a.stencilStack.length?b.disable(b.STENCIL_TEST):b.enable(b.STENCIL_TEST)};a.prototype.pushStencil=function(a,b){this.renderer.currentRenderTarget.attachStencilBuffer();var c=this.renderer.gl,k=this.stencilMaskStack;this.bindGraphics(a,b);0===k.stencilStack.length&&(c.enable(c.STENCIL_TEST),c.clear(c.STENCIL_BUFFER_BIT),k.reverse=!0,k.count=0);k.stencilStack.push(b);var e=k.count;
c.colorMask(!1,!1,!1,!1);c.stencilFunc(c.ALWAYS,0,255);c.stencilOp(c.KEEP,c.KEEP,c.INVERT);1===b.mode?(c.drawElements(c.TRIANGLE_FAN,b.indices.length-4,c.UNSIGNED_SHORT,0),k.reverse?(c.stencilFunc(c.EQUAL,255-e,255),c.stencilOp(c.KEEP,c.KEEP,c.DECR)):(c.stencilFunc(c.EQUAL,e,255),c.stencilOp(c.KEEP,c.KEEP,c.INCR)),c.drawElements(c.TRIANGLE_FAN,4,c.UNSIGNED_SHORT,2*(b.indices.length-4)),k.reverse?c.stencilFunc(c.EQUAL,255-(e+1),255):c.stencilFunc(c.EQUAL,e+1,255),k.reverse=!k.reverse):(k.reverse?(c.stencilFunc(c.EQUAL,
e,255),c.stencilOp(c.KEEP,c.KEEP,c.INCR)):(c.stencilFunc(c.EQUAL,255-e,255),c.stencilOp(c.KEEP,c.KEEP,c.DECR)),c.drawElements(c.TRIANGLE_STRIP,b.indices.length,c.UNSIGNED_SHORT,0),k.reverse?c.stencilFunc(c.EQUAL,e+1,255):c.stencilFunc(c.EQUAL,255-(e+1),255));c.colorMask(!0,!0,!0,!0);c.stencilOp(c.KEEP,c.KEEP,c.KEEP);k.count++};a.prototype.bindGraphics=function(a,b){var d=this.renderer.gl,k;1===b.mode?(k=this.renderer.shaderManager.complexPrimitiveShader,this.renderer.shaderManager.setShader(k),d.uniformMatrix3fv(k.uniforms.translationMatrix._location,
!1,a.worldTransform.toArray(!0)),d.uniformMatrix3fv(k.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),d.uniform3fv(k.uniforms.tint._location,c.hex2rgb(a.tint)),d.uniform3fv(k.uniforms.color._location,b.color),d.uniform1f(k.uniforms.alpha._location,a.worldAlpha),d.bindBuffer(d.ARRAY_BUFFER,b.buffer),d.vertexAttribPointer(k.attributes.aVertexPosition,2,d.FLOAT,!1,8,0)):(k=this.renderer.shaderManager.primitiveShader,this.renderer.shaderManager.setShader(k),
d.uniformMatrix3fv(k.uniforms.translationMatrix._location,!1,a.worldTransform.toArray(!0)),d.uniformMatrix3fv(k.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),d.uniform3fv(k.uniforms.tint._location,c.hex2rgb(a.tint)),d.uniform1f(k.uniforms.alpha._location,a.worldAlpha),d.bindBuffer(d.ARRAY_BUFFER,b.buffer),d.vertexAttribPointer(k.attributes.aVertexPosition,2,d.FLOAT,!1,24,0),d.vertexAttribPointer(k.attributes.aColor,4,d.FLOAT,!1,24,8));d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,
b.indexBuffer)};a.prototype.popStencil=function(a,b){var c=this.renderer.gl,k=this.stencilMaskStack;k.stencilStack.pop();k.count--;if(0===k.stencilStack.length)c.disable(c.STENCIL_TEST);else{var e=k.count;this.bindGraphics(a,b);c.colorMask(!1,!1,!1,!1);1===b.mode?(k.reverse=!k.reverse,k.reverse?(c.stencilFunc(c.EQUAL,255-(e+1),255),c.stencilOp(c.KEEP,c.KEEP,c.INCR)):(c.stencilFunc(c.EQUAL,e+1,255),c.stencilOp(c.KEEP,c.KEEP,c.DECR)),c.drawElements(c.TRIANGLE_FAN,4,c.UNSIGNED_SHORT,2*(b.indices.length-
4)),c.stencilFunc(c.ALWAYS,0,255),c.stencilOp(c.KEEP,c.KEEP,c.INVERT),c.drawElements(c.TRIANGLE_FAN,b.indices.length-4,c.UNSIGNED_SHORT,0),this.renderer.drawCount+=2):(k.reverse?(c.stencilFunc(c.EQUAL,e+1,255),c.stencilOp(c.KEEP,c.KEEP,c.DECR)):(c.stencilFunc(c.EQUAL,255-(e+1),255),c.stencilOp(c.KEEP,c.KEEP,c.INCR)),c.drawElements(c.TRIANGLE_STRIP,b.indices.length,c.UNSIGNED_SHORT,0),this.renderer.drawCount++);k.reverse?c.stencilFunc(c.EQUAL,e,255):c.stencilFunc(c.EQUAL,255-e,255);c.colorMask(!0,
!0,!0,!0);c.stencilOp(c.KEEP,c.KEEP,c.KEEP)}};a.prototype.destroy=function(){g.prototype.destroy.call(this);this.stencilMaskStack.stencilStack=null};a.prototype.pushMask=function(a){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);a.dirty&&this.renderer.plugins.graphics.updateGraphics(a,this.renderer.gl);a._webGL[this.renderer.gl.id].data.length&&this.pushStencil(a,a._webGL[this.renderer.gl.id].data[0])};a.prototype.popMask=function(a){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);
this.popStencil(a,a._webGL[this.renderer.gl.id].data[0])}},{"../../../utils":70,"./WebGLManager":51}],51:[function(e,h,l){function a(a){this.renderer=a;this.renderer.on("context",this.onContextChange,this)}a.prototype.constructor=a;h.exports=a;a.prototype.onContextChange=function(){};a.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this);this.renderer=null}},{}],52:[function(e,h,l){function a(a){g.call(this,a,"attribute vec2 aVertexPosition;\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\nuniform vec3 tint;\nuniform float alpha;\nuniform vec3 color;\nvarying vec4 vColor;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vColor = vec4(color * alpha * tint, alpha);\n}",
"precision mediump float;\nvarying vec4 vColor;\nvoid main(void){\n   gl_FragColor = vColor;\n}",{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},color:{type:"3f",value:[0,0,0]},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0})}var g=e("./Shader");a.prototype=Object.create(g.prototype);a.prototype.constructor=a;h.exports=a},{"./Shader":54}],53:[function(e,h,l){function a(a){g.call(this,a,"attribute vec2 aVertexPosition;\nattribute vec4 aColor;\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\nuniform float alpha;\nuniform float flipY;\nuniform vec3 tint;\nvarying vec4 vColor;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vColor = aColor * vec4(tint * alpha, alpha);\n}",
"precision mediump float;\nvarying vec4 vColor;\nvoid main(void){\n   gl_FragColor = vColor;\n}",{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aColor:0})}var g=e("./Shader");a.prototype=Object.create(g.prototype);a.prototype.constructor=a;h.exports=a},{"./Shader":54}],54:[function(e,h,l){function a(a,f,b,d,k){if(!f||!b)throw Error("Pixi.js Error. Shader requires vertexSrc and fragmentSrc");
this.uid=g.uid();this.gl=a.renderer.gl;this.shaderManager=a;this.program=null;this.uniforms=d||{};this.attributes=k||{};this.textureCount=1;this.vertexSrc=f;this.fragmentSrc=b;this.init()}var g=e("../../../utils");a.prototype.constructor=a;h.exports=a;a.prototype.init=function(){this.compile();this.gl.useProgram(this.program);this.cacheUniformLocations(Object.keys(this.uniforms));this.cacheAttributeLocations(Object.keys(this.attributes))};a.prototype.cacheUniformLocations=function(a){for(var f=0;f<
a.length;++f)this.uniforms[a[f]]._location=this.gl.getUniformLocation(this.program,a[f])};a.prototype.cacheAttributeLocations=function(a){for(var f=0;f<a.length;++f)this.attributes[a[f]]=this.gl.getAttribLocation(this.program,a[f])};a.prototype.compile=function(){var a=this.gl,f=this._glCompile(a.VERTEX_SHADER,this.vertexSrc),b=this._glCompile(a.FRAGMENT_SHADER,this.fragmentSrc),d=a.createProgram();a.attachShader(d,f);a.attachShader(d,b);a.linkProgram(d);a.getProgramParameter(d,a.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),
console.error("gl.VALIDATE_STATUS",a.getProgramParameter(d,a.VALIDATE_STATUS)),console.error("gl.getError()",a.getError()),""!==a.getProgramInfoLog(d)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",a.getProgramInfoLog(d)),a.deleteProgram(d),d=null);a.deleteShader(f);a.deleteShader(b);return this.program=d};a.prototype.syncUniform=function(a){var f=a._location,b=a.value,d=this.gl,k,e;switch(a.type){case "b":case "bool":case "boolean":d.uniform1i(f,b?1:0);break;case "i":case "1i":d.uniform1i(f,
b);break;case "f":case "1f":d.uniform1f(f,b);break;case "2f":d.uniform2f(f,b[0],b[1]);break;case "3f":d.uniform3f(f,b[0],b[1],b[2]);break;case "4f":d.uniform4f(f,b[0],b[1],b[2],b[3]);break;case "v2":d.uniform2f(f,b.x,b.y);break;case "v3":d.uniform3f(f,b.x,b.y,b.z);break;case "v4":d.uniform4f(f,b.x,b.y,b.z,b.w);break;case "1iv":d.uniform1iv(f,b);break;case "2iv":d.uniform2iv(f,b);break;case "3iv":d.uniform3iv(f,b);break;case "4iv":d.uniform4iv(f,b);break;case "1fv":d.uniform1fv(f,b);break;case "2fv":d.uniform2fv(f,
b);break;case "3fv":d.uniform3fv(f,b);break;case "4fv":d.uniform4fv(f,b);break;case "m2":case "mat2":case "Matrix2fv":d.uniformMatrix2fv(f,a.transpose,b);break;case "m3":case "mat3":case "Matrix3fv":d.uniformMatrix3fv(f,a.transpose,b);break;case "m4":case "mat4":case "Matrix4fv":d.uniformMatrix4fv(f,a.transpose,b);break;case "c":"number"===typeof b&&(b=g.hex2rgb(b));d.uniform3f(f,b[0],b[1],b[2]);break;case "iv1":d.uniform1iv(f,b);break;case "iv":d.uniform3iv(f,b);break;case "fv1":d.uniform1fv(f,b);
break;case "fv":d.uniform3fv(f,b);break;case "v2v":a._array||(a._array=new Float32Array(2*b.length));k=0;for(e=b.length;k<e;++k)a._array[2*k]=b[k].x,a._array[2*k+1]=b[k].y;d.uniform2fv(f,a._array);break;case "v3v":a._array||(a._array=new Float32Array(3*b.length));k=0;for(e=b.length;k<e;++k)a._array[3*k]=b[k].x,a._array[3*k+1]=b[k].y,a._array[3*k+2]=b[k].z;d.uniform3fv(f,a._array);break;case "v4v":a._array||(a._array=new Float32Array(4*b.length));k=0;for(e=b.length;k<e;++k)a._array[4*k]=b[k].x,a._array[4*
k+1]=b[k].y,a._array[4*k+2]=b[k].z,a._array[4*k+3]=b[k].w;d.uniform4fv(f,a._array);break;case "t":case "sampler2D":if(!a.value||!a.value.baseTexture.hasLoaded)break;d.activeTexture(d["TEXTURE"+this.textureCount]);f=a.value.baseTexture._glTextures[d.id];f||(this.initSampler2D(a),f=a.value.baseTexture._glTextures[d.id]);d.bindTexture(d.TEXTURE_2D,f);d.uniform1i(a._location,this.textureCount);this.textureCount++;break;default:console.warn("Pixi.js Shader Warning: Unknown uniform type: "+a.type)}};a.prototype.syncUniforms=
function(){this.textureCount=1;for(var a in this.uniforms)this.syncUniform(this.uniforms[a])};a.prototype.initSampler2D=function(a){var f=this.gl,b=a.value.baseTexture;b.hasLoaded&&(a.textureData?(a=a.textureData,b._glTextures[f.id]=f.createTexture(),f.bindTexture(f.TEXTURE_2D,b._glTextures[f.id]),f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b.premultipliedAlpha),f.texImage2D(f.TEXTURE_2D,0,a.luminance?f.LUMINANCE:f.RGBA,f.RGBA,f.UNSIGNED_BYTE,b.source),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,
a.magFilter?a.magFilter:f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,a.wrapS?a.wrapS:f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,a.wrapS?a.wrapS:f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,a.wrapT?a.wrapT:f.CLAMP_TO_EDGE)):this.shaderManager.renderer.updateTexture(b))};a.prototype.destroy=function(){this.gl.deleteProgram(this.program);this.fragmentSrc=this.vertexSrc=this.attributes=this.uniforms=this.gl=null};a.prototype._glCompile=function(a,f){var b=
this.gl.createShader(a);this.gl.shaderSource(b,f);this.gl.compileShader(b);return this.gl.getShaderParameter(b,this.gl.COMPILE_STATUS)?b:(console.log(this.gl.getShaderInfoLog(b)),null)}},{"../../../utils":70}],55:[function(e,h,l){function a(c,f,b,d,k){var e={uSampler:{type:"sampler2D",value:0},projectionMatrix:{type:"mat3",value:new Float32Array([1,0,0,0,1,0,0,0,1])}};if(d)for(var h in d)e[h]=d[h];d={aVertexPosition:0,aTextureCoord:0,aColor:0};if(k)for(var p in k)d[p]=k[p];f=f||a.defaultVertexSrc;
b=b||a.defaultFragmentSrc;g.call(this,c,f,b,e,d)}var g=e("./Shader");a.prototype=Object.create(g.prototype);a.prototype.constructor=a;h.exports=a;a.defaultVertexSrc="precision lowp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}";
a.defaultFragmentSrc="precision lowp float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;\n}"},{"./Shader":54}],56:[function(e,h,l){function a(a){g.call(this,a)}var g=e("../managers/WebGLManager");a.prototype=Object.create(g.prototype);a.prototype.constructor=a;h.exports=a;a.prototype.start=function(){};a.prototype.stop=function(){this.flush()};a.prototype.flush=function(){};a.prototype.render=
function(a){}},{"../managers/WebGLManager":51}],57:[function(e,h,l){function a(a){this.gl=a;this.vertices=new Float32Array([0,0,200,0,200,200,0,200]);this.uvs=new Float32Array([0,0,1,0,1,1,0,1]);this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]);this.indices=new Uint16Array([0,1,2,0,3,2]);this.vertexBuffer=a.createBuffer();this.indexBuffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer);a.bufferData(a.ARRAY_BUFFER,128,a.DYNAMIC_DRAW);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,
this.indexBuffer);a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.indices,a.STATIC_DRAW);this.upload()}a.prototype.constructor=a;a.prototype.map=function(a,c){var f=0,b=0;this.uvs[0]=f;this.uvs[1]=b;this.uvs[2]=f+c.width/a.width;this.uvs[3]=b;this.uvs[4]=f+c.width/a.width;this.uvs[5]=b+c.height/a.height;this.uvs[6]=f;this.uvs[7]=b+c.height/a.height;f=c.x;b=c.y;this.vertices[0]=f;this.vertices[1]=b;this.vertices[2]=f+c.width;this.vertices[3]=b;this.vertices[4]=f+c.width;this.vertices[5]=b+c.height;this.vertices[6]=
f;this.vertices[7]=b+c.height;this.upload()};a.prototype.upload=function(){var a=this.gl;a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer);a.bufferSubData(a.ARRAY_BUFFER,0,this.vertices);a.bufferSubData(a.ARRAY_BUFFER,32,this.uvs);a.bufferSubData(a.ARRAY_BUFFER,64,this.colors)};a.prototype.destroy=function(){var a=this.gl;a.deleteBuffer(this.vertexBuffer);a.deleteBuffer(this.indexBuffer)};h.exports=a},{}],58:[function(e,h,l){var a=e("../../../math"),g=e("../../../utils"),c=e("../../../const"),f=e("./StencilMaskStack");
e=function(b,d,k,e,h,p){this.gl=b;this.texture=this.frameBuffer=null;this.size=new a.Rectangle(0,0,1,1);this.resolution=h||c.RESOLUTION;this.projectionMatrix=new a.Matrix;this.stencilBuffer=this.frame=this.transform=null;this.stencilMaskStack=new f;this.filterStack=[{renderTarget:this,filter:[],bounds:this.size}];this.scaleMode=e||c.SCALE_MODES.DEFAULT;this.root=p;this.root||(this.frameBuffer=b.createFramebuffer(),this.texture=b.createTexture(),b.bindTexture(b.TEXTURE_2D,this.texture),b.texParameteri(b.TEXTURE_2D,
b.TEXTURE_MAG_FILTER,e===c.SCALE_MODES.LINEAR?b.LINEAR:b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,e===c.SCALE_MODES.LINEAR?b.LINEAR:b.NEAREST),g.isPowerOfTwo(d,k)?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE)),b.bindFramebuffer(b.FRAMEBUFFER,this.frameBuffer),b.framebufferTexture2D(b.FRAMEBUFFER,
b.COLOR_ATTACHMENT0,b.TEXTURE_2D,this.texture,0));this.resize(d,k)};e.prototype.constructor=e;h.exports=e;e.prototype.clear=function(b){var a=this.gl;b&&a.bindFramebuffer(a.FRAMEBUFFER,this.frameBuffer);a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT)};e.prototype.attachStencilBuffer=function(){if(!this.stencilBuffer&&!this.root){var b=this.gl;this.stencilBuffer=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,this.stencilBuffer);b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,
b.RENDERBUFFER,this.stencilBuffer);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_STENCIL,this.size.width*this.resolution,this.size.height*this.resolution)}};e.prototype.activate=function(){var b=this.gl;b.bindFramebuffer(b.FRAMEBUFFER,this.frameBuffer);var a=this.frame||this.size;this.calculateProjection(a);this.transform&&this.projectionMatrix.append(this.transform);b.viewport(0,0,a.width*this.resolution,a.height*this.resolution)};e.prototype.calculateProjection=function(b){var a=this.projectionMatrix;
a.identity();this.root?(a.a=1/b.width*2,a.d=-1/b.height*2,a.tx=-1-b.x*a.a,a.ty=1-b.y*a.d):(a.a=1/b.width*2,a.d=1/b.height*2,a.tx=-1-b.x*a.a,a.ty=-1-b.y*a.d)};e.prototype.resize=function(b,a){b|=0;a|=0;if(this.size.width!==b||this.size.height!==a){this.size.width=b;this.size.height=a;if(!this.root){var c=this.gl;c.bindTexture(c.TEXTURE_2D,this.texture);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,b*this.resolution,a*this.resolution,0,c.RGBA,c.UNSIGNED_BYTE,null);this.stencilBuffer&&(c.bindRenderbuffer(c.RENDERBUFFER,
this.stencilBuffer),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_STENCIL,b*this.resolution,a*this.resolution))}this.calculateProjection(this.frame||this.size)}};e.prototype.destroy=function(){var b=this.gl;b.deleteRenderbuffer(this.stencilBuffer);b.deleteFramebuffer(this.frameBuffer);b.deleteTexture(this.texture);this.texture=this.frameBuffer=null}},{"../../../const":16,"../../../math":26,"../../../utils":70,"./StencilMaskStack":59}],59:[function(e,h,l){function a(){this.stencilStack=[];this.reverse=
!0;this.count=0}a.prototype.constructor=a;h.exports=a},{}],60:[function(e,h,l){function a(b){f.call(this);this.anchor=new g.Point;this._texture=null;this._height=this._width=0;this.tint=16777215;this.blendMode=k.BLEND_MODES.NORMAL;this.shader=null;this.cachedTint=16777215;this.texture=b||c.EMPTY}var g=e("../math"),c=e("../textures/Texture"),f=e("../display/Container"),b=e("../renderers/canvas/utils/CanvasTinter"),d=e("../utils"),k=e("../const"),m=new g.Point;a.prototype=Object.create(f.prototype);
a.prototype.constructor=a;h.exports=a;Object.defineProperties(a.prototype,{width:{get:function(){return Math.abs(this.scale.x)*this.texture._frame.width},set:function(b){var a=d.sign(this.scale.x)||1;this.scale.x=a*b/this.texture._frame.width;this._width=b}},height:{get:function(){return Math.abs(this.scale.y)*this.texture._frame.height},set:function(b){var a=d.sign(this.scale.y)||1;this.scale.y=a*b/this.texture._frame.height;this._height=b}},texture:{get:function(){return this._texture},set:function(b){if(this._texture!==
b&&(this._texture=b,this.cachedTint=16777215,b))if(b.baseTexture.hasLoaded)this._onTextureUpdate();else b.once("update",this._onTextureUpdate,this)}}});a.prototype._onTextureUpdate=function(){this._width&&(this.scale.x=d.sign(this.scale.x)*this._width/this.texture.frame.width);this._height&&(this.scale.y=d.sign(this.scale.y)*this._height/this.texture.frame.height)};a.prototype._renderWebGL=function(b){b.setObjectRenderer(b.plugins.sprite);b.plugins.sprite.render(this)};a.prototype.getBounds=function(b){if(!this._currentBounds){var a=
this._texture._frame.width,c=this._texture._frame.height,d=a*(1-this.anchor.x),a=a*-this.anchor.x,f=c*(1-this.anchor.y),k=c*-this.anchor.y;b=b||this.worldTransform;var e=b.a,m=b.b,g=b.c,h=b.d,l=b.tx,I=b.ty,L;L=e*a+g*k+l;b=h*k+m*a+I;var c=e*d+g*k+l,k=h*k+m*d+I,F=e*d+g*f+l,d=h*f+m*d+I,e=e*a+g*f+l,a=h*f+m*a+I,m=L,m=c<m?c:m,m=F<m?F:m,m=e<m?e:m,h=b,h=k<h?k:h,h=d<h?d:h,h=a<h?a:h;L=c>L?c:L;L=F>L?F:L;L=e>L?e:L;b=k>b?k:b;b=d>b?d:b;b=a>b?a:b;this.children.length&&(c=this.containerGetBounds(),d=c.x,a=c.x+c.width,
f=c.y,k=c.y+c.height,m=m<d?m:d,h=h<f?h:f,L=L>a?L:a,b=b>k?b:k);a=this._bounds;a.x=m;a.width=L-m;a.y=h;a.height=b-h;this._currentBounds=a}return this._currentBounds};a.prototype.getLocalBounds=function(){this._bounds.x=-this._texture._frame.width*this.anchor.x;this._bounds.y=-this._texture._frame.height*this.anchor.y;this._bounds.width=this._texture._frame.width;this._bounds.height=this._texture._frame.height;return this._bounds};a.prototype.containsPoint=function(b){this.worldTransform.applyInverse(b,
m);var a=this._texture._frame.width;b=this._texture._frame.height;var c=-a*this.anchor.x;return m.x>c&&m.x<c+a&&(a=-b*this.anchor.y,m.y>a&&m.y<a+b)?!0:!1};a.prototype._renderCanvas=function(a){if(!(0>=this.texture.crop.width||0>=this.texture.crop.height)){var c=a.blendModes[this.blendMode];c!==a.context.globalCompositeOperation&&(a.context.globalCompositeOperation=c);if(this.texture.valid){var c=this._texture,d=this.worldTransform,f,e,m,g;a.context.globalAlpha=this.worldAlpha;m=c.baseTexture.scaleMode===
k.SCALE_MODES.LINEAR;a.smoothProperty&&a.context[a.smoothProperty]!==m&&(a.context[a.smoothProperty]=m);c.rotate?(m=c.crop.height,g=c.crop.width,f=c.trim?c.trim.y-this.anchor.y*c.trim.height:this.anchor.y*-c._frame.height,e=c.trim?c.trim.x-this.anchor.x*c.trim.width:this.anchor.x*-c._frame.width,f+=m,d.tx=e*d.a+f*d.c+d.tx,d.ty=e*d.b+f*d.d+d.ty,f=d.a,d.a=-d.c,d.c=f,f=d.b,d.b=-d.d,d.d=f,e=f=0):(m=c.crop.width,g=c.crop.height,f=c.trim?c.trim.x-this.anchor.x*c.trim.width:this.anchor.x*-c._frame.width,
e=c.trim?c.trim.y-this.anchor.y*c.trim.height:this.anchor.y*-c._frame.height);a.roundPixels?(a.context.setTransform(d.a,d.b,d.c,d.d,d.tx*a.resolution|0,d.ty*a.resolution|0),f|=0,e|=0):a.context.setTransform(d.a,d.b,d.c,d.d,d.tx*a.resolution,d.ty*a.resolution);d=c.baseTexture.resolution;16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=b.getTintedTexture(this,this.tint)),a.context.drawImage(this.tintedTexture,0,0,m*d,g*d,f*a.resolution,e*a.resolution,
m*a.resolution,g*a.resolution)):a.context.drawImage(c.baseTexture.source,c.crop.x*d,c.crop.y*d,m*d,g*d,f*a.resolution,e*a.resolution,m*a.resolution,g*a.resolution)}}};a.prototype.destroy=function(b,a){f.prototype.destroy.call(this);this.anchor=null;b&&this._texture.destroy(a);this.shader=this._texture=null};a.fromFrame=function(b){var c=d.TextureCache[b];if(!c)throw Error('The frameId "'+b+'" does not exist in the texture cache');return new a(c)};a.fromImage=function(b,d,f){return new a(c.fromImage(b,
d,f))}},{"../const":16,"../display/Container":17,"../math":26,"../renderers/canvas/utils/CanvasTinter":41,"../textures/Texture":65,"../utils":70}],61:[function(e,h,l){function a(a){g.call(this,a);this.vertSize=5;this.vertByteSize=4*this.vertSize;this.size=c.SPRITE_BATCH_SIZE;a=6*this.size;this.vertices=new ArrayBuffer(4*this.size*this.vertByteSize);this.positions=new Float32Array(this.vertices);this.colors=new Uint32Array(this.vertices);this.indices=new Uint16Array(a);for(var b=0,d=0;b<a;b+=6,d+=
4)this.indices[b+0]=d+0,this.indices[b+1]=d+1,this.indices[b+2]=d+2,this.indices[b+3]=d+0,this.indices[b+4]=d+2,this.indices[b+5]=d+3;this.currentBatchSize=0;this.sprites=[];this.shader=null}var g=e("../../renderers/webgl/utils/ObjectRenderer");l=e("../../renderers/webgl/WebGLRenderer");var c=e("../../const");a.prototype=Object.create(g.prototype);a.prototype.constructor=a;h.exports=a;l.registerPlugin("sprite",a);a.prototype.onContextChange=function(){var a=this.renderer.gl;this.shader=this.renderer.shaderManager.defaultShader;
this.vertexBuffer=a.createBuffer();this.indexBuffer=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.indices,a.STATIC_DRAW);a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer);a.bufferData(a.ARRAY_BUFFER,this.vertices,a.DYNAMIC_DRAW);this.currentBlendMode=99999};a.prototype.render=function(a){var b=a._texture;this.currentBatchSize>=this.size&&this.flush();var c=b._uvs;if(c){var k=a.anchor.x,e=a.anchor.y,g,h;b.trim&&void 0===a.tileScale?(h=
b.trim,k=h.x-k*h.width,g=k+b.crop.width,e=h.y-e*h.height,h=e+b.crop.height):(g=b._frame.width*(1-k),k=b._frame.width*-k,h=b._frame.height*(1-e),e=b._frame.height*-e);var b=this.currentBatchSize*this.vertByteSize,l=a.worldTransform,q=l.a,n=l.b,t=l.c,E=l.d,z=l.tx,y=l.ty,l=this.colors,w=this.positions;if(this.renderer.roundPixels){var D=this.renderer.resolution;w[b]=((q*k+t*e+z)*D|0)/D;w[b+1]=((E*e+n*k+y)*D|0)/D;w[b+5]=((q*g+t*e+z)*D|0)/D;w[b+6]=((E*e+n*g+y)*D|0)/D;w[b+10]=((q*g+t*h+z)*D|0)/D;w[b+11]=
((E*h+n*g+y)*D|0)/D;w[b+15]=((q*k+t*h+z)*D|0)/D;w[b+16]=((E*h+n*k+y)*D|0)/D}else w[b]=q*k+t*e+z,w[b+1]=E*e+n*k+y,w[b+5]=q*g+t*e+z,w[b+6]=E*e+n*g+y,w[b+10]=q*g+t*h+z,w[b+11]=E*h+n*g+y,w[b+15]=q*k+t*h+z,w[b+16]=E*h+n*k+y;w[b+2]=c.x0;w[b+3]=c.y0;w[b+7]=c.x1;w[b+8]=c.y1;w[b+12]=c.x2;w[b+13]=c.y2;w[b+17]=c.x3;w[b+18]=c.y3;c=a.tint;l[b+4]=l[b+9]=l[b+14]=l[b+19]=(c>>16)+(c&65280)+((c&255)<<16)+(255*a.worldAlpha<<24);this.sprites[this.currentBatchSize++]=a}};a.prototype.flush=function(){if(0!==this.currentBatchSize){var a=
this.renderer.gl,b;if(this.currentBatchSize>.5*this.size)a.bufferSubData(a.ARRAY_BUFFER,0,this.vertices);else{var c=this.positions.subarray(0,this.currentBatchSize*this.vertByteSize);a.bufferSubData(a.ARRAY_BUFFER,0,c)}for(var k,e,g=c=0,h=null,l=this.renderer.blendModeManager.currentBlendMode,q=null,n,t,E=0,z=this.currentBatchSize;E<z;E++){e=this.sprites[E];b=e._texture.baseTexture;k=e.blendMode;e=e.shader||this.shader;n=l!==k;t=q!==e;if(h!==b||n||t)this.renderBatch(h,c,g),g=E,c=0,h=b,n&&(l=k,this.renderer.blendModeManager.setBlendMode(l)),
t&&(q=e,(b=q.shaders?q.shaders[a.id]:q)||(b=q.getShader(this.renderer)),this.renderer.shaderManager.setShader(b),b.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),b.syncUniforms(),a.activeTexture(a.TEXTURE0));c++}this.renderBatch(h,c,g);this.currentBatchSize=0}};a.prototype.renderBatch=function(a,b,c){if(0!==b){var k=this.renderer.gl;a._glTextures[k.id]?k.bindTexture(k.TEXTURE_2D,a._glTextures[k.id]):this.renderer.updateTexture(a);k.drawElements(k.TRIANGLES,
6*b,k.UNSIGNED_SHORT,12*c);this.renderer.drawCount++}};a.prototype.start=function(){var a=this.renderer.gl;a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var b=this.vertByteSize;a.vertexAttribPointer(this.shader.attributes.aVertexPosition,2,a.FLOAT,!1,b,0);a.vertexAttribPointer(this.shader.attributes.aTextureCoord,2,a.FLOAT,!1,b,8);a.vertexAttribPointer(this.shader.attributes.aColor,4,a.UNSIGNED_BYTE,!0,b,16)};a.prototype.destroy=function(){this.renderer.gl.deleteBuffer(this.vertexBuffer);
this.renderer.gl.deleteBuffer(this.indexBuffer);g.prototype.destroy.call(this);this.shader.destroy();this.shader=this.sprites=this.indexBuffer=this.vertexBuffer=this.indices=this.colors=this.positions=this.vertices=this.renderer=null}},{"../../const":16,"../../renderers/webgl/WebGLRenderer":42,"../../renderers/webgl/utils/ObjectRenderer":56}],62:[function(e,h,l){function a(b,a,e){this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.resolution=e||d.RESOLUTION;
this._style=this._text=null;e=c.fromCanvas(this.canvas);e.trim=new f.Rectangle;g.call(this,e);this.text=b;this.style=a}var g=e("../sprites/Sprite"),c=e("../textures/Texture"),f=e("../math"),b=e("../utils"),d=e("../const");a.prototype=Object.create(g.prototype);a.prototype.constructor=a;h.exports=a;a.fontPropertiesCache={};a.fontPropertiesCanvas=document.createElement("canvas");a.fontPropertiesContext=a.fontPropertiesCanvas.getContext("2d");Object.defineProperties(a.prototype,{width:{get:function(){this.dirty&&
this.updateText();return this.scale.x*this._texture._frame.width},set:function(b){this.scale.x=b/this._texture._frame.width;this._width=b}},height:{get:function(){this.dirty&&this.updateText();return this.scale.y*this._texture._frame.height},set:function(b){this.scale.y=b/this._texture._frame.height;this._height=b}},style:{get:function(){return this._style},set:function(a){a=a||{};"number"===typeof a.fill&&(a.fill=b.hex2string(a.fill));"number"===typeof a.stroke&&(a.stroke=b.hex2string(a.stroke));
"number"===typeof a.dropShadowColor&&(a.dropShadowColor=b.hex2string(a.dropShadowColor));a.font=a.font||"bold 20pt Arial";a.fill=a.fill||"black";a.align=a.align||"left";a.stroke=a.stroke||"black";a.strokeThickness=a.strokeThickness||0;a.wordWrap=a.wordWrap||!1;a.wordWrapWidth=a.wordWrapWidth||100;a.dropShadow=a.dropShadow||!1;a.dropShadowColor=a.dropShadowColor||"#000000";a.dropShadowAngle=void 0!==a.dropShadowAngle?a.dropShadowAngle:Math.PI/6;a.dropShadowDistance=void 0!==a.dropShadowDistance?a.dropShadowDistance:
5;a.dropShadowBlur=void 0!==a.dropShadowBlur?a.dropShadowBlur:0;a.padding=a.padding||0;a.textBaseline=a.textBaseline||"alphabetic";a.lineJoin=a.lineJoin||"miter";a.miterLimit=a.miterLimit||10;this._style=a;this.dirty=!0}},text:{get:function(){return this._text},set:function(b){b=b.toString()||" ";this._text!==b&&(this._text=b,this.dirty=!0)}}});a.prototype.updateText=function(){var b=this._style;this.context.font=b.font;for(var a=(b.wordWrap?this.wordWrap(this._text):this._text).split(/(?:\r\n|\r|\n)/),
c=Array(a.length),d=0,f=this.determineFontProperties(b.font),e=0;e<a.length;e++){var g=this.context.measureText(a[e]).width;c[e]=g;d=Math.max(d,g)}e=d+b.strokeThickness;b.dropShadow&&(e+=b.dropShadowDistance);this.canvas.width=(e+this.context.lineWidth)*this.resolution;g=this.style.lineHeight||f.fontSize+b.strokeThickness;e=g*a.length;b.dropShadow&&(e+=b.dropShadowDistance);this.canvas.height=(e+2*this._style.padding)*this.resolution;this.context.scale(this.resolution,this.resolution);navigator.isCocoonJS&&
this.context.clearRect(0,0,this.canvas.width,this.canvas.height);this.context.font=b.font;this.context.strokeStyle=b.stroke;this.context.lineWidth=b.strokeThickness;this.context.textBaseline=b.textBaseline;this.context.lineJoin=b.lineJoin;this.context.miterLimit=b.miterLimit;var h,l;if(b.dropShadow){0<b.dropShadowBlur?(this.context.shadowColor=b.dropShadowColor,this.context.shadowBlur=b.dropShadowBlur):this.context.fillStyle=b.dropShadowColor;for(var z=Math.cos(b.dropShadowAngle)*b.dropShadowDistance,
y=Math.sin(b.dropShadowAngle)*b.dropShadowDistance,e=0;e<a.length;e++)h=b.strokeThickness/2,l=b.strokeThickness/2+e*g+f.ascent,"right"===b.align?h+=d-c[e]:"center"===b.align&&(h+=(d-c[e])/2),b.fill&&this.context.fillText(a[e],h+z,l+y+this._style.padding)}this.context.fillStyle=b.fill;for(e=0;e<a.length;e++)h=b.strokeThickness/2,l=b.strokeThickness/2+e*g+f.ascent,"right"===b.align?h+=d-c[e]:"center"===b.align&&(h+=(d-c[e])/2),b.stroke&&b.strokeThickness&&this.context.strokeText(a[e],h,l+this._style.padding),
b.fill&&this.context.fillText(a[e],h,l+this._style.padding);this.updateTexture()};a.prototype.updateTexture=function(){var b=this._texture;b.baseTexture.hasLoaded=!0;b.baseTexture.resolution=this.resolution;b.baseTexture.width=this.canvas.width/this.resolution;b.baseTexture.height=this.canvas.height/this.resolution;b.crop.width=b._frame.width=this.canvas.width/this.resolution;b.crop.height=b._frame.height=this.canvas.height/this.resolution;b.trim.x=0;b.trim.y=-this._style.padding;b.trim.width=b._frame.width;
b.trim.height=b._frame.height-2*this._style.padding;this._width=this.canvas.width/this.resolution;this._height=this.canvas.height/this.resolution;b.baseTexture.emit("update",b.baseTexture);this.dirty=!1};a.prototype.renderWebGL=function(b){this.dirty&&this.updateText();g.prototype.renderWebGL.call(this,b)};a.prototype._renderCanvas=function(b){this.dirty&&this.updateText();g.prototype._renderCanvas.call(this,b)};a.prototype.determineFontProperties=function(b){var c=a.fontPropertiesCache[b];if(!c){var c=
{},d=a.fontPropertiesCanvas,f=a.fontPropertiesContext;f.font=b;var e=Math.ceil(f.measureText("|M\u00c9q").width),g=Math.ceil(f.measureText("M").width),h=2*g,g=1.4*g|0;d.width=e;d.height=h;f.fillStyle="#f00";f.fillRect(0,0,e,h);f.font=b;f.textBaseline="alphabetic";f.fillStyle="#000";f.fillText("|M\u00c9q",0,g);var d=f.getImageData(0,0,e,h).data,f=d.length,e=4*e,l,E,z=0,y=!1;for(l=0;l<g;l++){for(E=0;E<e;E+=4)if(255!==d[z+E]){y=!0;break}if(y)break;else z+=e}c.ascent=g-l;z=f-e;y=!1;for(l=h;l>g;l--){for(E=
0;E<e;E+=4)if(255!==d[z+E]){y=!0;break}if(y)break;else z-=e}c.descent=l-g;c.fontSize=c.ascent+c.descent;a.fontPropertiesCache[b]=c}return c};a.prototype.wordWrap=function(b){var a="";b=b.split("\n");for(var c=this._style.wordWrapWidth,d=0;d<b.length;d++){for(var f=c,e=b[d].split(" "),g=0;g<e.length;g++){var h=this.context.measureText(e[g]).width,l=h+this.context.measureText(" ").width;0===g||l>f?(0<g&&(a+="\n"),a+=e[g],f=c-h):(f-=l,a+=" "+e[g])}d<b.length-1&&(a+="\n")}return a};a.prototype.getBounds=
function(b){this.dirty&&this.updateText();return g.prototype.getBounds.call(this,b)};a.prototype.destroy=function(b){this._style=this.canvas=this.context=null;this._texture.destroy(void 0===b?!0:b)}},{"../const":16,"../math":26,"../sprites/Sprite":60,"../textures/Texture":65,"../utils":70}],63:[function(e,h,l){function a(b,a,e){f.call(this);this.uid=g.uid();this.resolution=e||1;this.realHeight=this.realWidth=this.height=this.width=100;this.scaleMode=a||c.SCALE_MODES.DEFAULT;this.isLoading=this.hasLoaded=
!1;this.source=null;this.premultipliedAlpha=!0;this.imageUrl=null;this.mipmap=this.isPowerOfTwo=!1;this._glTextures={};b&&this.loadSource(b)}var g=e("../utils"),c=e("../const"),f=e("eventemitter3");a.prototype=Object.create(f.prototype);a.prototype.constructor=a;h.exports=a;a.prototype.update=function(){this.realWidth=this.source.naturalWidth||this.source.width;this.realHeight=this.source.naturalHeight||this.source.height;this.width=this.realWidth/this.resolution;this.height=this.realHeight/this.resolution;
this.isPowerOfTwo=g.isPowerOfTwo(this.realWidth,this.realHeight);this.emit("update",this)};a.prototype.loadSource=function(b){var a=this.isLoading;this.isLoading=this.hasLoaded=!1;a&&this.source&&(this.source.onload=null,this.source.onerror=null);this.source=b;if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this._sourceLoaded();else if(!b.getContext){this.isLoading=!0;var c=this;b.onload=function(){b.onload=null;b.onerror=null;c.isLoading&&(c.isLoading=!1,
c._sourceLoaded(),c.emit("loaded",c))};b.onerror=function(){b.onload=null;b.onerror=null;c.isLoading&&(c.isLoading=!1,c.emit("error",c))};b.complete&&b.src&&(this.isLoading=!1,b.onload=null,b.onerror=null,b.width&&b.height?(this._sourceLoaded(),a&&this.emit("loaded",this)):a&&this.emit("error",this))}};a.prototype._sourceLoaded=function(){this.hasLoaded=!0;this.update()};a.prototype.destroy=function(){this.imageUrl?(delete g.BaseTextureCache[this.imageUrl],delete g.TextureCache[this.imageUrl],this.imageUrl=
null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete g.BaseTextureCache[this.source._pixiId];this.source=null;this.dispose()};a.prototype.dispose=function(){this.emit("dispose",this)};a.prototype.updateSourceImage=function(b){this.source.src=b;this.loadSource(this.source)};a.fromImage=function(b,c,f){var e=g.BaseTextureCache[b];void 0===c&&0!==b.indexOf("data:")&&(c=!0);if(!e){var h=new Image;c&&(h.crossOrigin="");e=new a(h,f);e.imageUrl=b;h.src=b;g.BaseTextureCache[b]=
e;e.resolution=g.getResolutionOfUrl(b)}return e};a.fromCanvas=function(b,c){b._pixiId||(b._pixiId="canvas_"+g.uid());var f=g.BaseTextureCache[b._pixiId];f||(f=new a(b,c),g.BaseTextureCache[b._pixiId]=f);return f}},{"../const":16,"../utils":70,eventemitter3:10}],64:[function(e,h,l){function a(a,e,h,r,l){if(!a)throw Error("Unable to create RenderTexture, you must pass a renderer into the constructor.");e=e||100;h=h||100;l=l||m.RESOLUTION;var E=new g;E.width=e;E.height=h;E.resolution=l;E.scaleMode=r||
m.SCALE_MODES.DEFAULT;E.hasLoaded=!0;c.call(this,E,new k.Rectangle(0,0,e,h));this.width=e;this.height=h;this.resolution=l;this.render=null;this.renderer=a;this.renderer.type===m.RENDERER_TYPE.WEBGL?(a=this.renderer.gl,this.textureBuffer=new f(a,this.width,this.height,E.scaleMode,this.resolution),this.baseTexture._glTextures[a.id]=this.textureBuffer.texture,this.filterManager=new b(this.renderer),this.filterManager.onContextChange(),this.filterManager.resize(e,h),this.render=this.renderWebGL,this.renderer.currentRenderer.start(),
this.renderer.currentRenderTarget.activate()):(this.render=this.renderCanvas,this.textureBuffer=new d(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas);this.valid=!0;this._updateUvs()}var g=e("./BaseTexture"),c=e("./Texture"),f=e("../renderers/webgl/utils/RenderTarget"),b=e("../renderers/webgl/managers/FilterManager"),d=e("../renderers/canvas/utils/CanvasBuffer"),k=e("../math"),m=e("../const"),r=new k.Matrix;a.prototype=Object.create(c.prototype);
a.prototype.constructor=a;h.exports=a;a.prototype.resize=function(b,a,c){if(b!==this.width||a!==this.height)this.valid=0<b&&0<a,this.width=this._frame.width=this.crop.width=b,this.height=this._frame.height=this.crop.height=a,c&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.valid&&(this.textureBuffer.resize(this.width,this.height),this.filterManager&&this.filterManager.resize(this.width,this.height))};a.prototype.clear=function(){this.valid&&(this.renderer.type===m.RENDERER_TYPE.WEBGL&&
this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())};a.prototype.renderWebGL=function(b,a,c,d){if(this.valid){d=void 0!==d?d:!0;this.textureBuffer.transform=a;this.textureBuffer.activate();b.worldAlpha=1;if(d){b.worldTransform.identity();b.currentBounds=null;a=b.children;var f;d=0;for(f=a.length;d<f;++d)a[d].updateTransform()}a=this.renderer.filterManager;this.renderer.filterManager=this.filterManager;this.renderer.renderDisplayObject(b,
this.textureBuffer,c);this.renderer.filterManager=a}};a.prototype.renderCanvas=function(b,a,c,d){if(this.valid){r.identity();a&&r.append(a);a=b.worldTransform;b.worldTransform=r;b.worldAlpha=1;d=b.children;var f,e;f=0;for(e=d.length;f<e;++f)d[f].updateTransform();c&&this.textureBuffer.clear();c=this.textureBuffer.context;d=this.renderer.resolution;this.renderer.resolution=this.resolution;this.renderer.renderDisplayObject(b,c);this.renderer.resolution=d;b.worldTransform===r&&(b.worldTransform=a)}};
a.prototype.destroy=function(){c.prototype.destroy.call(this,!0);this.textureBuffer.destroy();this.filterManager&&this.filterManager.destroy();this.renderer=null};a.prototype.getImage=function(){var b=new Image;b.src=this.getBase64();return b};a.prototype.getBase64=function(){return this.getCanvas().toDataURL()};a.prototype.getCanvas=function(){if(this.renderer.type===m.RENDERER_TYPE.WEBGL){var b=this.renderer.gl,a=this.textureBuffer.size.width,c=this.textureBuffer.size.height,f=new Uint8Array(4*
a*c);b.bindFramebuffer(b.FRAMEBUFFER,this.textureBuffer.frameBuffer);b.readPixels(0,0,a,c,b.RGBA,b.UNSIGNED_BYTE,f);b.bindFramebuffer(b.FRAMEBUFFER,null);b=new d(a,c);a=b.context.getImageData(0,0,a,c);a.data.set(f);b.context.putImageData(a,0,0);return b.canvas}return this.textureBuffer.canvas};a.prototype.getPixels=function(){var b,a;if(this.renderer.type===m.RENDERER_TYPE.WEBGL){var c=this.renderer.gl;b=this.textureBuffer.size.width;a=this.textureBuffer.size.height;var d=new Uint8Array(4*b*a);c.bindFramebuffer(c.FRAMEBUFFER,
this.textureBuffer.frameBuffer);c.readPixels(0,0,b,a,c.RGBA,c.UNSIGNED_BYTE,d);c.bindFramebuffer(c.FRAMEBUFFER,null);return d}b=this.textureBuffer.canvas.width;a=this.textureBuffer.canvas.height;return this.textureBuffer.canvas.getContext("2d").getImageData(0,0,b,a).data};a.prototype.getPixel=function(b,a){if(this.renderer.type===m.RENDERER_TYPE.WEBGL){var c=this.renderer.gl,d=new Uint8Array(4);c.bindFramebuffer(c.FRAMEBUFFER,this.textureBuffer.frameBuffer);c.readPixels(b,a,1,1,c.RGBA,c.UNSIGNED_BYTE,
d);c.bindFramebuffer(c.FRAMEBUFFER,null);return d}return this.textureBuffer.canvas.getContext("2d").getImageData(b,a,1,1).data}},{"../const":16,"../math":26,"../renderers/canvas/utils/CanvasBuffer":38,"../renderers/webgl/managers/FilterManager":47,"../renderers/webgl/utils/RenderTarget":58,"./BaseTexture":63,"./Texture":65}],65:[function(e,h,l){function a(c,f,e,k,g){b.call(this);this.noFrame=!1;f||(this.noFrame=!0,f=new d.Rectangle(0,0,1,1));c instanceof a&&(c=c.baseTexture);this.baseTexture=c;this._frame=
f;this.trim=k;this.requiresUpdate=this.valid=!1;this._uvs=null;this.height=this.width=0;this.crop=e||f;this.rotate=!!g;if(c.hasLoaded)this.noFrame&&(f=new d.Rectangle(0,0,c.width,c.height),c.on("update",this.onBaseTextureUpdated,this)),this.frame=f;else c.once("loaded",this.onBaseTextureLoaded,this)}var g=e("./BaseTexture"),c=e("./VideoBaseTexture"),f=e("./TextureUvs"),b=e("eventemitter3"),d=e("../math"),k=e("../utils");a.prototype=Object.create(b.prototype);a.prototype.constructor=a;h.exports=a;
Object.defineProperties(a.prototype,{frame:{get:function(){return this._frame},set:function(b){this._frame=b;this.noFrame=!1;this.width=b.width;this.height=b.height;if(!this.trim&&!this.rotate&&(b.x+b.width>this.baseTexture.width||b.y+b.height>this.baseTexture.height))throw Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=b&&b.width&&b.height&&this.baseTexture.hasLoaded;this.trim?(this.width=this.trim.width,this.height=this.trim.height,this._frame.width=
this.trim.width,this._frame.height=this.trim.height):this.crop=b;this.valid&&this._updateUvs()}}});a.prototype.update=function(){this.baseTexture.update()};a.prototype.onBaseTextureLoaded=function(b){this.frame=this.noFrame?new d.Rectangle(0,0,b.width,b.height):this._frame;this.emit("update",this)};a.prototype.onBaseTextureUpdated=function(b){this._frame.width=b.width;this._frame.height=b.height;this.emit("update",this)};a.prototype.destroy=function(b){this.baseTexture&&(b&&this.baseTexture.destroy(),
this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null);this.crop=this.trim=this._uvs=this._frame=null;this.valid=!1;this.off("dispose",this.dispose,this);this.off("update",this.update,this)};a.prototype.clone=function(){return new a(this.baseTexture,this.frame,this.crop,this.trim,this.rotate)};a.prototype._updateUvs=function(){this._uvs||(this._uvs=new f);this._uvs.set(this.crop,this.baseTexture,this.rotate)};
a.fromImage=function(b,c,d){var f=k.TextureCache[b];f||(f=new a(g.fromImage(b,c,d)),k.TextureCache[b]=f);return f};a.fromFrame=function(b){var a=k.TextureCache[b];if(!a)throw Error('The frameId "'+b+'" does not exist in the texture cache');return a};a.fromCanvas=function(b,c){return new a(g.fromCanvas(b,c))};a.fromVideo=function(b,d){return"string"===typeof b?a.fromVideoUrl(b,d):new a(c.fromVideo(b,d))};a.fromVideoUrl=function(b,d){return new a(c.fromUrl(b,d))};a.addTextureToCache=function(b,a){k.TextureCache[a]=
b};a.removeTextureFromCache=function(b){var a=k.TextureCache[b];delete k.TextureCache[b];delete k.BaseTextureCache[b];return a};a.EMPTY=new a(new g)},{"../math":26,"../utils":70,"./BaseTexture":63,"./TextureUvs":66,"./VideoBaseTexture":67,eventemitter3:10}],66:[function(e,h,l){function a(){this.y0=this.x0=0;this.x1=1;this.y1=0;this.y2=this.x2=1;this.x3=0;this.y3=1}h.exports=a;a.prototype.set=function(a,c,f){var b=c.width;c=c.height;f?(this.x0=(a.x+a.height)/b,this.y0=a.y/c,this.x1=(a.x+a.height)/
b,this.y1=(a.y+a.width)/c,this.x2=a.x/b,this.y2=(a.y+a.width)/c,this.x3=a.x/b,this.y3=a.y/c):(this.x0=a.x/b,this.y0=a.y/c,this.x1=(a.x+a.width)/b,this.y1=a.y/c,this.x2=(a.x+a.width)/b,this.y2=(a.y+a.height)/c,this.x3=a.x/b,this.y3=(a.y+a.height)/c)}},{}],67:[function(e,h,l){function a(b,a){if(!b)throw Error("No video source element specified.");(b.readyState===b.HAVE_ENOUGH_DATA||b.readyState===b.HAVE_FUTURE_DATA)&&b.width&&b.height&&(b.complete=!0);c.call(this,b,a);this.autoUpdate=!1;this._onUpdate=
this._onUpdate.bind(this);this._onCanPlay=this._onCanPlay.bind(this);b.complete||(b.addEventListener("canplay",this._onCanPlay),b.addEventListener("canplaythrough",this._onCanPlay),b.addEventListener("play",this._onPlayStart.bind(this)),b.addEventListener("pause",this._onPlayStop.bind(this)));this.__loaded=!1}function g(b,a){a||(a="video/"+b.substr(b.lastIndexOf(".")+1));var c=document.createElement("source");c.src=b;c.type=a;return c}var c=e("./BaseTexture"),f=e("../utils");a.prototype=Object.create(c.prototype);
a.prototype.constructor=a;h.exports=a;a.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this._onUpdate),this.update())};a.prototype._onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this._onUpdate),this.autoUpdate=!0)};a.prototype._onPlayStop=function(){this.autoUpdate=!1};a.prototype._onCanPlay=function(){this.hasLoaded=!0;this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),
this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.source.play(),this.__loaded||(this.__loaded=!0,this.emit("loaded",this)))};a.prototype.destroy=function(){this.source&&this.source._pixiId&&(delete f.BaseTextureCache[this.source._pixiId],delete this.source._pixiId);c.prototype.destroy.call(this)};a.fromVideo=function(b,c){b._pixiId||(b._pixiId="video_"+f.uid());var e=f.BaseTextureCache[b._pixiId];e||(e=new a(b,c),f.BaseTextureCache[b._pixiId]=e);return e};a.fromUrl=function(b,
c){var f=document.createElement("video");if(Array.isArray(b))for(var e=0;e<b.length;++e)f.appendChild(g(b[e].src||b[e],b[e].mime));else f.appendChild(g(b.src||b,b.mime));f.load();f.play();return a.fromVideo(f,c)};a.fromUrls=a.fromUrl},{"../utils":70,"./BaseTexture":63}],68:[function(e,h,l){function a(){var a=this;this._tick=function(b){a._requestId=null;a.started&&(a.update(b),a.started&&null===a._requestId&&a._emitter.listeners("tick",!0)&&(a._requestId=requestAnimationFrame(a._tick)))};this._emitter=
new c;this._requestId=null;this._maxElapsedMS=100;this.autoStart=!1;this.deltaTime=1;this.elapsedMS=1/g.TARGET_FPMS;this.lastTime=0;this.speed=1;this.started=!1}var g=e("../const"),c=e("eventemitter3");Object.defineProperties(a.prototype,{FPS:{get:function(){return 1E3/this.elapsedMS}},minFPS:{get:function(){return 1E3/this._maxElapsedMS},set:function(a){this._maxElapsedMS=1/Math.min(Math.max(0,a)/1E3,g.TARGET_FPMS)}}});a.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners("tick",
!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))};a.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)};a.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()};a.prototype.add=function(a,b){this._emitter.on("tick",a,b);this._startIfPossible();return this};a.prototype.addOnce=function(a,b){this._emitter.once("tick",a,b);this._startIfPossible();
return this};a.prototype.remove=function(a,b){this._emitter.off("tick",a,b);this._emitter.listeners("tick",!0)||this._cancelIfNeeded();return this};a.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())};a.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())};a.prototype.update=function(a){var b;a=a||performance.now();b=this.elapsedMS=a-this.lastTime;b>this._maxElapsedMS&&(b=this._maxElapsedMS);this.deltaTime=b*g.TARGET_FPMS*this.speed;this._emitter.emit("tick",
this.deltaTime);this.lastTime=a};h.exports=a},{"../const":16,eventemitter3:10}],69:[function(e,h,l){e=e("./Ticker");l=new e;l.autoStart=!0;h.exports={shared:l,Ticker:e}},{"./Ticker":68}],70:[function(e,h,l){var a=e("../const"),g=h.exports={_uid:0,_saidHello:!1,EventEmitter:e("eventemitter3"),pluginTarget:e("./pluginTarget"),async:e("async"),uid:function(){return++g._uid},hex2rgb:function(a,f){f=f||[];f[0]=(a>>16&255)/255;f[1]=(a>>8&255)/255;f[2]=(a&255)/255;return f},hex2string:function(a){a=a.toString(16);
a="000000".substr(0,6-a.length)+a;return"#"+a},rgb2hex:function(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]},canUseNewCanvasBlendModes:function(){if("undefined"===typeof document)return!1;var a=new Image;a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/AP804Oa6AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==";var f=new Image;f.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX//wCKxvRFAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==";
var b=document.createElement("canvas");b.width=6;b.height=1;b=b.getContext("2d");b.globalCompositeOperation="multiply";b.drawImage(a,0,0);b.drawImage(f,2,0);a=b.getImageData(2,0,1,1).data;return 255===a[0]&&0===a[1]&&0===a[2]},getNextPowerOfTwo:function(a){if(0<a&&0===(a&a-1))return a;for(var f=1;f<a;)f<<=1;return f},isPowerOfTwo:function(a,f){return 0<a&&0===(a&a-1)&&0<f&&0===(f&f-1)},getResolutionOfUrl:function(c){return(c=a.RETINA_PREFIX.exec(c))?parseFloat(c[1]):1},sayHello:function(c){g._saidHello||
(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?window.console.log.apply(console,["\n %c %c %c Pixi.js "+a.VERSION+" - \u2730 "+c+" \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;",
"color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):window.console&&window.console.log("Pixi.js "+a.VERSION+" - "+c+" - http://www.pixijs.com/"),g._saidHello=!0)},isWebGLSupported:function(){var a={stencil:!0};try{if(!window.WebGLRenderingContext)return!1;var f=document.createElement("canvas"),b=f.getContext("webgl",a)||f.getContext("experimental-webgl",a);return!(!b||!b.getContextAttributes().stencil)}catch(d){return!1}},sign:function(a){return a?
0>a?-1:1:0},removeItems:function(a,f,b){var d=a.length;if(!(f>=d||0===b)){b=f+b>d?d-f:b;for(d-=b;f<d;++f)a[f]=a[f+b];a.length=d}},TextureCache:{},BaseTextureCache:{}}},{"../const":16,"./pluginTarget":71,async:1,eventemitter3:10}],71:[function(e,h,l){function a(a){a.__plugins={};a.registerPlugin=function(c,f){a.__plugins[c]=f};a.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var c in a.__plugins)this.plugins[c]=new a.__plugins[c](this)};a.prototype.destroyPlugins=function(){for(var a in this.plugins)this.plugins[a].destroy(),
this.plugins[a]=null;this.plugins=null}}h.exports={mixin:function(e){a(e)}}},{}],72:[function(e,h,l){var a=e("./core"),g=e("./mesh"),c=e("./extras");e=e("./filters");a.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.");};a.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.");};Object.defineProperties(a,{Stage:{get:function(){console.warn("You do not need to use a PIXI Stage any more, you can simply render any container.");
return a.Container}},DisplayObjectContainer:{get:function(){console.warn("DisplayObjectContainer has been shortened to Container, please use Container from now on.");return a.Container}},Strip:{get:function(){console.warn("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on.");return g.Mesh}},Rope:{get:function(){console.warn("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on.");return g.Rope}},MovieClip:{get:function(){console.warn("The MovieClip class has been moved to extras.MovieClip, please use extras.MovieClip from now on.");
return c.MovieClip}},TilingSprite:{get:function(){console.warn("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on.");return c.TilingSprite}},BitmapText:{get:function(){console.warn("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on.");return c.BitmapText}},blendModes:{get:function(){console.warn("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on.");return a.BLEND_MODES}},
scaleModes:{get:function(){console.warn("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on.");return a.SCALE_MODES}},BaseTextureCache:{get:function(){console.warn("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on.");return a.utils.BaseTextureCache}},TextureCache:{get:function(){console.warn("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on.");return a.utils.TextureCache}},
math:{get:function(){console.warn("The math namespace is deprecated, please access members already accessible on PIXI.");return a}}});a.Sprite.prototype.setTexture=function(a){this.texture=a;console.warn("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")};c.BitmapText.prototype.setText=function(a){this.text=a;console.warn("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")};a.Text.prototype.setText=function(a){this.text=
a;console.warn("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")};a.Text.prototype.setStyle=function(a){this.style=a;console.warn("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")};a.Texture.prototype.setFrame=function(a){this.frame=a;console.warn("setFrame is now deprecated, please use the frame property, e.g : myTexture.frame = frame;")};Object.defineProperties(e,{AbstractFilter:{get:function(){console.warn("filters.AbstractFilter is an undocumented alias, please use AbstractFilter from now on.");
return a.AbstractFilter}},FXAAFilter:{get:function(){console.warn("filters.FXAAFilter is an undocumented alias, please use FXAAFilter from now on.");return a.FXAAFilter}},SpriteMaskFilter:{get:function(){console.warn("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on.");return a.SpriteMaskFilter}}});a.utils.uuid=function(){console.warn("utils.uuid() is deprecated, please use utils.uid() from now on.");return a.utils.uid()}},{"./core":23,"./extras":79,"./filters":96,
"./mesh":121}],73:[function(e,h,l){function a(a,f){g.Container.call(this);f=f||{};this.textHeight=this.textWidth=0;this._glyphs=[];this._font={tint:void 0!==f.tint?f.tint:16777215,align:f.align||"left",name:null,size:0};this.font=f.font;this._text=a;this.maxLineHeight=this.maxWidth=0;this.dirty=!1;this.updateText()}var g=e("../core");a.prototype=Object.create(g.Container.prototype);a.prototype.constructor=a;h.exports=a;Object.defineProperties(a.prototype,{tint:{get:function(){return this._font.tint},
set:function(a){this._font.tint="number"===typeof a&&0<=a?a:16777215;this.dirty=!0}},align:{get:function(){return this._font.align},set:function(a){this._font.align=a||"left";this.dirty=!0}},font:{get:function(){return this._font},set:function(c){c&&("string"===typeof c?(c=c.split(" "),this._font.name=1===c.length?c[0]:c.slice(1).join(" "),this._font.size=2<=c.length?parseInt(c[0],10):a.fonts[this._font.name].size):(this._font.name=c.name,this._font.size="number"===typeof c.size?c.size:parseInt(c.size,
10)),this.dirty=!0)}},text:{get:function(){return this._text},set:function(a){a=a.toString()||" ";this._text!==a&&(this._text=a,this.dirty=!0)}}});a.prototype.updateText=function(){for(var c=a.fonts[this._font.name],f=new g.Point,b=null,d=[],e=0,m=0,h=[],p=0,l=this._font.size/c.size,q=-1,n=0,t=0;t<this.text.length;t++){var E=this.text.charCodeAt(t),q=/(\s)/.test(this.text.charAt(t))?t:q;if(/(?:\r\n|\r|\n)/.test(this.text.charAt(t)))h.push(e),m=Math.max(m,e),p++,f.x=0,f.y+=c.lineHeight,b=null;else if(-1!==
q&&0<this.maxWidth&&f.x*l>this.maxWidth)g.utils.removeItems(d,q,t-q),t=q,q=-1,h.push(e),m=Math.max(m,e),p++,f.x=0,f.y+=c.lineHeight,b=null;else{var z=c.chars[E];z&&(b&&z.kerning[b]&&(f.x+=z.kerning[b]),d.push({texture:z.texture,line:p,charCode:E,position:new g.Point(f.x+z.xOffset,f.y+z.yOffset)}),e=f.x+(z.texture.width+z.xOffset),f.x+=z.xAdvance,n=Math.max(n,z.yOffset+z.texture.height),b=E)}}h.push(e);m=Math.max(m,e);b=[];for(t=0;t<=p;t++)e=0,"right"===this._font.align?e=m-h[t]:"center"===this._font.align&&
(e=(m-h[t])/2),b.push(e);h=d.length;p=this.tint;for(t=0;t<h;t++)(e=this._glyphs[t])?e.texture=d[t].texture:(e=new g.Sprite(d[t].texture),this._glyphs.push(e)),e.position.x=(d[t].position.x+b[d[t].line])*l,e.position.y=d[t].position.y*l,e.scale.x=e.scale.y=l,e.tint=p,e.parent||this.addChild(e);for(t=h;t<this._glyphs.length;++t)this.removeChild(this._glyphs[t]);this.textWidth=m*l;this.textHeight=(f.y+c.lineHeight)*l;this.maxLineHeight=n*l};a.prototype.updateTransform=function(){this.validate();this.containerUpdateTransform()};
a.prototype.getLocalBounds=function(){this.validate();return g.Container.prototype.getLocalBounds.call(this)};a.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)};a.fonts={}},{"../core":23}],74:[function(e,h,l){function a(a){g.Sprite.call(this,a[0]instanceof g.Texture?a[0]:a[0].texture);this._durations=this._textures=null;this.textures=a;this.animationSpeed=1;this.loop=!0;this.onComplete=null;this._currentTime=0;this.playing=!1}var g=e("../core");a.prototype=Object.create(g.Sprite.prototype);
a.prototype.constructor=a;h.exports=a;Object.defineProperties(a.prototype,{totalFrames:{get:function(){return this._textures.length}},textures:{get:function(){return this._textures},set:function(a){if(a[0]instanceof g.Texture)this._textures=a,this._durations=null;else{this._textures=[];this._durations=[];for(var f=0;f<a.length;f++)this._textures.push(a[f].texture),this._durations.push(a[f].time)}}},currentFrame:{get:function(){var a=Math.floor(this._currentTime)%this._textures.length;0>a&&(a+=this._textures.length);
return a}}});a.prototype.stop=function(){this.playing&&(this.playing=!1,g.ticker.shared.remove(this.update,this))};a.prototype.play=function(){this.playing||(this.playing=!0,g.ticker.shared.add(this.update,this))};a.prototype.gotoAndStop=function(a){this.stop();this._currentTime=a;this._texture=this._textures[this.currentFrame]};a.prototype.gotoAndPlay=function(a){this._currentTime=a;this.play()};a.prototype.update=function(a){var f=this.animationSpeed*a;if(null!==this._durations){for(var b=this._currentTime%
1*this._durations[this.currentFrame],b=b+f/60*1E3;0>b;)this._currentTime--,b+=this._durations[this.currentFrame];a=Math.sign(this.animationSpeed*a);for(this._currentTime=Math.floor(this._currentTime);b>=this._durations[this.currentFrame];)b-=this._durations[this.currentFrame]*a,this._currentTime+=a;this._currentTime+=b/this._durations[this.currentFrame]}else this._currentTime+=f;if(0>this._currentTime&&!this.loop){if(this.gotoAndStop(0),this.onComplete)this.onComplete()}else if(this._currentTime>=
this._textures.length&&!this.loop){if(this.gotoAndStop(this._textures.length-1),this.onComplete)this.onComplete()}else this._texture=this._textures[this.currentFrame]};a.prototype.destroy=function(){this.stop();g.Sprite.prototype.destroy.call(this)};a.fromFrames=function(c){for(var f=[],b=0;b<c.length;++b)f.push(new g.Texture.fromFrame(c[b]));return new a(f)};a.fromImages=function(c){for(var f=[],b=0;b<c.length;++b)f.push(new g.Texture.fromImage(c[b]));return new a(f)}},{"../core":23}],75:[function(e,
h,l){function a(a,c,f){g.Sprite.call(this,a);this.tileScale=new g.Point(1,1);this.tilePosition=new g.Point(0,0);this._width=c||100;this._height=f||100;this._uvs=new g.TextureUvs;this._canvasPattern=null;this.shader=new g.AbstractFilter("precision lowp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nuniform mat3 projectionMatrix;\nuniform vec4 uFrame;\nuniform vec4 uTransform;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vec2 coord = aTextureCoord;\n   coord -= uTransform.xy;\n   coord /= uTransform.zw;\n   vTextureCoord = coord;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}",
"precision lowp float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nuniform vec4 uFrame;\nuniform vec2 uPixelSize;\nvoid main(void){\n   vec2 coord = mod(vTextureCoord, uFrame.zw);\n   coord = clamp(coord, uPixelSize, uFrame.zw - uPixelSize);\n   coord += uFrame.xy;\n   gl_FragColor =  texture2D(uSampler, coord) * vColor ;\n}",{uFrame:{type:"4fv",value:[0,0,1,1]},uTransform:{type:"4fv",value:[0,0,1,1]},uPixelSize:{type:"2fv",value:[1,1]}})}var g=e("../core"),c=
new g.Point,f=e("../core/renderers/canvas/utils/CanvasTinter");a.prototype=Object.create(g.Sprite.prototype);a.prototype.constructor=a;h.exports=a;Object.defineProperties(a.prototype,{width:{get:function(){return this._width},set:function(a){this._width=a}},height:{get:function(){return this._height},set:function(a){this._height=a}}});a.prototype._onTextureUpdate=function(){};a.prototype._renderWebGL=function(a){var c=this._texture;if(c&&c._uvs){var f=c._uvs,e=c._frame.width,g=c._frame.height,h=c.baseTexture.width,
l=c.baseTexture.height;c._uvs=this._uvs;c._frame.width=this.width;c._frame.height=this.height;this.shader.uniforms.uPixelSize.value[0]=1/h;this.shader.uniforms.uPixelSize.value[1]=1/l;this.shader.uniforms.uFrame.value[0]=f.x0;this.shader.uniforms.uFrame.value[1]=f.y0;this.shader.uniforms.uFrame.value[2]=f.x1-f.x0;this.shader.uniforms.uFrame.value[3]=f.y2-f.y0;this.shader.uniforms.uTransform.value[0]=this.tilePosition.x%(e*this.tileScale.x)/this._width;this.shader.uniforms.uTransform.value[1]=this.tilePosition.y%
(g*this.tileScale.y)/this._height;this.shader.uniforms.uTransform.value[2]=h/this._width*this.tileScale.x;this.shader.uniforms.uTransform.value[3]=l/this._height*this.tileScale.y;a.setObjectRenderer(a.plugins.sprite);a.plugins.sprite.render(this);c._uvs=f;c._frame.width=e;c._frame.height=g}};a.prototype._renderCanvas=function(a){var c=this._texture;if(c.baseTexture.hasLoaded){var e=a.context,m=this.worldTransform,h=a.resolution,p=c.baseTexture,l=this.tilePosition.x/this.tileScale.x%c._frame.width,
q=this.tilePosition.y/this.tileScale.y%c._frame.height;if(!this._canvasPattern){var n=new g.CanvasBuffer(c._frame.width,c._frame.height);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=f.getTintedTexture(this,this.tint)),n.context.drawImage(this.tintedTexture,0,0)):n.context.drawImage(p.source,-c._frame.x,-c._frame.y);this._canvasPattern=n.context.createPattern(n.canvas,"repeat")}e.globalAlpha=this.worldAlpha;e.setTransform(m.a*h,m.b*h,m.c*h,m.d*h,
m.tx*h,m.ty*h);e.scale(this.tileScale.x,this.tileScale.y);e.translate(l+this.anchor.x*-this._width,q+this.anchor.y*-this._height);c=a.blendModes[this.blendMode];c!==a.context.globalCompositeOperation&&(e.globalCompositeOperation=c);e.fillStyle=this._canvasPattern;e.fillRect(-l,-q,this._width/this.tileScale.x,this._height/this.tileScale.y)}};a.prototype.getBounds=function(){var a=this._width,c=this._height,f=a*(1-this.anchor.x),e=a*-this.anchor.x,g=c*(1-this.anchor.y),h=c*-this.anchor.y,c=this.worldTransform,
l=c.a,q=c.b,n=c.c,t=c.d,E=c.tx,z=c.ty,y=l*e+n*h+E,c=t*h+q*e+z,a=l*f+n*h+E,h=t*h+q*f+z,w=l*f+n*g+E,f=t*g+q*f+z,l=l*e+n*g+E,e=t*g+q*e+z,g=y,g=a<g?a:g,g=w<g?w:g,g=l<g?l:g,q=c,q=h<q?h:q,q=f<q?f:q,q=e<q?e:q,y=a>y?a:y,y=w>y?w:y,c=h>c?h:c,c=f>c?f:c,a=this._bounds;a.x=g;a.width=(l>y?l:y)-g;a.y=q;a.height=(e>c?e:c)-q;return this._currentBounds=a};a.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,c);var d=this._width;a=this._height;var f=-d*this.anchor.x;return c.x>f&&c.x<f+d&&(d=-a*
this.anchor.y,c.y>d&&c.y<d+a)?!0:!1};a.prototype.destroy=function(){g.Sprite.prototype.destroy.call(this);this._uvs=this.tilePosition=this._tileScaleOffset=this.tileScale=null};a.fromFrame=function(b,c,f){var e=g.utils.TextureCache[b];if(!e)throw Error('The frameId "'+b+'" does not exist in the texture cache '+this);return new a(e,c,f)};a.fromImage=function(b,c,f,e,h){return new a(g.Texture.fromImage(b,e,h),c,f)}},{"../core":23,"../core/renderers/canvas/utils/CanvasTinter":41}],76:[function(e,h,l){var a=
e("../core");e=a.DisplayObject;var g=new a.Matrix;e.prototype._cacheAsBitmap=!1;e.prototype._originalRenderWebGL=null;e.prototype._originalRenderCanvas=null;e.prototype._originalUpdateTransform=null;e.prototype._originalHitTest=null;e.prototype._originalDestroy=null;e.prototype._cachedSprite=null;Object.defineProperties(e.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(a){this._cacheAsBitmap!==a&&((this._cacheAsBitmap=a)?(this._originalRenderWebGL=this.renderWebGL,
this._originalRenderCanvas=this.renderCanvas,this._originalUpdateTransform=this.updateTransform,this._originalGetBounds=this.getBounds,this._originalDestroy=this.destroy,this._originalContainsPoint=this.containsPoint,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(this._cachedSprite&&this._destroyCachedDisplayObject(),this.renderWebGL=this._originalRenderWebGL,this.renderCanvas=this._originalRenderCanvas,this.getBounds=
this._originalGetBounds,this.destroy=this._originalDestroy,this.updateTransform=this._originalUpdateTransform,this.containsPoint=this._originalContainsPoint))}}});e.prototype._renderCachedWebGL=function(a){!this.visible||0>=this.worldAlpha||!this.renderable||(this._initCachedDisplayObject(a),this._cachedSprite.worldAlpha=this.worldAlpha,a.setObjectRenderer(a.plugins.sprite),a.plugins.sprite.render(this._cachedSprite))};e.prototype._initCachedDisplayObject=function(c){if(!this._cachedSprite){c.currentRenderer.flush();
var f=this.getLocalBounds().clone();if(this._filters){var b=this._filters[0].padding;f.x-=b;f.y-=b;f.width+=2*b;f.height+=2*b}var b=c.currentRenderTarget,d=c.filterManager.filterStack,e=new a.RenderTexture(c,f.width|0,f.height|0);g.tx=-f.x;g.ty=-f.y;this.renderWebGL=this._originalRenderWebGL;e.render(this,g,!0,!0);c.setRenderTarget(b);c.filterManager.filterStack=d;this.renderWebGL=this._renderCachedWebGL;this.updateTransform=this.displayObjectUpdateTransform;this.getBounds=this._getCachedBounds;this._cachedSprite=
new a.Sprite(e);this._cachedSprite.worldTransform=this.worldTransform;this._cachedSprite.anchor.x=-(f.x/f.width);this._cachedSprite.anchor.y=-(f.y/f.height);this.updateTransform();this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}};e.prototype._renderCachedCanvas=function(a){!this.visible||0>=this.worldAlpha||!this.renderable||(this._initCachedDisplayObjectCanvas(a),this._cachedSprite.worldAlpha=this.worldAlpha,this._cachedSprite.renderCanvas(a))};e.prototype._initCachedDisplayObjectCanvas=
function(c){if(!this._cachedSprite){var f=this.getLocalBounds(),b=c.context,d=new a.RenderTexture(c,f.width|0,f.height|0);g.tx=-f.x;g.ty=-f.y;this.renderCanvas=this._originalRenderCanvas;d.render(this,g,!0);c.context=b;this.renderCanvas=this._renderCachedCanvas;this.updateTransform=this.displayObjectUpdateTransform;this.getBounds=this._getCachedBounds;this._cachedSprite=new a.Sprite(d);this._cachedSprite.worldTransform=this.worldTransform;this._cachedSprite.anchor.x=-(f.x/f.width);this._cachedSprite.anchor.y=
-(f.y/f.height);this.updateTransform();this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}};e.prototype._getCachedBounds=function(){this._cachedSprite._currentBounds=null;return this._cachedSprite.getBounds()};e.prototype._destroyCachedDisplayObject=function(){this._cachedSprite._texture.destroy();this._cachedSprite=null};e.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=!1;this._originalDestroy()}},{"../core":23}],77:[function(e,h,l){e=e("../core");e.DisplayObject.prototype.name=
null;e.Container.prototype.getChildByName=function(a){for(var e=0;e<this.children.length;e++)if(this.children[e].name===a)return this.children[e];return null}},{"../core":23}],78:[function(e,h,l){var a=e("../core");a.DisplayObject.prototype.getGlobalPosition=function(e){e=e||new a.Point;this.parent?(this.displayObjectUpdateTransform(),e.x=this.worldTransform.tx,e.y=this.worldTransform.ty):(e.x=this.position.x,e.y=this.position.y);return e}},{"../core":23}],79:[function(e,h,l){e("./cacheAsBitmap");
e("./getChildByName");e("./getGlobalPosition");h.exports={MovieClip:e("./MovieClip"),TilingSprite:e("./TilingSprite"),BitmapText:e("./BitmapText")}},{"./BitmapText":73,"./MovieClip":74,"./TilingSprite":75,"./cacheAsBitmap":76,"./getChildByName":77,"./getGlobalPosition":78}],80:[function(e,h,l){function a(){g.AbstractFilter.call(this,null,"precision mediump float;\n\nuniform vec4 dimensions;\nuniform float pixelSize;\nuniform sampler2D uSampler;\n\nfloat character(float n, vec2 p)\n{\n    p = floor(p*vec2(4.0, -4.0) + 2.5);\n    if (clamp(p.x, 0.0, 4.0) == p.x && clamp(p.y, 0.0, 4.0) == p.y)\n    {\n        if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\n    }\n    return 0.0;\n}\n\nvoid main()\n{\n    vec2 uv = gl_FragCoord.xy;\n\n    vec3 col = texture2D(uSampler, floor( uv / pixelSize ) * pixelSize / dimensions.xy).rgb;\n\n    float gray = (col.r + col.g + col.b) / 3.0;\n\n    float n =  65536.0;             // .\n    if (gray > 0.2) n = 65600.0;    // :\n    if (gray > 0.3) n = 332772.0;   // *\n    if (gray > 0.4) n = 15255086.0; // o\n    if (gray > 0.5) n = 23385164.0; // &\n    if (gray > 0.6) n = 15252014.0; // 8\n    if (gray > 0.7) n = 13199452.0; // @\n    if (gray > 0.8) n = 11512810.0; // #\n\n    vec2 p = mod( uv / ( pixelSize * 0.5 ), 2.0) - vec2(1.0);\n    col = col * character(n, p);\n\n    gl_FragColor = vec4(col, 1.0);\n}\n",
{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"1f",value:8}})}var g=e("../../core");a.prototype=Object.create(g.AbstractFilter.prototype);a.prototype.constructor=a;h.exports=a;Object.defineProperties(a.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(a){this.uniforms.pixelSize.value=a}}})},{"../../core":23}],81:[function(e,h,l){function a(){g.AbstractFilter.call(this);this.blurXFilter=new c;this.blurYFilter=new f;this.defaultFilter=new g.AbstractFilter}
var g=e("../../core"),c=e("../blur/BlurXFilter"),f=e("../blur/BlurYFilter");a.prototype=Object.create(g.AbstractFilter.prototype);a.prototype.constructor=a;h.exports=a;a.prototype.applyFilter=function(a,c,f){var e=a.filterManager.getRenderTarget(!0);this.defaultFilter.applyFilter(a,c,f);this.blurXFilter.applyFilter(a,c,e);a.blendModeManager.setBlendMode(g.BLEND_MODES.SCREEN);this.blurYFilter.applyFilter(a,e,f);a.blendModeManager.setBlendMode(g.BLEND_MODES.NORMAL);a.filterManager.returnRenderTarget(e)};
Object.defineProperties(a.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=this.blurYFilter.blur=a}},blurX:{get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=a}},blurY:{get:function(){return this.blurYFilter.blur},set:function(a){this.blurYFilter.blur=a}}})},{"../../core":23,"../blur/BlurXFilter":84,"../blur/BlurYFilter":85}],82:[function(e,h,l){function a(a,f){g.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform float dirX;\nuniform float dirY;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[3];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[0] = aTextureCoord + vec2( (0.004 * strength) * dirX, (0.004 * strength) * dirY );\n    vBlurTexCoords[1] = aTextureCoord + vec2( (0.008 * strength) * dirX, (0.008 * strength) * dirY );\n    vBlurTexCoords[2] = aTextureCoord + vec2( (0.012 * strength) * dirX, (0.012 * strength) * dirY );\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",
"precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[3];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vTextureCoord     ) * 0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0]) * 0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1]) * 0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2]) * 0.004431848411938341;\n}\n",
{strength:{type:"1f",value:1},dirX:{type:"1f",value:a||0},dirY:{type:"1f",value:f||0}});this.defaultFilter=new g.AbstractFilter;this.passes=1;this.dirX=a||0;this.dirY=f||0;this.strength=4}var g=e("../../core");a.prototype=Object.create(g.AbstractFilter.prototype);a.prototype.constructor=a;h.exports=a;a.prototype.applyFilter=function(a,f,b,d){var e=this.getShader(a);this.uniforms.strength.value=this.strength/4/this.passes*(f.frame.width/f.size.width);if(1===this.passes)a.filterManager.applyFilter(e,
f,b,d);else{var g=a.filterManager.getRenderTarget(!0);a.filterManager.applyFilter(e,f,g,d);for(f=0;f<this.passes-2;f++)a.filterManager.applyFilter(e,g,g,d);a.filterManager.applyFilter(e,g,b,d);a.filterManager.returnRenderTarget(g)}};Object.defineProperties(a.prototype,{blur:{get:function(){return this.strength},set:function(a){this.padding=.5*a;this.strength=a}},dirX:{get:function(){return this.dirX},set:function(a){this.uniforms.dirX.value=a}},dirY:{get:function(){return this.dirY},set:function(a){this.uniforms.dirY.value=
a}}})},{"../../core":23}],83:[function(e,h,l){function a(){g.AbstractFilter.call(this);this.blurXFilter=new c;this.blurYFilter=new f}var g=e("../../core"),c=e("./BlurXFilter"),f=e("./BlurYFilter");a.prototype=Object.create(g.AbstractFilter.prototype);a.prototype.constructor=a;h.exports=a;a.prototype.applyFilter=function(a,c,f){var e=a.filterManager.getRenderTarget(!0);this.blurXFilter.applyFilter(a,c,e);this.blurYFilter.applyFilter(a,e,f);a.filterManager.returnRenderTarget(e)};Object.defineProperties(a.prototype,
{blur:{get:function(){return this.blurXFilter.blur},set:function(a){this.padding=.5*Math.abs(a);this.blurXFilter.blur=this.blurYFilter.blur=a}},passes:{get:function(){return this.blurXFilter.passes},set:function(a){this.blurXFilter.passes=this.blurYFilter.passes=a}},blurX:{get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=a}},blurY:{get:function(){return this.blurYFilter.blur},set:function(a){this.blurYFilter.blur=a}}})},{"../../core":23,"./BlurXFilter":84,"./BlurYFilter":85}],
84:[function(e,h,l){function a(){g.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(-0.012 * strength, 0.0);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(-0.008 * strength, 0.0);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(-0.004 * strength, 0.0);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2( 0.004 * strength, 0.0);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2( 0.008 * strength, 0.0);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2( 0.012 * strength, 0.0);\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",
"precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",
{strength:{type:"1f",value:1}});this.passes=1;this.strength=4}var g=e("../../core");a.prototype=Object.create(g.AbstractFilter.prototype);a.prototype.constructor=a;h.exports=a;a.prototype.applyFilter=function(a,f,b,d){var e=this.getShader(a);this.uniforms.strength.value=this.strength/4/this.passes*(f.frame.width/f.size.width);if(1===this.passes)a.filterManager.applyFilter(e,f,b,d);else{for(var g=a.filterManager.getRenderTarget(!0),h=g,p=0;p<this.passes-1;p++){a.filterManager.applyFilter(e,f,h,!0);
var l=h,h=f;f=l}a.filterManager.applyFilter(e,f,b,d);a.filterManager.returnRenderTarget(g)}};Object.defineProperties(a.prototype,{blur:{get:function(){return this.strength},set:function(a){this.padding=.5*Math.abs(a);this.strength=a}}})},{"../../core":23}],85:[function(e,h,l){function a(){g.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",
"precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",
{strength:{type:"1f",value:1}});this.passes=1;this.strength=4}var g=e("../../core");a.prototype=Object.create(g.AbstractFilter.prototype);a.prototype.constructor=a;h.exports=a;a.prototype.applyFilter=function(a,f,b,d){var e=this.getShader(a);this.uniforms.strength.value=Math.abs(this.strength)/4/this.passes*(f.frame.height/f.size.height);if(1===this.passes)a.filterManager.applyFilter(e,f,b,d);else{for(var g=a.filterManager.getRenderTarget(!0),h=g,p=0;p<this.passes-1;p++){a.filterManager.applyFilter(e,
f,h,!0);var l=h,h=f;f=l}a.filterManager.applyFilter(e,f,b,d);a.filterManager.returnRenderTarget(g)}};Object.defineProperties(a.prototype,{blur:{get:function(){return this.strength},set:function(a){this.padding=.5*Math.abs(a);this.strength=a}}})},{"../../core":23}],86:[function(e,h,l){function a(){g.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 delta;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta * percent);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",
{delta:{type:"v2",value:{x:.1,y:0}}})}var g=e("../../core");a.prototype=Object.create(g.AbstractFilter.prototype);a.prototype.constructor=a;h.exports=a},{"../../core":23}],87:[function(e,h,l){function a(){g.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[25];\n\nvoid main(void)\n{\n\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.r = (m[0] * c.r);\n        gl_FragColor.r += (m[1] * c.g);\n        gl_FragColor.r += (m[2] * c.b);\n        gl_FragColor.r += (m[3] * c.a);\n        gl_FragColor.r += m[4];\n\n    gl_FragColor.g = (m[5] * c.r);\n        gl_FragColor.g += (m[6] * c.g);\n        gl_FragColor.g += (m[7] * c.b);\n        gl_FragColor.g += (m[8] * c.a);\n        gl_FragColor.g += m[9];\n\n     gl_FragColor.b = (m[10] * c.r);\n        gl_FragColor.b += (m[11] * c.g);\n        gl_FragColor.b += (m[12] * c.b);\n        gl_FragColor.b += (m[13] * c.a);\n        gl_FragColor.b += m[14];\n\n     gl_FragColor.a = (m[15] * c.r);\n        gl_FragColor.a += (m[16] * c.g);\n        gl_FragColor.a += (m[17] * c.b);\n        gl_FragColor.a += (m[18] * c.a);\n        gl_FragColor.a += m[19];\n\n}\n",
{m:{type:"1fv",value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]}})}var g=e("../../core");a.prototype=Object.create(g.AbstractFilter.prototype);a.prototype.constructor=a;h.exports=a;a.prototype._loadMatrix=function(a,f){var b=a;f&&(this._multiply(b,this.uniforms.m.value,a),b=this._colorMatrix(b));this.uniforms.m.value=b};a.prototype._multiply=function(a,f,b){a[0]=f[0]*b[0]+f[1]*b[5]+f[2]*b[10]+f[3]*b[15];a[1]=f[0]*b[1]+f[1]*b[6]+f[2]*b[11]+f[3]*b[16];a[2]=f[0]*b[2]+f[1]*b[7]+f[2]*b[12]+f[3]*b[17];a[3]=
f[0]*b[3]+f[1]*b[8]+f[2]*b[13]+f[3]*b[18];a[4]=f[0]*b[4]+f[1]*b[9]+f[2]*b[14]+f[3]*b[19];a[5]=f[5]*b[0]+f[6]*b[5]+f[7]*b[10]+f[8]*b[15];a[6]=f[5]*b[1]+f[6]*b[6]+f[7]*b[11]+f[8]*b[16];a[7]=f[5]*b[2]+f[6]*b[7]+f[7]*b[12]+f[8]*b[17];a[8]=f[5]*b[3]+f[6]*b[8]+f[7]*b[13]+f[8]*b[18];a[9]=f[5]*b[4]+f[6]*b[9]+f[7]*b[14]+f[8]*b[19];a[10]=f[10]*b[0]+f[11]*b[5]+f[12]*b[10]+f[13]*b[15];a[11]=f[10]*b[1]+f[11]*b[6]+f[12]*b[11]+f[13]*b[16];a[12]=f[10]*b[2]+f[11]*b[7]+f[12]*b[12]+f[13]*b[17];a[13]=f[10]*b[3]+f[11]*
b[8]+f[12]*b[13]+f[13]*b[18];a[14]=f[10]*b[4]+f[11]*b[9]+f[12]*b[14]+f[13]*b[19];a[15]=f[15]*b[0]+f[16]*b[5]+f[17]*b[10]+f[18]*b[15];a[16]=f[15]*b[1]+f[16]*b[6]+f[17]*b[11]+f[18]*b[16];a[17]=f[15]*b[2]+f[16]*b[7]+f[17]*b[12]+f[18]*b[17];a[18]=f[15]*b[3]+f[16]*b[8]+f[17]*b[13]+f[18]*b[18];a[19]=f[15]*b[4]+f[16]*b[9]+f[17]*b[14]+f[18]*b[19];return a};a.prototype._colorMatrix=function(a){a=new Float32Array(a);a[4]/=255;a[9]/=255;a[14]/=255;a[19]/=255;return a};a.prototype.brightness=function(a,f){this._loadMatrix([a,
0,0,0,0,0,a,0,0,0,0,0,a,0,0,0,0,0,1,0],f)};a.prototype.greyscale=function(a,f){this._loadMatrix([a,a,a,0,0,a,a,a,0,0,a,a,a,0,0,0,0,0,1,0],f)};a.prototype.grayscale=a.prototype.greyscale;a.prototype.blackAndWhite=function(a){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],a)};a.prototype.hue=function(a,f){a=(a||0)/180*Math.PI;var b=Math.cos(a),d=Math.sin(a);this._loadMatrix([.213+.787*b+-.213*d,.715+-.715*b+-.715*d,.072+-.072*b+.928*d,0,0,.213+-.213*b+.143*d,.715+b*(1-.715)+.14*
d,.072+-.072*b+-.283*d,0,0,.213+-.213*b+-.787*d,.715+-.715*b+.715*d,.072+.928*b+.072*d,0,0,0,0,0,1,0],f)};a.prototype.contrast=function(a,f){var b=(a||0)+1,d=-128*(b-1);this._loadMatrix([b,0,0,0,d,0,b,0,0,d,0,0,b,0,d,0,0,0,1,0],f)};a.prototype.saturate=function(a,f){var b=2*(a||0)/3+1,d=-.5*(b-1);this._loadMatrix([b,d,d,0,0,d,b,d,0,0,d,d,b,0,0,0,0,0,1,0],f)};a.prototype.desaturate=function(a){this.saturate(-1)};a.prototype.negative=function(a){this._loadMatrix([0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,
1,0],a)};a.prototype.sepia=function(a){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],a)};a.prototype.technicolor=function(a){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],a)};a.prototype.polaroid=function(a){this._loadMatrix([1.438,
-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],a)};a.prototype.toBGR=function(a){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],a)};a.prototype.kodachrome=function(a){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],a)};a.prototype.browni=function(a){this._loadMatrix([.5997023498159715,
.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],a)};a.prototype.vintage=function(a){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,
0,0,0,1,0],a)};a.prototype.colorTone=function(a,f,b,d,e){b=b||16770432;d=d||3375104;var g=(b>>16&255)/255,h=(b>>8&255)/255;b=(b&255)/255;var p=(d>>16&255)/255,l=(d>>8&255)/255;d=(d&255)/255;this._loadMatrix([.3,.59,.11,0,0,g,h,b,a||.2,0,p,l,d,f||.15,0,g-p,h-l,b-d,0,0],e)};a.prototype.night=function(a,f){a=a||.1;this._loadMatrix([-2*a,-a,0,0,0,-a,0,a,0,0,0,a,2*a,0,0,0,0,0,1,0],f)};a.prototype.predator=function(a,f){this._loadMatrix([11.224130630493164*a,-4.794486999511719*a,-2.8746118545532227*a,0*
a,.40342438220977783*a,-3.6330697536468506*a,9.193157196044922*a,-2.951810836791992*a,0*a,-1.316135048866272*a,-3.2184197902679443*a,-4.2375030517578125*a,7.476448059082031*a,0*a,.8044459223747253*a,0,0,0,1,0],f)};a.prototype.lsd=function(a){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],a)};a.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)};Object.defineProperties(a.prototype,{matrix:{get:function(){return this.uniforms.m.value},set:function(a){this.uniforms.m.value=
a}}})},{"../../core":23}],88:[function(e,h,l){function a(){g.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float step;\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    color = floor(color * step) / step;\n\n    gl_FragColor = color;\n}\n",{step:{type:"1f",value:5}})}var g=e("../../core");a.prototype=Object.create(g.AbstractFilter.prototype);a.prototype.constructor=a;h.exports=a;Object.defineProperties(a.prototype,
{step:{get:function(){return this.uniforms.step.value},set:function(a){this.uniforms.step.value=a}}})},{"../../core":23}],89:[function(e,h,l){function a(a,f,b){g.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying mediump vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 texelSize;\nuniform float matrix[9];\n\nvoid main(void)\n{\n   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left\n   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center\n   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right\n\n   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left\n   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center\n   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right\n\n   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left\n   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center\n   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right\n\n   gl_FragColor =\n       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\n       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\n       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\n\n   gl_FragColor.a = c22.a;\n}\n",
{matrix:{type:"1fv",value:new Float32Array(a)},texelSize:{type:"v2",value:{x:1/f,y:1/b}}})}var g=e("../../core");a.prototype=Object.create(g.AbstractFilter.prototype);a.prototype.constructor=a;h.exports=a;Object.defineProperties(a.prototype,{matrix:{get:function(){return this.uniforms.matrix.value},set:function(a){this.uniforms.matrix.value=new Float32Array(a)}},width:{get:function(){return 1/this.uniforms.texelSize.value.x},set:function(a){this.uniforms.texelSize.value.x=1/a}},height:{get:function(){return 1/
this.uniforms.texelSize.value.y},set:function(a){this.uniforms.texelSize.value.y=1/a}}})},{"../../core":23}],90:[function(e,h,l){function a(){g.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);\n\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n    if (lum < 1.00)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.75)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.50)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.3)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n}\n")}
var g=e("../../core");a.prototype=Object.create(g.AbstractFilter.prototype);a.prototype.constructor=a;h.exports=a},{"../../core":23}],91:[function(e,h,l){function a(a,f){var b=new g.Matrix;a.renderable=!1;g.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vMapCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",
"precision mediump float;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vMapCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y));\n}\n",{mapSampler:{type:"sampler2D",value:a.texture},otherMatrix:{type:"mat3",value:b.toArray(!0)},scale:{type:"v2",
value:{x:1,y:1}}});this.maskSprite=a;this.maskMatrix=b;if(null===f||void 0===f)f=20;this.scale=new g.Point(f,f)}var g=e("../../core");a.prototype=Object.create(g.AbstractFilter.prototype);a.prototype.constructor=a;h.exports=a;a.prototype.applyFilter=function(a,f,b){var d=a.filterManager;d.calculateMappedMatrix(f.frame,this.maskSprite,this.maskMatrix);this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0);this.uniforms.scale.value.x=1/f.frame.width*this.scale.x;this.uniforms.scale.value.y=1/f.frame.height*
this.scale.y;a=this.getShader(a);d.applyFilter(a,f,b)};Object.defineProperties(a.prototype,{map:{get:function(){return this.uniforms.mapSampler.value},set:function(a){this.uniforms.mapSampler.value=a}}})},{"../../core":23}],92:[function(e,h,l){function a(){g.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec4 dimensions;\nuniform sampler2D uSampler;\n\nuniform float angle;\nuniform float scale;\n\nfloat pattern()\n{\n   float s = sin(angle), c = cos(angle);\n   vec2 tex = vTextureCoord * dimensions.xy;\n   vec2 point = vec2(\n       c * tex.x - s * tex.y,\n       s * tex.x + c * tex.y\n   ) * scale;\n   return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main()\n{\n   vec4 color = texture2D(uSampler, vTextureCoord);\n   float average = (color.r + color.g + color.b) / 3.0;\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n}\n",
{scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}})}var g=e("../../core");a.prototype=Object.create(g.AbstractFilter.prototype);a.prototype.constructor=a;h.exports=a;Object.defineProperties(a.prototype,{scale:{get:function(){return this.uniforms.scale.value},set:function(a){this.uniforms.scale.value=a}},angle:{get:function(){return this.uniforms.angle.value},set:function(a){this.uniforms.angle.value=a}}})},{"../../core":23}],93:[function(e,h,l){function a(){g.AbstractFilter.call(this,
"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform vec2 offset;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition+offset), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",
"precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform vec3 color;\nuniform float alpha;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec4 sum = vec4(0.0);\n\n    sum += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    sum += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    sum += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    sum += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    sum += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n\n    gl_FragColor = vec4( color.rgb * sum.a * alpha, sum.a * alpha );\n}\n",
{blur:{type:"1f",value:1/512},color:{type:"c",value:[0,0,0]},alpha:{type:"1f",value:.7},offset:{type:"2f",value:[5,5]},strength:{type:"1f",value:1}});this.passes=1;this.strength=4}var g=e("../../core");a.prototype=Object.create(g.AbstractFilter.prototype);a.prototype.constructor=a;h.exports=a;a.prototype.applyFilter=function(a,f,b,d){var e=this.getShader(a);this.uniforms.strength.value=this.strength/4/this.passes*(f.frame.height/f.size.height);if(1===this.passes)a.filterManager.applyFilter(e,f,b,
d);else{for(var g=a.filterManager.getRenderTarget(!0),h=g,p=0;p<this.passes-1;p++){a.filterManager.applyFilter(e,f,h,d);var l=h,h=f;f=l}a.filterManager.applyFilter(e,f,b,d);a.filterManager.returnRenderTarget(g)}};Object.defineProperties(a.prototype,{blur:{get:function(){return this.strength},set:function(a){this.padding=.5*a;this.strength=a}}})},{"../../core":23}],94:[function(e,h,l){function a(){g.AbstractFilter.call(this);this.blurXFilter=new c;this.blurYTintFilter=new f;this.defaultFilter=new g.AbstractFilter;
this.padding=30;this._dirtyPosition=!0;this._angle=45*Math.PI/180;this._distance=10;this.alpha=.75;this.hideObject=!1;this.blendMode=g.BLEND_MODES.MULTIPLY}var g=e("../../core"),c=e("../blur/BlurXFilter"),f=e("./BlurYTintFilter");a.prototype=Object.create(g.AbstractFilter.prototype);a.prototype.constructor=a;h.exports=a;a.prototype.applyFilter=function(a,c,f){var e=a.filterManager.getRenderTarget(!0);this._dirtyPosition&&(this._dirtyPosition=!1,this.blurYTintFilter.uniforms.offset.value[0]=Math.sin(this._angle)*
this._distance,this.blurYTintFilter.uniforms.offset.value[1]=Math.cos(this._angle)*this._distance);this.blurXFilter.applyFilter(a,c,e);a.blendModeManager.setBlendMode(this.blendMode);this.blurYTintFilter.applyFilter(a,e,f);a.blendModeManager.setBlendMode(g.BLEND_MODES.NORMAL);this.hideObject||this.defaultFilter.applyFilter(a,c,f);a.filterManager.returnRenderTarget(e)};Object.defineProperties(a.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=this.blurYTintFilter.blur=
a}},blurX:{get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=a}},blurY:{get:function(){return this.blurYTintFilter.blur},set:function(a){this.blurYTintFilter.blur=a}},color:{get:function(){return g.utils.rgb2hex(this.blurYTintFilter.uniforms.color.value)},set:function(a){this.blurYTintFilter.uniforms.color.value=g.utils.hex2rgb(a)}},alpha:{get:function(){return this.blurYTintFilter.uniforms.alpha.value},set:function(a){this.blurYTintFilter.uniforms.alpha.value=a}},
distance:{get:function(){return this._distance},set:function(a){this._dirtyPosition=!0;this._distance=a}},angle:{get:function(){return this._angle},set:function(a){this._dirtyPosition=!0;this._angle=a}}})},{"../../core":23,"../blur/BlurXFilter":84,"./BlurYTintFilter":93}],95:[function(e,h,l){function a(){g.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float gray;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);\n}\n",
{gray:{type:"1f",value:1}})}var g=e("../../core");a.prototype=Object.create(g.AbstractFilter.prototype);a.prototype.constructor=a;h.exports=a;Object.defineProperties(a.prototype,{gray:{get:function(){return this.uniforms.gray.value},set:function(a){this.uniforms.gray.value=a}}})},{"../../core":23}],96:[function(e,h,l){h.exports={AsciiFilter:e("./ascii/AsciiFilter"),BloomFilter:e("./bloom/BloomFilter"),BlurFilter:e("./blur/BlurFilter"),BlurXFilter:e("./blur/BlurXFilter"),BlurYFilter:e("./blur/BlurYFilter"),
BlurDirFilter:e("./blur/BlurDirFilter"),ColorMatrixFilter:e("./color/ColorMatrixFilter"),ColorStepFilter:e("./color/ColorStepFilter"),ConvolutionFilter:e("./convolution/ConvolutionFilter"),CrossHatchFilter:e("./crosshatch/CrossHatchFilter"),DisplacementFilter:e("./displacement/DisplacementFilter"),DotScreenFilter:e("./dot/DotScreenFilter"),GrayFilter:e("./gray/GrayFilter"),DropShadowFilter:e("./dropshadow/DropShadowFilter"),InvertFilter:e("./invert/InvertFilter"),NoiseFilter:e("./noise/NoiseFilter"),
PixelateFilter:e("./pixelate/PixelateFilter"),RGBSplitFilter:e("./rgb/RGBSplitFilter"),ShockwaveFilter:e("./shockwave/ShockwaveFilter"),SepiaFilter:e("./sepia/SepiaFilter"),SmartBlurFilter:e("./blur/SmartBlurFilter"),TiltShiftFilter:e("./tiltshift/TiltShiftFilter"),TiltShiftXFilter:e("./tiltshift/TiltShiftXFilter"),TiltShiftYFilter:e("./tiltshift/TiltShiftYFilter"),TwistFilter:e("./twist/TwistFilter")}},{"./ascii/AsciiFilter":80,"./bloom/BloomFilter":81,"./blur/BlurDirFilter":82,"./blur/BlurFilter":83,
"./blur/BlurXFilter":84,"./blur/BlurYFilter":85,"./blur/SmartBlurFilter":86,"./color/ColorMatrixFilter":87,"./color/ColorStepFilter":88,"./convolution/ConvolutionFilter":89,"./crosshatch/CrossHatchFilter":90,"./displacement/DisplacementFilter":91,"./dot/DotScreenFilter":92,"./dropshadow/DropShadowFilter":94,"./gray/GrayFilter":95,"./invert/InvertFilter":97,"./noise/NoiseFilter":98,"./pixelate/PixelateFilter":99,"./rgb/RGBSplitFilter":100,"./sepia/SepiaFilter":101,"./shockwave/ShockwaveFilter":102,
"./tiltshift/TiltShiftFilter":104,"./tiltshift/TiltShiftXFilter":105,"./tiltshift/TiltShiftYFilter":106,"./twist/TwistFilter":107}],97:[function(e,h,l){function a(){g.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform float invert;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);\n}\n",
{invert:{type:"1f",value:1}})}var g=e("../../core");a.prototype=Object.create(g.AbstractFilter.prototype);a.prototype.constructor=a;h.exports=a;Object.defineProperties(a.prototype,{invert:{get:function(){return this.uniforms.invert.value},set:function(a){this.uniforms.invert.value=a}}})},{"../../core":23}],98:[function(e,h,l){function a(){g.AbstractFilter.call(this,null,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(vTextureCoord) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n",
{noise:{type:"1f",value:.5}})}var g=e("../../core");a.prototype=Object.create(g.AbstractFilter.prototype);a.prototype.constructor=a;h.exports=a;Object.defineProperties(a.prototype,{noise:{get:function(){return this.uniforms.noise.value},set:function(a){this.uniforms.noise.value=a}}})},{"../../core":23}],99:[function(e,h,l){function a(){g.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 dimensions;\nuniform vec2 pixelSize;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord;\n\n    vec2 size = dimensions.xy / pixelSize;\n\n    vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;\n\n    gl_FragColor = texture2D(uSampler, color);\n}\n",
{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"v2",value:{x:10,y:10}}})}var g=e("../../core");a.prototype=Object.create(g.AbstractFilter.prototype);a.prototype.constructor=a;h.exports=a;Object.defineProperties(a.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(a){this.uniforms.pixelSize.value=a}}})},{"../../core":23}],100:[function(e,h,l){function a(){g.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 dimensions;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n",
{red:{type:"v2",value:{x:20,y:20}},green:{type:"v2",value:{x:-20,y:20}},blue:{type:"v2",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}})}var g=e("../../core");a.prototype=Object.create(g.AbstractFilter.prototype);a.prototype.constructor=a;h.exports=a;Object.defineProperties(a.prototype,{red:{get:function(){return this.uniforms.red.value},set:function(a){this.uniforms.red.value=a}},green:{get:function(){return this.uniforms.green.value},set:function(a){this.uniforms.green.value=a}},blue:{get:function(){return this.uniforms.blue.value},
set:function(a){this.uniforms.blue.value=a}}})},{"../../core":23}],101:[function(e,h,l){function a(){g.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float sepia;\n\nconst mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);\n}\n",
{sepia:{type:"1f",value:1}})}var g=e("../../core");a.prototype=Object.create(g.AbstractFilter.prototype);a.prototype.constructor=a;h.exports=a;Object.defineProperties(a.prototype,{sepia:{get:function(){return this.uniforms.sepia.value},set:function(a){this.uniforms.sepia.value=a}}})},{"../../core":23}],102:[function(e,h,l){function a(){g.AbstractFilter.call(this,null,"precision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nuniform vec2 center;\nuniform vec3 params; // 10.0, 0.8, 0.1\nuniform float time;\n\nvoid main()\n{\n    vec2 uv = vTextureCoord;\n    vec2 texCoord = uv;\n\n    float dist = distance(uv, center);\n\n    if ( (dist <= (time + params.z)) && (dist >= (time - params.z)) )\n    {\n        float diff = (dist - time);\n        float powDiff = 1.0 - pow(abs(diff*params.x), params.y);\n\n        float diffTime = diff  * powDiff;\n        vec2 diffUV = normalize(uv - center);\n        texCoord = uv + (diffUV * diffTime);\n    }\n\n    gl_FragColor = texture2D(uSampler, texCoord);\n}\n",
{center:{type:"v2",value:{x:.5,y:.5}},params:{type:"v3",value:{x:10,y:.8,z:.1}},time:{type:"1f",value:0}})}var g=e("../../core");a.prototype=Object.create(g.AbstractFilter.prototype);a.prototype.constructor=a;h.exports=a;Object.defineProperties(a.prototype,{center:{get:function(){return this.uniforms.center.value},set:function(a){this.uniforms.center.value=a}},params:{get:function(){return this.uniforms.params.value},set:function(a){this.uniforms.params.value=a}},time:{get:function(){return this.uniforms.time.value},
set:function(a){this.uniforms.time.value=a}}})},{"../../core":23}],103:[function(e,h,l){function a(){g.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",
{blur:{type:"1f",value:100},gradientBlur:{type:"1f",value:600},start:{type:"v2",value:{x:0,y:window.innerHeight/2}},end:{type:"v2",value:{x:600,y:window.innerHeight/2}},delta:{type:"v2",value:{x:30,y:30}},texSize:{type:"v2",value:{x:window.innerWidth,y:window.innerHeight}}});this.updateDelta()}var g=e("../../core");a.prototype=Object.create(g.AbstractFilter.prototype);a.prototype.constructor=a;h.exports=a;a.prototype.updateDelta=function(){this.uniforms.delta.value.x=0;this.uniforms.delta.value.y=
0};Object.defineProperties(a.prototype,{blur:{get:function(){return this.uniforms.blur.value},set:function(a){this.uniforms.blur.value=a}},gradientBlur:{get:function(){return this.uniforms.gradientBlur.value},set:function(a){this.uniforms.gradientBlur.value=a}},start:{get:function(){return this.uniforms.start.value},set:function(a){this.uniforms.start.value=a;this.updateDelta()}},end:{get:function(){return this.uniforms.end.value},set:function(a){this.uniforms.end.value=a;this.updateDelta()}}})},
{"../../core":23}],104:[function(e,h,l){function a(){g.AbstractFilter.call(this);this.tiltShiftXFilter=new c;this.tiltShiftYFilter=new f}var g=e("../../core"),c=e("./TiltShiftXFilter"),f=e("./TiltShiftYFilter");a.prototype=Object.create(g.AbstractFilter.prototype);a.prototype.constructor=a;h.exports=a;a.prototype.applyFilter=function(a,c,f){var e=a.filterManager.getRenderTarget(!0);this.tiltShiftXFilter.applyFilter(a,c,e);this.tiltShiftYFilter.applyFilter(a,e,f);a.filterManager.returnRenderTarget(e)};
Object.defineProperties(a.prototype,{blur:{get:function(){return this.tiltShiftXFilter.blur},set:function(a){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=a}},gradientBlur:{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(a){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=a}},start:{get:function(){return this.tiltShiftXFilter.start},set:function(a){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=a}},end:{get:function(){return this.tiltShiftXFilter.end},
set:function(a){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=a}}})},{"../../core":23,"./TiltShiftXFilter":105,"./TiltShiftYFilter":106}],105:[function(e,h,l){function a(){g.call(this)}var g=e("./TiltShiftAxisFilter");a.prototype=Object.create(g.prototype);a.prototype.constructor=a;h.exports=a;a.prototype.updateDelta=function(){var a=this.uniforms.end.value.x-this.uniforms.start.value.x,f=this.uniforms.end.value.y-this.uniforms.start.value.y,b=Math.sqrt(a*a+f*f);this.uniforms.delta.value.x=
a/b;this.uniforms.delta.value.y=f/b}},{"./TiltShiftAxisFilter":103}],106:[function(e,h,l){function a(){g.call(this)}var g=e("./TiltShiftAxisFilter");a.prototype=Object.create(g.prototype);a.prototype.constructor=a;h.exports=a;a.prototype.updateDelta=function(){var a=this.uniforms.end.value.x-this.uniforms.start.value.x,f=this.uniforms.end.value.y-this.uniforms.start.value.y,b=Math.sqrt(a*a+f*f);this.uniforms.delta.value.x=-f/b;this.uniforms.delta.value.y=a/b}},{"./TiltShiftAxisFilter":103}],107:[function(e,
h,l){function a(){g.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\n\nvoid main(void)\n{\n   vec2 coord = vTextureCoord - offset;\n   float dist = length(coord);\n\n   if (dist < radius)\n   {\n       float ratio = (radius - dist) / radius;\n       float angleMod = ratio * ratio * angle;\n       float s = sin(angleMod);\n       float c = cos(angleMod);\n       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n   }\n\n   gl_FragColor = texture2D(uSampler, coord+offset);\n}\n",
{radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"v2",value:{x:.5,y:.5}}})}var g=e("../../core");a.prototype=Object.create(g.AbstractFilter.prototype);a.prototype.constructor=a;h.exports=a;Object.defineProperties(a.prototype,{offset:{get:function(){return this.uniforms.offset.value},set:function(a){this.uniforms.offset.value=a}},radius:{get:function(){return this.uniforms.radius.value},set:function(a){this.uniforms.radius.value=a}},angle:{get:function(){return this.uniforms.angle.value},
set:function(a){this.uniforms.angle.value=a}}})},{"../../core":23}],108:[function(e,h,l){l="undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};e("./polyfill");h=h.exports=e("./core");h.extras=e("./extras");h.filters=e("./filters");h.interaction=e("./interaction");h.loaders=e("./loaders");h.mesh=e("./mesh");h.accessibility=e("./accessibility");h.loader=new h.loaders.Loader;Object.assign(h,e("./deprecation"));l.PIXI=h},{"./accessibility":15,"./core":23,
"./deprecation":72,"./extras":79,"./filters":96,"./interaction":111,"./loaders":114,"./mesh":121,"./polyfill":126}],109:[function(e,h,l){function a(){this.global=new g.Point;this.originalEvent=this.target=null}var g=e("../core");a.prototype.constructor=a;h.exports=a;a.prototype.getLocalPosition=function(a,f,b){return a.worldTransform.applyInverse(b||this.global,f)}},{"../core":23}],110:[function(e,h,l){function a(a,b){b=b||{};this.renderer=a;this.autoPreventDefault=void 0!==b.autoPreventDefault?b.autoPreventDefault:
!0;this.interactionFrequency=b.interactionFrequency||10;this.mouse=new c;this.eventData={stopped:!1,target:null,type:null,data:this.mouse,stopPropagation:function(){this.stopped=!0}};this.interactiveDataPool=[];this.interactionDOMElement=null;this.eventsAdded=!1;this.onMouseUp=this.onMouseUp.bind(this);this.processMouseUp=this.processMouseUp.bind(this);this.onMouseDown=this.onMouseDown.bind(this);this.processMouseDown=this.processMouseDown.bind(this);this.onMouseMove=this.onMouseMove.bind(this);this.processMouseMove=
this.processMouseMove.bind(this);this.onMouseOut=this.onMouseOut.bind(this);this.processMouseOverOut=this.processMouseOverOut.bind(this);this.onTouchStart=this.onTouchStart.bind(this);this.processTouchStart=this.processTouchStart.bind(this);this.onTouchEnd=this.onTouchEnd.bind(this);this.processTouchEnd=this.processTouchEnd.bind(this);this.onTouchMove=this.onTouchMove.bind(this);this.processTouchMove=this.processTouchMove.bind(this);this.last=0;this.currentCursorStyle="inherit";this._tempPoint=new g.Point;
this.resolution=1;this.setTargetElement(this.renderer.view,this.renderer.resolution)}var g=e("../core"),c=e("./InteractionData");Object.assign(g.DisplayObject.prototype,e("./interactiveTarget"));a.prototype.constructor=a;h.exports=a;a.prototype.setTargetElement=function(a,b){this.removeEvents();this.interactionDOMElement=a;this.resolution=b||1;this.addEvents()};a.prototype.addEvents=function(){this.interactionDOMElement&&(g.ticker.shared.add(this.update,this),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]=
"none",this.interactionDOMElement.style["-ms-touch-action"]="none"),window.document.addEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.addEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.addEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.addEventListener("touchmove",this.onTouchMove,
!0),window.addEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!0)};a.prototype.removeEvents=function(){this.interactionDOMElement&&(g.ticker.shared.remove(this.update),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""),window.document.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",
this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!1)};a.prototype.update=function(a){this._deltaTime+=a;this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.interactionDOMElement&&
(this.didMove?this.didMove=!1:(this.cursor="inherit",this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor))))};a.prototype.dispatchEvent=function(a,b,c){if(!c.stopped&&(c.target=a,c.type=b,a.emit(b,c),a[b]))a[b](c)};a.prototype.mapPositionToPoint=function(a,b,c){var e;try{e=this.interactionDOMElement.getBoundingClientRect()}catch(g){e=
{left:0,top:0}}a.x=this.interactionDOMElement.width/e.width*(b-e.left)/this.resolution;a.y=this.interactionDOMElement.height/e.height*(c-e.top)/this.resolution};a.prototype.processInteractive=function(a,b,c,e,g){if(!b||!b.visible)return!1;var h=!1,p=g=b.interactive||g;b.hitArea&&(p=!1);if(b.interactiveChildren)for(var l=b.children,q=l.length-1;0<=q;q--){var n=l[q];this.processInteractive(a,n,c,e,p)&&n.parent&&(h=!0,e=p=!1)}g&&(e&&!h&&(b.hitArea?(b.worldTransform.applyInverse(a,this._tempPoint),h=
b.hitArea.contains(this._tempPoint.x,this._tempPoint.y)):b.containsPoint&&(h=b.containsPoint(a))),b.interactive&&c(b,h));return h};a.prototype.onMouseDown=function(a){this.mouse.originalEvent=a;this.eventData.data=this.mouse;this.eventData.stopped=!1;this.mapPositionToPoint(this.mouse.global,a.clientX,a.clientY);this.autoPreventDefault&&this.mouse.originalEvent.preventDefault();this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseDown,!0)};a.prototype.processMouseDown=
function(a,b){var c=this.mouse.originalEvent,c=2===c.button||3===c.which;b&&(a[c?"_isRightDown":"_isLeftDown"]=!0,this.dispatchEvent(a,c?"rightdown":"mousedown",this.eventData))};a.prototype.onMouseUp=function(a){this.mouse.originalEvent=a;this.eventData.data=this.mouse;this.eventData.stopped=!1;this.mapPositionToPoint(this.mouse.global,a.clientX,a.clientY);this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseUp,!0)};a.prototype.processMouseUp=function(a,b){var c=
this.mouse.originalEvent,e=(c=2===c.button||3===c.which)?"_isRightDown":"_isLeftDown";b?(this.dispatchEvent(a,c?"rightup":"mouseup",this.eventData),a[e]&&(a[e]=!1,this.dispatchEvent(a,c?"rightclick":"click",this.eventData))):a[e]&&(a[e]=!1,this.dispatchEvent(a,c?"rightupoutside":"mouseupoutside",this.eventData))};a.prototype.onMouseMove=function(a){this.mouse.originalEvent=a;this.eventData.data=this.mouse;this.eventData.stopped=!1;this.mapPositionToPoint(this.mouse.global,a.clientX,a.clientY);this.didMove=
!0;this.cursor="inherit";this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseMove,!0);this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)};a.prototype.processMouseMove=function(a,b){this.dispatchEvent(a,"mousemove",this.eventData);this.processMouseOverOut(a,b)};a.prototype.onMouseOut=function(a){this.mouse.originalEvent=a;this.eventData.stopped=!1;this.mapPositionToPoint(this.mouse.global,
a.clientX,a.clientY);this.interactionDOMElement.style.cursor="inherit";this.mapPositionToPoint(this.mouse.global,a.clientX,a.clientY);this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!1)};a.prototype.processMouseOverOut=function(a,b){b?(a._over||(a._over=!0,this.dispatchEvent(a,"mouseover",this.eventData)),a.buttonMode&&(this.cursor=a.defaultCursor)):a._over&&(a._over=!1,this.dispatchEvent(a,"mouseout",this.eventData))};a.prototype.onTouchStart=
function(a){this.autoPreventDefault&&a.preventDefault();for(var b=a.changedTouches,c=b.length,e=0;e<c;e++){var g=this.getTouchData(b[e]);g.originalEvent=a;this.eventData.data=g;this.eventData.stopped=!1;this.processInteractive(g.global,this.renderer._lastObjectRendered,this.processTouchStart,!0);this.returnTouchData(g)}};a.prototype.processTouchStart=function(a,b){b&&(a._touchDown=!0,this.dispatchEvent(a,"touchstart",this.eventData))};a.prototype.onTouchEnd=function(a){this.autoPreventDefault&&a.preventDefault();
for(var b=a.changedTouches,c=b.length,e=0;e<c;e++){var g=this.getTouchData(b[e]);g.originalEvent=a;this.eventData.data=g;this.eventData.stopped=!1;this.processInteractive(g.global,this.renderer._lastObjectRendered,this.processTouchEnd,!0);this.returnTouchData(g)}};a.prototype.processTouchEnd=function(a,b){b?(this.dispatchEvent(a,"touchend",this.eventData),a._touchDown&&(a._touchDown=!1,this.dispatchEvent(a,"tap",this.eventData))):a._touchDown&&(a._touchDown=!1,this.dispatchEvent(a,"touchendoutside",
this.eventData))};a.prototype.onTouchMove=function(a){this.autoPreventDefault&&a.preventDefault();for(var b=a.changedTouches,c=b.length,e=0;e<c;e++){var g=this.getTouchData(b[e]);g.originalEvent=a;this.eventData.data=g;this.eventData.stopped=!1;this.processInteractive(g.global,this.renderer._lastObjectRendered,this.processTouchMove,!0);this.returnTouchData(g)}};a.prototype.processTouchMove=function(a,b){this.dispatchEvent(a,"touchmove",this.eventData)};a.prototype.getTouchData=function(a){var b=this.interactiveDataPool.pop();
b||(b=new c);b.identifier=a.identifier;this.mapPositionToPoint(b.global,a.clientX,a.clientY);navigator.isCocoonJS&&(b.global.x/=this.resolution,b.global.y/=this.resolution);a.globalX=b.global.x;a.globalY=b.global.y;return b};a.prototype.returnTouchData=function(a){this.interactiveDataPool.push(a)};a.prototype.destroy=function(){this.removeEvents();this._tempPoint=this.processTouchMove=this.onTouchMove=this.processTouchEnd=this.onTouchEnd=this.processTouchStart=this.onTouchStart=this.processMouseOverOut=
this.onMouseOut=this.processMouseMove=this.onMouseMove=this.processMouseDown=this.onMouseDown=this.processMouseUp=this.onMouseUp=this.interactionDOMElement=this.interactiveDataPool=this.eventData=this.mouse=this.renderer=null};g.WebGLRenderer.registerPlugin("interaction",a);g.CanvasRenderer.registerPlugin("interaction",a)},{"../core":23,"./InteractionData":109,"./interactiveTarget":112}],111:[function(e,h,l){h.exports={InteractionData:e("./InteractionData"),InteractionManager:e("./InteractionManager"),
interactiveTarget:e("./interactiveTarget")}},{"./InteractionData":109,"./InteractionManager":110,"./interactiveTarget":112}],112:[function(e,h,l){h.exports={interactive:!1,buttonMode:!1,interactiveChildren:!0,defaultCursor:"pointer",_over:!1,_touchDown:!1}},{}],113:[function(e,h,l){function a(a,b){var e={},g=a.data.getElementsByTagName("info")[0],h=a.data.getElementsByTagName("common")[0];e.font=g.getAttribute("face");e.size=parseInt(g.getAttribute("size"),10);e.lineHeight=parseInt(h.getAttribute("lineHeight"),
10);e.chars={};h=a.data.getElementsByTagName("char");for(g=0;g<h.length;g++){var l=parseInt(h[g].getAttribute("id"),10),q=new c.Rectangle(parseInt(h[g].getAttribute("x"),10)+b.frame.x,parseInt(h[g].getAttribute("y"),10)+b.frame.y,parseInt(h[g].getAttribute("width"),10),parseInt(h[g].getAttribute("height"),10));e.chars[l]={xOffset:parseInt(h[g].getAttribute("xoffset"),10),yOffset:parseInt(h[g].getAttribute("yoffset"),10),xAdvance:parseInt(h[g].getAttribute("xadvance"),10),kerning:{},texture:new c.Texture(b.baseTexture,
q)}}h=a.data.getElementsByTagName("kerning");for(g=0;g<h.length;g++){var l=parseInt(h[g].getAttribute("first"),10),q=parseInt(h[g].getAttribute("second"),10),n=parseInt(h[g].getAttribute("amount"),10);e.chars[q].kerning[l]=n}a.bitmapFont=e;f.BitmapText.fonts[e.font]=e}var g=e("resource-loader").Resource,c=e("../core"),f=e("../extras"),b=e("path");h.exports=function(){return function(d,f){if(!d.data||!d.isXml||0===d.data.getElementsByTagName("page").length||0===d.data.getElementsByTagName("info").length||
null===d.data.getElementsByTagName("info")[0].getAttribute("face"))return f();var e=b.dirname(d.url);"."===e&&(e="");this.baseUrl&&e&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(e+="/"),e=e.replace(this.baseUrl,""));e&&"/"!==e.charAt(e.length-1)&&(e+="/");e+=d.data.getElementsByTagName("page")[0].getAttribute("file");c.utils.TextureCache[e]?(a(d,c.utils.TextureCache[e]),f()):this.add(d.name+"_image",e,{crossOrigin:d.crossOrigin,loadType:g.LOAD_TYPE.IMAGE,metadata:d.metadata.imageMetadata},
function(b){a(d,b.texture);f()})}}},{"../core":23,"../extras":79,path:2,"resource-loader":133}],114:[function(e,h,l){h.exports={Loader:e("./loader"),bitmapFontParser:e("./bitmapFontParser"),spritesheetParser:e("./spritesheetParser"),textureParser:e("./textureParser"),Resource:e("resource-loader").Resource}},{"./bitmapFontParser":113,"./loader":115,"./spritesheetParser":116,"./textureParser":117,"resource-loader":133}],115:[function(e,h,l){function a(c,b){g.call(this,c,b);for(var d=0;d<a._pixiMiddleware.length;++d)this.use(a._pixiMiddleware[d]())}
var g=e("resource-loader");l=e("./textureParser");var c=e("./spritesheetParser");e=e("./bitmapFontParser");a.prototype=Object.create(g.prototype);a.prototype.constructor=a;h.exports=a;a._pixiMiddleware=[g.middleware.parsing.blob,l,c,e];a.addPixiMiddleware=function(c){a._pixiMiddleware.push(c)};h=g.Resource;h.setExtensionXhrType("fnt",h.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":113,"./spritesheetParser":116,"./textureParser":117,"resource-loader":133}],116:[function(e,h,l){var a=e("resource-loader").Resource,
g=e("path"),c=e("../core");h.exports=function(){return function(f,b){if(!f.data||!f.isJson||!f.data.frames)return b();var d={crossOrigin:f.crossOrigin,loadType:a.LOAD_TYPE.IMAGE,metadata:f.metadata.imageMetadata},e=g.dirname(f.url.replace(this.baseUrl,"")),h=c.utils.getResolutionOfUrl(f.url);this.add(f.name+"_image",e+"/"+f.data.meta.image,d,function(a){f.textures={};var d=f.data.frames,e;for(e in d){var g=d[e].frame;if(g){var k=null,g=d[e].rotated?new c.Rectangle(g.x,g.y,g.h,g.w):new c.Rectangle(g.x,
g.y,g.w,g.h);d[e].trimmed&&(k=new c.Rectangle(d[e].spriteSourceSize.x/h,d[e].spriteSourceSize.y/h,d[e].sourceSize.w/h,d[e].sourceSize.h/h));if(d[e].rotated){var l=g.width;g.width=g.height;g.height=l}g.x/=h;g.y/=h;g.width/=h;g.height/=h;f.textures[e]=new c.Texture(a.texture.baseTexture,g,g.clone(),k,d[e].rotated);c.utils.TextureCache[e]=f.textures[e]}}b()})}}},{"../core":23,path:2,"resource-loader":133}],117:[function(e,h,l){var a=e("../core");h.exports=function(){return function(e,c){if(e.data&&e.isImage){var f=
new a.BaseTexture(e.data,null,a.utils.getResolutionOfUrl(e.url));f.imageUrl=e.url;e.texture=new a.Texture(f);a.utils.BaseTextureCache[e.url]=f;a.utils.TextureCache[e.url]=e.texture}c()}}},{"../core":23}],118:[function(e,h,l){function a(b,c,f,e,h){g.Container.call(this);this._texture=null;this.uvs=f||new Float32Array([0,0,1,0,1,1,0,1]);this.vertices=c||new Float32Array([0,0,100,0,100,100,0,100]);this.indices=e||new Uint16Array([0,1,3,2]);this.dirty=!0;this.blendMode=g.BLEND_MODES.NORMAL;this.canvasPadding=
0;this.drawMode=h||a.DRAW_MODES.TRIANGLE_MESH;this.texture=b;this.shader=null}var g=e("../core"),c=new g.Point,f=new g.Polygon;a.prototype=Object.create(g.Container.prototype);a.prototype.constructor=a;h.exports=a;Object.defineProperties(a.prototype,{texture:{get:function(){return this._texture},set:function(a){if(this._texture!==a&&(this._texture=a))if(a.baseTexture.hasLoaded)this._onTextureUpdate();else a.once("update",this._onTextureUpdate,this)}}});a.prototype._renderWebGL=function(a){a.setObjectRenderer(a.plugins.mesh);
a.plugins.mesh.render(this)};a.prototype._renderCanvas=function(b){var c=b.context,f=this.worldTransform;b.roundPixels?c.setTransform(f.a,f.b,f.c,f.d,f.tx|0,f.ty|0):c.setTransform(f.a,f.b,f.c,f.d,f.tx,f.ty);this.drawMode===a.DRAW_MODES.TRIANGLE_MESH?this._renderCanvasTriangleMesh(c):this._renderCanvasTriangles(c)};a.prototype._renderCanvasTriangleMesh=function(a){for(var c=this.vertices,f=this.uvs,e=c.length/2,g=0;g<e-2;g++){var h=2*g;this._renderCanvasDrawTriangle(a,c,f,h,h+2,h+4)}};a.prototype._renderCanvasTriangles=
function(a){for(var c=this.vertices,f=this.uvs,e=this.indices,g=e.length,h=0;h<g;h+=3)this._renderCanvasDrawTriangle(a,c,f,2*e[h],2*e[h+1],2*e[h+2])};a.prototype._renderCanvasDrawTriangle=function(a,c,f,e,g,h){var l=this._texture.baseTexture.source,q=this._texture.baseTexture.width,n=this._texture.baseTexture.height,t=c[e],E=c[g],z=c[h],y=c[e+1],w=c[g+1];c=c[h+1];var D=f[e]*q,I=f[g]*q,q=f[h]*q;e=f[e+1]*n;g=f[g+1]*n;f=f[h+1]*n;if(0<this.canvasPadding){h=this.canvasPadding/this.worldTransform.a;var n=
this.canvasPadding/this.worldTransform.d,L=(t+E+z)/3,F=(y+w+c)/3,v=t-L,M=y-F,A=Math.sqrt(v*v+M*M),t=L+v/A*(A+h),y=F+M/A*(A+n),v=E-L,M=w-F,A=Math.sqrt(v*v+M*M),E=L+v/A*(A+h),w=F+M/A*(A+n),v=z-L,M=c-F,A=Math.sqrt(v*v+M*M),z=L+v/A*(A+h);c=F+M/A*(A+n)}a.save();a.beginPath();a.moveTo(t,y);a.lineTo(E,w);a.lineTo(z,c);a.closePath();a.clip();h=D*g+e*q+I*f-g*q-e*I-D*f;a.transform((t*g+e*z+E*f-g*z-e*E-t*f)/h,(y*g+e*c+w*f-g*c-e*w-y*f)/h,(D*E+t*q+I*z-E*q-t*I-D*z)/h,(D*w+y*q+I*c-w*q-y*I-D*c)/h,(D*g*z+e*E*q+t*
I*f-t*g*q-e*I*z-D*E*f)/h,(D*g*c+e*w*q+y*I*f-y*g*q-e*I*c-D*w*f)/h);a.drawImage(l,0,0);a.restore()};a.prototype.renderMeshFlat=function(a){var c=this.context;a=a.vertices;var f=a.length/2;c.beginPath();for(var e=1;e<f-2;e++){var g=2*e,h=a[g+2],l=a[g+4],q=a[g+3],n=a[g+5];c.moveTo(a[g],a[g+1]);c.lineTo(h,q);c.lineTo(l,n)}c.fillStyle="#FF0000";c.fill();c.closePath()};a.prototype._onTextureUpdate=function(){this.updateFrame=!0};a.prototype.getBounds=function(a){if(!this._currentBounds){var c=a||this.worldTransform;
a=c.a;for(var f=c.b,e=c.c,h=c.d,l=c.tx,B=c.ty,q=c=-Infinity,n=Infinity,t=Infinity,E=this.vertices,z=0,y=E.length;z<y;z+=2)var w=E[z],D=E[z+1],I=a*w+e*D+l,w=h*D+f*w+B,n=I<n?I:n,t=w<t?w:t,c=I>c?I:c,q=w>q?w:q;if(-Infinity===n||Infinity===q)return g.Rectangle.EMPTY;a=this._bounds;a.x=n;a.width=c-n;a.y=t;a.height=q-t;this._currentBounds=a}return this._currentBounds};a.prototype.containsPoint=function(b){if(!this.getBounds().contains(b.x,b.y))return!1;this.worldTransform.applyInverse(b,c);b=this.vertices;
var d=f.points,e,g;if(this.drawMode===a.DRAW_MODES.TRIANGLES){var h=this.indices;g=this.indices.length;for(e=0;e<g;e+=3){var l=2*h[e],B=2*h[e+1],q=2*h[e+2];d[0]=b[l];d[1]=b[l+1];d[2]=b[B];d[3]=b[B+1];d[4]=b[q];d[5]=b[q+1];if(f.contains(c.x,c.y))return!0}}else for(g=b.length,e=0;e<g;e+=6)if(d[0]=b[e],d[1]=b[e+1],d[2]=b[e+2],d[3]=b[e+3],d[4]=b[e+4],d[5]=b[e+5],f.contains(c.x,c.y))return!0;return!1};a.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":23}],119:[function(e,h,l){function a(a,f,b){g.call(this,
a);this._ready=!0;this.segmentsX=f||10;this.segmentsY=b||10;this.drawMode=g.DRAW_MODES.TRIANGLES;this.refresh()}var g=e("./Mesh");a.prototype=Object.create(g.prototype);a.prototype.constructor=a;h.exports=a;a.prototype.refresh=function(){for(var a=this.segmentsX*this.segmentsY,f=[],b=[],d=[],e=this.texture,g=this.segmentsX-1,h=this.segmentsY-1,l=e.width/g,B=e.height/h,e=0;e<a;e++){var q=e%this.segmentsX,n=e/this.segmentsX|0;f.push(q*l,n*B);b.push(q/(this.segmentsX-1),n/(this.segmentsY-1))}a=g*h;for(e=
0;e<a;e++)h=e%g,l=e/g|0,B=l*this.segmentsX+h+1,q=(l+1)*this.segmentsX+h,n=(l+1)*this.segmentsX+h+1,d.push(l*this.segmentsX+h,B,q),d.push(B,n,q);this.vertices=new Float32Array(f);this.uvs=new Float32Array(b);this.colors=new Float32Array([]);this.indices=new Uint16Array(d)};a.prototype._onTextureUpdate=function(){g.prototype._onTextureUpdate.call(this);this._ready&&this.refresh()}},{"./Mesh":118}],120:[function(e,h,l){function a(a,b){g.call(this,a);this.points=b;this.vertices=new Float32Array(4*b.length);
this.uvs=new Float32Array(4*b.length);this.colors=new Float32Array(2*b.length);this.indices=new Uint16Array(2*b.length);this._ready=!0;this.refresh()}var g=e("./Mesh"),c=e("../core");a.prototype=Object.create(g.prototype);a.prototype.constructor=a;h.exports=a;a.prototype.refresh=function(){var a=this.points;if(!(1>a.length)&&this._texture._uvs){var b=this.uvs,d=this.indices,e=this.colors,g=this._texture._uvs,h=new c.Point(g.x0,g.y0),g=new c.Point(g.x2-g.x0,g.y2-g.y0);b[0]=0+h.x;b[1]=0+h.y;b[2]=0+
h.x;b[3]=1*g.y+h.y;e[0]=1;e[1]=1;d[0]=0;d[1]=1;for(var a=a.length,l,B,q=1;q<a;q++)l=4*q,B=q/(a-1),b[l]=B*g.x+h.x,b[l+1]=0+h.y,b[l+2]=B*g.x+h.x,b[l+3]=1*g.y+h.y,l=2*q,e[l]=1,e[l+1]=1,l=2*q,d[l]=l,d[l+1]=l+1;this.dirty=!0}};a.prototype._onTextureUpdate=function(){g.prototype._onTextureUpdate.call(this);this._ready&&this.refresh()};a.prototype.updateTransform=function(){var a=this.points;if(!(1>a.length)){for(var b=a[0],c,e,g=this.vertices,h=a.length,l,B,q,n=0;n<h;n++)l=a[n],B=4*n,c=n<a.length-1?a[n+
1]:l,e=-(c.x-b.x),b=c.y-b.y,c=Math.sqrt(b*b+e*e),q=this._texture.height/2,b/=c,e/=c,b*=q,e*=q,g[B]=l.x+b,g[B+1]=l.y+e,g[B+2]=l.x-b,g[B+3]=l.y-e,b=l;this.containerUpdateTransform()}}},{"../core":23,"./Mesh":118}],121:[function(e,h,l){h.exports={Mesh:e("./Mesh"),Plane:e("./Plane"),Rope:e("./Rope"),MeshRenderer:e("./webgl/MeshRenderer"),MeshShader:e("./webgl/MeshShader")}},{"./Mesh":118,"./Plane":119,"./Rope":120,"./webgl/MeshRenderer":122,"./webgl/MeshShader":123}],122:[function(e,h,l){function a(a){g.ObjectRenderer.call(this,
a);this.indices=new Uint16Array(15E3);for(var b=a=0;15E3>a;a+=6,b+=4)this.indices[a+0]=b+0,this.indices[a+1]=b+1,this.indices[a+2]=b+2,this.indices[a+3]=b+0,this.indices[a+4]=b+2,this.indices[a+5]=b+3;this.currentShader=null}var g=e("../../core"),c=e("../Mesh");a.prototype=Object.create(g.ObjectRenderer.prototype);a.prototype.constructor=a;h.exports=a;g.WebGLRenderer.registerPlugin("mesh",a);a.prototype.onContextChange=function(){};a.prototype.render=function(a){a._vertexBuffer||this._initWebGL(a);
var b=this.renderer,d=b.gl,e=a._texture.baseTexture,g=a.shader,h=a.drawMode===c.DRAW_MODES.TRIANGLE_MESH?d.TRIANGLE_STRIP:d.TRIANGLES;b.blendModeManager.setBlendMode(a.blendMode);g=g?g.shaders[d.id]||g.getShader(b):b.shaderManager.plugins.meshShader;this.renderer.shaderManager.setShader(g);g.uniforms.translationMatrix.value=a.worldTransform.toArray(!0);g.uniforms.projectionMatrix.value=b.currentRenderTarget.projectionMatrix.toArray(!0);g.uniforms.alpha.value=a.worldAlpha;g.syncUniforms();a.dirty?
(a.dirty=!1,d.bindBuffer(d.ARRAY_BUFFER,a._vertexBuffer),d.bufferData(d.ARRAY_BUFFER,a.vertices,d.STATIC_DRAW),d.vertexAttribPointer(g.attributes.aVertexPosition,2,d.FLOAT,!1,0,0),d.bindBuffer(d.ARRAY_BUFFER,a._uvBuffer),d.bufferData(d.ARRAY_BUFFER,a.uvs,d.STATIC_DRAW),d.vertexAttribPointer(g.attributes.aTextureCoord,2,d.FLOAT,!1,0,0),d.activeTexture(d.TEXTURE0),e._glTextures[d.id]?d.bindTexture(d.TEXTURE_2D,e._glTextures[d.id]):this.renderer.updateTexture(e),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,a._indexBuffer),
d.bufferData(d.ELEMENT_ARRAY_BUFFER,a.indices,d.STATIC_DRAW)):(d.bindBuffer(d.ARRAY_BUFFER,a._vertexBuffer),d.bufferSubData(d.ARRAY_BUFFER,0,a.vertices),d.vertexAttribPointer(g.attributes.aVertexPosition,2,d.FLOAT,!1,0,0),d.bindBuffer(d.ARRAY_BUFFER,a._uvBuffer),d.vertexAttribPointer(g.attributes.aTextureCoord,2,d.FLOAT,!1,0,0),d.activeTexture(d.TEXTURE0),e._glTextures[d.id]?d.bindTexture(d.TEXTURE_2D,e._glTextures[d.id]):this.renderer.updateTexture(e),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,a._indexBuffer),
d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,a.indices));d.drawElements(h,a.indices.length,d.UNSIGNED_SHORT,0)};a.prototype._initWebGL=function(a){var b=this.renderer.gl;a._vertexBuffer=b.createBuffer();a._indexBuffer=b.createBuffer();a._uvBuffer=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,a._vertexBuffer);b.bufferData(b.ARRAY_BUFFER,a.vertices,b.DYNAMIC_DRAW);b.bindBuffer(b.ARRAY_BUFFER,a._uvBuffer);b.bufferData(b.ARRAY_BUFFER,a.uvs,b.STATIC_DRAW);a.colors&&(a._colorBuffer=b.createBuffer(),b.bindBuffer(b.ARRAY_BUFFER,
a._colorBuffer),b.bufferData(b.ARRAY_BUFFER,a.colors,b.STATIC_DRAW));b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,a._indexBuffer);b.bufferData(b.ELEMENT_ARRAY_BUFFER,a.indices,b.STATIC_DRAW)};a.prototype.flush=function(){};a.prototype.start=function(){this.currentShader=null};a.prototype.destroy=function(){g.ObjectRenderer.prototype.destroy.call(this)}},{"../../core":23,"../Mesh":118}],123:[function(e,h,l){function a(a){g.Shader.call(this,a,"precision lowp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}",
"precision lowp float;\nvarying vec2 vTextureCoord;\nuniform float alpha;\nuniform sampler2D uSampler;\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * alpha ;\n}",{alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aTextureCoord:0})}var g=e("../../core");a.prototype=Object.create(g.Shader.prototype);a.prototype.constructor=a;h.exports=a;g.ShaderManager.registerPlugin("meshShader",
a)},{"../../core":23}],124:[function(e,h,l){Math.sign||(Math.sign=function(a){a=+a;return 0===a||isNaN(a)?a:0<a?1:-1})},{}],125:[function(e,h,l){Object.assign||(Object.assign=e("object-assign"))},{"object-assign":11}],126:[function(e,h,l){e("./Object.assign");e("./requestAnimationFrame");e("./Math.sign")},{"./Math.sign":124,"./Object.assign":125,"./requestAnimationFrame":127}],127:[function(e,h,l){(function(a){Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()});if(!a.performance||
!a.performance.now){var e=Date.now();a.performance||(a.performance={});a.performance.now=function(){return Date.now()-e}}for(var c=Date.now(),f=["ms","moz","webkit","o"],b=0;b<f.length&&!a.requestAnimationFrame;++b)a.requestAnimationFrame=a[f[b]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[f[b]+"CancelAnimationFrame"]||a[f[b]+"CancelRequestAnimationFrame"];a.requestAnimationFrame||(a.requestAnimationFrame=function(a){if("function"!==typeof a)throw new TypeError(a+"is not a function");var b=Date.now(),
e=16+c-b;0>e&&(e=0);c=b;return setTimeout(function(){c=Date.now();a(performance.now())},e)});a.cancelAnimationFrame||(a.cancelAnimationFrame=function(a){clearTimeout(a)})}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],128:[function(e,h,l){(function(a){(function(){function e(a){var b=!1;return function(){if(b)throw Error("Callback was already called.");b=!0;a.apply(f,arguments)}}var c={},f,b;f=this;null!=f&&(b=f.async);c.noConflict=
function(){f.async=b;return c};var d=Object.prototype.toString,k=Array.isArray||function(a){return"[object Array]"===d.call(a)},m=function(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c+=1)b(a[c],c,a)},l=function(a,b){if(a.map)return a.map(b);var c=[];m(a,function(a,d,e){c.push(b(a,d,e))});return c},p=function(a,b,c){if(a.reduce)return a.reduce(b,c);m(a,function(a,d,e){c=b(c,a,d,e)});return c},B=function(a){if(Object.keys)return Object.keys(a);var b=[],c;for(c in a)a.hasOwnProperty(c)&&
b.push(c);return b};"undefined"!==typeof a&&a.nextTick?(c.nextTick=a.nextTick,c.setImmediate="undefined"!==typeof setImmediate?function(a){setImmediate(a)}:c.nextTick):(c.nextTick="function"===typeof setImmediate?function(a){setImmediate(a)}:function(a){setTimeout(a,0)},c.setImmediate=c.nextTick);c.each=function(a,b,c){function d(b){b?(c(b),c=function(){}):(f+=1,f>=a.length&&c())}c=c||function(){};if(!a.length)return c();var f=0;m(a,function(a){b(a,e(d))})};c.forEach=c.each;c.eachSeries=function(a,
b,c){c=c||function(){};if(!a.length)return c();var d=0,e=function(){b(a[d],function(b){b?(c(b),c=function(){}):(d+=1,d>=a.length?c():e())})};e()};c.forEachSeries=c.eachSeries;c.eachLimit=function(a,b,c,d){q(b).apply(null,[a,c,d])};c.forEachLimit=c.eachLimit;var q=function(a){return function(b,c,d){d=d||function(){};if(!b.length||0>=a)return d();var e=0,f=0,g=0;(function J(){if(e>=b.length)return d();for(;g<a&&f<b.length;)f+=1,g+=1,c(b[f-1],function(a){a?(d(a),d=function(){}):(e+=1,--g,e>=b.length?
d():J())})})()}},n=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[c.each].concat(b))}},t=function(a,b){return function(){var c=Array.prototype.slice.call(arguments);return b.apply(null,[q(a)].concat(c))}},E=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[c.eachSeries].concat(b))}},z=function(a,b,c,d){b=l(b,function(a,b){return{index:b,value:a}});if(d){var e=[];a(b,function(a,b){c(a.value,function(c,d){e[a.index]=
d;b(c)})},function(a){d(a,e)})}else a(b,function(a,b){c(a.value,function(a){b(a)})})};c.map=n(z);c.mapSeries=E(z);c.mapLimit=function(a,b,c,d){return t(b,z)(a,c,d)};c.reduce=function(a,b,d,e){c.eachSeries(a,function(a,c){d(b,a,function(a,d){b=d;c(a)})},function(a){e(a,b)})};c.inject=c.reduce;c.foldl=c.reduce;c.reduceRight=function(a,b,d,e){a=l(a,function(a){return a}).reverse();c.reduce(a,b,d,e)};c.foldr=c.reduceRight;var y=function(a,b,c,d){var e=[];b=l(b,function(a,b){return{index:b,value:a}});
a(b,function(a,b){c(a.value,function(c){c&&e.push(a);b()})},function(a){d(l(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};c.filter=n(y);c.filterSeries=E(y);c.select=c.filter;c.selectSeries=c.filterSeries;y=function(a,b,c,d){var e=[];b=l(b,function(a,b){return{index:b,value:a}});a(b,function(a,b){c(a.value,function(c){c||e.push(a);b()})},function(a){d(l(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};c.reject=n(y);c.rejectSeries=E(y);
y=function(a,b,c,d){a(b,function(a,b){c(a,function(c){c?(d(a),d=function(){}):b()})},function(a){d()})};c.detect=n(y);c.detectSeries=E(y);c.some=function(a,b,d){c.each(a,function(a,c){b(a,function(a){a&&(d(!0),d=function(){});c()})},function(a){d(!1)})};c.any=c.some;c.every=function(a,b,d){c.each(a,function(a,c){b(a,function(a){a||(d(!1),d=function(){});c()})},function(a){d(!0)})};c.all=c.every;c.sortBy=function(a,b,d){c.map(a,function(a,c){b(a,function(b,d){b?c(b):c(null,{value:a,criteria:d})})},
function(a,b){if(a)return d(a);d(null,l(b.sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),function(a){return a.value}))})};c.auto=function(a,b){b=b||function(){};var d=B(a),e=d.length;if(!e)return b();var f={},g=[],h=function(){e--;m(g.slice(0),function(a){a()})};g.unshift(function(){if(!e){var a=b;b=function(){};a(null,f)}});m(d,function(d){var e=k(a[d])?a[d]:[a[d]],l=function(a){var e=Array.prototype.slice.call(arguments,1);1>=e.length&&(e=e[0]);if(a){var g={};m(B(f),function(a){g[a]=
f[a]});g[d]=e;b(a,g);b=function(){}}else f[d]=e,c.setImmediate(h)},r=e.slice(0,Math.abs(e.length-1))||[],n=function(){return p(r,function(a,b){return a&&f.hasOwnProperty(b)},!0)&&!f.hasOwnProperty(d)};if(n())e[e.length-1](l,f);else{var q=function(){if(n()){a:for(var a=q,b=0;b<g.length;b+=1)if(g[b]===a){g.splice(b,1);break a}e[e.length-1](l,f)}};g.unshift(q)}})};c.retry=function(a,b,d){var e=[];"function"===typeof a&&(d=b,b=a,a=5);a=parseInt(a,10)||5;var f=function(f,g){for(var h=function(a,b){return function(c){a(function(a,
d){c(!a||b,{err:a,result:d})},g)}};a;)e.push(h(b,!--a));c.series(e,function(a,b){b=b[b.length-1];(f||d)(b.err,b.result)})};return d?f():f};c.waterfall=function(a,b){b=b||function(){};if(!k(a))return b(Error("First argument to waterfall must be an array of functions"));if(!a.length)return b();var d=function(a){return function(e){if(e)b.apply(null,arguments),b=function(){};else{var f=Array.prototype.slice.call(arguments,1),g=a.next();g?f.push(d(g)):f.push(b);c.setImmediate(function(){a.apply(null,f)})}}};
d(c.iterator(a))()};var w=function(a,b,c){c=c||function(){};if(k(b))a.map(b,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);1>=c.length&&(c=c[0]);b.call(null,a,c)})},c);else{var d={};a.each(B(b),function(a,c){b[a](function(b){var e=Array.prototype.slice.call(arguments,1);1>=e.length&&(e=e[0]);d[a]=e;c(b)})},function(a){c(a,d)})}};c.parallel=function(a,b){w({map:c.map,each:c.each},a,b)};c.parallelLimit=function(a,b,c){w({map:t(b,z),each:q(b)},a,c)};c.series=function(a,
b){b=b||function(){};if(k(a))c.mapSeries(a,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);1>=c.length&&(c=c[0]);b.call(null,a,c)})},b);else{var d={};c.eachSeries(B(a),function(b,c){a[b](function(a){var e=Array.prototype.slice.call(arguments,1);1>=e.length&&(e=e[0]);d[b]=e;c(a)})},function(a){b(a,d)})}};c.iterator=function(a){var b=function(c){var d=function(){a.length&&a[c].apply(null,arguments);return d.next()};d.next=function(){return c<a.length-1?b(c+1):null};return d};
return b(0)};c.apply=function(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b.concat(Array.prototype.slice.call(arguments)))}};y=function(a,b,c,d){var e=[];a(b,function(a,b){c(a,function(a,c){e=e.concat(c||[]);b(a)})},function(a){d(a,e)})};c.concat=n(y);c.concatSeries=E(y);c.whilst=function(a,b,d){a()?b(function(e){if(e)return d(e);c.whilst(a,b,d)}):d()};c.doWhilst=function(a,b,d){a(function(e){if(e)return d(e);var f=Array.prototype.slice.call(arguments,1);
b.apply(null,f)?c.doWhilst(a,b,d):d()})};c.until=function(a,b,d){a()?d():b(function(e){if(e)return d(e);c.until(a,b,d)})};c.doUntil=function(a,b,d){a(function(e){if(e)return d(e);var f=Array.prototype.slice.call(arguments,1);b.apply(null,f)?d():c.doUntil(a,b,d)})};c.queue=function(a,b){function d(a,b,e,f){a.started||(a.started=!0);k(b)||(b=[b]);if(0==b.length)return c.setImmediate(function(){a.drain&&a.drain()});m(b,function(b){b={data:b,callback:"function"===typeof f?f:null};e?a.tasks.unshift(b):
a.tasks.push(b);a.saturated&&a.tasks.length===a.concurrency&&a.saturated();c.setImmediate(a.process)})}void 0===b&&(b=1);var f=0,h={tasks:[],concurrency:b,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(a,b){d(h,a,!1,b)},kill:function(){h.drain=null;h.tasks=[]},unshift:function(a,b){d(h,a,!0,b)},process:function(){if(!h.paused&&f<h.concurrency&&h.tasks.length){var b=h.tasks.shift();h.empty&&0===h.tasks.length&&h.empty();f+=1;var c=e(function(){--f;b.callback&&b.callback.apply(b,
arguments);h.drain&&0===h.tasks.length+f&&h.drain();h.process()});a(b.data,c)}},length:function(){return h.tasks.length},running:function(){return f},idle:function(){return 0===h.tasks.length+f},pause:function(){!0!==h.paused&&(h.paused=!0,h.process())},resume:function(){!1!==h.paused&&(h.paused=!1,h.process())}};return h};c.priorityQueue=function(a,b){function d(a,b){return a.priority-b.priority}function e(a,b,c){for(var d=-1,f=a.length-1;d<f;){var g=d+(f-d+1>>>1);0<=c(b,a[g])?d=g:f=g-1}return d}
function f(a,b,g,h){a.started||(a.started=!0);k(b)||(b=[b]);if(0==b.length)return c.setImmediate(function(){a.drain&&a.drain()});m(b,function(b){b={data:b,priority:g,callback:"function"===typeof h?h:null};a.tasks.splice(e(a.tasks,b,d)+1,0,b);a.saturated&&a.tasks.length===a.concurrency&&a.saturated();c.setImmediate(a.process)})}var g=c.queue(a,b);g.push=function(a,b,c){f(g,a,b,c)};delete g.unshift;return g};c.cargo=function(a,b){var d=!1,e=[],f={tasks:e,payload:b,saturated:null,empty:null,drain:null,
drained:!0,push:function(a,d){k(a)||(a=[a]);m(a,function(a){e.push({data:a,callback:"function"===typeof d?d:null});f.drained=!1;f.saturated&&e.length===b&&f.saturated()});c.setImmediate(f.process)},process:function A(){if(!d)if(0===e.length)f.drain&&!f.drained&&f.drain(),f.drained=!0;else{var c="number"===typeof b?e.splice(0,b):e.splice(0,e.length),g=l(c,function(a){return a.data});f.empty&&f.empty();d=!0;a(g,function(){d=!1;var a=arguments;m(c,function(b){b.callback&&b.callback.apply(null,a)});A()})}},
length:function(){return e.length},running:function(){return d}};return f};y=function(a){return function(b){var c=Array.prototype.slice.call(arguments,1);b.apply(null,c.concat([function(b){var c=Array.prototype.slice.call(arguments,1);"undefined"!==typeof console&&(b?console.error&&console.error(b):console[a]&&m(c,function(b){console[a](b)}))}]))}};c.log=y("log");c.dir=y("dir");c.memoize=function(a,b){var d={},e={};b=b||function(a){return a};var f=function(){var f=Array.prototype.slice.call(arguments),
g=f.pop(),h=b.apply(null,f);h in d?c.nextTick(function(){g.apply(null,d[h])}):h in e?e[h].push(g):(e[h]=[g],a.apply(null,f.concat([function(){d[h]=arguments;var a=e[h];delete e[h];for(var b=0,c=a.length;b<c;b++)a[b].apply(null,arguments)}])))};f.memo=d;f.unmemoized=a;return f};c.unmemoize=function(a){return function(){return(a.unmemoized||a).apply(null,arguments)}};c.times=function(a,b,d){for(var e=[],f=0;f<a;f++)e.push(f);return c.map(e,b,d)};c.timesSeries=function(a,b,d){for(var e=[],f=0;f<a;f++)e.push(f);
return c.mapSeries(e,b,d)};c.seq=function(){var a=arguments;return function(){var b=this,d=Array.prototype.slice.call(arguments),e=d.pop();c.reduce(a,d,function(a,c,d){c.apply(b,a.concat([function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);d(a,b)}]))},function(a,c){e.apply(b,[a].concat(c))})}};c.compose=function(){return c.seq.apply(null,Array.prototype.reverse.call(arguments))};y=function(a,b){var c=function(){var c=this,d=Array.prototype.slice.call(arguments),e=d.pop();return a(b,
function(a,b){a.apply(c,d.concat([b]))},e)};if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return c.apply(this,d)}return c};c.applyEach=n(y);c.applyEachSeries=E(y);c.forever=function(a,b){function c(d){if(d){if(b)return b(d);throw d;}a(c)}c()};"undefined"!==typeof h&&h.exports?h.exports=c:f.async=c})()}).call(this,e("_process"))},{_process:3}],129:[function(e,h,l){function a(a,b,c){this.fn=a;this.context=b;this.once=c||!1}function g(){}var c="function"!==typeof Object.create?
"~":!1;g.prototype._events=void 0;g.prototype.listeners=function(a,b){var d=c?c+a:a,e=this._events&&this._events[d];if(b)return!!e;if(!e)return[];if(this._events[d].fn)return[this._events[d].fn];for(var e=0,g=this._events[d].length,h=Array(g);e<g;e++)h[e]=this._events[d][e].fn;return h};g.prototype.emit=function(a,b,d,e,g,h){var l=c?c+a:a;if(!this._events||!this._events[l])return!1;var l=this._events[l],B=arguments.length,q,n;if("function"===typeof l.fn){l.once&&this.removeListener(a,l.fn,void 0,
!0);switch(B){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,b),!0;case 3:return l.fn.call(l.context,b,d),!0;case 4:return l.fn.call(l.context,b,d,e),!0;case 5:return l.fn.call(l.context,b,d,e,g),!0;case 6:return l.fn.call(l.context,b,d,e,g,h),!0}n=1;for(q=Array(B-1);n<B;n++)q[n-1]=arguments[n];l.fn.apply(l.context,q)}else{var t=l.length,E;for(n=0;n<t;n++)switch(l[n].once&&this.removeListener(a,l[n].fn,void 0,!0),B){case 1:l[n].fn.call(l[n].context);break;case 2:l[n].fn.call(l[n].context,
b);break;case 3:l[n].fn.call(l[n].context,b,d);break;default:if(!q)for(E=1,q=Array(B-1);E<B;E++)q[E-1]=arguments[E];l[n].fn.apply(l[n].context,q)}}return!0};g.prototype.on=function(e,b,d){b=new a(b,d||this);e=c?c+e:e;this._events||(this._events=c?{}:Object.create(null));this._events[e]?this._events[e].fn?this._events[e]=[this._events[e],b]:this._events[e].push(b):this._events[e]=b;return this};g.prototype.once=function(e,b,d){b=new a(b,d||this,!0);e=c?c+e:e;this._events||(this._events=c?{}:Object.create(null));
this._events[e]?this._events[e].fn?this._events[e]=[this._events[e],b]:this._events[e].push(b):this._events[e]=b;return this};g.prototype.removeListener=function(a,b,d,e){a=c?c+a:a;if(!this._events||!this._events[a])return this;var g=this._events[a],h=[];if(b)if(g.fn)(g.fn!==b||e&&!g.once||d&&g.context!==d)&&h.push(g);else for(var l=0,B=g.length;l<B;l++)(g[l].fn!==b||e&&!g[l].once||d&&g[l].context!==d)&&h.push(g[l]);h.length?this._events[a]=1===h.length?h[0]:h:delete this._events[a];return this};
g.prototype.removeAllListeners=function(a){if(!this._events)return this;a?delete this._events[c?c+a:a]:this._events=c?{}:Object.create(null);return this};g.prototype.off=g.prototype.removeListener;g.prototype.addListener=g.prototype.on;g.prototype.setMaxListeners=function(){return this};g.prefixed=c;h.exports=g},{}],130:[function(e,h,l){function a(a,c){b.call(this);c=c||10;this.baseUrl=a||"";this.progress=0;this.loading=!1;this._progressChunk=0;this._beforeMiddleware=[];this._afterMiddleware=[];this._boundLoadResource=
this._loadResource.bind(this);this._boundOnLoad=this._onLoad.bind(this);this._buffer=[];this._numToLoad=0;this._queue=g.queue(this._boundLoadResource,c);this.resources={}}var g=e("async"),c=e("url"),f=e("./Resource"),b=e("eventemitter3");a.prototype=Object.create(b.prototype);a.prototype.constructor=a;h.exports=a;a.prototype.add=a.prototype.enqueue=function(a,b,c,e){if(Array.isArray(a)){for(b=0;b<a.length;++b)this.add(a[b]);return this}"object"===typeof a&&(e=b||a.callback||a.onComplete,c=a,b=a.url,
a=a.name||a.key||a.url);"string"!==typeof b&&(e=c,c=b,b=a);if("string"!==typeof b)throw Error("No url passed to add resource to loader.");"function"===typeof c&&(e=c,c=null);if(this.resources[a])throw Error('Resource with name "'+a+'" already exists.');b=this._handleBaseUrl(b);this.resources[a]=new f(a,b,c);if("function"===typeof e)this.resources[a].once("afterMiddleware",e);this._numToLoad++;this._queue.started?(this._queue.push(this.resources[a]),this._progressChunk=(100-this.progress)/(this._queue.length()+
this._queue.running())):(this._buffer.push(this.resources[a]),this._progressChunk=100/this._buffer.length);return this};a.prototype._handleBaseUrl=function(a){var b=c.parse(a);return b.protocol||0===b.pathname.indexOf("//")?a:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==a.charAt(0)?this.baseUrl+"/"+a:this.baseUrl+a};a.prototype.before=a.prototype.pre=function(a){this._beforeMiddleware.push(a);return this};a.prototype.after=a.prototype.use=function(a){this._afterMiddleware.push(a);
return this};a.prototype.reset=function(){this.progress=0;this.loading=!1;this._progressChunk=0;this._numToLoad=this._buffer.length=0;this._queue.kill();this._queue.started=!1;this.resources={}};a.prototype.load=function(a){if("function"===typeof a)this.once("complete",a);if(this._queue.started)return this;this.emit("start",this);for(a=0;a<this._buffer.length;++a)this._queue.push(this._buffer[a]);this._buffer.length=0;return this};a.prototype._loadResource=function(a,b){var c=this;a._dequeue=b;this._runMiddleware(a,
this._beforeMiddleware,function(){a.load(c._boundOnLoad)})};a.prototype._onComplete=function(){this.emit("complete",this,this.resources)};a.prototype._onLoad=function(a){this.progress+=this._progressChunk;this.emit("progress",this,a);this._runMiddleware(a,this._afterMiddleware,function(){a.emit("afterMiddleware",a);this._numToLoad--;0===this._numToLoad&&(this.progress=100,this._onComplete());a.error?this.emit("error",a.error,this,a):this.emit("load",this,a)});a._dequeue()};a.prototype._runMiddleware=
function(a,b,c){var e=this;g.eachSeries(b,function(b,c){b.call(e,a,c)},c.bind(this,a))};a.LOAD_TYPE=f.LOAD_TYPE;a.XHR_READY_STATE=f.XHR_READY_STATE;a.XHR_RESPONSE_TYPE=f.XHR_RESPONSE_TYPE},{"./Resource":131,async:128,eventemitter3:129,url:8}],131:[function(e,h,l){function a(a,b,c){f.call(this);c=c||{};if("string"!==typeof a||"string"!==typeof b)throw Error("Both name and url are required for constructing a resource.");this.name=a;this.url=b;this.isDataUrl=0===this.url.indexOf("data:");this.data=null;
this.crossOrigin=!0===c.crossOrigin?"anonymous":c.crossOrigin;this.loadType=c.loadType||this._determineLoadType();this.xhrType=c.xhrType;this.metadata=c.metadata||{};this.xhr=this.error=null;this.isVideo=this.isAudio=this.isImage=this.isXml=this.isJson=!1;this._dequeue=null;this._boundComplete=this.complete.bind(this);this._boundOnError=this._onError.bind(this);this._boundOnProgress=this._onProgress.bind(this);this._boundXhrOnError=this._xhrOnError.bind(this);this._boundXhrOnAbort=this._xhrOnAbort.bind(this);
this._boundXhrOnLoad=this._xhrOnLoad.bind(this);this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}function g(a){return a.toString().replace("object ","")}function c(a,b,c){b&&0===b.indexOf(".")&&(b=b.substring(1));b&&(a[b]=c)}var f=e("eventemitter3"),b=e("url"),d=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),k=null;a.prototype=Object.create(f.prototype);a.prototype.constructor=a;h.exports=a;a.prototype.complete=function(){this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",
this._boundOnError),this.data.removeEventListener("load",this._boundComplete),this.data.removeEventListener("progress",this._boundOnProgress),this.data.removeEventListener("canplaythrough",this._boundComplete));this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError),this.xhr.removeEventListener("abort",this._boundXhrOnAbort),this.xhr.removeEventListener("progress",this._boundOnProgress),this.xhr.removeEventListener("load",this._boundXhrOnLoad)):(this.xhr.onerror=
null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null));this.emit("complete",this)};a.prototype.load=function(b){this.emit("start",this);if(b)this.once("complete",b);if(!1===this.crossOrigin||"string"!==typeof this.crossOrigin)this.crossOrigin=this._determineCrossOrigin(this.url);switch(this.loadType){case a.LOAD_TYPE.IMAGE:this._loadImage();break;case a.LOAD_TYPE.AUDIO:this._loadElement("audio");break;case a.LOAD_TYPE.VIDEO:this._loadElement("video");break;default:d&&this.crossOrigin?
this._loadXdr():this._loadXhr()}};a.prototype._loadImage=function(){this.data=new Image;this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin);this.data.src=this.url;this.isImage=!0;this.data.addEventListener("error",this._boundOnError,!1);this.data.addEventListener("load",this._boundComplete,!1);this.data.addEventListener("progress",this._boundOnProgress,!1)};a.prototype._loadElement=function(a){this.data="audio"===a&&"undefined"!==typeof Audio?new Audio:document.createElement(a);if(null===this.data)this.error=
Error("Unsupported element "+a),this.complete();else{if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var b=0;b<this.url.length;++b)this.data.appendChild(this._createSource(a,this.url[b]));else this.data.appendChild(this._createSource(a,this.url));this["is"+a[0].toUpperCase()+a.substring(1)]=!0;this.data.addEventListener("error",this._boundOnError,!1);this.data.addEventListener("load",this._boundComplete,!1);this.data.addEventListener("progress",
this._boundOnProgress,!1);this.data.addEventListener("canplaythrough",this._boundComplete,!1);this.data.load()}};a.prototype._loadXhr=function(){"string"!==typeof this.xhrType&&(this.xhrType=this._determineXhrType());var b=this.xhr=new XMLHttpRequest;b.open("GET",this.url,!0);b.responseType=this.xhrType===a.XHR_RESPONSE_TYPE.JSON||this.xhrType===a.XHR_RESPONSE_TYPE.DOCUMENT?a.XHR_RESPONSE_TYPE.TEXT:this.xhrType;b.addEventListener("error",this._boundXhrOnError,!1);b.addEventListener("abort",this._boundXhrOnAbort,
!1);b.addEventListener("progress",this._boundOnProgress,!1);b.addEventListener("load",this._boundXhrOnLoad,!1);b.send()};a.prototype._loadXdr=function(){"string"!==typeof this.xhrType&&(this.xhrType=this._determineXhrType());var a=this.xhr=new XDomainRequest;a.timeout=5E3;a.onerror=this._boundXhrOnError;a.ontimeout=this._boundXdrOnTimeout;a.onprogress=this._boundOnProgress;a.onload=this._boundXhrOnLoad;a.open("GET",this.url,!0);setTimeout(function(){a.send()},0)};a.prototype._createSource=function(a,
b,c){c||(c=a+"/"+b.substr(b.lastIndexOf(".")+1));a=document.createElement("source");a.src=b;a.type=c;return a};a.prototype._onError=function(a){this.error=Error("Failed to load element using "+a.target.nodeName);this.complete()};a.prototype._onProgress=function(a){a&&a.lengthComputable&&this.emit("progress",this,a.loaded/a.total)};a.prototype._xhrOnError=function(){this.error=Error(g(this.xhr)+" Request failed. Status: "+this.xhr.status+', text: "'+this.xhr.statusText+'"');this.complete()};a.prototype._xhrOnAbort=
function(){this.error=Error(g(this.xhr)+" Request was aborted by the user.");this.complete()};a.prototype._xdrOnTimeout=function(){this.error=Error(g(this.xhr)+" Request timed out.");this.complete()};a.prototype._xhrOnLoad=function(){var b=this.xhr,c=void 0!==b.status?b.status:200;if(200===c||204===c||0===c&&0<b.responseText.length)if(this.xhrType===a.XHR_RESPONSE_TYPE.TEXT)this.data=b.responseText;else if(this.xhrType===a.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(b.responseText),this.isJson=
!0}catch(d){this.error=Error("Error trying to parse loaded json:",d)}else if(this.xhrType===a.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser)this.data=(new DOMParser).parseFromString(b.responseText,"text/xml");else{var e=document.createElement("div");e.innerHTML=b.responseText;this.data=e}this.isXml=!0}catch(d){this.error=Error("Error trying to parse loaded xml:",d)}else this.data=b.response||b.responseText;else this.error=Error("["+b.status+"]"+b.statusText+":"+b.responseURL);this.complete()};
a.prototype._determineCrossOrigin=function(a,c){if(0===a.indexOf("data:"))return"";c=c||window.location;k||(k=document.createElement("a"));k.href=a;a=b.parse(k.href);var d=!a.port&&""===c.port||a.port===c.port;return a.hostname===c.hostname&&d&&a.protocol===c.protocol?"":"anonymous"};a.prototype._determineXhrType=function(){return a._xhrTypeMap[this._getExtension()]||a.XHR_RESPONSE_TYPE.TEXT};a.prototype._determineLoadType=function(){return a._loadTypeMap[this._getExtension()]||a.LOAD_TYPE.XHR};a.prototype._getExtension=
function(){var a=this.url;if(this.isDataUrl)var b=a.indexOf("/"),a=a.substring(b+1,a.indexOf(";",b));else b=a.indexOf("?"),-1!==b&&(a=a.substring(0,b)),a=a.substring(a.lastIndexOf(".")+1);return a};a.prototype._getMimeFromXhrType=function(b){switch(b){case a.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case a.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case a.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case a.XHR_RESPONSE_TYPE.JSON:return"application/json";default:return"text/plain"}};
a.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4};a.XHR_READY_STATE={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};a.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"};a._loadTypeMap={gif:a.LOAD_TYPE.IMAGE,png:a.LOAD_TYPE.IMAGE,bmp:a.LOAD_TYPE.IMAGE,jpg:a.LOAD_TYPE.IMAGE,jpeg:a.LOAD_TYPE.IMAGE,tif:a.LOAD_TYPE.IMAGE,tiff:a.LOAD_TYPE.IMAGE,webp:a.LOAD_TYPE.IMAGE,tga:a.LOAD_TYPE.IMAGE};a._xhrTypeMap={xhtml:a.XHR_RESPONSE_TYPE.DOCUMENT,html:a.XHR_RESPONSE_TYPE.DOCUMENT,
htm:a.XHR_RESPONSE_TYPE.DOCUMENT,xml:a.XHR_RESPONSE_TYPE.DOCUMENT,tmx:a.XHR_RESPONSE_TYPE.DOCUMENT,tsx:a.XHR_RESPONSE_TYPE.DOCUMENT,svg:a.XHR_RESPONSE_TYPE.DOCUMENT,gif:a.XHR_RESPONSE_TYPE.BLOB,png:a.XHR_RESPONSE_TYPE.BLOB,bmp:a.XHR_RESPONSE_TYPE.BLOB,jpg:a.XHR_RESPONSE_TYPE.BLOB,jpeg:a.XHR_RESPONSE_TYPE.BLOB,tif:a.XHR_RESPONSE_TYPE.BLOB,tiff:a.XHR_RESPONSE_TYPE.BLOB,webp:a.XHR_RESPONSE_TYPE.BLOB,tga:a.XHR_RESPONSE_TYPE.BLOB,json:a.XHR_RESPONSE_TYPE.JSON,text:a.XHR_RESPONSE_TYPE.TEXT,txt:a.XHR_RESPONSE_TYPE.TEXT};
a.setExtensionLoadType=function(b,d){c(a._loadTypeMap,b,d)};a.setExtensionXhrType=function(b,d){c(a._xhrTypeMap,b,d)}},{eventemitter3:129,url:8}],132:[function(e,h,l){h.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(a){for(var e="",c,f=Array(4),b=0,d;b<a.length;){c=Array(3);for(d=0;d<c.length;d++)c[d]=b<a.length?a.charCodeAt(b++)&255:0;f[0]=c[0]>>2;f[1]=(c[0]&3)<<4|c[1]>>4;f[2]=(c[1]&15)<<2|c[2]>>6;f[3]=c[2]&63;c=b-(a.length-1);switch(c){case 2:f[3]=
64;f[2]=64;break;case 1:f[3]=64}for(d=0;d<f.length;d++)e+=this._keyStr.charAt(f[d])}return e}}},{}],133:[function(e,h,l){h.exports=e("./Loader");h.exports.Resource=e("./Resource");h.exports.middleware={caching:{memory:e("./middlewares/caching/memory")},parsing:{blob:e("./middlewares/parsing/blob")}}},{"./Loader":130,"./Resource":131,"./middlewares/caching/memory":134,"./middlewares/parsing/blob":135}],134:[function(e,h,l){var a={};h.exports=function(){return function(e,c){if(a[e.url])e.data=a[e.url],
e.complete();else e.once("complete",function(){a[this.url]=this.data});c()}}},{}],135:[function(e,h,l){var a=e("../../Resource"),g=e("../../b64");window.URL=window.URL||window.webkitURL;h.exports=function(){return function(c,e){if(!c.data)return e();if(c.xhr&&c.xhrType===a.XHR_RESPONSE_TYPE.BLOB)if(!window.Blob||"string"===typeof c.data){var b=c.xhr.getResponseHeader("content-type");b&&0===b.indexOf("image")&&(c.data=new Image,c.data.src="data:"+b+";base64,"+g.encodeBinary(c.xhr.responseText),c.isImage=
!0,c.data.onload=function(){c.data.onload=null;e()})}else{if(0===c.data.type.indexOf("image")){var d=URL.createObjectURL(c.data);c.blob=c.data;c.data=new Image;c.data.src=d;c.isImage=!0;c.data.onload=function(){URL.revokeObjectURL(d);c.data.onload=null;e()}}}else e()}}},{"../../Resource":131,"../../b64":132}]},{},[108])(108)});PIXI.TransparencyHitArea=function(C){this.sprite=C};PIXI.TransparencyHitArea.create=function(C,e){var h;h=e?new PIXI.WebGLTransparencyHitArea(C):new PIXI.CanvasTransparencyHitArea(C);h.init();return h};PIXI.TransparencyHitArea.prototype.init=function(){};
PIXI.TransparencyHitArea.prototype.contains=function(C,e){if(0===Math.abs(this.sprite.width)||0===Math.abs(this.sprite.height))return!1;var h=this.sprite.texture.frame.width,l=this.sprite.texture.frame.height;C+=this.sprite.anchor.x*h;e+=this.sprite.anchor.y*l;return 0<=C&&C<=h&&0<=e&&e<=l?!this.isTextureTransparentAt(Math.round(C+this.sprite.texture.frame.x),Math.round(e+this.sprite.texture.frame.y)):!1};PIXI.TransparencyHitArea.prototype.getTexture=function(){return this.sprite.texture};
PIXI.CanvasTransparencyHitArea=function(C){PIXI.TransparencyHitArea.call(this,C);this.textureWidth=this.textureData=null};PIXI.CanvasTransparencyHitArea.prototype=Object.create(PIXI.TransparencyHitArea.prototype);PIXI.CanvasTransparencyHitArea.constructor=PIXI.CanvasTransparencyHitArea;PIXI.CanvasTransparencyHitArea.prototype.clone=function(){return new PIXI.CanvasTransparencyHitArea(this.sprite)};
PIXI.CanvasTransparencyHitArea.prototype.init=function(){PIXI.TransparencyHitArea.prototype.init.call(this);null===PIXI.CanvasTransparencyHitArea.cachedRenderer&&(PIXI.CanvasTransparencyHitArea.cachedRenderer=new PIXI.CanvasRenderer(1,1));this.initTextureData()};
PIXI.CanvasTransparencyHitArea.prototype.initTextureData=function(){if(!this.textureData){var C=this.getTexture(),e=C.baseTexture.source;this.textureWidth=e.width;e=e.src;void 0===PIXI.CanvasTransparencyHitArea.TextureData[e]&&(C=this.createTextureData(C),PIXI.CanvasTransparencyHitArea.TextureData[e]=C);this.textureData=PIXI.CanvasTransparencyHitArea.TextureData[e]}};
PIXI.CanvasTransparencyHitArea.prototype.createTextureData=function(C){C=C.baseTexture.source;var e=PIXI.CanvasTransparencyHitArea.cachedRenderer,h=e.view;h.width=C.width;h.height=C.height;e=e.view.getContext("2d");e.clearRect(0,0,C.width,C.height);e.drawImage(C,0,0);return e.getImageData(0,0,C.width,C.height).data};
PIXI.CanvasTransparencyHitArea.prototype.isTextureTransparentAt=function(C,e){if(!this.textureData)throw Error("CanvasTransparencyHitArea#init() not called.");return 1>this.textureData[4*(C+e*this.textureWidth)+3]};PIXI.CanvasTransparencyHitArea.TextureData=[];PIXI.CanvasTransparencyHitArea.cachedRenderer=null;PIXI.WebGLTransparencyHitArea=function(C){PIXI.TransparencyHitArea.call(this,C);this.textureWidth=this.textureData=null};PIXI.WebGLTransparencyHitArea.prototype=Object.create(PIXI.TransparencyHitArea.prototype);
PIXI.WebGLTransparencyHitArea.constructor=PIXI.WebGLTransparencyHitArea;PIXI.WebGLTransparencyHitArea.prototype.clone=function(){return new PIXI.WebGLTransparencyHitArea(this.sprite)};PIXI.WebGLTransparencyHitArea.prototype.init=function(){PIXI.TransparencyHitArea.prototype.init.call(this);null===PIXI.WebGLTransparencyHitArea.cachedRenderer&&(PIXI.WebGLTransparencyHitArea.cachedRenderer=new PIXI.WebGLRenderer(1,1));this.initTextureData()};
PIXI.WebGLTransparencyHitArea.prototype.initTextureData=function(){if(!this.textureData){var C=this.getTexture(),e=C.baseTexture.source;this.textureWidth=e.width;e=e.src;void 0===PIXI.WebGLTransparencyHitArea.TextureData[e]&&(C=this.createTextureData(C),PIXI.WebGLTransparencyHitArea.TextureData[e]=C);this.textureData=PIXI.WebGLTransparencyHitArea.TextureData[e]}};
PIXI.WebGLTransparencyHitArea.prototype.createTextureData=function(C){var e=C.baseTexture.source,h=PIXI.WebGLTransparencyHitArea.cachedRenderer.view;h.width=e.width;h.height=e.height;var h=PIXI.WebGLTransparencyHitArea.cachedRenderer.gl,l=h.createFramebuffer();h.bindFramebuffer(h.FRAMEBUFFER,l);void 0===C.baseTexture._glTextures[h.id]&&PIXI.WebGLTransparencyHitArea.cachedRenderer.updateTexture(C.baseTexture);h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,C.baseTexture._glTextures[h.id],
0);C=new Uint8Array(e.width*e.height*4);try{h.readPixels(0,0,e.width,e.height,h.RGBA,h.UNSIGNED_BYTE,C)}catch(a){console.log(error)}h.bindFramebuffer(h.FRAMEBUFFER,null);return C};PIXI.WebGLTransparencyHitArea.prototype.isTextureTransparentAt=function(C,e){if(!this.textureData)throw Error("WebGLTransparencyHitArea#init() not called.");return 255>this.textureData[4*(C+e*this.textureWidth)+3]};PIXI.WebGLTransparencyHitArea.TextureData=[];PIXI.WebGLTransparencyHitArea.cachedRenderer=null;function getCurvePoints(C,e,h,l){function a(a,c,e,f){for(var g=2,k;g<e;g+=2){var l=a[g],m=a[g+1],n=a[g+2],p=a[g+3],q=(n-a[g-2])*f,r=(p-a[g-1])*f,u=(a[g+4]-l)*f,C=(a[g+5]-m)*f,B=0,N,H,G,O;for(k=0;k<h;k++)N=c[B++],H=c[B++],G=c[B++],O=c[B++],d[b++]=N*l+H*n+G*q+O*u,d[b++]=N*m+H*p+G*r+O*C}}e="number"===typeof e?e:.5;h="number"===typeof h?h:25;var g,c=1,f=C.length,b=0,d=new Float32Array((f-2)*h+2+(l?2*h:0)),k=new Float32Array(4*(h+2)),m=4;g=C.slice(0);l?(g.unshift(C[f-1]),g.unshift(C[f-2]),g.push(C[0],
C[1])):(g.unshift(C[1]),g.unshift(C[0]),g.push(C[f-2],C[f-1]));for(k[0]=1;c<h;c++){var r=c/h,p=r*r,B=p*r,q=2*B,n=3*p;k[m++]=q-n+1;k[m++]=n-q;k[m++]=B-2*p+r;k[m++]=B-p}k[++m]=1;a(g,k,f,e);l&&(g=[],g.push(C[f-4],C[f-3],C[f-2],C[f-1],C[0],C[1],C[2],C[3]),a(g,k,4,e));f=l?0:C.length-2;d[b++]=C[f++];d[b]=C[f];return d}"undefined"!==typeof exports&&(exports.getCurvePoints=getCurvePoints);

//# sourceMappingURL=combined_mini.js.map